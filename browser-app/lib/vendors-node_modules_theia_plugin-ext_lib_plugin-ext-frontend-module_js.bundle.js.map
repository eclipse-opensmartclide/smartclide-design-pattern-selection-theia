{"version":3,"sources":["webpack://browser-app/../node_modules/@theia/core/shared/vscode-ws-jsonrpc.js","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/dialogs/style/modal-notification.css","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/style/comments.css","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/style/index.css","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/style/plugin-sidebar.css","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/style/tree.css","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/style/webview.css","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/style/status-bar.css","webpack://browser-app/../node_modules/@theia/callhierarchy/src/browser/index.ts","webpack://browser-app/../node_modules/@theia/monaco/src/browser/textmate/index.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/connection.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/disposable-util.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/editor-options.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/errors.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/index.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/object-identifier.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/paths-util.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/plugin-api-rpc-model.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/plugin-api-rpc.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/plugin-ext-api-contribution.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/plugin-message-reader.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/plugin-message-writer.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/plugin-protocol.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/rpc-protocol.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/semantic-tokens-dto.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/types.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/common/uri-components.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/hosted/browser/hosted-plugin-watcher.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/hosted/browser/hosted-plugin.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/authentication-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/callhierarchy/callhierarchy-type-converters.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/clipboard-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/command-registry-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/commands.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/comments/comment-glyph-widget.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/comments/comment-thread-widget.tsx","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/comments/comments-context-key-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/comments/comments-contribution.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/comments/comments-decorator.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/comments/comments-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/comments/comments-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/connection-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/custom-editor-contribution.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/custom-editor-opener.tsx","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/custom-editor-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/custom-editor-widget-factory.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/custom-editor-widget.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/custom-editors-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/glob.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/paths.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/plugin-custom-editor-registry.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/custom-editors/undo-redo-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/debug/debug-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/debug/plugin-debug-adapter-contribution.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/debug/plugin-debug-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/debug/plugin-debug-session-contribution-registry.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/debug/plugin-debug-session-factory.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/decorations/decorations-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/dialogs-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/dialogs/modal-notification.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/documents-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/editor/untitled-resource.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/editors-and-documents-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/env-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/file-system-main-impl.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/keybindings/keybindings-contribution-handler.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/label-service-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/languages-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/main-context.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/main-file-system-event-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/menus/menus-contribution-handler.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/message-registry-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/notification-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/output-channel-registry-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-contribution-handler.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-ext-deploy-command.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-ext-frontend-module.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-ext-widget.tsx","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-frontend-contribution.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-frontend-view-contribution.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-icon-theme-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-shared-style.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-storage.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/plugin-worker.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/preference-registry-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/quick-open-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/scm-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/secrets-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/selection-provider-command.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/status-bar-message-registry-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/tasks-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/terminal-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/text-editor-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/text-editor-model-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/text-editors-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/theming-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/timeline-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/view-column-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/view/plugin-tree-view-node-label-provider.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/view/plugin-view-registry.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/view/plugin-view-widget.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/view/tree-view-widget.tsx","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/view/tree-views-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/view/view-context-key-service.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/webview/webview-environment.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/webview/webview-frontend-security-warnings.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/webview/webview-preferences.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/webview/webview-resource-cache.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/webview/webview-theme-data-provider.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/webview/webview-widget-factory.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/webview/webview.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/webviews-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/window-state-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/workspace-main.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/common/plugin-paths-protocol.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/common/webview-protocol.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/plugin-ext-frontend-module.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/plugin/markdown-string.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/src/plugin/types-impl.ts","webpack://browser-app/../node_modules/@theia/plugin-ext/node_modules/@theia/file-search/src/common/file-search-service.ts","webpack://browser-app/../node_modules/@theia/task/src/browser/index.ts","webpack://browser-app/../node_modules/mime/Mime.js","webpack://browser-app/../node_modules/mime/index.js","webpack://browser-app/../node_modules/mime/types/other.js","webpack://browser-app/../node_modules/mime/types/standard.js","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/dialogs/style/modal-notification.css?e3f9","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/style/comments.css?67e6","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/browser/style/index.css?cb17","webpack://browser-app/../node_modules/@theia/plugin-ext/src/main/style/status-bar.css?47f1","webpack://browser-app/../node_modules/@theia/plugin-ext/lib/hosted/browser/worker/worker-main.js"],"names":["module"],"mappings":"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","file":"vendors-node_modules_theia_plugin-ext_lib_plugin-ext-frontend-module_js.bundle.js","sourcesContent":["module.exports = require('vscode-ws-jsonrpc');\n","exports = module.exports = require(\"../../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n.modal-Notification {\\n    pointer-events: all;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none;\\n    display: flex;\\n    flex-direction: row;\\n    -webkit-justify-content: center;\\n    justify-content: center;\\n    clear: both;\\n    box-sizing: border-box;\\n    position: relative;\\n    min-width: 200px;\\n    max-width: min(66vw, 800px);\\n    background-color: var(--theia-editorWidget-background);\\n    min-height: 35px;\\n    margin-bottom: 1px;\\n    color: var(--theia-editorWidget-foreground);\\n}\\n\\n.modal-Notification .icon {\\n    display: inline-block;\\n    font-size: 20px;\\n    padding: 5px 0;\\n    width: 35px;\\n    order: 1;\\n}\\n\\n.modal-Notification .icon .fa {\\n    line-height: inherit;\\n    vertical-align: middle;\\n    font-size: 120%;\\n    color: var(--theia-editorInfo-foreground);\\n}\\n\\n.modal-Notification .icon .error {\\n    color: var(--theia-editorError-foreground);\\n}\\n\\n.modal-Notification .icon .warning {\\n    color: var(--theia-editorWarning-foreground);\\n}\\n\\n.modal-Notification .text {\\n    order: 2;\\n    display: inline-block;\\n    max-height: min(66vh, 600px);\\n    -webkit-user-select: text;\\n    -moz-user-select: text;\\n    -ms-user-select: text;\\n    user-select: text;\\n    align-self: center;\\n    flex: 1 100%;\\n    padding: 10px;\\n    overflow: auto;\\n    white-space: pre-wrap;\\n}\\n\\n.modal-Notification .text > p {\\n    margin: 0;\\n    font-size: var(--theia-ui-font-size1);\\n    font-family: var(--theia-ui-font-family);\\n    vertical-align: middle;\\n}\\n\\n.modal-Notification .buttons {\\n    display: flex;\\n    flex-direction: row;\\n    order: 3;\\n    white-space: nowrap;\\n    align-self: flex-end;\\n    height: 40px;\\n}\\n\\n.modal-Notification .buttons > button {\\n    background-color: var(--theia-button-background);\\n    color: var(--theia-button-foreground);\\n    border: none;\\n    border-radius: 0;\\n    text-align: center;\\n    text-decoration: none;\\n    display: inline-block;\\n    padding: 0 10px;\\n    margin: 0;\\n    font-size: var(--theia-ui-font-size1);\\n    outline: none;\\n    cursor: pointer;\\n}\\n\\n.modal-Notification .buttons > button:hover {\\n    background-color: var(--theia-button-hoverBackground);\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n/* some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/contrib/comments/browser/media/review.css */\\n\\n.comment-range-glyph {\\n    margin-left: 5px;\\n    cursor: pointer;\\n}\\n.comment-range-glyph:before {\\n    position: absolute;\\n    content: '';\\n    height: 100%;\\n    width: 0;\\n    left: -2px;\\n    transition: width 80ms linear, left 80ms linear;\\n}\\n\\n.monaco-editor .margin-view-overlays > div:hover > .comment-range-glyph.comment-diff-added:before,\\n.monaco-editor .comment-range-glyph.comment-thread:before {\\n    position: absolute;\\n    height: 100%;\\n    width: 9px;\\n    left: -6px;\\n    z-index: 10;\\n    color: black;\\n    text-align: center;\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    justify-content: center;\\n}\\n\\n.monaco-editor .comment-diff-added {\\n    border-left: 3px solid var(--theia-editorGutter-commentRangeForeground);\\n    transition: opacity 0.5s;\\n}\\n.monaco-editor .comment-diff-added:before {\\n    background: var(--theia-editorGutter-commentRangeForeground);\\n}\\n\\n.monaco-editor .margin-view-overlays > div:hover > .comment-range-glyph.comment-diff-added:before {\\n    content: \\\"+\\\";\\n}\\n\\n.monaco-editor .comment-range-glyph.comment-thread {\\n    z-index: 20;\\n    border-left: 3px solid #000;\\n}\\n\\n.monaco-editor .comment-thread:before {\\n    background: var(--theia-editorGutter-commentRangeForeground);\\n}\\n\\n.monaco-editor .comment-range-glyph.comment-thread:before {\\n    content: \\\"\\\\25C6\\\";\\n    font-size: 10px;\\n    line-height: 100%;\\n    z-index: 20;\\n}\\n\\n.monaco-editor .review-widget .body {\\n    overflow: hidden;\\n}\\n\\n.monaco-editor .review-widget .head {\\n    box-sizing: border-box;\\n    display: flex;\\n    height: 100%;\\n}\\n\\n.monaco-editor .review-widget .head .review-title {\\n    display: inline-block;\\n    font-size: 13px;\\n    margin-left: 20px;\\n    cursor: default;\\n}\\n\\n.monaco-editor .review-widget .head .review-actions {\\n    flex: 1;\\n    text-align: right;\\n    padding-right: 2px;\\n}\\n\\n.monaco-editor .review-widget .head .review-actions > .monaco-action-bar {\\n    display: inline-block;\\n}\\n\\n.monaco-editor .review-widget .head .review-actions > .monaco-action-bar,\\n.monaco-editor .review-widget .head .review-actions > .monaco-action-bar > .actions-container {\\n    height: 100%;\\n}\\n\\n.monaco-editor .review-widget .action-item {\\n    min-width: 18px;\\n    min-height: 20px;\\n    margin-left: 4px;\\n}\\n\\n.monaco-editor .review-widget .head .review-actions > .monaco-action-bar .action-label {\\n    width: 16px;\\n    height: 100%;\\n    margin: 0;\\n    color: var(--theia-editorWidget-foreground);\\n    line-height: inherit;\\n    background-repeat: no-repeat;\\n    background-position: center center;\\n}\\n\\n.monaco-editor .review-widget>.body {\\n    border-top: 1px solid;\\n    position: relative;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form {\\n    margin: 8px 20px;\\n}\\n\\n.monaco-editor .review-widget .body .review-comment {\\n    padding: 8px 16px 8px 20px;\\n    display: flex;\\n}\\n\\n.monaco-editor .review-widget .body .review-comment .avatar-container {\\n    margin-top: 4px !important;\\n}\\n\\n.monaco-editor .review-widget .body .review-comment .avatar-container img.avatar {\\n    height: 28px;\\n    width: 28px;\\n    display: inline-block;\\n    overflow: hidden;\\n    line-height: 1;\\n    vertical-align: middle;\\n    border-radius: 3px;\\n    border-style: none;\\n}\\n\\n.monaco-editor .review-widget .body .review-comment .review-comment-contents {\\n    padding-left: 20px;\\n    user-select: text;\\n    -webkit-user-select: text;\\n    width: 100%;\\n    overflow: hidden;\\n}\\n\\n.monaco-editor .review-widget .body .review-comment .review-comment-contents .author {\\n    line-height: var(--theia-content-line-height);\\n}\\n\\n.monaco-editor .review-widget .body .review-comment .review-comment-contents .isPending {\\n    margin: 0 5px 0 5px;\\n    padding: 0 2px 0 2px;\\n    font-style: italic;\\n}\\n\\n.monaco-editor .review-widget .body .review-comment .review-comment-contents .comment-body {\\n    padding-top: 4px;\\n}\\n\\n.monaco-editor .review-widget .body .review-comment .comment-title {\\n    display: flex;\\n    width: 100%;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form .theia-comments-input-message-container {\\n    display: none;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .theia-comments-input-message-container,\\n.edit-textarea .theia-comments-input-message-container {\\n    display: flex;\\n    flex-direction: column;\\n    margin: 0px 0px 7px 0px;\\n    max-height: 400px;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .theia-comments-input-message-container textarea,\\n.edit-textarea .theia-comments-input-message-container textarea {\\n    line-height: var(--theia-content-line-height);\\n    background: var(--theia-editor-background);\\n    resize: none;\\n    height: 90px;\\n    box-sizing: border-box;\\n    min-height: 32px;\\n    padding: 4px;\\n    border: none;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .theia-comments-input-message-container textarea:placeholder-shown,\\n.edit-textarea .theia-comments-input-message-container textarea:placeholder-shown {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .theia-comments-input-message-container textarea:not(:focus),\\n.edit-textarea .theia-comments-input-message-container textarea:not(:focus) {\\n    border: var(--theia-border-width) solid var(--theia-editor-background);\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .theia-comments-input-message-container textarea:focus,\\n.edit-textarea .theia-comments-input-message-container textarea:focus {\\n    border: var(--theia-border-width) solid var(--theia-focusBorder);\\n}\\n\\n.theia-comments-input-message {\\n    width: 100%;\\n}\\n\\n.monaco-editor .review-widget .body .comment-body p,\\n.monaco-editor .review-widget .body .comment-body ul {\\n    margin: 8px 0;\\n}\\n\\n.monaco-editor .review-widget .body .comment-body p:first-child,\\n.monaco-editor .review-widget .body .comment-body ul:first-child {\\n    margin-top: 0;\\n}\\n\\n.monaco-editor .review-widget .body .comment-body p:last-child,\\n.monaco-editor .review-widget .body.comment-body ul:last-child {\\n    margin-bottom: 0;\\n}\\n\\n.monaco-editor .review-widget .body .comment-body ul {\\n    padding-left: 20px;\\n}\\n\\n.monaco-editor .review-widget .body .comment-body li > p {\\n    margin-bottom: 0;\\n}\\n\\n.monaco-editor .review-widget .body .comment-body li > ul {\\n    margin-top: 0;\\n}\\n\\n.monaco-editor .review-widget .body .comment-body code {\\n    border-radius: 3px;\\n    padding: 0 0.4em;\\n}\\n\\n.monaco-editor .review-widget .body .comment-body span {\\n    white-space: pre;\\n}\\n\\n.monaco-editor .review-widget .body .comment-body img {\\n    max-width: 100%;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form .form-actions {\\n    display: none;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .form-actions {\\n    display: block;\\n    box-sizing: content-box;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .review-thread-reply-button {\\n    display: none;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form .review-thread-reply-button {\\n    text-align: left;\\n    display: block;\\n    width: 100%;\\n    resize: vertical;\\n    background: var(--theia-editor-background);\\n    color: var(--theia-input-foreground);\\n    cursor: text;\\n    font-size: var(--theia-ui-font-size1);\\n    border-radius: 0;\\n    box-sizing: border-box;\\n    padding: 6px 12px;\\n    font-weight: 600;\\n    line-height: 20px;\\n    white-space: nowrap;\\n    border: 0px;\\n    outline: 1px solid transparent;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form .review-thread-reply-button:focus {\\n    outline-style: solid;\\n    outline-width: 1px;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .form-actions,\\n.monaco-editor .review-widget .body .edit-container .form-actions {\\n    overflow: auto;\\n    padding: 10px 0;\\n}\\n\\n.monaco-editor .review-widget .body .edit-container .form-actions {\\n    display: flex;\\n    justify-content: flex-end;\\n}\\n\\n.monaco-editor .review-widget .body .edit-textarea {\\n    margin: 5px 0 10px 0;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .comments-text-button,\\n.monaco-editor .review-widget .body .edit-container .comments-text-button {\\n    width: auto;\\n    padding: 4px 10px;\\n    margin-left: 5px;\\n    margin-bottom: 5px;\\n}\\n\\n.monaco-editor .review-widget .body .comment-form.expand .comments-text-button {\\n    float: right;\\n}\\n\\n.theia-comments-inline-actions-container {\\n    display: flex;\\n    justify-content: flex-end;\\n    margin-left: auto;\\n    min-height: 16px;\\n}\\n\\n.theia-comments-inline-actions {\\n    display: flex;\\n    margin: 0 3px;\\n}\\n\\n.theia-comments-inline-actions a {\\n    color: var(--theia-icon-foreground);\\n}\\n\\n.theia-comments-inline-action {\\n    padding: 0px 3px;\\n    font-size: var(--theia-ui-font-size1);\\n    margin: 0 2px;\\n    cursor: pointer;\\n    display: flex;\\n    align-items: center;\\n}\\n\", \"\"]);\n\n// exports\n","var escape = require(\"../../../../../../css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\nexports.i(require(\"-!../../../../../../css-loader/index.js!./plugin-sidebar.css\"), \"\");\nexports.i(require(\"-!../../../../../../css-loader/index.js!./webview.css\"), \"\");\nexports.i(require(\"-!../../../../../../css-loader/index.js!./tree.css\"), \"\");\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.spinnerContainer {\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n}\\n\\n.flexcontainer {\\n    display: flex;\\n}\\n\\n.row {\\n    width: 100%;\\n}\\n\\n.column {\\n    flex-direction: column;\\n}\\n\\n.theia-plugin-view-container {\\n    -webkit-mask: url('');\\n    mask: url('');\\n}\\n\\n.theia-plugin-test-tab-icon {\\n    -webkit-mask: url(\" + escape(require(\"./test.svg\")) + \");\\n    mask: url(\" + escape(require(\"./test.svg\")) + \");\\n}\\n\\n.theia-plugin-file-icon,\\n.theia-plugin-file-icon::before,\\n.theia-plugin-folder-icon,\\n.theia-plugin-folder-icon::before,\\n.theia-plugin-folder-expanded-icon,\\n.theia-plugin-folder-expanded-icon::before,\\n.theia-plugin-root-folder-icon,\\n.theia-plugin-root-folder-icon::before,\\n.theia-plugin-root-folder-expanded-icon,\\n.theia-plugin-root-folder-expanded-icon::before {\\n    padding-right: var(--theia-ui-padding);\\n\\twidth: var(--theia-icon-size);\\n\\theight: var(--theia-content-line-height);\\n\\tline-height: inherit !important;\\n\\tdisplay: inline-block;\\n}\\n\\n.p-TabBar.theia-app-sides .theia-plugin-file-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-file-icon::before,\\n.p-TabBar.theia-app-sides .theia-plugin-folder-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-folder-icon::before,\\n.p-TabBar.theia-app-sides .theia-plugin-folder-expanded-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-folder-expanded-icon::before,\\n.p-TabBar.theia-app-sides .theia-plugin-root-folder-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-root-folder-icon::before,\\n.p-TabBar.theia-app-sides .theia-plugin-root-folder-expanded-icon,\\n.p-TabBar.theia-app-sides .theia-plugin-root-folder-expanded-icon::before {\\n    padding: 0px !important;\\n    width: var(--theia-private-sidebar-icon-size) !important;\\n    height: var(--theia-private-sidebar-icon-size) !important;\\n    background-size: var(--theia-private-sidebar-icon-size) !important;\\n    font-size: var(--theia-private-sidebar-icon-size) !important;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.theia-plugins {\\n    min-width: 250px !important;\\n    display: flex;\\n    flex-direction: column;\\n}\\n\\n#pluginListContainer {\\n    width: 100%;\\n    box-sizing: border-box;\\n    overflow-y: auto;\\n    flex-grow: 1;\\n}\\n\\n.theia-plugins .pluginHeaderContainer {\\n    padding: 5px 15px;\\n    font-size: var(--theia-ui-font-size0);\\n    border-bottom: 1px solid;\\n}\\n\\n.theia-side-panel .theia-plugins .pluginHeaderContainer {\\n    padding-left: 20px;\\n}\\n\\n.theia-plugins .pluginHeaderContainer:hover {\\n    background: var(--theia-list-hoverBackground);\\n}\\n\\n.theia-plugins .pluginHeaderContainer .row {\\n    margin: 3px 0;\\n}\\n\\n.theia-plugins .pluginName {\\n    flex: 1;\\n    margin-right: 5px;\\n    font-size: var(--theia-ui-font-size1);\\n    font-weight: 400;\\n}\\n\\n.theia-plugins .pluginVersion {\\n    flex: 1;\\n    text-align: left;\\n    font-size: var(--theia-ui-font-size0)\\n}\\n\\n.theia-plugins .pluginDescription {\\n    flex: 1;\\n}\\n\\n.theia-plugins .pluginPublisher {\\n    font-size: var(--theia-ui-font-size0);\\n    flex: 5;\\n    align-items: center;\\n}\\n\\n.plugins-tab-icon::before {\\n    content: \\\"\\\\F0FE\\\"\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.theia-tree-view-icon {\\n    padding-right: var(--theia-ui-padding);\\n    -webkit-font-smoothing: antialiased;\\n    flex-shrink: 0;\\n}\\n\\n.theia-tree-view-inline-action {\\n    padding: 2px;\\n}\\n\\n.theia-tree-view-description {\\n    color: var(--theia-descriptionForeground);\\n    font-size: var(--theia-ui-font-size0);\\n    margin-left: var(--theia-ui-padding);\\n}\\n\\n.theia-tree-view .theia-TreeNodeSegment {\\n    display: flex;\\n}\\n\\n.theia-tree-view .theia-TreeNodeContent {\\n    align-items: center;\\n    height: 100%;\\n}\\n\\n.theia-tree-view  .theia-TreeContainer .theia-TreeViewInfo {\\n    margin-top: 7px;\\n    margin-bottom: 10px;\\n    margin-left: 17px;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.theia-webview.p-mod-hidden {\\n    visibility: hidden;\\n    display: flex !important;\\n}\\n\\n.theia-webview {\\n    display: flex;\\n    flex-direction: column;\\n    height: 100%;\\n}\\n\\n.theia-webview iframe {\\n    flex-grow: 1;\\n    border: none; margin: 0; padding: 0;\\n}\\n\\n.theia-webview-icon {\\n    background: none !important;\\n    min-height: 20px;\\n}\\n\\n.theia-webview-icon::before {\\n    background-size: 13px;\\n    background-repeat: no-repeat;\\n    vertical-align: middle;\\n    display: inline-block;\\n    text-align: center;\\n    height: 15px;\\n    width: 15px;\\n    content: \\\"\\\";\\n}\\n\\n.p-TabBar.theia-app-sides .theia-webview-icon::before {\\n    width: var(--theia-private-sidebar-icon-size);\\n    height: var(--theia-private-sidebar-icon-size);\\n    background-size: contain;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n#theia-statusBar .development-host {\\n    background-color: var(--theia-successBackground);\\n}\\n\\n#theia-statusBar .development-host-offline {\\n    background-color: var(--theia-errorBackground);\\n}\\n\\n#theia-statusBar .hosted-plugin {\\n    background-color: var(--theia-inputValidation-infoBackground);\\n}\\n\\n#theia-statusBar .hosted-plugin:hover {\\n    background-color: var(--theia-editorInfo-foreground);\\n}\\n\\n#theia-statusBar .hosted-plugin-failed {\\n    background-color: var(--theia-errorBackground);\\n}\\n\", \"\"]);\n\n// exports\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './callhierarchy';\nexport * from './callhierarchy-contribution';\nexport * from './callhierarchy-frontend-module';\nexport * from './callhierarchy-service';\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './textmate-registry';\nexport * from './textmate-contribution';\nexport * from './monaco-textmate-service';\nexport * from './monaco-textmate-frontend-bindings';\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable } from './disposable-util';\nimport { PluginMessageReader } from './plugin-message-reader';\nimport { PluginMessageWriter } from './plugin-message-writer';\nimport { MessageReader, MessageWriter, Message } from '@theia/core/shared/vscode-ws-jsonrpc';\nimport { IWebSocket } from '@theia/core/shared/vscode-ws-jsonrpc';\n\n/**\n * The interface for describing the connection between plugins and main side.\n */\nexport interface Connection extends Disposable {\n    readonly reader: MessageReader;\n    readonly writer: MessageWriter;\n    /**\n     * Allows to forward messages to another connection.\n     *\n     * @param to the connection to forward messages\n     * @param map the function in which the message can be changed before forwarding\n     */\n    forward(to: Connection, map?: (message: Message) => Message): void;\n}\n\n/**\n * The container for message reader and writer which can be used to create connection between plugins and main side.\n */\nexport class PluginConnection implements Connection {\n    constructor(\n        readonly reader: PluginMessageReader,\n        readonly writer: PluginMessageWriter,\n        readonly dispose: () => void) {\n    }\n\n    forward(to: Connection, map: (message: Message) => Message = message => message): void {\n        this.reader.listen(input => {\n            const output = map(input);\n            to.writer.write(output);\n        });\n    }\n}\n\n/**\n * [IWebSocket](#IWebSocket) implementation over RPC.\n */\nexport class PluginWebSocketChannel implements IWebSocket {\n    constructor(protected readonly connection: PluginConnection) { }\n\n    send(content: string): void {\n        this.connection.writer.write(content);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onMessage(cb: (data: any) => void): void {\n        this.connection.reader.listen(cb);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onError(cb: (reason: any) => void): void {\n        this.connection.reader.onError(e => cb(e));\n    }\n\n    onClose(cb: (code: number, reason: string) => void): void {\n        this.connection.reader.onClose(() => cb(-1, 'closed'));\n    }\n\n    dispose(): void {\n        this.connection.dispose();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface Disposable {\n    dispose(): void;\n}\n\nexport function dispose<T extends Disposable>(disposable: T): T | undefined;\nexport function dispose<T extends Disposable>(...disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(first: T | T[], ...rest: T[]): T | T[] | undefined {\n    if (Array.isArray(first)) {\n        first.forEach(d => d && d.dispose());\n        return [];\n    } else if (rest.length === 0) {\n        if (first) {\n            first.dispose();\n            return first;\n        }\n        return undefined;\n    } else {\n        dispose(first);\n        dispose(rest);\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// enum copied from monaco.d.ts\n/**\n * The style in which the editor's cursor should be rendered.\n */\nexport enum TextEditorCursorStyle {\n    /**\n     * As a vertical line\n     */\n    Line = 1,\n\n    /**\n     * As a block\n     */\n    Block = 2,\n\n    /**\n     * As a horizontal line, under character\n     */\n    Underline = 3,\n\n    /**\n     * As a thin vertical line\n     */\n    LineThin = 4,\n\n    /**\n     * As an outlined block, on top of a character\n     */\n    BlockOutline = 5,\n\n    /**\n     * As a thin horizontal line, under a character\n     */\n    UnderlineThin = 6\n}\n\nexport function cursorStyleToString(cursorStyle: TextEditorCursorStyle): 'line' | 'block' | 'underline' | 'line-thin' | 'block-outline' | 'underline-thin' {\n    switch (cursorStyle) {\n        case TextEditorCursorStyle.Line:\n            return 'line';\n        case TextEditorCursorStyle.Block:\n            return 'block';\n        case TextEditorCursorStyle.Underline:\n            return 'underline';\n        case TextEditorCursorStyle.LineThin:\n            return 'line-thin';\n        case TextEditorCursorStyle.BlockOutline:\n            return 'block-outline';\n        case TextEditorCursorStyle.UnderlineThin:\n            return 'underline-thin';\n        default:\n            throw new Error('cursorStyleToString: Unknown cursorStyle');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function illegalArgument(message?: string): Error {\n    if (message) {\n        return new Error(`Illegal argument: ${message}`);\n    } else {\n        return new Error('Illegal argument');\n    }\n}\n\nexport function readonly(name?: string): Error {\n    if (name) {\n        return new Error(`readonly property '${name} cannot be changed'`);\n    } else {\n        return new Error('readonly property cannot be changed');\n    }\n}\n\nexport function disposed(what: string): Error {\n    const result = new Error(`${what} has been disposed`);\n    result.name = 'DISPOSED';\n    return result;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Here we expose types from @theia/plugin, so it becomes a direct dependency\nexport * from './plugin-protocol';\nexport * from './plugin-api-rpc';\nexport * from './plugin-ext-api-contribution';\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface ObjectIdentifier {\n    $ident: number;\n}\n\nexport namespace ObjectIdentifier {\n    export const name = '$ident';\n\n    export function mixin<T>(obj: T, id: number): T & ObjectIdentifier {\n        Object.defineProperty(obj, name, { value: id, enumerable: true });\n        return <T & ObjectIdentifier>obj;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function of(obj: any): number {\n        return obj[name];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// file copied from https://github.com/wjordan/browser-path/blob/master/src/node_path.ts\n// Original license:\n/*\n====\n\nCopyright (c) 2015 John Vilk and other contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n====\n*/\n\nimport { sep } from '@theia/callhierarchy/lib/common/paths';\n\nconst replaceRegex = new RegExp('//+', 'g');\n\nexport function resolve(...paths: string[]): string {\n    let processed: string[] = [];\n    for (const p of paths) {\n        if (typeof p !== 'string') {\n            throw new TypeError('Invalid argument type to path.join: ' + (typeof p));\n        } else if (p !== '') {\n            if (p.charAt(0) === sep) {\n                processed = [];\n            }\n            processed.push(p);\n        }\n    }\n\n    const resolved = normalize(processed.join(sep));\n    if (resolved.length > 1 && resolved.charAt(resolved.length - 1) === sep) {\n        return resolved.substr(0, resolved.length - 1);\n    }\n\n    return resolved;\n}\n\nexport function relative(from: string, to: string): string {\n    let i: number;\n\n    from = resolve(from);\n    to = resolve(to);\n    const fromSegments = from.split(sep);\n    const toSegments = to.split(sep);\n\n    toSegments.shift();\n    fromSegments.shift();\n\n    let upCount = 0;\n    let downSegments: string[] = [];\n\n    for (i = 0; i < fromSegments.length; i++) {\n        const seg = fromSegments[i];\n        if (seg === toSegments[i]) {\n            continue;\n        }\n\n        upCount = fromSegments.length - i;\n        break;\n    }\n\n    downSegments = toSegments.slice(i);\n\n    if (fromSegments.length === 1 && fromSegments[0] === '') {\n        upCount = 0;\n    }\n\n    if (upCount > fromSegments.length) {\n        upCount = fromSegments.length;\n    }\n\n    let rv = '';\n    for (i = 0; i < upCount; i++) {\n        rv += '../';\n    }\n    rv += downSegments.join(sep);\n\n    if (rv.length > 1 && rv.charAt(rv.length - 1) === sep) {\n        rv = rv.substr(0, rv.length - 1);\n    }\n    return rv;\n}\nexport function normalize(p: string): string {\n\n    if (p === '') {\n        p = '.';\n    }\n\n    const absolute = p.charAt(0) === sep;\n\n    p = removeDuplicateSeparators(p);\n\n    const components = p.split(sep);\n    const goodComponents: string[] = [];\n    for (const c of components) {\n        if (c === '.') {\n            continue;\n        } else if (c === '..' && (absolute || (!absolute && goodComponents.length > 0 && goodComponents[0] !== '..'))) {\n            goodComponents.pop();\n        } else {\n            goodComponents.push(c);\n        }\n    }\n\n    if (!absolute && goodComponents.length < 2) {\n        switch (goodComponents.length) {\n            case 1:\n                if (goodComponents[0] === '') {\n                    goodComponents.unshift('.');\n                }\n                break;\n            default:\n                goodComponents.push('.');\n        }\n    }\n    p = goodComponents.join(sep);\n    if (absolute && p.charAt(0) !== sep) {\n        p = sep + p;\n    }\n    return p;\n}\n\nfunction removeDuplicateSeparators(p: string): string {\n    p = p.replace(replaceRegex, sep);\n    return p;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { UriComponents } from './uri-components';\nimport { CompletionItemTag } from '../plugin/types-impl';\nimport { Event as TheiaEvent } from '@theia/core/lib/common/event';\nimport { URI } from '@theia/core/shared/vscode-uri';\n\n// Should contains internal Plugin API types\n\n/**\n * Represents options to configure the behavior of showing a document in an editor.\n */\nexport interface TextDocumentShowOptions {\n    /**\n     * An optional selection to apply for the document in the editor.\n     */\n    selection?: Range;\n\n    /**\n     * An optional flag that when `true` will stop the editor from taking focus.\n     */\n    preserveFocus?: boolean;\n\n    /**\n     * An optional flag that controls if an editor-tab will be replaced\n     * with the next editor or if it will be kept.\n     */\n    preview?: boolean;\n\n    /**\n     * Denotes a location of an editor in the window. Editors can be arranged in a grid\n     * and each column represents one editor location in that grid by counting the editors\n     * in order of their appearance.\n     */\n    viewColumn?: theia.ViewColumn;\n}\n\nexport interface Range {\n    /**\n     * Line number on which the range starts (starts at 1).\n     */\n    readonly startLineNumber: number;\n    /**\n     * Column on which the range starts in line `startLineNumber` (starts at 1).\n     */\n    readonly startColumn: number;\n    /**\n     * Line number on which the range ends.\n     */\n    readonly endLineNumber: number;\n    /**\n     * Column on which the range ends in line `endLineNumber`.\n     */\n    readonly endColumn: number;\n}\n\nexport interface MarkdownString {\n    value: string;\n    isTrusted?: boolean;\n    uris?: {\n        [href: string]: UriComponents;\n    };\n}\n\nexport interface SerializedDocumentFilter {\n    $serialized: true;\n    language?: string;\n    scheme?: string;\n    pattern?: theia.GlobPattern;\n}\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport interface CompletionContext {\n    triggerKind: CompletionTriggerKind;\n    triggerCharacter?: string;\n}\n\nexport enum CompletionItemInsertTextRule {\n    KeepWhitespace = 1,\n    InsertAsSnippet = 4\n}\n\nexport interface Completion {\n    label: string;\n    kind: CompletionItemKind;\n    detail?: string;\n    documentation?: string | MarkdownString;\n    sortText?: string;\n    filterText?: string;\n    preselect?: boolean;\n    insertText: string;\n    insertTextRules?: CompletionItemInsertTextRule;\n    range?: Range | {\n        insert: Range;\n        replace: Range;\n    };\n    commitCharacters?: string[];\n    additionalTextEdits?: SingleEditOperation[];\n    command?: Command;\n    tags?: CompletionItemTag[];\n    /** @deprecated use tags instead. */\n    deprecated?: boolean;\n}\n\nexport interface SingleEditOperation {\n    range: Range;\n    text: string | null;\n    /**\n     * This indicates that this operation has \"insert\" semantics.\n     * i.e. forceMoveMarkers = true => if `range` is collapsed, all markers at the position will be moved.\n     */\n    forceMoveMarkers?: boolean;\n}\n\nexport interface Command {\n    id: string;\n    title: string;\n    tooltip?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    arguments?: any[];\n}\n\nexport enum CompletionItemKind {\n    Method = 0,\n    Function = 1,\n    Constructor = 2,\n    Field = 3,\n    Variable = 4,\n    Class = 5,\n    Struct = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Event = 10,\n    Operator = 11,\n    Unit = 12,\n    Value = 13,\n    Constant = 14,\n    Enum = 15,\n    EnumMember = 16,\n    Keyword = 17,\n    Text = 18,\n    Color = 19,\n    File = 20,\n    Reference = 21,\n    Customcolor = 22,\n    Folder = 23,\n    TypeParameter = 24,\n    Snippet = 25\n}\n\nexport class IdObject {\n    id?: number;\n}\nexport interface CompletionDto extends Completion {\n    id: number;\n    parentId: number;\n}\n\nexport interface CompletionResultDto extends IdObject {\n    id: number;\n    defaultRange: {\n        insert: Range,\n        replace: Range\n    }\n    completions: CompletionDto[];\n    incomplete?: boolean;\n}\n\nexport interface MarkerData {\n    code?: string;\n    severity: MarkerSeverity;\n    message: string;\n    source?: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n    relatedInformation?: RelatedInformation[];\n    tags?: MarkerTag[];\n}\n\nexport interface RelatedInformation {\n    resource: string;\n    message: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n}\n\nexport interface ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | MarkdownString;\n}\n\nexport interface SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n    parameters: ParameterInformation[];\n}\n\nexport interface SignatureHelp extends IdObject {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n}\n\nexport interface SignatureHelpContext {\n    triggerKind: theia.SignatureHelpTriggerKind;\n    triggerCharacter?: string;\n    isRetrigger: boolean;\n    activeSignatureHelp?: SignatureHelp;\n}\n\nexport interface Hover {\n    contents: MarkdownString[];\n    range?: Range;\n}\n\nexport interface HoverProvider {\n    provideHover(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Hover | undefined | Thenable<Hover | undefined>;\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\nexport interface DocumentHighlight {\n    range: Range;\n    kind?: DocumentHighlightKind;\n}\n\nexport interface DocumentHighlightProvider {\n    provideDocumentHighlights(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): DocumentHighlight[] | undefined;\n}\n\nexport interface FormattingOptions {\n    tabSize: number;\n    insertSpaces: boolean;\n}\n\nexport interface TextEdit {\n    range: Range;\n    text: string;\n    eol?: monaco.editor.EndOfLineSequence;\n}\n\nexport interface Location {\n    uri: UriComponents;\n    range: Range;\n}\n\nexport type Definition = Location | Location[] | LocationLink[];\n\nexport interface LocationLink {\n    uri: UriComponents;\n    range: Range;\n    originSelectionRange?: Range;\n    targetSelectionRange?: Range;\n}\n\nexport interface DefinitionProvider {\n    provideDefinition(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | undefined;\n}\n\nexport interface DeclarationProvider {\n    provideDeclaration(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | undefined;\n}\n\n/**\n * Value-object that contains additional information when\n * requesting references.\n */\nexport interface ReferenceContext {\n\n    /**\n     * Include the declaration of the current symbol.\n     */\n    includeDeclaration: boolean;\n}\n\nexport interface DocumentLink {\n    range: Range;\n    url?: UriComponents | string;\n    tooltip?: string;\n}\n\nexport interface DocumentLinkProvider {\n    provideLinks(model: monaco.editor.ITextModel, token: monaco.CancellationToken): DocumentLink[] | undefined | PromiseLike<DocumentLink[] | undefined>;\n    resolveLink?: (link: DocumentLink, token: monaco.CancellationToken) => DocumentLink | PromiseLike<DocumentLink[]>;\n}\n\nexport interface CodeLensSymbol {\n    range: Range;\n    command?: Command;\n}\n\nexport interface CodeAction {\n    title: string;\n    command?: Command;\n    edit?: WorkspaceEdit;\n    diagnostics?: MarkerData[];\n    kind?: string;\n}\n\nexport interface CodeActionContext {\n    only?: string;\n}\n\nexport interface CodeActionProvider {\n    provideCodeActions(\n        model: monaco.editor.ITextModel,\n        range: Range | Selection,\n        context: monaco.languages.CodeActionContext,\n        token: monaco.CancellationToken\n    ): CodeAction[] | PromiseLike<CodeAction[]>;\n\n    providedCodeActionKinds?: string[];\n}\n\n// copied from https://github.com/microsoft/vscode/blob/b165e20587dd0797f37251515bc9e4dbe513ede8/src/vs/editor/common/modes.ts\nexport interface WorkspaceEditMetadata {\n    needsConfirmation: boolean;\n    label: string;\n    description?: string;\n    iconPath?: {\n        id: string;\n    } | {\n        light: UriComponents;\n        dark: UriComponents;\n    };\n}\n\nexport interface WorkspaceFileEdit {\n    oldUri?: UriComponents;\n    newUri?: UriComponents;\n    options?: { overwrite?: boolean, ignoreIfNotExists?: boolean, ignoreIfExists?: boolean, recursive?: boolean };\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport interface WorkspaceTextEdit {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edit: TextEdit;\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport interface WorkspaceEdit {\n    edits: Array<WorkspaceTextEdit | WorkspaceFileEdit>;\n}\n\nexport enum SymbolKind {\n    File = 0,\n    Module = 1,\n    Namespace = 2,\n    Package = 3,\n    Class = 4,\n    Method = 5,\n    Property = 6,\n    Field = 7,\n    Constructor = 8,\n    Enum = 9,\n    Interface = 10,\n    Function = 11,\n    Variable = 12,\n    Constant = 13,\n    String = 14,\n    Number = 15,\n    Boolean = 16,\n    Array = 17,\n    Object = 18,\n    Key = 19,\n    Null = 20,\n    EnumMember = 21,\n    Struct = 22,\n    Event = 23,\n    Operator = 24,\n    TypeParameter = 25\n}\n\nexport enum SymbolTag {\n    Deprecated = 1\n}\n\nexport interface DocumentSymbol {\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    tags: ReadonlyArray<SymbolTag>;\n    containerName?: string;\n    range: Range;\n    selectionRange: Range;\n    children?: DocumentSymbol[];\n}\n\nexport interface WorkspaceRootsChangeEvent {\n    roots: string[];\n}\n\nexport interface WorkspaceFolder {\n    uri: UriComponents;\n    name: string;\n    index: number;\n}\n\nexport interface Breakpoint {\n    readonly id: string;\n    readonly enabled: boolean;\n    readonly condition?: string;\n    readonly hitCondition?: string;\n    readonly logMessage?: string;\n    readonly location?: Location;\n    readonly functionName?: string;\n}\n\nexport interface WorkspaceSymbolParams {\n    query: string\n}\n\nexport interface FoldingContext {\n}\n\nexport interface FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n}\n\nexport class FoldingRangeKind {\n    static readonly Comment = new FoldingRangeKind('comment');\n    static readonly Imports = new FoldingRangeKind('imports');\n    static readonly Region = new FoldingRangeKind('region');\n    public constructor(public value: string) { }\n}\n\nexport interface SelectionRange {\n    range: Range;\n}\n\nexport interface Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n}\n\nexport interface ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n}\n\nexport interface ColorInformation {\n    range: Range;\n    color: Color;\n}\n\nexport interface DocumentColorProvider {\n    provideDocumentColors(model: monaco.editor.ITextModel): PromiseLike<ColorInformation[]>;\n    provideColorPresentations(model: monaco.editor.ITextModel, colorInfo: ColorInformation): PromiseLike<ColorPresentation[]>;\n}\n\nexport interface Rejection {\n    rejectReason?: string;\n}\n\nexport interface RenameLocation {\n    range: Range;\n    text: string;\n}\n\nexport interface RenameProvider {\n    provideRenameEdits(model: monaco.editor.ITextModel, position: Position, newName: string): PromiseLike<WorkspaceEdit & Rejection>;\n    resolveRenameLocation?(model: monaco.editor.ITextModel, position: Position): PromiseLike<RenameLocation & Rejection>;\n}\n\nexport interface CallHierarchyDefinition {\n    name: string;\n    kind: SymbolKind;\n    detail?: string;\n    uri: UriComponents;\n    range: Range;\n    selectionRange: Range;\n}\n\nexport interface CallHierarchyReference {\n    callerDefinition: CallHierarchyDefinition,\n    references: Range[]\n}\n\nexport interface CallHierarchyItem {\n    _sessionId?: string;\n    _itemId?: string;\n\n    kind: SymbolKind;\n    name: string;\n    detail?: string;\n    uri: UriComponents;\n    range: Range;\n    selectionRange: Range;\n}\n\nexport interface CallHierarchyIncomingCall {\n    from: CallHierarchyItem;\n    fromRanges: Range[];\n}\n\nexport interface CallHierarchyOutgoingCall {\n    to: CallHierarchyItem;\n    fromRanges: Range[];\n}\n\nexport interface SearchInWorkspaceResult {\n    root: string;\n    fileUri: string;\n    matches: SearchMatch[];\n}\n\nexport interface SearchMatch {\n    line: number;\n    character: number;\n    length: number;\n    lineText: string | LinePreview;\n\n}\nexport interface LinePreview {\n    text: string;\n    character: number;\n}\n\nexport interface AuthenticationSession {\n    id: string;\n    accessToken: string;\n    account: { id: string, label: string };\n    scopes: ReadonlyArray<string>;\n}\n\nexport interface AuthenticationSessionsChangeEvent {\n    added: ReadonlyArray<string>;\n    removed: ReadonlyArray<string>;\n    changed: ReadonlyArray<string>;\n}\n\nexport interface AuthenticationProviderInformation {\n    id: string;\n    label: string;\n}\n\nexport interface CommentOptions {\n    /**\n     * An optional string to show on the comment input box when it's collapsed.\n     */\n    prompt?: string;\n\n    /**\n     * An optional string to show as placeholder in the comment input box when it's focused.\n     */\n    placeHolder?: string;\n}\n\nexport enum CommentMode {\n    Editing = 0,\n    Preview = 1\n}\n\nexport interface Comment {\n    readonly uniqueIdInThread: number;\n    readonly body: MarkdownString;\n    readonly userName: string;\n    readonly userIconPath?: string;\n    readonly contextValue?: string;\n    readonly label?: string;\n    readonly mode?: CommentMode;\n}\n\nexport enum CommentThreadCollapsibleState {\n    /**\n     * Determines an item is collapsed\n     */\n    Collapsed = 0,\n    /**\n     * Determines an item is expanded\n     */\n    Expanded = 1\n}\n\nexport interface CommentInput {\n    value: string;\n    uri: URI;\n}\n\nexport interface CommentThread {\n    commentThreadHandle: number;\n    controllerHandle: number;\n    extensionId?: string;\n    threadId: string;\n    resource: string | null;\n    range: Range;\n    label: string | undefined;\n    contextValue: string | undefined;\n    comments: Comment[] | undefined;\n    onDidChangeComments: TheiaEvent<Comment[] | undefined>;\n    collapsibleState?: CommentThreadCollapsibleState;\n    input?: CommentInput;\n    onDidChangeInput: TheiaEvent<CommentInput | undefined>;\n    onDidChangeRange: TheiaEvent<Range>;\n    onDidChangeLabel: TheiaEvent<string | undefined>;\n    onDidChangeCollapsibleState: TheiaEvent<CommentThreadCollapsibleState | undefined>;\n    isDisposed: boolean;\n}\n\nexport interface CommentThreadChangedEventMain extends CommentThreadChangedEvent {\n    owner: string;\n}\n\nexport interface CommentThreadChangedEvent {\n    /**\n     * Added comment threads.\n     */\n    readonly added: CommentThread[];\n\n    /**\n     * Removed comment threads.\n     */\n    readonly removed: CommentThread[];\n\n    /**\n     * Changed comment threads.\n     */\n    readonly changed: CommentThread[];\n}\n\nexport interface CommentingRanges {\n    readonly resource: URI;\n    ranges: Range[];\n}\n\nexport interface CommentInfo {\n    extensionId?: string;\n    threads: CommentThread[];\n    commentingRanges: CommentingRanges;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { createProxyIdentifier, ProxyIdentifier, RPCProtocol } from './rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { PluginLifecycle, PluginModel, PluginMetadata, PluginPackage, IconUrl, PluginJsonValidationContribution } from './plugin-protocol';\nimport { QueryParameters } from './env';\nimport { TextEditorCursorStyle } from './editor-options';\nimport {\n    TextEditorLineNumbersStyle,\n    EndOfLine,\n    OverviewRulerLane,\n    IndentAction,\n    FileOperationOptions,\n    QuickInputButton\n} from '../plugin/types-impl';\nimport { UriComponents } from './uri-components';\nimport { ConfigurationTarget } from '../plugin/types-impl';\nimport {\n    SerializedDocumentFilter,\n    CompletionContext,\n    MarkdownString,\n    Range,\n    Completion,\n    CompletionResultDto,\n    MarkerData,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    FormattingOptions,\n    Definition,\n    DocumentLink,\n    CodeLensSymbol,\n    Command,\n    TextEdit,\n    DocumentSymbol,\n    ReferenceContext,\n    TextDocumentShowOptions,\n    WorkspaceRootsChangeEvent,\n    Location,\n    Breakpoint,\n    ColorPresentation,\n    RenameLocation,\n    SignatureHelpContext,\n    CodeAction,\n    CodeActionContext,\n    FoldingContext,\n    FoldingRange,\n    SelectionRange,\n    CallHierarchyDefinition,\n    CallHierarchyReference,\n    SearchInWorkspaceResult,\n    AuthenticationSession,\n    AuthenticationSessionsChangeEvent,\n    AuthenticationProviderInformation,\n    Comment,\n    CommentOptions,\n    CommentThreadCollapsibleState,\n    CommentThread,\n    CommentThreadChangedEvent,\n} from './plugin-api-rpc-model';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { DebuggerDescription } from '@theia/debug/lib/common/debug-service';\nimport { DebugProtocol } from 'vscode-debugprotocol';\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-types';\nimport { ArgumentProcessor } from '../plugin/command-registry';\nimport { MaybePromise } from '@theia/core/lib/common/types';\nimport { QuickTitleButton } from '@theia/core/lib/common/quick-open-model';\nimport * as files from '@theia/filesystem/lib/common/files';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { ResourceLabelFormatter } from '@theia/core/lib/common/label-protocol';\nimport type {\n    InternalTimelineOptions,\n    Timeline,\n    TimelineChangeEvent,\n    TimelineProviderDescriptor\n} from '@theia/timeline/lib/common/timeline-model';\nimport { SerializableEnvironmentVariableCollection } from '@theia/terminal/lib/common/base-terminal-protocol';\nimport { ThemeType } from '@theia/core/lib/browser/theming';\nimport { Disposable } from '@theia/core/lib/common/disposable';\n\nexport interface PreferenceData {\n    [scope: number]: any;\n}\n\nexport interface Plugin {\n    pluginPath: string | undefined;\n    pluginFolder: string;\n    pluginUri: string;\n    model: PluginModel;\n    rawModel: PluginPackage;\n    lifecycle: PluginLifecycle;\n}\n\nexport interface ConfigStorage {\n    hostLogPath: string;\n    hostStoragePath?: string;\n    hostGlobalStoragePath: string;\n}\n\nexport enum UIKind {\n\n    /**\n     * Extensions are accessed from a desktop application.\n     */\n    Desktop = 1,\n\n    /**\n     * Extensions are accessed from a web browser.\n     */\n    Web = 2\n}\n\nexport interface EnvInit {\n    queryParams: QueryParameters;\n    language: string;\n    shell: string;\n    uiKind: UIKind,\n    appName: string;\n}\n\nexport interface PluginAPI {\n\n}\n\nexport interface PluginManager {\n    getAllPlugins(): Plugin[];\n    getPluginById(pluginId: string): Plugin | undefined;\n    getPluginExport(pluginId: string): PluginAPI | undefined;\n    isRunning(pluginId: string): boolean;\n    isActive(pluginId: string): boolean;\n    activatePlugin(pluginId: string): PromiseLike<void>;\n    onDidChange: theia.Event<void>;\n}\n\nexport interface PluginAPIFactory {\n    (plugin: Plugin): typeof theia;\n}\n\nexport const emptyPlugin: Plugin = {\n    lifecycle: {\n        startMethod: 'empty',\n        stopMethod: 'empty'\n    },\n    model: {\n        id: 'emptyPlugin',\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engine: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty',\n        packageUri: 'empty',\n        entryPoint: {\n\n        }\n    },\n    pluginPath: 'empty',\n    pluginFolder: 'empty',\n    pluginUri: 'empty',\n    rawModel: {\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engines: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty'\n    }\n};\n\nexport interface PluginManagerInitializeParams {\n    preferences: PreferenceData\n    globalState: KeysToKeysToAnyValue\n    workspaceState: KeysToKeysToAnyValue\n    env: EnvInit\n    extApi?: ExtPluginApi[]\n    webview: WebviewInitData\n    jsonValidation: PluginJsonValidationContribution[]\n}\n\nexport interface PluginManagerStartParams {\n    plugins: PluginMetadata[]\n    configStorage: ConfigStorage\n    activationEvents: string[]\n}\n\nexport interface PluginManagerExt {\n\n    /** initialize the manager, should be called only once */\n    $init(params: PluginManagerInitializeParams): Promise<void>;\n\n    /** load and activate plugins */\n    $start(params: PluginManagerStartParams): Promise<void>;\n\n    /** deactivate the plugin */\n    $stop(pluginId: string): Promise<void>;\n\n    /** deactivate all plugins */\n    $stop(): Promise<void>;\n\n    $updateStoragePath(path: string | undefined): Promise<void>;\n\n    $activateByEvent(event: string): Promise<void>;\n\n    $activatePlugin(id: string): Promise<void>;\n}\n\nexport interface CommandRegistryMain {\n    $registerCommand(command: theia.CommandDescription): void;\n    $unregisterCommand(id: string): void;\n\n    $registerHandler(id: string): void;\n    $unregisterHandler(id: string): void;\n\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined>;\n    $getCommands(): PromiseLike<string[]>;\n    $getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined>;\n}\n\nexport interface CommandRegistryExt {\n    $executeCommand<T>(id: string, ...ars: any[]): PromiseLike<T | undefined>;\n    registerArgumentProcessor(processor: ArgumentProcessor): void;\n}\n\nexport interface TerminalServiceExt {\n    $terminalCreated(id: string, name: string): void;\n    $terminalNameChanged(id: string, name: string): void;\n    $terminalOpened(id: string, processId: number, terminalId: number, cols: number, rows: number): void;\n    $terminalClosed(id: string): void;\n    $terminalOnInput(id: string, data: string): void;\n    $terminalSizeChanged(id: string, cols: number, rows: number): void;\n    $currentTerminalChanged(id: string | undefined): void;\n    $initEnvironmentVariableCollections(collections: [string, SerializableEnvironmentVariableCollection][]): void;\n    getEnvironmentVariableCollection(extensionIdentifier: string): theia.EnvironmentVariableCollection;\n}\nexport interface OutputChannelRegistryExt {\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel\n}\n\nexport interface ConnectionMain {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>;\n    $sendMessage(id: string, message: string): void;\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>;\n}\n\nexport interface ConnectionExt {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>\n    $sendMessage(id: string, message: string): void;\n}\n\nexport interface TerminalServiceMain {\n    /**\n     * Create new Terminal with Terminal options.\n     * @param options - object with parameters to create new terminal.\n     */\n    $createTerminal(id: string, options: theia.TerminalOptions, isPseudoTerminal?: boolean): Promise<string>;\n\n    /**\n     * Send text to the terminal by id.\n     * @param id - terminal widget id.\n     * @param text - text content.\n     * @param addNewLine - in case true - add new line after the text, otherwise - don't apply new line.\n     */\n    $sendText(id: string, text: string, addNewLine?: boolean): void;\n\n    /**\n     * Write data to the terminal by id.\n     * @param id - terminal widget id.\n     * @param data - data.\n     */\n    $write(id: string, data: string): void;\n\n    /**\n     * Resize the terminal by id.\n     * @param id - terminal widget id.\n     * @param cols - columns.\n     * @param rows - rows.\n     */\n    $resize(id: string, cols: number, rows: number): void;\n\n    /**\n     * Show terminal on the UI panel.\n     * @param id - terminal widget id.\n     * @param preserveFocus - set terminal focus in case true value, and don't set focus otherwise.\n     */\n    $show(id: string, preserveFocus?: boolean): void;\n\n    /**\n     * Hide UI panel where is located terminal widget.\n     * @param id - terminal widget id.\n     */\n    $hide(id: string): void;\n\n    /**\n     * Destroy terminal.\n     * @param id - terminal widget id.\n     */\n    $dispose(id: string): void;\n\n    /**\n     * Send text to the terminal by id.\n     * @param id - terminal id.\n     * @param text - text content.\n     * @param addNewLine - in case true - add new line after the text, otherwise - don't apply new line.\n     */\n    $sendTextByTerminalId(id: number, text: string, addNewLine?: boolean): void;\n\n    /**\n     * Write data to the terminal by id.\n     * @param id - terminal id.\n     * @param data - data.\n     */\n    $writeByTerminalId(id: number, data: string): void;\n\n    /**\n     * Resize the terminal by id.\n     * @param id - terminal id.\n     * @param cols - columns.\n     * @param rows - rows.\n     */\n    $resizeByTerminalId(id: number, cols: number, rows: number): void;\n\n    /**\n     * Show terminal on the UI panel.\n     * @param id - terminal id.\n     * @param preserveFocus - set terminal focus in case true value, and don't set focus otherwise.\n     */\n    $showByTerminalId(id: number, preserveFocus?: boolean): void;\n\n    /**\n     * Hide UI panel where is located terminal widget.\n     * @param id - terminal id.\n     */\n    $hideByTerminalId(id: number): void;\n\n    /**\n     * Destroy terminal.\n     * @param id - terminal id.\n     * @param waitOnExit - Whether to wait for a key press before closing the terminal.\n     */\n    $disposeByTerminalId(id: number, waitOnExit?: boolean | string): void;\n\n    $setEnvironmentVariableCollection(extensionIdentifier: string, persistent: boolean, collection: SerializableEnvironmentVariableCollection | undefined): void;\n}\n\nexport interface AutoFocus {\n    autoFocusFirstEntry?: boolean;\n    // TODO\n}\n\nexport interface PickOptions {\n    placeHolder?: string;\n    autoFocus?: AutoFocus;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    ignoreFocusLost?: boolean;\n    quickNavigationConfiguration?: {}; // TODO\n    contextKey?: string;\n    canSelectMany?: boolean;\n}\n\nexport interface PickOpenItem {\n    handle: number;\n    label: string;\n    description?: string;\n    detail?: string;\n    picked?: boolean;\n    groupLabel?: string;\n    showBorder?: boolean;\n}\n\nexport enum MainMessageType {\n    Error,\n    Warning,\n    Info\n}\n\nexport interface MainMessageOptions {\n    modal?: boolean\n    onCloseActionHandle?: number\n}\n\nexport interface MainMessageItem {\n    title: string,\n    isCloseAffordance?: boolean;\n    handle?: number\n}\n\nexport interface MessageRegistryMain {\n    $showMessage(type: MainMessageType, message: string, options: MainMessageOptions, actions: MainMessageItem[]): PromiseLike<number | undefined>;\n}\n\nexport interface StatusBarMessageRegistryMain {\n    $setMessage(id: string,\n        text: string | undefined,\n        priority: number,\n        alignment: theia.StatusBarAlignment,\n        color: string | undefined,\n        tooltip: string | undefined,\n        command: string | undefined,\n        args: any[] | undefined): PromiseLike<void>;\n    $dispose(id: string): void;\n}\n\nexport interface QuickOpenExt {\n    $onItemSelected(handle: number): void;\n    $validateInput(input: string): PromiseLike<string | undefined> | undefined;\n\n    $acceptOnDidAccept(quickInputNumber: number): Promise<void>;\n    $acceptDidChangeValue(quickInputNumber: number, changedValue: string): Promise<void>;\n    $acceptOnDidHide(quickInputNumber: number): Promise<void>;\n    $acceptOnDidTriggerButton(quickInputNumber: number, btn: QuickTitleButton): Promise<void>;\n    $onDidChangeActive(sessionId: number, handles: number[]): void;\n    $onDidChangeSelection(sessionId: number, handles: number[]): void;\n}\n\n/**\n * Options to configure the behaviour of a file open dialog.\n */\nexport interface OpenDialogOptionsMain {\n\n    /**\n     * Dialog title.\n     * This parameter might be ignored, as not all operating systems display a title on open dialogs.\n     */\n    title?: string;\n\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the open button.\n     */\n    openLabel?: string;\n\n    /**\n     * Allow to select files, defaults to `true`.\n     */\n    canSelectFiles?: boolean;\n\n    /**\n     * Allow to select folders, defaults to `false`.\n     */\n    canSelectFolders?: boolean;\n\n    /**\n     * Allow to select many files or folders.\n     */\n    canSelectMany?: boolean;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     *  'Images': ['png', 'jpg']\n     *  'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file save dialog.\n */\nexport interface SaveDialogOptionsMain {\n\n    /**\n     * Dialog title.\n     * This parameter might be ignored, as not all operating systems display a title on save dialogs.\n     */\n    title?: string;\n\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the save button.\n     */\n    saveLabel?: string;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     *  'Images': ['png', 'jpg']\n     *  'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file upload dialog.\n */\nexport interface UploadDialogOptionsMain {\n    /**\n     * The resource, where files should be uploaded.\n     */\n    defaultUri?: string;\n}\n\nexport interface FileUploadResultMain {\n    uploaded: string[]\n}\n\n/**\n * Options to configure the behaviour of the [workspace folder](#WorkspaceFolder) pick UI.\n */\nexport interface WorkspaceFolderPickOptionsMain {\n    /**\n     * An optional string to show as place holder in the input box to guide the user what to pick on.\n     */\n    placeHolder?: string;\n\n    /**\n     * Set to `true` to keep the picker open when focus moves to another part of the editor or to another window.\n     */\n    ignoreFocusOut?: boolean;\n}\n\nexport interface QuickInputTitleButtonHandle extends QuickTitleButton {\n    index: number; // index of where they are in buttons array if QuickInputButton or -1 if QuickInputButtons.Back\n}\n\nexport interface TransferQuickInput {\n    id: number;\n    title: string | undefined;\n    step: number | undefined;\n    totalSteps: number | undefined;\n    enabled: boolean;\n    busy: boolean;\n    ignoreFocusOut: boolean;\n}\n\nexport interface TransferInputBox extends TransferQuickInput {\n    value: string;\n    placeholder: string | undefined;\n    password: boolean;\n    buttons: ReadonlyArray<QuickInputButton>;\n    prompt: string | undefined;\n    validationMessage: string | undefined;\n    validateInput(value: string): MaybePromise<string | undefined>;\n}\n\nexport interface TransferQuickPick<T extends theia.QuickPickItem> extends TransferQuickInput {\n    value: string;\n    placeholder: string | undefined;\n    buttons: ReadonlyArray<QuickInputButton>;\n    items: PickOpenItem[];\n    canSelectMany: boolean;\n    matchOnDescription: boolean;\n    matchOnDetail: boolean;\n    activeItems: ReadonlyArray<T>;\n    selectedItems: ReadonlyArray<T>;\n}\n\nexport interface QuickOpenMain {\n    $show(options: PickOptions, token: CancellationToken): Promise<number | number[]>;\n    $setItems(items: PickOpenItem[]): Promise<any>;\n    $input(options: theia.InputBoxOptions, validateInput: boolean, token: CancellationToken): Promise<string | undefined>;\n    $hide(): void;\n    $showInputBox(inputBox: TransferInputBox, validateInput: boolean): void;\n    $showCustomQuickPick<T extends theia.QuickPickItem>(inputBox: TransferQuickPick<T>): void;\n    $setQuickInputChanged(changed: object): void;\n    $refreshQuickInput(): void;\n}\n\nexport interface WorkspaceMain {\n    $pickWorkspaceFolder(options: WorkspaceFolderPickOptionsMain): Promise<theia.WorkspaceFolder | undefined>;\n    $startFileSearch(includePattern: string, includeFolder: string | undefined, excludePatternOrDisregardExcludes: string | false,\n        maxResults: number | undefined, token: theia.CancellationToken): PromiseLike<UriComponents[]>;\n    $findTextInFiles(query: theia.TextSearchQuery, options: theia.FindTextInFilesOptions, searchRequestId: number,\n        token?: theia.CancellationToken): Promise<theia.TextSearchComplete>\n    $registerTextDocumentContentProvider(scheme: string): Promise<void>;\n    $unregisterTextDocumentContentProvider(scheme: string): void;\n    $onTextDocumentContentChange(uri: string, content: string): void;\n    $updateWorkspaceFolders(start: number, deleteCount?: number, ...rootsToAdd: string[]): Promise<void>;\n    $getWorkspace(): Promise<files.FileStat | undefined>;\n}\n\nexport interface WorkspaceExt {\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void;\n    $onWorkspaceLocationChanged(event: files.FileStat | undefined): void;\n    $provideTextDocumentContent(uri: string): Promise<string | undefined>;\n    $onTextSearchResult(searchRequestId: number, done: boolean, result?: SearchInWorkspaceResult): void;\n}\n\nexport interface TimelineExt {\n    $getTimeline(source: string, uri: UriComponents, options: theia.TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined>;\n}\n\nexport interface TimelineMain {\n    $registerTimelineProvider(provider: TimelineProviderDescriptor): Promise<void>;\n    $fireTimelineChanged(e: TimelineChangeEvent): Promise<void>;\n    $unregisterTimelineProvider(source: string): Promise<void>;\n}\n\nexport interface ThemingExt {\n    $onColorThemeChange(type: ThemeType): void;\n}\nexport interface ThemingMain extends Disposable {\n}\n\nexport interface DialogsMain {\n    $showOpenDialog(options: OpenDialogOptionsMain): Promise<string[] | undefined>;\n    $showSaveDialog(options: SaveDialogOptionsMain): Promise<string | undefined>;\n    $showUploadDialog(options: UploadDialogOptionsMain): Promise<string[] | undefined>;\n}\n\nexport interface TreeViewRevealOptions {\n    select: boolean\n    focus: boolean\n    expand: boolean | number\n}\n\nexport interface TreeViewsMain {\n    $registerTreeDataProvider(treeViewId: string): void;\n    $unregisterTreeDataProvider(treeViewId: string): void;\n    $refresh(treeViewId: string): Promise<void>;\n    $reveal(treeViewId: string, elementParentChain: string[], options: TreeViewRevealOptions): Promise<any>;\n    $setMessage(treeViewId: string, message: string): void;\n    $setTitle(treeViewId: string, title: string): void;\n}\n\nexport interface TreeViewsExt {\n    $getChildren(treeViewId: string, treeItemId: string | undefined): Promise<TreeViewItem[] | undefined>;\n    $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any>;\n    $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void>;\n    $setVisible(treeViewId: string, visible: boolean): Promise<void>;\n}\n\nexport interface TreeViewItem {\n\n    id: string;\n\n    label: string;\n\n    description?: string | boolean;\n\n    /* font-awesome icon for compatibility */\n    icon?: string;\n    iconUrl?: IconUrl;\n\n    themeIconId?: string;\n\n    resourceUri?: UriComponents;\n\n    tooltip?: string;\n\n    collapsibleState?: TreeViewItemCollapsibleState;\n\n    contextValue?: string;\n\n    command?: Command;\n\n}\n\nexport interface TreeViewSelection {\n    treeViewId: string\n    treeItemId: string\n}\nexport namespace TreeViewSelection {\n    export function is(arg: Object | any): arg is TreeViewSelection {\n        return !!arg && typeof arg === 'object' && 'treeViewId' in arg && 'treeItemId' in arg;\n    }\n}\n\n/**\n * Collapsible state of the tree item\n */\nexport enum TreeViewItemCollapsibleState {\n    /**\n     * Determines an item can be neither collapsed nor expanded. Implies it has no children.\n     */\n    None = 0,\n    /**\n     * Determines an item is collapsed\n     */\n    Collapsed = 1,\n    /**\n     * Determines an item is expanded\n     */\n    Expanded = 2\n}\n\nexport interface WindowMain {\n    $openUri(uri: UriComponents): Promise<boolean>;\n    $asExternalUri(uri: UriComponents): Promise<UriComponents>;\n}\n\nexport interface WindowStateExt {\n    $onWindowStateChanged(focus: boolean): void;\n}\n\nexport interface NotificationExt {\n    withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): PromiseLike<R>;\n}\n\nexport interface ScmCommandArg {\n    sourceControlHandle: number\n    resourceGroupHandle?: number\n    resourceStateHandle?: number\n}\nexport namespace ScmCommandArg {\n    export function is(arg: Object | undefined): arg is ScmCommandArg {\n        return !!arg && typeof arg === 'object' && 'sourceControlHandle' in arg;\n    }\n}\n\nexport interface ScmExt {\n    createSourceControl(plugin: Plugin, id: string, label: string, rootUri?: theia.Uri): theia.SourceControl;\n    getLastInputBox(plugin: Plugin): theia.SourceControlInputBox | undefined;\n    $onInputBoxValueChange(sourceControlHandle: number, message: string): Promise<void>;\n    $executeResourceCommand(sourceControlHandle: number, groupHandle: number, resourceHandle: number): Promise<void>;\n    $validateInput(sourceControlHandle: number, value: string, cursorPosition: number): Promise<[string, number] | undefined>;\n    $setSelectedSourceControl(selectedSourceControlHandle: number | undefined): Promise<void>;\n    $provideOriginalResource(sourceControlHandle: number, uri: string, token: theia.CancellationToken): Promise<UriComponents | undefined>;\n}\n\nexport namespace TimelineCommandArg {\n    export function is(arg: Object | undefined): arg is TimelineCommandArg {\n        return !!arg && typeof arg === 'object' && 'timelineHandle' in arg;\n    }\n}\nexport interface TimelineCommandArg {\n    timelineHandle: string;\n    source: string;\n    uri: string;\n}\n\nexport interface DecorationRequest {\n    readonly id: number;\n    readonly uri: UriComponents;\n}\n\nexport type DecorationData = [boolean, string, string, ThemeColor];\nexport interface DecorationReply { [id: number]: DecorationData; }\n\nexport namespace CommentsCommandArg {\n    export function is(arg: Object | undefined): arg is CommentsCommandArg {\n        return !!arg && typeof arg === 'object' && 'commentControlHandle' in arg && 'commentThreadHandle' in arg && 'text' in arg && !('commentUniqueId' in arg);\n    }\n}\nexport interface CommentsCommandArg {\n    commentControlHandle: number;\n    commentThreadHandle: number;\n    text: string\n}\n\nexport namespace CommentsContextCommandArg {\n    export function is(arg: Object | undefined): arg is CommentsContextCommandArg {\n        return !!arg && typeof arg === 'object' && 'commentControlHandle' in arg && 'commentThreadHandle' in arg && 'commentUniqueId' in arg && !('text' in arg);\n    }\n}\nexport interface CommentsContextCommandArg {\n    commentControlHandle: number;\n    commentThreadHandle: number;\n    commentUniqueId: number\n}\n\nexport namespace CommentsEditCommandArg {\n    export function is(arg: Object | undefined): arg is CommentsEditCommandArg {\n        return !!arg && typeof arg === 'object' && 'commentControlHandle' in arg && 'commentThreadHandle' in arg && 'commentUniqueId' in arg && 'text' in arg;\n    }\n}\nexport interface CommentsEditCommandArg {\n    commentControlHandle: number;\n    commentThreadHandle: number;\n    commentUniqueId: number\n    text: string\n}\n\nexport interface DecorationsExt {\n    registerFileDecorationProvider(provider: theia.FileDecorationProvider, pluginInfo: PluginInfo): theia.Disposable\n    $provideDecorations(handle: number, requests: DecorationRequest[], token: CancellationToken): Promise<DecorationReply>;\n}\n\nexport interface DecorationsMain {\n    $registerDecorationProvider(handle: number): Promise<void>;\n    $unregisterDecorationProvider(handle: number): void;\n    $onDidChange(handle: number, resources: UriComponents[] | null): void;\n}\n\nexport interface ScmMain {\n    $registerSourceControl(sourceControlHandle: number, id: string, label: string, rootUri?: UriComponents): Promise<void>;\n    $updateSourceControl(sourceControlHandle: number, features: SourceControlProviderFeatures): Promise<void>;\n    $unregisterSourceControl(sourceControlHandle: number): Promise<void>;\n\n    $registerGroups(sourceControlHandle: number, groups: ScmRawResourceGroup[], splices: ScmRawResourceSplices[]): void;\n    $updateGroup(sourceControlHandle: number, groupHandle: number, features: SourceControlGroupFeatures): void;\n    $updateGroupLabel(sourceControlHandle: number, groupHandle: number, label: string): void;\n    $unregisterGroup(sourceControlHandle: number, groupHandle: number): void;\n\n    $spliceResourceStates(sourceControlHandle: number, splices: ScmRawResourceSplices[]): void;\n\n    $setInputBoxValue(sourceControlHandle: number, value: string): void;\n    $setInputBoxPlaceholder(sourceControlHandle: number, placeholder: string): void;\n}\n\nexport interface SourceControlProviderFeatures {\n    hasQuickDiffProvider?: boolean;\n    count?: number;\n    commitTemplate?: string;\n    acceptInputCommand?: Command;\n    statusBarCommands?: Command[];\n}\n\nexport interface SourceControlGroupFeatures {\n    hideWhenEmpty: boolean | undefined;\n}\n\nexport interface ScmRawResource {\n    handle: number,\n    sourceUri: UriComponents,\n    icons: UriComponents[],\n    tooltip: string,\n    strikeThrough: boolean,\n    faded: boolean,\n    contextValue: string,\n    command: Command | undefined\n}\n\nexport interface ScmRawResourceGroup {\n    handle: number,\n    id: string,\n    label: string,\n    features: SourceControlGroupFeatures\n}\n\nexport interface ScmRawResourceSplice {\n    start: number,\n    deleteCount: number,\n    rawResources: ScmRawResource[]\n}\n\nexport interface ScmRawResourceSplices {\n    handle: number,\n    splices: ScmRawResourceSplice[]\n}\n\nexport interface SourceControlResourceState {\n    readonly handle: number\n    /**\n     * The uri of the underlying resource inside the workspace.\n     */\n    readonly resourceUri: string;\n\n    /**\n     * The command which should be run when the resource\n     * state is open in the Source Control viewlet.\n     */\n    readonly command?: Command;\n\n    /**\n     * The decorations for this source control\n     * resource state.\n     */\n    readonly decorations?: SourceControlResourceDecorations;\n\n    readonly letter?: string;\n\n    readonly colorId?: string\n}\n\n/**\n * The decorations for a [source control resource state](#SourceControlResourceState).\n * Can be independently specified for light and dark themes.\n */\nexport interface SourceControlResourceDecorations {\n\n    /**\n     * Whether the source control resource state should be striked-through in the UI.\n     */\n    readonly strikeThrough?: boolean;\n\n    /**\n     * Whether the source control resource state should be faded in the UI.\n     */\n    readonly faded?: boolean;\n\n    /**\n     * The title for a specific source control resource state.\n     */\n    readonly tooltip?: string;\n\n    /**\n     * The icon path for a specific source control resource state.\n     */\n    readonly iconPath?: string;\n}\n\nexport interface NotificationMain {\n    $startProgress(options: NotificationMain.StartProgressOptions): Promise<string>;\n    $stopProgress(id: string): void;\n    $updateProgress(id: string, report: NotificationMain.ProgressReport): void;\n}\nexport namespace NotificationMain {\n    export interface StartProgressOptions {\n        title: string;\n        location?: string;\n        cancellable?: boolean;\n    }\n    export interface ProgressReport {\n        message?: string;\n        increment?: number;\n        total?: number;\n    }\n}\n\nexport enum EditorPosition {\n    ONE = 0,\n    TWO = 1,\n    THREE = 2,\n    FOUR = 3,\n    FIVE = 4,\n    SIX = 5,\n    SEVEN = 6,\n    EIGHT = 7,\n    NINE = 8\n}\n\nexport interface Position {\n    readonly lineNumber: number;\n    readonly column: number;\n}\n\nexport interface Selection {\n    /**\n     * The line number on which the selection has started.\n     */\n    readonly selectionStartLineNumber: number;\n    /**\n     * The column on `selectionStartLineNumber` where the selection has started.\n     */\n    readonly selectionStartColumn: number;\n    /**\n     * The line number on which the selection has ended.\n     */\n    readonly positionLineNumber: number;\n    /**\n     * The column on `positionLineNumber` where the selection has ended.\n     */\n    readonly positionColumn: number;\n}\n\nexport interface TextEditorConfiguration {\n    tabSize: number;\n    insertSpaces: boolean;\n    cursorStyle: TextEditorCursorStyle;\n    lineNumbers: TextEditorLineNumbersStyle;\n}\n\nexport interface TextEditorConfigurationUpdate {\n    tabSize?: number | 'auto';\n    insertSpaces?: boolean | 'auto';\n    cursorStyle?: TextEditorCursorStyle;\n    lineNumbers?: TextEditorLineNumbersStyle;\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\nexport interface SelectionChangeEvent {\n    selections: Selection[];\n    source?: string;\n}\n\nexport interface EditorChangedPropertiesData {\n    options?: TextEditorConfiguration;\n    selections?: SelectionChangeEvent;\n    visibleRanges?: Range[];\n}\n\nexport interface TextEditorPositionData {\n    [id: string]: EditorPosition;\n}\n\nexport interface TextEditorsExt {\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void;\n    $acceptEditorPositionData(data: TextEditorPositionData): void;\n}\n\nexport interface SingleEditOperation {\n    range?: Range;\n    text?: string;\n    forceMoveMarkers?: boolean;\n}\n\nexport interface UndoStopOptions {\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport interface ApplyEditsOptions extends UndoStopOptions {\n    setEndOfLine: EndOfLine;\n}\n\nexport interface ThemeColor {\n    id: string;\n}\n\n/**\n * Describes the behavior of decorations when typing/editing near their edges.\n */\nexport enum TrackedRangeStickiness {\n    AlwaysGrowsWhenTypingAtEdges = 0,\n    NeverGrowsWhenTypingAtEdges = 1,\n    GrowsOnlyWhenTypingBefore = 2,\n    GrowsOnlyWhenTypingAfter = 3,\n}\nexport interface ContentDecorationRenderOptions {\n    contentText?: string;\n    contentIconPath?: UriComponents;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    color?: string | ThemeColor;\n    backgroundColor?: string | ThemeColor;\n\n    margin?: string;\n    width?: string;\n    height?: string;\n}\n\nexport interface ThemeDecorationRenderOptions {\n    backgroundColor?: string | ThemeColor;\n\n    outline?: string;\n    outlineColor?: string | ThemeColor;\n    outlineStyle?: string;\n    outlineWidth?: string;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    borderRadius?: string;\n    borderSpacing?: string;\n    borderStyle?: string;\n    borderWidth?: string;\n\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    cursor?: string;\n    color?: string | ThemeColor;\n    opacity?: string;\n    letterSpacing?: string;\n\n    gutterIconPath?: UriComponents;\n    gutterIconSize?: string;\n\n    overviewRulerColor?: string | ThemeColor;\n\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationRenderOptions extends ThemeDecorationRenderOptions {\n    isWholeLine?: boolean;\n    rangeBehavior?: TrackedRangeStickiness;\n    overviewRulerLane?: OverviewRulerLane;\n\n    light?: ThemeDecorationRenderOptions;\n    dark?: ThemeDecorationRenderOptions;\n}\n\nexport interface ThemeDecorationInstanceRenderOptions {\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationInstanceRenderOptions extends ThemeDecorationInstanceRenderOptions {\n    light?: ThemeDecorationInstanceRenderOptions;\n    dark?: ThemeDecorationInstanceRenderOptions;\n}\n\nexport interface DecorationOptions {\n    range: Range;\n    hoverMessage?: MarkdownString | MarkdownString[];\n    renderOptions?: DecorationInstanceRenderOptions;\n}\n\nexport interface TextEditorsMain {\n    // $tryShowTextDocument(resource: UriComponents, options: TextDocumentShowOptions): Promise<string>;\n    $registerTextEditorDecorationType(key: string, options: DecorationRenderOptions): void;\n    $removeTextEditorDecorationType(key: string): void;\n    // $tryShowEditor(id: string, position: EditorPosition): Promise<void>;\n    // $tryHideEditor(id: string): Promise<void>;\n    $trySetOptions(id: string, options: TextEditorConfigurationUpdate): Promise<void>;\n    $trySetDecorations(id: string, key: string, ranges: DecorationOptions[]): Promise<void>;\n    $trySetDecorationsFast(id: string, key: string, ranges: number[]): Promise<void>;\n    $tryRevealRange(id: string, range: Range, revealType: TextEditorRevealType): Promise<void>;\n    $trySetSelections(id: string, selections: Selection[]): Promise<void>;\n    $tryApplyEdits(id: string, modelVersionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): Promise<boolean>;\n    $tryApplyWorkspaceEdit(workspaceEditDto: WorkspaceEditDto): Promise<boolean>;\n    $tryInsertSnippet(id: string, template: string, selections: Range[], opts: UndoStopOptions): Promise<boolean>;\n    $saveAll(includeUntitled?: boolean): Promise<boolean>;\n    // $getDiffInformation(id: string): Promise<editorCommon.ILineChange[]>;\n}\n\nexport interface ModelAddedData {\n    uri: UriComponents;\n    versionId: number;\n    lines: string[];\n    EOL: string;\n    modeId: string;\n    isDirty: boolean;\n}\n\nexport interface TextEditorAddData {\n    id: string;\n    documentUri: UriComponents;\n    options: TextEditorConfiguration;\n    selections: Selection[];\n    visibleRanges: Range[];\n    editorPosition?: EditorPosition;\n}\n\nexport interface EditorsAndDocumentsDelta {\n    removedDocuments?: UriComponents[];\n    addedDocuments?: ModelAddedData[];\n    removedEditors?: string[];\n    addedEditors?: TextEditorAddData[];\n    /**\n     * undefined means no changes\n     * null means no active\n     * string means id of active\n     */\n    newActiveEditor?: string | null;\n}\n\nexport interface EditorsAndDocumentsExt {\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void;\n}\n\nexport interface ModelContentChange {\n    readonly range: Range;\n    readonly rangeOffset: number;\n    readonly rangeLength: number;\n    readonly text: string;\n}\nexport interface ModelChangedEvent {\n    readonly changes: ModelContentChange[];\n\n    readonly eol: string;\n\n    readonly versionId: number;\n}\n\nexport interface DocumentsExt {\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void;\n    $acceptModelSaved(strUrl: UriComponents): void;\n    $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]>;\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void;\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void;\n}\n\nexport interface DocumentsMain {\n    $tryCreateDocument(options?: { language?: string; content?: string; }): Promise<UriComponents>;\n    $tryShowDocument(uri: UriComponents, options?: TextDocumentShowOptions): Promise<void>;\n    $tryOpenDocument(uri: UriComponents): Promise<boolean>;\n    $trySaveDocument(uri: UriComponents): Promise<boolean>;\n    $tryCloseDocument(uri: UriComponents): Promise<boolean>;\n}\n\nexport interface EnvMain {\n    $getEnvVariable(envVarName: string): Promise<string | undefined>;\n    $getClientOperatingSystem(): Promise<theia.OperatingSystem>;\n}\n\nexport interface PreferenceRegistryMain {\n    $updateConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        value: any,\n        resource?: string\n    ): PromiseLike<void>;\n    $removeConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        resource?: string\n    ): PromiseLike<void>;\n}\n\nexport interface PreferenceChangeExt {\n    preferenceName: string,\n    newValue: any\n}\n\nexport interface TerminalOptionsExt {\n    attributes?: {\n        [key: string]: string;\n    }\n}\n\nexport interface PreferenceRegistryExt {\n    $acceptConfigurationChanged(data: { [key: string]: any }, eventData: PreferenceChangeExt[]): void;\n}\n\nexport interface OutputChannelRegistryMain {\n    $append(channelName: string, value: string, pluginInfo: PluginInfo): PromiseLike<void>;\n    $clear(channelName: string): PromiseLike<void>;\n    $dispose(channelName: string): PromiseLike<void>;\n    $reveal(channelName: string, preserveFocus: boolean): PromiseLike<void>;\n    $close(channelName: string): PromiseLike<void>;\n}\n\nexport type CharacterPair = [string, string];\n\nexport interface CommentRule {\n    lineComment?: string;\n    blockComment?: CharacterPair;\n}\n\nexport interface SerializedRegExp {\n    pattern: string;\n    flags?: string;\n}\n\nexport interface SerializedIndentationRule {\n    decreaseIndentPattern?: SerializedRegExp;\n    increaseIndentPattern?: SerializedRegExp;\n    indentNextLinePattern?: SerializedRegExp;\n    unIndentedLinePattern?: SerializedRegExp;\n}\n\nexport interface EnterAction {\n    indentAction: IndentAction;\n    outdentCurrentLine?: boolean;\n    appendText?: string;\n    removeText?: number;\n}\n\nexport interface SerializedOnEnterRule {\n    beforeText: SerializedRegExp;\n    afterText?: SerializedRegExp;\n    action: EnterAction;\n}\n\nexport interface SerializedLanguageConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    wordPattern?: SerializedRegExp;\n    indentationRules?: SerializedIndentationRule;\n    onEnterRules?: SerializedOnEnterRule[];\n}\n\nexport interface CodeActionDto {\n    title: string;\n    edit?: WorkspaceEditDto;\n    diagnostics?: MarkerData[];\n    command?: Command;\n    kind?: string;\n    isPreferred?: boolean;\n    disabled?: string;\n}\n\nexport interface WorkspaceEditMetadataDto {\n    needsConfirmation: boolean;\n    label: string;\n    description?: string;\n    iconPath?: {\n        id: string;\n    } | {\n        light: UriComponents;\n        dark: UriComponents;\n    };\n}\n\nexport interface WorkspaceFileEditDto {\n    oldUri?: UriComponents;\n    newUri?: UriComponents;\n    options?: FileOperationOptions;\n    metadata?: WorkspaceEditMetadataDto;\n}\n\nexport interface WorkspaceTextEditDto {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edit: TextEdit;\n    metadata?: WorkspaceEditMetadataDto;\n\n}\nexport namespace WorkspaceTextEditDto {\n    export function is(arg: WorkspaceTextEditDto | WorkspaceFileEditDto): arg is WorkspaceTextEditDto {\n        return !!arg\n            && 'resource' in arg\n            && 'edit' in arg\n            && arg.edit !== null\n            && typeof arg.edit === 'object';\n    }\n}\n\nexport interface WorkspaceEditDto {\n    edits: Array<WorkspaceTextEditDto | WorkspaceFileEditDto>;\n}\n\nexport interface CommandProperties {\n    command: string;\n    args?: string[];\n    options?: {\n        cwd?: string;\n        [key: string]: any\n    };\n}\n\nexport interface TaskDto {\n    type: string;\n    taskType?: 'shell' | 'process' | 'customExecution'; // the task execution type\n    executionId?: string,\n    label: string;\n    source?: string;\n    scope: string | number;\n    // Provide a more specific type when necessary (see ProblemMatcherContribution)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    problemMatcher?: any;\n    group?: string;\n    detail?: string;\n    presentation?: TaskPresentationOptionsDTO;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n}\n\nexport interface TaskPresentationOptionsDTO {\n    reveal?: number;\n    focus?: boolean;\n    echo?: boolean;\n    panel?: number;\n    showReuseMessage?: boolean;\n}\n\nexport interface TaskExecutionDto {\n    id: number;\n    task: TaskDto;\n}\n\nexport interface ProcessTaskDto extends TaskDto, CommandProperties {\n    windows?: CommandProperties;\n}\n\nexport interface PluginInfo {\n    id: string;\n    name: string;\n}\n\nexport interface LanguagesExt {\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: CancellationToken): Promise<CompletionResultDto | undefined>;\n    $resolveCompletionItem(handle: number, parentId: number, id: number, token: CancellationToken): Promise<Completion | undefined>;\n    $releaseCompletionItems(handle: number, id: number): void;\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: CancellationToken): Promise<Location[] | undefined>;\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: CancellationToken\n    ): Promise<SignatureHelp | undefined>;\n    $releaseSignatureHelp(handle: number, id: number): void;\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Hover | undefined>;\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<DocumentHighlight[] | undefined>;\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideOnTypeFormattingEdits(\n        handle: number,\n        resource: UriComponents,\n        position: Position,\n        ch: string,\n        options: FormattingOptions,\n        token: CancellationToken\n    ): Promise<TextEdit[] | undefined>;\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentLink[] | undefined>;\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: CancellationToken): Promise<DocumentLink | undefined>;\n    $releaseDocumentLinks(handle: number, ids: number[]): void;\n    $provideCodeLenses(handle: number, resource: UriComponents, token: CancellationToken): Promise<CodeLensSymbol[] | undefined>;\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: CancellationToken): Promise<CodeLensSymbol | undefined>;\n    $releaseCodeLenses(handle: number, ids: number[]): void;\n    $provideCodeActions(\n        handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: CancellationToken\n    ): Promise<CodeAction[] | undefined>;\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentSymbol[] | undefined>;\n    $provideWorkspaceSymbols(handle: number, query: string, token: CancellationToken): PromiseLike<SymbolInformation[]>;\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: CancellationToken): PromiseLike<SymbolInformation | undefined>;\n    $provideFoldingRange(\n        handle: number,\n        resource: UriComponents,\n        context: FoldingContext,\n        token: CancellationToken\n    ): PromiseLike<FoldingRange[] | undefined>;\n    $provideSelectionRanges(handle: number, resource: UriComponents, positions: Position[], token: CancellationToken): PromiseLike<SelectionRange[][]>;\n    $provideDocumentColors(handle: number, resource: UriComponents, token: CancellationToken): PromiseLike<RawColorInfo[]>;\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: CancellationToken): PromiseLike<ColorPresentation[]>;\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: CancellationToken): PromiseLike<WorkspaceEditDto | undefined>;\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): PromiseLike<RenameLocation | undefined>;\n    $provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: CancellationToken): Promise<BinaryBuffer | null>;\n    $releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void;\n    $provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: Range, token: CancellationToken): Promise<BinaryBuffer | null>;\n    $provideRootDefinition(handle: number, resource: UriComponents, location: Position, token: CancellationToken): Promise<CallHierarchyDefinition | undefined>;\n    $provideCallers(handle: number, definition: CallHierarchyDefinition, token: CancellationToken): Promise<CallHierarchyReference[] | undefined>;\n}\n\nexport const LanguagesMainFactory = Symbol('LanguagesMainFactory');\nexport interface LanguagesMainFactory {\n    (proxy: RPCProtocol): LanguagesMain;\n}\n\nexport const OutputChannelRegistryFactory = Symbol('OutputChannelRegistryFactory');\nexport interface OutputChannelRegistryFactory {\n    (): OutputChannelRegistryMain;\n}\n\nexport interface LanguagesMain {\n    $getLanguages(): Promise<string[]>;\n    $changeLanguage(resource: UriComponents, languageId: string): Promise<void>;\n    $setLanguageConfiguration(handle: number, languageId: string, configuration: SerializedLanguageConfiguration): void;\n    $unregister(handle: number): void;\n    $registerCompletionSupport(handle: number, pluginInfo: PluginInfo,\n        selector: SerializedDocumentFilter[], triggerCharacters: string[], supportsResolveDetails: boolean): void;\n    $registerImplementationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerTypeDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDeclarationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerReferenceProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerSignatureHelpProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], metadata: theia.SignatureHelpProviderMetadata): void;\n    $registerHoverProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentHighlightProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerQuickFixProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], codeActionKinds?: string[]): void;\n    $clearDiagnostics(id: string): void;\n    $changeDiagnostics(id: string, delta: [string, MarkerData[]][]): void;\n    $registerDocumentFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRangeFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerOnTypeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], autoFormatTriggerCharacters: string[]): void;\n    $registerDocumentLinkProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerCodeLensSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], eventHandle?: number): void;\n    $emitCodeLensEvent(eventHandle: number, event?: any): void;\n    $registerOutlineSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerWorkspaceSymbolProvider(handle: number, pluginInfo: PluginInfo): void;\n    $registerFoldingRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerSelectionRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentColorProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRenameProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], supportsResolveInitialValues: boolean): void;\n    $registerDocumentSemanticTokensProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[],\n        legend: theia.SemanticTokensLegend, eventHandle: number | undefined): void;\n    $emitDocumentSemanticTokensEvent(eventHandle: number): void;\n    $registerDocumentRangeSemanticTokensProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], legend: theia.SemanticTokensLegend): void;\n    $registerCallHierarchyProvider(handle: number, selector: SerializedDocumentFilter[]): void;\n}\n\nexport interface WebviewInitData {\n    webviewResourceRoot: string\n    webviewCspSource: string\n}\n\nexport interface WebviewPanelViewState {\n    readonly active: boolean;\n    readonly visible: boolean;\n    readonly position: number;\n}\n\nexport interface WebviewsExt {\n    $onMessage(handle: string, message: any): void;\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void;\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void>;\n    $deserializeWebviewPanel(newWebviewHandle: string,\n        viewType: string,\n        title: string,\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void>;\n}\n\nexport interface WebviewsMain {\n    $createWebviewPanel(handle: string,\n        viewType: string,\n        title: string,\n        showOptions: theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions): void;\n    $disposeWebview(handle: string): void;\n    $reveal(handle: string, showOptions: theia.WebviewPanelShowOptions): void;\n    $setTitle(handle: string, value: string): void;\n    $setIconPath(handle: string, value: IconUrl | undefined): void;\n    $setHtml(handle: string, value: string): void;\n    $setOptions(handle: string, options: theia.WebviewOptions): void;\n    $postMessage(handle: string, value: any): Thenable<boolean>;\n\n    $registerSerializer(viewType: string): void;\n    $unregisterSerializer(viewType: string): void;\n}\n\nexport interface CustomEditorsExt {\n    $resolveWebviewEditor(\n        resource: UriComponents,\n        newWebviewHandle: string,\n        viewType: string,\n        title: string,\n        position: number,\n        options: theia.WebviewPanelOptions,\n        cancellation: CancellationToken): Promise<void>;\n    $createCustomDocument(resource: UriComponents, viewType: string, backupId: string | undefined, cancellation: CancellationToken): Promise<{ editable: boolean }>;\n    $disposeCustomDocument(resource: UriComponents, viewType: string): Promise<void>;\n    $undo(resource: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void>;\n    $redo(resource: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void>;\n    $revert(resource: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void>;\n    $disposeEdits(resourceComponents: UriComponents, viewType: string, editIds: number[]): void;\n    $onSave(resource: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void>;\n    $onSaveAs(resource: UriComponents, viewType: string, targetResource: UriComponents, cancellation: CancellationToken): Promise<void>;\n    // $backup(resource: UriComponents, viewType: string, cancellation: CancellationToken): Promise<string>;\n    $onMoveCustomEditor(handle: string, newResource: UriComponents, viewType: string): Promise<void>;\n}\n\nexport interface CustomTextEditorCapabilities {\n    readonly supportsMove?: boolean;\n}\n\nexport interface CustomEditorsMain {\n    $registerTextEditorProvider(viewType: string, options: theia.WebviewPanelOptions, capabilities: CustomTextEditorCapabilities): void;\n    $registerCustomEditorProvider(viewType: string, options: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument: boolean): void;\n    $unregisterEditorProvider(viewType: string): void;\n    $createCustomEditorPanel(handle: string, title: string, viewColumn: theia.ViewColumn | undefined, options: theia.WebviewPanelOptions & theia.WebviewOptions): Promise<void>;\n    $onDidEdit(resource: UriComponents, viewType: string, editId: number, label: string | undefined): void;\n    $onContentChange(resource: UriComponents, viewType: string): void;\n}\n\nexport interface StorageMain {\n    $set(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean>;\n    $get(key: string, isGlobal: boolean): Promise<KeysToAnyValues>;\n    $getAll(isGlobal: boolean): Promise<KeysToKeysToAnyValue>;\n}\n\nexport interface StorageExt {\n    $updatePluginsWorkspaceData(data: KeysToKeysToAnyValue): void;\n}\n\nexport interface DebugExt {\n    $onSessionCustomEvent(sessionId: string, event: string, body?: any): void;\n    $breakpointsDidChange(added: Breakpoint[], removed: string[], changed: Breakpoint[]): void;\n    $sessionDidCreate(sessionId: string): void;\n    $sessionDidDestroy(sessionId: string): void;\n    $sessionDidChange(sessionId: string | undefined): void;\n    $provideDebugConfigurations(debugType: string, workspaceFolder: string | undefined): Promise<theia.DebugConfiguration[]>;\n    $resolveDebugConfigurations(debugConfiguration: theia.DebugConfiguration, workspaceFolder: string | undefined): Promise<theia.DebugConfiguration | undefined>;\n    $resolveDebugConfigurationWithSubstitutedVariables(debugConfiguration: theia.DebugConfiguration, workspaceFolder: string | undefined):\n        Promise<theia.DebugConfiguration | undefined>;\n    $createDebugSession(debugConfiguration: theia.DebugConfiguration): Promise<string>;\n    $terminateDebugSession(sessionId: string): Promise<void>;\n    $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined>;\n}\n\nexport interface DebugMain {\n    $appendToDebugConsole(value: string): Promise<void>;\n    $appendLineToDebugConsole(value: string): Promise<void>;\n    $registerDebuggerContribution(description: DebuggerDescription): Promise<void>;\n    $unregisterDebuggerConfiguration(debugType: string): Promise<void>;\n    $addBreakpoints(breakpoints: Breakpoint[]): Promise<void>;\n    $removeBreakpoints(breakpoints: string[]): Promise<void>;\n    $startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration): Promise<boolean>;\n    $customRequest(sessionId: string, command: string, args?: any): Promise<DebugProtocol.Response>;\n}\n\nexport interface FileSystemExt {\n    $stat(handle: number, resource: UriComponents): Promise<files.Stat>;\n    $readdir(handle: number, resource: UriComponents): Promise<[string, files.FileType][]>;\n    $readFile(handle: number, resource: UriComponents): Promise<BinaryBuffer>;\n    $writeFile(handle: number, resource: UriComponents, content: BinaryBuffer, opts: files.FileWriteOptions): Promise<void>;\n    $rename(handle: number, resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $copy(handle: number, resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $mkdir(handle: number, resource: UriComponents): Promise<void>;\n    $delete(handle: number, resource: UriComponents, opts: files.FileDeleteOptions): Promise<void>;\n    $watch(handle: number, session: number, resource: UriComponents, opts: files.WatchOptions): void;\n    $unwatch(handle: number, session: number): void;\n    $open(handle: number, resource: UriComponents, opts: files.FileOpenOptions): Promise<number>;\n    $close(handle: number, fd: number): Promise<void>;\n    $read(handle: number, fd: number, pos: number, length: number): Promise<BinaryBuffer>;\n    $write(handle: number, fd: number, pos: number, data: BinaryBuffer): Promise<number>;\n}\n\nexport interface IFileChangeDto {\n    resource: UriComponents;\n    type: files.FileChangeType;\n}\n\nexport interface FileSystemMain {\n    $registerFileSystemProvider(handle: number, scheme: string, capabilities: files.FileSystemProviderCapabilities): void;\n    $unregisterProvider(handle: number): void;\n    $onFileSystemChange(handle: number, resource: IFileChangeDto[]): void;\n\n    $stat(uri: UriComponents): Promise<files.Stat>;\n    $readdir(resource: UriComponents): Promise<[string, files.FileType][]>;\n    $readFile(resource: UriComponents): Promise<BinaryBuffer>;\n    $writeFile(resource: UriComponents, content: BinaryBuffer): Promise<void>;\n    $rename(resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $copy(resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $mkdir(resource: UriComponents): Promise<void>;\n    $delete(resource: UriComponents, opts: files.FileDeleteOptions): Promise<void>;\n}\n\nexport interface FileSystemEvents {\n    created: UriComponents[];\n    changed: UriComponents[];\n    deleted: UriComponents[];\n}\n\nexport interface ExtHostFileSystemEventServiceShape {\n    $onFileEvent(events: FileSystemEvents): void;\n    $onWillRunFileOperation(operation: files.FileOperation, target: UriComponents, source: UriComponents | undefined, timeout: number, token: CancellationToken): Promise<any>;\n    $onDidRunFileOperation(operation: files.FileOperation, target: UriComponents, source: UriComponents | undefined): void;\n}\n\nexport interface ClipboardMain {\n    $readText(): Promise<string>;\n    $writeText(value: string): Promise<void>;\n}\n\nexport interface CommentsExt {\n    $createCommentThreadTemplate(commentControllerHandle: number, uriComponents: UriComponents, range: Range): void;\n    $updateCommentThreadTemplate(commentControllerHandle: number, threadHandle: number, range: Range): Promise<void>;\n    $deleteCommentThread(commentControllerHandle: number, commentThreadHandle: number): Promise<void>;\n    $provideCommentingRanges(commentControllerHandle: number, uriComponents: UriComponents, token: CancellationToken): Promise<Range[] | undefined>;\n}\n\nexport interface CommentProviderFeatures {\n    options?: CommentOptions;\n}\n\nexport type CommentThreadChanges = Partial<{\n    range: Range,\n    label: string,\n    contextValue: string,\n    comments: Comment[],\n    collapseState: CommentThreadCollapsibleState;\n}>;\n\nexport interface CommentsMain {\n    $registerCommentController(handle: number, id: string, label: string): void;\n    $unregisterCommentController(handle: number): void;\n    $updateCommentControllerFeatures(handle: number, features: CommentProviderFeatures): void;\n    $createCommentThread(handle: number, commentThreadHandle: number, threadId: string, resource: UriComponents, range: Range, extensionId: string): CommentThread | undefined;\n    $updateCommentThread(handle: number, commentThreadHandle: number, threadId: string, resource: UriComponents, changes: CommentThreadChanges): void;\n    $deleteCommentThread(handle: number, commentThreadHandle: number): void;\n    $onDidCommentThreadsChange(handle: number, event: CommentThreadChangedEvent): void;\n}\n\nexport const PLUGIN_RPC_CONTEXT = {\n    AUTHENTICATION_MAIN: <ProxyIdentifier<AuthenticationMain>>createProxyIdentifier<AuthenticationMain>('AuthenticationMain'),\n    COMMAND_REGISTRY_MAIN: <ProxyIdentifier<CommandRegistryMain>>createProxyIdentifier<CommandRegistryMain>('CommandRegistryMain'),\n    QUICK_OPEN_MAIN: createProxyIdentifier<QuickOpenMain>('QuickOpenMain'),\n    DIALOGS_MAIN: createProxyIdentifier<DialogsMain>('DialogsMain'),\n    WORKSPACE_MAIN: createProxyIdentifier<WorkspaceMain>('WorkspaceMain'),\n    MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<MessageRegistryMain>>createProxyIdentifier<MessageRegistryMain>('MessageRegistryMain'),\n    TEXT_EDITORS_MAIN: createProxyIdentifier<TextEditorsMain>('TextEditorsMain'),\n    DOCUMENTS_MAIN: createProxyIdentifier<DocumentsMain>('DocumentsMain'),\n    STATUS_BAR_MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<StatusBarMessageRegistryMain>>createProxyIdentifier<StatusBarMessageRegistryMain>('StatusBarMessageRegistryMain'),\n    ENV_MAIN: createProxyIdentifier<EnvMain>('EnvMain'),\n    NOTIFICATION_MAIN: createProxyIdentifier<NotificationMain>('NotificationMain'),\n    TERMINAL_MAIN: createProxyIdentifier<TerminalServiceMain>('TerminalServiceMain'),\n    TREE_VIEWS_MAIN: createProxyIdentifier<TreeViewsMain>('TreeViewsMain'),\n    PREFERENCE_REGISTRY_MAIN: createProxyIdentifier<PreferenceRegistryMain>('PreferenceRegistryMain'),\n    OUTPUT_CHANNEL_REGISTRY_MAIN: <ProxyIdentifier<OutputChannelRegistryMain>>createProxyIdentifier<OutputChannelRegistryMain>('OutputChannelRegistryMain'),\n    LANGUAGES_MAIN: createProxyIdentifier<LanguagesMain>('LanguagesMain'),\n    CONNECTION_MAIN: createProxyIdentifier<ConnectionMain>('ConnectionMain'),\n    WEBVIEWS_MAIN: createProxyIdentifier<WebviewsMain>('WebviewsMain'),\n    CUSTOM_EDITORS_MAIN: createProxyIdentifier<CustomEditorsMain>('CustomEditorsMain'),\n    STORAGE_MAIN: createProxyIdentifier<StorageMain>('StorageMain'),\n    TASKS_MAIN: createProxyIdentifier<TasksMain>('TasksMain'),\n    DEBUG_MAIN: createProxyIdentifier<DebugMain>('DebugMain'),\n    FILE_SYSTEM_MAIN: createProxyIdentifier<FileSystemMain>('FileSystemMain'),\n    SCM_MAIN: createProxyIdentifier<ScmMain>('ScmMain'),\n    SECRETS_MAIN: createProxyIdentifier<SecretsMain>('SecretsMain'),\n    DECORATIONS_MAIN: createProxyIdentifier<DecorationsMain>('DecorationsMain'),\n    WINDOW_MAIN: createProxyIdentifier<WindowMain>('WindowMain'),\n    CLIPBOARD_MAIN: <ProxyIdentifier<ClipboardMain>>createProxyIdentifier<ClipboardMain>('ClipboardMain'),\n    LABEL_SERVICE_MAIN: <ProxyIdentifier<LabelServiceMain>>createProxyIdentifier<LabelServiceMain>('LabelServiceMain'),\n    TIMELINE_MAIN: <ProxyIdentifier<TimelineMain>>createProxyIdentifier<TimelineMain>('TimelineMain'),\n    THEMING_MAIN: <ProxyIdentifier<ThemingMain>>createProxyIdentifier<ThemingMain>('ThemingMain'),\n    COMMENTS_MAIN: <ProxyIdentifier<CommentsMain>>createProxyIdentifier<CommentsMain>('CommentsMain')\n};\n\nexport const MAIN_RPC_CONTEXT = {\n    AUTHENTICATION_EXT: createProxyIdentifier<AuthenticationExt>('AuthenticationExt'),\n    HOSTED_PLUGIN_MANAGER_EXT: createProxyIdentifier<PluginManagerExt>('PluginManagerExt'),\n    COMMAND_REGISTRY_EXT: createProxyIdentifier<CommandRegistryExt>('CommandRegistryExt'),\n    QUICK_OPEN_EXT: createProxyIdentifier<QuickOpenExt>('QuickOpenExt'),\n    WINDOW_STATE_EXT: createProxyIdentifier<WindowStateExt>('WindowStateExt'),\n    NOTIFICATION_EXT: createProxyIdentifier<NotificationExt>('NotificationExt'),\n    WORKSPACE_EXT: createProxyIdentifier<WorkspaceExt>('WorkspaceExt'),\n    TEXT_EDITORS_EXT: createProxyIdentifier<TextEditorsExt>('TextEditorsExt'),\n    EDITORS_AND_DOCUMENTS_EXT: createProxyIdentifier<EditorsAndDocumentsExt>('EditorsAndDocumentsExt'),\n    DOCUMENTS_EXT: createProxyIdentifier<DocumentsExt>('DocumentsExt'),\n    TERMINAL_EXT: createProxyIdentifier<TerminalServiceExt>('TerminalServiceExt'),\n    OUTPUT_CHANNEL_REGISTRY_EXT: createProxyIdentifier<OutputChannelRegistryExt>('OutputChannelRegistryExt'),\n    TREE_VIEWS_EXT: createProxyIdentifier<TreeViewsExt>('TreeViewsExt'),\n    PREFERENCE_REGISTRY_EXT: createProxyIdentifier<PreferenceRegistryExt>('PreferenceRegistryExt'),\n    LANGUAGES_EXT: createProxyIdentifier<LanguagesExt>('LanguagesExt'),\n    CONNECTION_EXT: createProxyIdentifier<ConnectionExt>('ConnectionExt'),\n    WEBVIEWS_EXT: createProxyIdentifier<WebviewsExt>('WebviewsExt'),\n    CUSTOM_EDITORS_EXT: createProxyIdentifier<CustomEditorsExt>('CustomEditorsExt'),\n    STORAGE_EXT: createProxyIdentifier<StorageExt>('StorageExt'),\n    TASKS_EXT: createProxyIdentifier<TasksExt>('TasksExt'),\n    DEBUG_EXT: createProxyIdentifier<DebugExt>('DebugExt'),\n    FILE_SYSTEM_EXT: createProxyIdentifier<FileSystemExt>('FileSystemExt'),\n    ExtHostFileSystemEventService: createProxyIdentifier<ExtHostFileSystemEventServiceShape>('ExtHostFileSystemEventService'),\n    SCM_EXT: createProxyIdentifier<ScmExt>('ScmExt'),\n    SECRETS_EXT: createProxyIdentifier<SecretsExt>('SecretsExt'),\n    DECORATIONS_EXT: createProxyIdentifier<DecorationsExt>('DecorationsExt'),\n    LABEL_SERVICE_EXT: createProxyIdentifier<LabelServiceExt>('LabelServiceExt'),\n    TIMELINE_EXT: createProxyIdentifier<TimelineExt>('TimeLineExt'),\n    THEMING_EXT: createProxyIdentifier<ThemingExt>('ThemingExt'),\n    COMMENTS_EXT: createProxyIdentifier<CommentsExt>('CommentsExt')\n};\n\nexport interface TasksExt {\n    $provideTasks(handle: number, token?: CancellationToken): Promise<TaskDto[] | undefined>;\n    $resolveTask(handle: number, task: TaskDto, token?: CancellationToken): Promise<TaskDto | undefined>;\n    $onDidStartTask(execution: TaskExecutionDto, terminalId: number): void;\n    $onDidEndTask(id: number): void;\n    $onDidStartTaskProcess(processId: number | undefined, execution: TaskExecutionDto): void;\n    $onDidEndTaskProcess(exitCode: number | undefined, taskId: number): void;\n}\n\nexport interface TasksMain {\n    $registerTaskProvider(handle: number, type: string): void;\n    $fetchTasks(taskVersion: string | undefined, taskType: string | undefined): Promise<TaskDto[]>;\n    $executeTask(taskDto: TaskDto): Promise<TaskExecutionDto | undefined>;\n    $taskExecutions(): Promise<TaskExecutionDto[]>;\n    $unregister(handle: number): void;\n    $terminateTask(id: number): void;\n    $customExecutionComplete(id: number, exitCode: number | undefined): void;\n}\n\nexport interface AuthenticationExt {\n    $getSessions(id: string): Promise<ReadonlyArray<AuthenticationSession>>;\n    $login(id: string, scopes: string[]): Promise<AuthenticationSession>;\n    $logout(id: string, sessionId: string): Promise<void>;\n    $onDidChangeAuthenticationSessions(id: string, label: string, event: AuthenticationSessionsChangeEvent): Promise<void>;\n    $onDidChangeAuthenticationProviders(added: AuthenticationProviderInformation[], removed: AuthenticationProviderInformation[]): Promise<void>;\n}\n\nexport interface AuthenticationMain {\n    $registerAuthenticationProvider(id: string, label: string, supportsMultipleAccounts: boolean): void;\n    $unregisterAuthenticationProvider(id: string): void;\n    $getProviderIds(): Promise<string[]>;\n    $updateSessions(providerId: string, event: AuthenticationSessionsChangeEvent): void;\n    $getSession(providerId: string, scopes: string[], extensionId: string, extensionName: string,\n        options: { createIfNone?: boolean, clearSessionPreference?: boolean }): Promise<theia.AuthenticationSession | undefined>;\n    $logout(providerId: string, sessionId: string): Promise<void>;\n}\n\nexport interface RawColorInfo {\n    color: [number, number, number, number];\n    range: Range;\n}\n\nexport interface LabelServiceExt {\n    $registerResourceLabelFormatter(formatter: ResourceLabelFormatter): theia.Disposable;\n}\n\nexport interface LabelServiceMain {\n    $registerResourceLabelFormatter(handle: number, formatter: ResourceLabelFormatter): void;\n    $unregisterResourceLabelFormatter(handle: number): void;\n}\n\nexport interface SecretsExt {\n    $onDidChangePassword(e: { extensionId: string, key: string }): Promise<void>;\n}\n\nexport interface SecretsMain {\n    $getPassword(extensionId: string, key: string): Promise<string | undefined>;\n    $setPassword(extensionId: string, key: string, value: string): Promise<void>;\n    $deletePassword(extensionId: string, key: string): Promise<void>;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { RPCProtocol } from './rpc-protocol';\nimport { PluginManager, Plugin } from './plugin-api-rpc';\nimport { interfaces } from '@theia/core/shared/inversify';\n\nexport const ExtPluginApiProvider = 'extPluginApi';\n/**\n * Provider for extension API description\n */\nexport interface ExtPluginApiProvider {\n    /**\n     * Provide API description\n     */\n    provideApi(): ExtPluginApi;\n}\n\n/**\n * Plugin API extension description.\n * This interface describes scripts for both plugin runtimes: frontend(WebWorker) and backend(NodeJs)\n */\nexport interface ExtPluginApi {\n\n    /**\n     * Path to the script which should be loaded to provide api, module should export `provideApi` function with\n     * [ExtPluginApiBackendInitializationFn](#ExtPluginApiBackendInitializationFn) signature\n     */\n    backendInitPath?: string;\n\n    /**\n     * Initialization information for frontend part of Plugin API\n     */\n    frontendExtApi?: FrontendExtPluginApi;\n}\n\nexport interface ExtPluginApiFrontendInitializationFn {\n    (rpc: RPCProtocol, plugins: Map<string, Plugin>): void;\n}\n\nexport interface ExtPluginApiBackendInitializationFn {\n    (rpc: RPCProtocol, pluginManager: PluginManager): void;\n}\n\n/**\n * Interface contains information for frontend(WebWorker) Plugin API extension initialization\n */\nexport interface FrontendExtPluginApi {\n    /**\n     * path to js file\n     */\n    initPath: string;\n    /** global variable name */\n    initVariable: string;\n    /**\n     * init function name,\n     * function should have  [ExtPluginApiFrontendInitializationFn](#ExtPluginApiFrontendInitializationFn)\n     */\n    initFunction: string;\n}\n\nexport const MainPluginApiProvider = Symbol('mainPluginApi');\n\n/**\n * Implementation should contains main(Theia) part of new namespace in Plugin API.\n * [initialize](#initialize) will be called once per plugin runtime\n */\nexport interface MainPluginApiProvider {\n    initialize(rpc: RPCProtocol, container: interfaces.Container): void;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DataCallback, Emitter, Event, PartialMessageInfo } from '@theia/core/shared/vscode-ws-jsonrpc';\n\nexport abstract class AbstractMessageReader {\n    protected errorEmitter = new Emitter<Error>();\n    protected closeEmitter = new Emitter<void>();\n    protected partialMessageEmitter = new Emitter<PartialMessageInfo>();\n    dispose(): void {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError(): Event<Error> {\n        return this.errorEmitter.event;\n    }\n    fireError(error: Error): void {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose(): Event<void> {\n        return this.closeEmitter.event;\n    }\n    fireClose(): void {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage(): Event<PartialMessageInfo> {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info: PartialMessageInfo): void {\n        this.partialMessageEmitter.fire(info);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    asError(error: any): Error {\n        if (error instanceof Error) {\n            return error;\n        } else {\n            return new Error(`Reader received error. Reason: ${typeof error.message === 'string' ? error.message : 'unknown'}`);\n        }\n    }\n}\n\n/**\n * Support for reading string message through RPC protocol.\n */\nexport class PluginMessageReader extends AbstractMessageReader {\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback: DataCallback | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected readonly events: { message?: any, error?: any }[] = [];\n\n    constructor() {\n        super();\n    }\n\n    listen(callback: DataCallback): void {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            while (this.events.length !== 0) {\n                const event = this.events.pop()!;\n                if (event.message) {\n                    this.readMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                } else {\n                    this.fireClose();\n                }\n            }\n        }\n    }\n\n    readMessage(message: string): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    fireError(error: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n    fireClose(): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, {});\n        } else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Message, MessageWriter, Emitter, Event } from '@theia/core/shared/vscode-ws-jsonrpc';\nimport { ConnectionMain, ConnectionExt } from './plugin-api-rpc';\n\nexport abstract class AbstractMessageWriter {\n    protected errorEmitter = new Emitter<[Error, Message | undefined, number | undefined]>();\n    protected closeEmitter = new Emitter<void>();\n    dispose(): void {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError(): Event<[Error, Message | undefined, number | undefined]> {\n        return this.errorEmitter.event;\n    }\n    fireError(error: Error, message: Message | undefined, count: number | undefined): void {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose(): Event<void> {\n        return this.closeEmitter.event;\n    }\n    fireClose(): void {\n        this.closeEmitter.fire(undefined);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    asError(error: any): Error {\n        if (error instanceof Error) {\n            return error;\n        } else {\n            return new Error(`Writer received error. Reason: ${typeof error.message === 'string' ? error.message : 'unknown'}`);\n        }\n    }\n}\n\n/**\n * Support for writing string message through RPC protocol.\n */\nexport class PluginMessageWriter extends AbstractMessageWriter implements MessageWriter {\n    constructor(\n        protected readonly id: string,\n        protected readonly proxy: ConnectionMain | ConnectionExt) {\n        super();\n    }\n\n    write(message: string): void;\n    write(message: Message): void;\n    write(arg: string | Message): void {\n        const content = JSON.stringify(arg);\n        this.proxy.$sendMessage(this.id, content);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { JsonRpcServer } from '@theia/core/lib/common/messaging/proxy-factory';\nimport { RPCProtocol } from './rpc-protocol';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LogPart, KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport { CharacterPair, CommentRule, PluginAPIFactory, Plugin } from './plugin-api-rpc';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { IJSONSchema, IJSONSchemaSnippet } from '@theia/core/lib/common/json-schema';\nimport { RecursivePartial } from '@theia/core/lib/common/types';\nimport { PreferenceSchema, PreferenceSchemaProperties } from '@theia/core/lib/common/preferences/preference-schema';\nimport { ProblemMatcherContribution, ProblemPatternContribution, TaskDefinition } from '@theia/task/lib/common';\nimport { ColorDefinition } from '@theia/core/lib/browser/color-registry';\nimport { ResourceLabelFormatter } from '@theia/core/lib/common/label-protocol';\n\nexport const hostedServicePath = '/services/hostedPlugin';\n\n/**\n * Plugin engine (API) type, i.e. 'theiaPlugin', 'vscode', etc.\n */\nexport type PluginEngine = string;\n\n/**\n * This interface describes a package.json object.\n */\nexport interface PluginPackage {\n    name: string;\n    publisher: string;\n    version: string;\n    engines: {\n        [type in PluginEngine]: string;\n    };\n    theiaPlugin?: {\n        frontend?: string;\n        backend?: string;\n    };\n    main?: string;\n    displayName: string;\n    description: string;\n    contributes?: PluginPackageContribution;\n    packagePath: string;\n    activationEvents?: string[];\n    extensionDependencies?: string[];\n    extensionPack?: string[];\n    icon?: string;\n}\nexport namespace PluginPackage {\n    export function toPluginUrl(pck: PluginPackage | PluginModel, relativePath: string): string {\n        return `hostedPlugin/${getPluginId(pck)}/${encodeURIComponent(relativePath)}`;\n    }\n}\n\n/**\n * This interface describes a package.json contribution section object.\n */\nexport interface PluginPackageContribution {\n    configuration?: RecursivePartial<PreferenceSchema> | RecursivePartial<PreferenceSchema>[];\n    configurationDefaults?: RecursivePartial<PreferenceSchemaProperties>;\n    languages?: PluginPackageLanguageContribution[];\n    grammars?: PluginPackageGrammarsContribution[];\n    customEditors?: PluginPackageCustomEditor[];\n    viewsContainers?: { [location: string]: PluginPackageViewContainer[] };\n    views?: { [location: string]: PluginPackageView[] };\n    viewsWelcome?: PluginPackageViewWelcome[];\n    commands?: PluginPackageCommand | PluginPackageCommand[];\n    menus?: { [location: string]: PluginPackageMenu[] };\n    submenus?: PluginPackageSubmenu[];\n    keybindings?: PluginPackageKeybinding | PluginPackageKeybinding[];\n    debuggers?: PluginPackageDebuggersContribution[];\n    snippets?: PluginPackageSnippetsContribution[];\n    themes?: PluginThemeContribution[];\n    iconThemes?: PluginIconThemeContribution[];\n    colors?: PluginColorContribution[];\n    taskDefinitions?: PluginTaskDefinitionContribution[];\n    problemMatchers?: PluginProblemMatcherContribution[];\n    problemPatterns?: PluginProblemPatternContribution[];\n    jsonValidation?: PluginJsonValidationContribution[];\n    resourceLabelFormatters?: ResourceLabelFormatter[];\n}\n\nexport interface PluginPackageCustomEditor {\n    viewType: string;\n    displayName: string;\n    selector?: CustomEditorSelector[];\n    priority?: CustomEditorPriority;\n}\n\nexport interface CustomEditorSelector {\n    readonly filenamePattern?: string;\n}\n\nexport enum CustomEditorPriority {\n    default = 'default',\n    builtin = 'builtin',\n    option = 'option',\n}\n\nexport interface PluginPackageViewContainer {\n    id: string;\n    title: string;\n    icon: string;\n}\n\nexport interface PluginPackageView {\n    id: string;\n    name: string;\n    when?: string;\n}\n\nexport interface PluginPackageViewWelcome {\n    view: string;\n    contents: string;\n    when?: string;\n}\n\nexport interface PluginPackageCommand {\n    command: string;\n    title: string;\n    category?: string;\n    icon?: string | { light: string; dark: string; };\n    enablement?: string;\n}\n\nexport interface PluginPackageMenu {\n    command?: string;\n    submenu?: string;\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\nexport interface PluginPackageSubmenu {\n    id: string;\n    label: string;\n}\n\nexport interface PluginPackageKeybinding {\n    key?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args?: any;\n}\n\nexport interface PluginPackageGrammarsContribution {\n    language?: string;\n    scopeName: string;\n    path: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\nexport interface ScopeMap {\n    [scopeName: string]: string;\n}\n\nexport interface PluginPackageSnippetsContribution {\n    language?: string;\n    path?: string;\n}\n\nexport interface PluginColorContribution {\n    id?: string;\n    description?: string;\n    defaults?: { light?: string, dark?: string, highContrast?: string };\n}\n\nexport type PluginUiTheme = 'vs' | 'vs-dark' | 'hc-black';\n\nexport interface PluginThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    path?: string;\n    uiTheme?: PluginUiTheme;\n}\n\nexport interface PluginIconThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    path?: string;\n    uiTheme?: PluginUiTheme;\n}\n\nexport interface PlatformSpecificAdapterContribution {\n    program?: string;\n    args?: string[];\n    runtime?: string;\n    runtimeArgs?: string[];\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface PluginPackageDebuggersContribution extends PlatformSpecificAdapterContribution {\n    type: string;\n    label?: string;\n    languages?: string[];\n    enableBreakpointsFor?: { languageIds: string[] };\n    configurationAttributes: { [request: string]: IJSONSchema };\n    configurationSnippets: IJSONSchemaSnippet[];\n    variables?: ScopeMap;\n    adapterExecutableCommand?: string;\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\n/**\n * This interface describes a package.json languages contribution section object.\n */\nexport interface PluginPackageLanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: string;\n}\n\nexport interface PluginPackageLanguageContributionConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    autoClosingPairs?: (CharacterPair | AutoClosingPairConditional)[];\n    surroundingPairs?: (CharacterPair | AutoClosingPair)[];\n    wordPattern?: string;\n    indentationRules?: IndentationRules;\n    folding?: FoldingRules;\n}\n\nexport interface PluginTaskDefinitionContribution {\n    type: string;\n    required: string[];\n    properties?: {\n        [name: string]: {\n            type: string;\n            description?: string;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            [additionalProperty: string]: any;\n        }\n    }\n}\n\nexport interface PluginProblemMatcherContribution extends ProblemMatcherContribution {\n    name: string;\n}\n\nexport interface PluginProblemPatternContribution extends ProblemPatternContribution {\n    name: string;\n}\n\nexport interface PluginJsonValidationContribution {\n    fileMatch: string | string[];\n    url: string;\n}\n\nexport const PluginScanner = Symbol('PluginScanner');\n/**\n * This scanner process package.json object and returns plugin metadata objects.\n */\nexport interface PluginScanner {\n    /**\n     * The type of plugin's API (engine name)\n     */\n    apiType: PluginEngine;\n\n    /**\n     * Creates plugin's model.\n     *\n     * @param {PluginPackage} plugin\n     * @returns {PluginModel}\n     */\n    getModel(plugin: PluginPackage): PluginModel;\n\n    /**\n     * Creates plugin's lifecycle.\n     *\n     * @returns {PluginLifecycle}\n     */\n    getLifecycle(plugin: PluginPackage): PluginLifecycle;\n\n    getContribution(plugin: PluginPackage): PluginContribution | undefined;\n\n    /**\n     * A mapping between a dependency as its defined in package.json\n     * and its deployable form, e.g. `publisher.name` -> `vscode:extension/publisher.name`\n     */\n    getDependencies(plugin: PluginPackage): Map<string, string> | undefined;\n}\n\n/**\n * A plugin resolver is handling how to resolve a plugin link into a local resource.\n */\nexport const PluginDeployerResolver = Symbol('PluginDeployerResolver');\n/**\n * A resolver handle a set of resource\n */\nexport interface PluginDeployerResolver {\n\n    init?(pluginDeployerResolverInit: PluginDeployerResolverInit): void;\n\n    accept(pluginSourceId: string): boolean;\n\n    resolve(pluginResolverContext: PluginDeployerResolverContext): Promise<void>;\n\n}\n\nexport const PluginDeployerDirectoryHandler = Symbol('PluginDeployerDirectoryHandler');\nexport interface PluginDeployerDirectoryHandler {\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerDirectoryHandlerContext): Promise<void>;\n}\n\nexport const PluginDeployerFileHandler = Symbol('PluginDeployerFileHandler');\nexport interface PluginDeployerFileHandler {\n\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerFileHandlerContext): Promise<void>;\n}\n\nexport interface PluginDeployerResolverInit {\n\n}\n\nexport interface PluginDeployerResolverContext {\n\n    addPlugin(pluginId: string, path: string): void;\n\n    getPlugins(): PluginDeployerEntry[];\n\n    getOriginId(): string;\n\n}\n\nexport interface PluginDeployerStartContext {\n    readonly userEntries: string[]\n    readonly systemEntries: string[]\n}\n\nexport const PluginDeployer = Symbol('PluginDeployer');\nexport interface PluginDeployer {\n\n    start(): void;\n\n}\n\nexport const PluginDeployerParticipant = Symbol('PluginDeployerParticipant');\n/**\n * A participant can hook into the plugin deployer lifecycle.\n */\nexport interface PluginDeployerParticipant {\n    onWillStart?(context: PluginDeployerStartContext): Promise<void>;\n}\n\nexport enum PluginDeployerEntryType {\n\n    FRONTEND,\n\n    BACKEND\n}\n\n/**\n * Whether a plugin installed by a user or system.\n */\nexport enum PluginType {\n    System,\n    User\n};\n\nexport interface PluginDeployerEntry {\n\n    /**\n     * ID (before any resolution)\n     */\n    id(): string;\n\n    /**\n     * Original resolved path\n     */\n    originalPath(): string;\n\n    /**\n     * Local path on the filesystem.\n     */\n    path(): string;\n\n    /**\n     * Get a specific entry\n     */\n    getValue<T>(key: string): T;\n\n    /**\n     * Store a value\n     */\n    storeValue<T>(key: string, value: T): void;\n\n    /**\n     * Update path\n     */\n    updatePath(newPath: string): void;\n\n    getChanges(): string[];\n\n    isFile(): boolean;\n\n    isDirectory(): boolean;\n\n    /**\n     * Resolved if a resolver has handle this plugin\n     */\n    isResolved(): boolean;\n\n    resolvedBy(): string;\n\n    /**\n     * Accepted when a handler is telling this location can go live\n     */\n    isAccepted(...types: PluginDeployerEntryType[]): boolean;\n\n    accept(...types: PluginDeployerEntryType[]): void;\n\n    hasError(): boolean;\n\n    type: PluginType\n    /**\n     * A fs path to a directory where a plugin is located.\n     * Depending on a plugin format it can be different from `path`.\n     * Use `path` if you want to resolve something within a plugin, like `README.md` file.\n     * Use `rootPath` if you want to manipulate the entire plugin location, like delete or move it.\n     */\n    rootPath: string\n}\n\nexport interface PluginDeployerFileHandlerContext {\n\n    unzip(sourcePath: string, destPath: string): Promise<void>;\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\nexport interface PluginDeployerDirectoryHandlerContext {\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\n/**\n * This interface describes a plugin model object, which is populated from package.json.\n */\nexport interface PluginModel {\n    id: string;\n    name: string;\n    publisher: string;\n    version: string;\n    displayName: string;\n    description: string;\n    engine: {\n        type: PluginEngine;\n        version: string;\n    };\n    entryPoint: PluginEntryPoint;\n    packageUri: string;\n    /**\n     * @deprecated since 1.1.0 - because it lead to problems with getting a relative path\n     * needed by Icon Themes to correctly load Fonts, use packageUri instead.\n     */\n    packagePath: string;\n    iconUrl?: string;\n    readmeUrl?: string;\n    licenseUrl?: string;\n}\n\nexport interface PluginEntryPoint {\n    frontend?: string;\n    backend?: string;\n}\n\n/**\n * This interface describes some static plugin contributions.\n */\nexport interface PluginContribution {\n    activationEvents?: string[];\n    configuration?: PreferenceSchema[];\n    configurationDefaults?: PreferenceSchemaProperties;\n    languages?: LanguageContribution[];\n    grammars?: GrammarsContribution[];\n    customEditors?: CustomEditor[];\n    viewsContainers?: { [location: string]: ViewContainer[] };\n    views?: { [location: string]: View[] };\n    viewsWelcome?: ViewWelcome[];\n    commands?: PluginCommand[]\n    menus?: { [location: string]: Menu[] };\n    submenus?: Submenu[];\n    keybindings?: Keybinding[];\n    debuggers?: DebuggerContribution[];\n    snippets?: SnippetContribution[];\n    themes?: ThemeContribution[];\n    iconThemes?: IconThemeContribution[];\n    colors?: ColorDefinition[];\n    taskDefinitions?: TaskDefinition[];\n    problemMatchers?: ProblemMatcherContribution[];\n    problemPatterns?: ProblemPatternContribution[];\n    resourceLabelFormatters?: ResourceLabelFormatter[];\n}\n\nexport interface SnippetContribution {\n    uri: string\n    source: string\n    language?: string\n}\n\nexport type UiTheme = 'vs' | 'vs-dark' | 'hc-black';\n\nexport interface ThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n}\n\nexport interface IconThemeContribution {\n    id: string;\n    label?: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n}\n\nexport interface GrammarsContribution {\n    format: 'json' | 'plist';\n    language?: string;\n    scope: string;\n    grammar?: string | object;\n    grammarLocation?: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\n/**\n * The language contribution\n */\nexport interface LanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: LanguageConfiguration;\n}\n\nexport interface LanguageConfiguration {\n    brackets?: CharacterPair[];\n    indentationRules?: IndentationRules;\n    surroundingPairs?: AutoClosingPair[];\n    autoClosingPairs?: AutoClosingPairConditional[];\n    comments?: CommentRule;\n    folding?: FoldingRules;\n    wordPattern?: string;\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface DebuggerContribution extends PlatformSpecificAdapterContribution {\n    type: string,\n    label?: string,\n    languages?: string[],\n    enableBreakpointsFor?: {\n        languageIds: string[]\n    },\n    configurationAttributes?: IJSONSchema[],\n    configurationSnippets?: IJSONSchemaSnippet[],\n    variables?: ScopeMap,\n    adapterExecutableCommand?: string\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\nexport interface IndentationRules {\n    increaseIndentPattern: string;\n    decreaseIndentPattern: string;\n    unIndentedLinePattern?: string;\n    indentNextLinePattern?: string;\n}\nexport interface AutoClosingPair {\n    close: string;\n    open: string;\n}\n\nexport interface AutoClosingPairConditional extends AutoClosingPair {\n    notIn?: string[];\n}\n\nexport interface FoldingMarkers {\n    start: string;\n    end: string;\n}\n\nexport interface FoldingRules {\n    offSide?: boolean;\n    markers?: FoldingMarkers;\n}\n\n/**\n * Custom Editors contribution\n */\nexport interface CustomEditor {\n    viewType: string;\n    displayName: string;\n    selector: CustomEditorSelector[];\n    priority: CustomEditorPriority;\n}\n\n/**\n * Views Containers contribution\n */\nexport interface ViewContainer {\n    id: string;\n    title: string;\n    iconUrl: string;\n}\n\n/**\n * View contribution\n */\nexport interface View {\n    id: string;\n    name: string;\n    when?: string;\n}\n\n/**\n * View Welcome contribution\n */\nexport interface ViewWelcome {\n    view: string;\n    content: string;\n    when?: string;\n    order: number;\n}\n\nexport interface PluginCommand {\n    command: string;\n    title: string;\n    category?: string;\n    iconUrl?: IconUrl;\n    themeIcon?: string;\n    enablement?: string;\n}\n\nexport type IconUrl = string | { light: string; dark: string; };\n\n/**\n * Menu contribution\n */\nexport interface Menu {\n    command?: string;\n    submenu?: string\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\nexport interface Submenu {\n    id: string;\n    label: string;\n}\n\n/**\n * Keybinding contribution\n */\nexport interface Keybinding {\n    keybinding?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args?: any;\n}\n\n/**\n * This interface describes a plugin lifecycle object.\n */\nexport interface PluginLifecycle {\n    startMethod: string;\n    stopMethod: string;\n    /**\n     * Frontend module name, frontend plugin should expose this name.\n     */\n    frontendModuleName?: string;\n    /**\n     * Path to the script which should do some initialization before frontend plugin is loaded.\n     */\n    frontendInitPath?: string;\n    /**\n     * Path to the script which should do some initialization before backend plugin is loaded.\n     */\n    backendInitPath?: string;\n}\n\n/**\n * The export function of initialization module of backend plugin.\n */\nexport interface BackendInitializationFn {\n    (apiFactory: PluginAPIFactory, plugin: Plugin): void;\n}\n\nexport interface BackendLoadingFn {\n    (rpc: RPCProtocol, plugin: Plugin): void;\n}\n\nexport interface PluginContext {\n    subscriptions: Disposable[];\n}\n\nexport interface ExtensionContext {\n    subscriptions: Disposable[];\n}\n\nexport interface PluginMetadata {\n    host: string;\n    model: PluginModel;\n    lifecycle: PluginLifecycle;\n}\n\nexport const MetadataProcessor = Symbol('MetadataProcessor');\nexport interface MetadataProcessor {\n    process(pluginMetadata: PluginMetadata): void;\n}\n\nexport function getPluginId(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport function buildFrontendModuleName(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport const HostedPluginClient = Symbol('HostedPluginClient');\nexport interface HostedPluginClient {\n    postMessage(pluginHost: string, message: string): Promise<void>;\n\n    log(logPart: LogPart): void;\n\n    onDidDeploy(): void;\n}\n\nexport interface PluginDependencies {\n    metadata: PluginMetadata\n    mapping?: Map<string, string>\n}\n\nexport const PluginDeployerHandler = Symbol('PluginDeployerHandler');\nexport interface PluginDeployerHandler {\n    deployFrontendPlugins(frontendPlugins: PluginDeployerEntry[]): Promise<void>;\n    deployBackendPlugins(backendPlugins: PluginDeployerEntry[]): Promise<void>;\n\n    undeployPlugin(pluginId: string): Promise<boolean>;\n\n    getPluginDependencies(pluginToBeInstalled: PluginDeployerEntry): Promise<PluginDependencies | undefined>\n}\n\nexport interface GetDeployedPluginsParams {\n    pluginIds: string[]\n}\n\nexport interface DeployedPlugin {\n    /**\n     * defaults to system\n     */\n    type?: PluginType;\n    metadata: PluginMetadata;\n    contributes?: PluginContribution;\n}\n\nexport const HostedPluginServer = Symbol('HostedPluginServer');\nexport interface HostedPluginServer extends JsonRpcServer<HostedPluginClient> {\n\n    getDeployedPluginIds(): Promise<string[]>;\n\n    getDeployedPlugins(params: GetDeployedPluginsParams): Promise<DeployedPlugin[]>;\n\n    getExtPluginAPI(): Promise<ExtPluginApi[]>;\n\n    onMessage(targetHost: string, message: string): Promise<void>;\n\n}\n\nexport const PLUGIN_HOST_BACKEND = 'main';\n\nexport interface WorkspaceStorageKind {\n    workspace?: string | undefined;\n    roots: string[];\n}\nexport type GlobalStorageKind = undefined;\nexport type PluginStorageKind = GlobalStorageKind | WorkspaceStorageKind;\n\n/**\n * The JSON-RPC workspace interface.\n */\nexport const pluginServerJsonRpcPath = '/services/plugin-ext';\nexport const PluginServer = Symbol('PluginServer');\nexport interface PluginServer {\n\n    /**\n     * Deploy a plugin.\n     *\n     * @param type whether a plugin is installed by a system or a user, defaults to a user\n     */\n    deploy(pluginEntry: string, type?: PluginType): Promise<void>;\n\n    undeploy(pluginId: string): Promise<void>;\n\n    setStorageValue(key: string, value: KeysToAnyValues, kind: PluginStorageKind): Promise<boolean>;\n    getStorageValue(key: string, kind: PluginStorageKind): Promise<KeysToAnyValues>;\n    getAllStorageValues(kind: PluginStorageKind): Promise<KeysToKeysToAnyValue>;\n}\n\nexport const ServerPluginRunner = Symbol('ServerPluginRunner');\nexport interface ServerPluginRunner {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    acceptMessage(pluginHostId: string, jsonMessage: string): boolean;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onMessage(pluginHostId: string, jsonMessage: string): void;\n    setClient(client: HostedPluginClient): void;\n    setDefault(defaultRunner: ServerPluginRunner): void;\n    clientClosed(): void;\n\n    /**\n     * Provides additional deployed plugins.\n     */\n    getExtraDeployedPlugins(): Promise<DeployedPlugin[]>;\n\n    /**\n     * Provides additional plugin ids.\n     */\n    getExtraDeployedPluginIds(): Promise<string[]>;\n\n}\n\nexport const PluginHostEnvironmentVariable = Symbol('PluginHostEnvironmentVariable');\nexport interface PluginHostEnvironmentVariable {\n    process(env: NodeJS.ProcessEnv): void;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/extensions/node/rpcProtocol.ts\n// with small modifications\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { URI as VSCodeURI } from '@theia/core/shared/vscode-uri';\nimport URI from '@theia/core/lib/common/uri';\nimport { CancellationToken, CancellationTokenSource } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { Range, Position } from '../plugin/types-impl';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\nexport interface MessageConnection {\n    send(msg: string): void;\n    onMessage: Event<string>;\n}\n\nexport const RPCProtocol = Symbol('RPCProtocol');\nexport interface RPCProtocol extends Disposable {\n    /**\n     * Returns a proxy to an object addressable/named in the plugin process or in the main process.\n     */\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T;\n\n    /**\n     * Register manually created instance.\n     */\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R;\n\n}\n\nexport class ProxyIdentifier<T> {\n    public readonly id: string;\n    constructor(public readonly isMain: boolean, id: string | T) {\n        // TODO this is nasty, rewrite this\n        this.id = (id as any).toString();\n    }\n}\n\nexport function createProxyIdentifier<T>(identifier: string): ProxyIdentifier<T> {\n    return new ProxyIdentifier(false, identifier);\n}\n\nexport interface ConnectionClosedError extends Error {\n    code: 'RPC_PROTOCOL_CLOSED'\n}\nexport namespace ConnectionClosedError {\n    const code: ConnectionClosedError['code'] = 'RPC_PROTOCOL_CLOSED';\n    export function create(message: string = 'connection is closed'): ConnectionClosedError {\n        return Object.assign(new Error(message), { code });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(error: any): error is ConnectionClosedError {\n        return !!error && typeof error === 'object' && 'code' in error && error['code'] === code;\n    }\n}\n\nexport class RPCProtocolImpl implements RPCProtocol {\n\n    private readonly locals = new Map<string, any>();\n    private readonly proxies = new Map<string, any>();\n    private lastMessageId = 0;\n    private readonly cancellationTokenSources = new Map<string, CancellationTokenSource>();\n    private readonly pendingRPCReplies = new Map<string, Deferred<any>>();\n    private readonly multiplexer: RPCMultiplexer;\n\n    private replacer: (key: string | undefined, value: any) => any;\n    private reviver: (key: string | undefined, value: any) => any;\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as no disposed */ })\n    );\n\n    constructor(connection: MessageConnection, transformations?: {\n        replacer?: (key: string | undefined, value: any) => any,\n        reviver?: (key: string | undefined, value: any) =>  any\n    }) {\n        this.toDispose.push(\n            this.multiplexer = new RPCMultiplexer(connection)\n        );\n        this.multiplexer.onMessage(msg => this.receiveOneMessage(msg));\n        this.toDispose.push(Disposable.create(() => {\n            this.proxies.clear();\n            for (const reply of this.pendingRPCReplies.values()) {\n                reply.reject(ConnectionClosedError.create());\n            }\n            this.pendingRPCReplies.clear();\n        }));\n\n        this.reviver = transformations?.reviver || ObjectsTransferrer.reviver;\n        this.replacer = transformations?.replacer || ObjectsTransferrer.replacer;\n    }\n\n    private get isDisposed(): boolean {\n        return this.toDispose.disposed;\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T {\n        if (this.isDisposed) {\n            throw ConnectionClosedError.create();\n        }\n        let proxy = this.proxies.get(proxyId.id);\n        if (!proxy) {\n            proxy = this.createProxy(proxyId.id);\n            this.proxies.set(proxyId.id, proxy);\n        }\n        return proxy;\n    }\n\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R {\n        if (this.isDisposed) {\n            throw ConnectionClosedError.create();\n        }\n        this.locals.set(identifier.id, instance);\n        if (Disposable.is(instance)) {\n            this.toDispose.push(instance);\n        }\n        this.toDispose.push(Disposable.create(() => this.locals.delete(identifier.id)));\n        return instance;\n    }\n\n    private createProxy<T>(proxyId: string): T {\n        const handler = {\n            get: (target: any, name: string) => {\n                if (!target[name] && name.charCodeAt(0) === 36 /* CharCode.DollarSign */) {\n                    target[name] = (...myArgs: any[]) =>\n                        this.remoteCall(proxyId, name, myArgs);\n                }\n                return target[name];\n            }\n        };\n        return new Proxy(Object.create(null), handler);\n    }\n\n    private remoteCall(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        if (this.isDisposed) {\n            return Promise.reject(ConnectionClosedError.create());\n        }\n        const cancellationToken: CancellationToken | undefined = args.length && CancellationToken.is(args[args.length - 1]) ? args.pop() : undefined;\n        if (cancellationToken && cancellationToken.isCancellationRequested) {\n            return Promise.reject(canceled());\n        }\n\n        const callId = String(++this.lastMessageId);\n        const result = new Deferred();\n\n        if (cancellationToken) {\n            args.push('add.cancellation.token');\n            cancellationToken.onCancellationRequested(() =>\n                this.multiplexer.send(this.cancel(callId))\n            );\n        }\n\n        this.pendingRPCReplies.set(callId, result);\n        this.multiplexer.send(this.request(callId, proxyId, methodName, args));\n        return result.promise;\n    }\n\n    private receiveOneMessage(rawmsg: string): void {\n        if (this.isDisposed) {\n            return;\n        }\n        try {\n            const msg = <RPCMessage>JSON.parse(rawmsg, this.reviver);\n\n            switch (msg.type) {\n                case MessageType.Request:\n                    this.receiveRequest(msg);\n                    break;\n                case MessageType.Reply:\n                    this.receiveReply(msg);\n                    break;\n                case MessageType.ReplyErr:\n                    this.receiveReplyErr(msg);\n                    break;\n                case MessageType.Cancel:\n                    this.receiveCancel(msg);\n                    break;\n            }\n        } catch (e) {\n            // exception does not show problematic content: log it!\n            console.log('failed to parse message: ' + rawmsg);\n            throw e;\n        }\n\n    }\n\n    private receiveCancel(msg: CancelMessage): void {\n        const cancellationTokenSource = this.cancellationTokenSources.get(msg.id);\n        if (cancellationTokenSource) {\n            cancellationTokenSource.cancel();\n        }\n    }\n\n    private receiveRequest(msg: RequestMessage): void {\n        const callId = msg.id;\n        const proxyId = msg.proxyId;\n        // convert `null` to `undefined`, since we don't use `null` in internal plugin APIs\n        const args = msg.args.map(arg => arg === null ? undefined : arg); // eslint-disable-line no-null/no-null\n\n        const addToken = args.length && args[args.length - 1] === 'add.cancellation.token' ? args.pop() : false;\n        if (addToken) {\n            const tokenSource = new CancellationTokenSource();\n            this.cancellationTokenSources.set(callId, tokenSource);\n            args.push(tokenSource.token);\n        }\n        const invocation = this.invokeHandler(proxyId, msg.method, args);\n\n        invocation.then(result => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexer.send(this.replyOK(callId, result));\n        }, error => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexer.send(this.replyErr(callId, error));\n        });\n    }\n\n    private receiveReply(msg: ReplyMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n        pendingReply.resolve(msg.res);\n    }\n\n    private receiveReplyErr(msg: ReplyErrMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n\n        let err: Error | undefined = undefined;\n        if (msg.err && msg.err.$isError) {\n            err = new Error();\n            err.name = msg.err.name;\n            err.message = msg.err.message;\n            err.stack = msg.err.stack;\n        }\n        pendingReply.reject(err);\n    }\n\n    private invokeHandler(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        try {\n            return Promise.resolve(this.doInvokeHandler(proxyId, methodName, args));\n        } catch (err) {\n            return Promise.reject(err);\n        }\n    }\n\n    private doInvokeHandler(proxyId: string, methodName: string, args: any[]): any {\n        const actor = this.locals.get(proxyId);\n        if (!actor) {\n            throw new Error('Unknown actor ' + proxyId);\n        }\n        const method = actor[methodName];\n        if (typeof method !== 'function') {\n            throw new Error('Unknown method ' + methodName + ' on actor ' + proxyId);\n        }\n        return method.apply(actor, args);\n    }\n\n    private cancel(req: string): string {\n        return `{\"type\":${MessageType.Cancel},\"id\":\"${req}\"}`;\n    }\n\n    private request(req: string, rpcId: string, method: string, args: any[]): string {\n        return `{\"type\":${MessageType.Request},\"id\":\"${req}\",\"proxyId\":\"${rpcId}\",\"method\":\"${method}\",\"args\":${JSON.stringify(args, this.replacer)}}`;\n    }\n\n    private replyOK(req: string, res: any): string {\n        if (typeof res === 'undefined') {\n            return `{\"type\":${MessageType.Reply},\"id\":\"${req}\"}`;\n        }\n        return `{\"type\":${MessageType.Reply},\"id\":\"${req}\",\"res\":${safeStringify(res, this.replacer)}}`;\n    }\n\n    private replyErr(req: string, err: any): string {\n        err = typeof err === 'string' ? new Error(err) : err;\n        if (err instanceof Error) {\n            return `{\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":${safeStringify(transformErrorForSerialization(err))}}`;\n        }\n        return `{\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":null}`;\n    }\n}\n\nfunction canceled(): Error {\n    const error = new Error('Canceled');\n    error.name = error.message;\n    return error;\n}\n\n/**\n * Sends/Receives multiple messages in one go:\n *  - multiple messages to be sent from one stack get sent in bulk at `process.nextTick`.\n *  - each incoming message is handled in a separate `process.nextTick`.\n */\nclass RPCMultiplexer implements Disposable, MessageConnection {\n\n    private readonly connection: MessageConnection;\n    private readonly sendAccumulatedBound: () => void;\n\n    private messagesToSend: string[];\n\n    private readonly messageEmitter = new Emitter<string>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(connection: MessageConnection) {\n        this.connection = connection;\n        this.sendAccumulatedBound = this.sendAccumulated.bind(this);\n\n        this.toDispose.push(Disposable.create(() => this.messagesToSend = []));\n        this.toDispose.push(this.connection.onMessage((msg: string) => {\n            const messages = JSON.parse(msg);\n            for (const message of messages) {\n                this.messageEmitter.fire(message);\n            }\n        }));\n        this.toDispose.push(this.messageEmitter);\n\n        this.messagesToSend = [];\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    get onMessage(): Event<string> {\n        return this.messageEmitter.event;\n    }\n\n    private sendAccumulated(): void {\n        const tmp = this.messagesToSend;\n        this.messagesToSend = [];\n        this.connection.send(JSON.stringify(tmp));\n    }\n\n    public send(msg: string): void {\n        if (this.toDispose.disposed) {\n            throw ConnectionClosedError.create();\n        }\n        if (this.messagesToSend.length === 0) {\n            if (typeof setImmediate !== 'undefined') {\n                setImmediate(this.sendAccumulatedBound);\n            } else {\n                setTimeout(this.sendAccumulatedBound, 0);\n            }\n        }\n        this.messagesToSend.push(msg);\n    }\n}\n\n/**\n * These functions are responsible for correct transferring objects via rpc channel.\n *\n * To reach that some specific kind of objects is converted to json in some custom way\n * and then, after receiving, revived to objects again,\n * so there is feeling that object was transferred via rpc channel.\n *\n * To distinguish between regular and altered objects, field $type is added to altered ones.\n * Also value of that field specifies kind of the object.\n */\nexport namespace ObjectsTransferrer {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function replacer(key: string | undefined, value: any): any {\n        if (value instanceof URI) {\n            return {\n                $type: SerializedObjectType.THEIA_URI,\n                data: value.toString()\n            } as SerializedObject;\n        } else if (value instanceof Range) {\n            const range = value as Range;\n            const serializedValue = {\n                start: {\n                    line: range.start.line,\n                    character: range.start.character\n                },\n                end: {\n                    line: range.end.line,\n                    character: range.end.character\n                }\n            };\n            return {\n                $type: SerializedObjectType.THEIA_RANGE,\n                data: JSON.stringify(serializedValue)\n            } as SerializedObject;\n        } else if (value && value['$mid'] === 1) {\n            // Given value is VSCode URI\n            // We cannot use instanceof here because VSCode URI has toJSON method which is invoked before this replacer.\n            const uri = VSCodeURI.revive(value);\n            return {\n                $type: SerializedObjectType.VSCODE_URI,\n                data: uri.toString()\n            } as SerializedObject;\n        } else if (value instanceof BinaryBuffer) {\n            const bytes = [...value.buffer.values()];\n            return {\n                $type: SerializedObjectType.TEXT_BUFFER,\n                data: JSON.stringify({ bytes })\n            };\n        }\n\n        return value;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function reviver(key: string | undefined, value: any): any {\n        if (isSerializedObject(value)) {\n            switch (value.$type) {\n                case SerializedObjectType.THEIA_URI:\n                    return new URI(value.data);\n                case SerializedObjectType.VSCODE_URI:\n                    return VSCodeURI.parse(value.data);\n                case SerializedObjectType.THEIA_RANGE:\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const obj: any = JSON.parse(value.data);\n                    const start = new Position(obj.start.line, obj.start.character);\n                    const end = new Position(obj.end.line, obj.end.character);\n                    return new Range(start, end);\n                case SerializedObjectType.TEXT_BUFFER:\n                    const data: { bytes: number[] } = JSON.parse(value.data);\n                    return BinaryBuffer.wrap(Uint8Array.from(data.bytes));\n            }\n        }\n\n        return value;\n    }\n\n}\n\ninterface SerializedObject {\n    $type: SerializedObjectType;\n    data: string;\n}\n\nenum SerializedObjectType {\n    THEIA_URI,\n    VSCODE_URI,\n    THEIA_RANGE,\n    TEXT_BUFFER\n}\n\nfunction isSerializedObject(obj: any): obj is SerializedObject {\n    return obj && obj.$type !== undefined && obj.data !== undefined;\n}\n\nexport const enum MessageType {\n    Request = 1,\n    Reply = 2,\n    ReplyErr = 3,\n    Cancel = 4,\n    Terminate = 5,\n    Terminated = 6\n}\n\nclass CancelMessage {\n    type: MessageType.Cancel;\n    id: string;\n}\n\nclass RequestMessage {\n    type: MessageType.Request;\n    id: string;\n    proxyId: string;\n    method: string;\n    args: any[];\n}\n\nclass ReplyMessage {\n    type: MessageType.Reply;\n    id: string;\n    res: any;\n}\n\nclass ReplyErrMessage {\n    type: MessageType.ReplyErr;\n    id: string;\n    err: SerializedError;\n}\n\ntype RPCMessage = RequestMessage | ReplyMessage | ReplyErrMessage | CancelMessage;\n\nexport interface SerializedError {\n    readonly $isError: true;\n    readonly name: string;\n    readonly message: string;\n    readonly stack: string;\n}\n\nexport function transformErrorForSerialization(error: Error): SerializedError {\n    if (error instanceof Error) {\n        const { name, message } = error;\n        const stack: string = (<any>error).stacktrace || error.stack;\n        return {\n            $isError: true,\n            name,\n            message,\n            stack\n        };\n    }\n\n    // return as is\n    return error;\n}\n\ninterface JSONStringifyReplacer {\n    (key: string, value: any): any;\n}\n\nfunction safeStringify(obj: any, replacer?: JSONStringifyReplacer): string {\n    try {\n        return JSON.stringify(obj, replacer);\n    } catch (err) {\n        console.error('error stringifying response: ', err);\n        return 'null';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/0eb3a02ca2bcfab5faa3dc6e52d7c079efafcab0/src/vs/workbench/api/common/shared/semanticTokensDto.ts\n\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\nlet _isLittleEndian = true;\nlet _isLittleEndianComputed = false;\nfunction isLittleEndian(): boolean {\n    if (!_isLittleEndianComputed) {\n        _isLittleEndianComputed = true;\n        const test = new Uint8Array(2);\n        test[0] = 1;\n        test[1] = 2;\n        const view = new Uint16Array(test.buffer);\n        _isLittleEndian = (view[0] === (2 << 8) + 1);\n    }\n    return _isLittleEndian;\n}\n\nexport interface IFullSemanticTokensDto {\n    id: number;\n    type: 'full';\n    data: Uint32Array;\n}\n\nexport interface IDeltaSemanticTokensDto {\n    id: number;\n    type: 'delta';\n    deltas: { start: number; deleteCount: number; data?: Uint32Array; }[];\n}\n\nexport type ISemanticTokensDto = IFullSemanticTokensDto | IDeltaSemanticTokensDto;\n\nconst enum EncodedSemanticTokensType {\n    Full = 1,\n    Delta = 2\n}\n\nfunction reverseEndianness(arr: Uint8Array): void {\n    for (let i = 0, len = arr.length; i < len; i += 4) {\n        // flip bytes 0<->3 and 1<->2\n        const b0 = arr[i + 0];\n        const b1 = arr[i + 1];\n        const b2 = arr[i + 2];\n        const b3 = arr[i + 3];\n        arr[i + 0] = b3;\n        arr[i + 1] = b2;\n        arr[i + 2] = b1;\n        arr[i + 3] = b0;\n    }\n}\n\nfunction toLittleEndianBuffer(arr: Uint32Array): BinaryBuffer {\n    const uint8Arr = new Uint8Array(arr.buffer, arr.byteOffset, arr.length * 4);\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    return BinaryBuffer.wrap(uint8Arr);\n}\n\nfunction fromLittleEndianBuffer(buff: BinaryBuffer): Uint32Array {\n    const uint8Arr = buff.buffer;\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    if (uint8Arr.byteOffset % 4 === 0) {\n        return new Uint32Array(uint8Arr.buffer, uint8Arr.byteOffset, uint8Arr.length / 4);\n    } else {\n        // unaligned memory access doesn't work on all platforms\n        const data = new Uint8Array(uint8Arr.byteLength);\n        data.set(uint8Arr);\n        return new Uint32Array(data.buffer, data.byteOffset, data.length / 4);\n    }\n}\n\nexport function encodeSemanticTokensDto(semanticTokens: ISemanticTokensDto): BinaryBuffer {\n    const dest = new Uint32Array(encodeSemanticTokensDtoSize(semanticTokens));\n    let offset = 0;\n    dest[offset++] = semanticTokens.id;\n    if (semanticTokens.type === 'full') {\n        dest[offset++] = EncodedSemanticTokensType.Full;\n        dest[offset++] = semanticTokens.data.length;\n        dest.set(semanticTokens.data, offset); offset += semanticTokens.data.length;\n    } else {\n        dest[offset++] = EncodedSemanticTokensType.Delta;\n        dest[offset++] = semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            dest[offset++] = delta.start;\n            dest[offset++] = delta.deleteCount;\n            if (delta.data) {\n                dest[offset++] = delta.data.length;\n                dest.set(delta.data, offset); offset += delta.data.length;\n            } else {\n                dest[offset++] = 0;\n            }\n        }\n    }\n    return toLittleEndianBuffer(dest);\n}\n\nfunction encodeSemanticTokensDtoSize(semanticTokens: ISemanticTokensDto): number {\n    let result = 0;\n    result += (\n        + 1 // id\n        + 1 // type\n    );\n    if (semanticTokens.type === 'full') {\n        result += (\n            + 1 // data length\n            + semanticTokens.data.length\n        );\n    } else {\n        result += (\n            + 1 // delta count\n        );\n        result += (\n            + 1 // start\n            + 1 // deleteCount\n            + 1 // data length\n        ) * semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            if (delta.data) {\n                result += delta.data.length;\n            }\n        }\n    }\n    return result;\n}\n\nexport function decodeSemanticTokensDto(_buff: BinaryBuffer): ISemanticTokensDto {\n    const src = fromLittleEndianBuffer(_buff);\n    let offset = 0;\n    const id = src[offset++];\n    const type: EncodedSemanticTokensType = src[offset++];\n    if (type === EncodedSemanticTokensType.Full) {\n        const length = src[offset++];\n        const data = src.subarray(offset, offset + length); offset += length;\n        return {\n            id: id,\n            type: 'full',\n            data: data\n        };\n    }\n    const deltaCount = src[offset++];\n    const deltas: { start: number; deleteCount: number; data?: Uint32Array; }[] = [];\n    for (let i = 0; i < deltaCount; i++) {\n        const start = src[offset++];\n        const deleteCount = src[offset++];\n        const length = src[offset++];\n        let data: Uint32Array | undefined;\n        if (length > 0) {\n            data = src.subarray(offset, offset + length); offset += length;\n        }\n        deltas[i] = { start, deleteCount, data };\n    }\n    return {\n        id: id,\n        type: 'delta',\n        deltas: deltas\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/types.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/**\n * Returns `true` if the parameter has type \"object\" and not null, an array, a regexp, a date.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isObject(obj: any): boolean {\n    return typeof obj === 'object'\n        && obj !== null // eslint-disable-line @typescript-eslint/no-explicit-any\n        && !Array.isArray(obj)\n        && !(obj instanceof RegExp)\n        && !(obj instanceof Date);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n    if (!isObject(destination)) {\n        return source;\n    }\n\n    if (isObject(source)) {\n        Object.keys(source).forEach(key => {\n            if (key in destination) {\n                if (overwrite) {\n                    if (isObject(destination[key]) && isObject(source[key])) {\n                        mixin(destination[key], source[key], overwrite);\n                    } else {\n                        destination[key] = source[key];\n                    }\n                }\n            } else {\n                destination[key] = source[key];\n            }\n        });\n    }\n    return destination;\n}\n\nexport enum LogType {\n    Info,\n    Error\n}\n\nexport interface LogPart {\n    data: string;\n    type: LogType;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface KeysToAnyValues { [key: string]: any }\nexport interface KeysToKeysToAnyValue { [key: string]: KeysToAnyValues }\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/** copied from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostTypes.ts#L18-L27 */\nexport function es5ClassCompat<T extends Function>(target: T): T {\n    // @ts-ignore\n    function _(): any { return Reflect.construct(target, arguments, this.constructor); }\n    Object.defineProperty(_, 'name', Object.getOwnPropertyDescriptor(target, 'name')!);\n    Object.setPrototypeOf(_, target);\n    Object.setPrototypeOf(_.prototype, target.prototype);\n    return _ as unknown as T;\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\nconst _typeof = {\n    number: 'number',\n    string: 'string',\n    undefined: 'undefined',\n    object: 'object',\n    function: 'function'\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * @returns whether the provided parameter is a JavaScript Array or not.\n */\nexport function isArray(array: any): array is any[] {\n    if (Array.isArray) {\n        return Array.isArray(array);\n    }\n\n    if (array && typeof (array.length) === _typeof.number && array.constructor === Array) {\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * @returns whether the provided parameter is undefined.\n */\nexport function isUndefined(obj: any): obj is undefined {\n    return typeof (obj) === _typeof.undefined;\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: any): obj is undefined | null {\n    return isUndefined(obj) || obj === null; // eslint-disable-line no-null/no-null\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport URI from '@theia/core/lib/common/uri';\n\nexport interface UriComponents {\n    scheme: string;\n    authority: string;\n    path: string;\n    query: string;\n    fragment: string;\n    external?: string;\n}\n\n// some well known URI schemas\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/network.ts#L9-L79\n// TODO move to network.ts file\nexport namespace Schemes {\n\n    /**\n     * A schema that is used for models that exist in memory\n     * only and that have no correspondence on a server or such.\n     */\n    export const inMemory = 'inmemory';\n\n    /**\n     * A schema that is used for setting files\n     */\n    export const vscode = 'vscode';\n\n    /**\n     * A schema that is used for internal private files\n     */\n    export const internal = 'private';\n\n    /**\n     * A walk-through document.\n     */\n    export const walkThrough = 'walkThrough';\n\n    /**\n     * An embedded code snippet.\n     */\n    export const walkThroughSnippet = 'walkThroughSnippet';\n\n    export const http = 'http';\n\n    export const https = 'https';\n\n    export const file = 'file';\n\n    export const mailto = 'mailto';\n\n    export const untitled = 'untitled';\n\n    export const data = 'data';\n\n    export const command = 'command';\n\n    export const vscodeRemote = 'vscode-remote';\n\n    export const vscodeRemoteResource = 'vscode-remote-resource';\n\n    export const userData = 'vscode-userdata';\n\n    export const vscodeCustomEditor = 'vscode-custom-editor';\n\n    export const vscodeSettings = 'vscode-settings';\n\n    export const webviewPanel = 'webview-panel';\n}\n\nexport function theiaUritoUriComponents(uri: URI): UriComponents {\n    return {\n        scheme: uri.scheme,\n        authority: uri.authority,\n        path: uri.path.toString(),\n        query: uri.query,\n        fragment: uri.fragment\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { HostedPluginClient } from '../../common/plugin-protocol';\nimport { LogPart } from '../../common/types';\n\n@injectable()\nexport class HostedPluginWatcher {\n    private onPostMessage = new Emitter<{ pluginHostId: string, message: string }>();\n    private onLogMessage = new Emitter<LogPart>();\n\n    private readonly onDidDeployEmitter = new Emitter<void>();\n    readonly onDidDeploy = this.onDidDeployEmitter.event;\n\n    getHostedPluginClient(): HostedPluginClient {\n        const messageEmitter = this.onPostMessage;\n        const logEmitter = this.onLogMessage;\n        return {\n            postMessage(pluginHostId, message: string): Promise<void> {\n                messageEmitter.fire({ pluginHostId, message });\n                return Promise.resolve();\n            },\n            log(logPart: LogPart): Promise<void> {\n                logEmitter.fire(logPart);\n                return Promise.resolve();\n            },\n            onDidDeploy: () => this.onDidDeployEmitter.fire(undefined)\n        };\n    }\n\n    get onPostMessageEvent(): Event<{ pluginHostId: string, message: string }> {\n        return this.onPostMessage.event;\n    }\n\n    get onLogMessageEvent(): Event<LogPart> {\n        return this.onLogMessage.event;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/da5fb7d5b865aa522abc7e82c10b746834b98639/src/vs/workbench/api/node/extHostExtensionService.ts\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport debounce = require('@theia/core/shared/lodash.debounce');\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { injectable, inject, interfaces, named, postConstruct } from '@theia/core/shared/inversify';\nimport { PluginWorker } from '../../main/browser/plugin-worker';\nimport { PluginMetadata, getPluginId, HostedPluginServer, DeployedPlugin } from '../../common/plugin-protocol';\nimport { HostedPluginWatcher } from './hosted-plugin-watcher';\nimport { MAIN_RPC_CONTEXT, PluginManagerExt, ConfigStorage, UIKind } from '../../common/plugin-api-rpc';\nimport { setUpPluginApi } from '../../main/browser/main-context';\nimport { RPCProtocol, RPCProtocolImpl } from '../../common/rpc-protocol';\nimport {\n    Disposable, DisposableCollection,\n    ILogger, ContributionProvider, CommandRegistry, WillExecuteCommandEvent,\n    CancellationTokenSource, JsonRpcProxy, ProgressService\n} from '@theia/core';\nimport { PreferenceServiceImpl, PreferenceProviderProvider } from '@theia/core/lib/browser/preferences';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { PluginContributionHandler } from '../../main/browser/plugin-contribution-handler';\nimport { getQueryParameters } from '../../main/browser/env-main';\nimport { MainPluginApiProvider } from '../../common/plugin-ext-api-contribution';\nimport { PluginPathsService } from '../../main/common/plugin-paths-protocol';\nimport { getPreferences } from '../../main/browser/preference-registry-main';\nimport { PluginServer } from '../../common/plugin-protocol';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { DebugSessionManager } from '@theia/debug/lib/browser/debug-session-manager';\nimport { DebugConfigurationManager } from '@theia/debug/lib/browser/debug-configuration-manager';\nimport { WaitUntilEvent } from '@theia/core/lib/common/event';\nimport { FileSearchService } from '@theia/file-search/lib/common/file-search-service';\nimport { Emitter, isCancelled } from '@theia/core';\nimport { FrontendApplicationStateService } from '@theia/core/lib/browser/frontend-application-state';\nimport { PluginViewRegistry } from '../../main/browser/view/plugin-view-registry';\nimport { TaskProviderRegistry, TaskResolverRegistry } from '@theia/task/lib/browser/task-contribution';\nimport { WebviewEnvironment } from '../../main/browser/webview/webview-environment';\nimport { WebviewWidget } from '../../main/browser/webview/webview';\nimport { WidgetManager } from '@theia/core/lib/browser/widget-manager';\nimport { TerminalService } from '@theia/terminal/lib/browser/base/terminal-service';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport URI from '@theia/core/lib/common/uri';\nimport { FrontendApplicationConfigProvider } from '@theia/core/lib/browser/frontend-application-config-provider';\nimport { environment } from '@theia/core/shared/@theia/application-package/lib/environment';\nimport { JsonSchemaStore } from '@theia/core/lib/browser/json-schema-store';\nimport { FileService, FileSystemProviderActivationEvent } from '@theia/filesystem/lib/browser/file-service';\nimport { PluginCustomEditorRegistry } from '../../main/browser/custom-editors/plugin-custom-editor-registry';\nimport { CustomEditorWidget } from '../../main/browser/custom-editors/custom-editor-widget';\n\nexport type PluginHost = 'frontend' | string;\nexport type DebugActivationEvent = 'onDebugResolve' | 'onDebugInitialConfigurations' | 'onDebugAdapterProtocolTracker';\n\nexport const PluginProgressLocation = 'plugin';\n\n@injectable()\nexport class HostedPluginSupport {\n\n    protected readonly clientId = UUID.uuid4();\n\n    protected container: interfaces.Container;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(HostedPluginServer)\n    private readonly server: JsonRpcProxy<HostedPluginServer>;\n\n    @inject(HostedPluginWatcher)\n    private readonly watcher: HostedPluginWatcher;\n\n    @inject(PluginContributionHandler)\n    private readonly contributionHandler: PluginContributionHandler;\n\n    @inject(ContributionProvider)\n    @named(MainPluginApiProvider)\n    protected readonly mainPluginApiProviders: ContributionProvider<MainPluginApiProvider>;\n\n    @inject(PluginServer)\n    protected readonly pluginServer: PluginServer;\n\n    @inject(PreferenceProviderProvider)\n    protected readonly preferenceProviderProvider: PreferenceProviderProvider;\n\n    @inject(PreferenceServiceImpl)\n    private readonly preferenceServiceImpl: PreferenceServiceImpl;\n\n    @inject(PluginPathsService)\n    private readonly pluginPathsService: PluginPathsService;\n\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(DebugSessionManager)\n    protected readonly debugSessionManager: DebugSessionManager;\n\n    @inject(DebugConfigurationManager)\n    protected readonly debugConfigurationManager: DebugConfigurationManager;\n\n    @inject(FileService)\n    protected readonly fileService: FileService;\n\n    @inject(FileSearchService)\n    protected readonly fileSearchService: FileSearchService;\n\n    @inject(FrontendApplicationStateService)\n    protected readonly appState: FrontendApplicationStateService;\n\n    @inject(PluginViewRegistry)\n    protected readonly viewRegistry: PluginViewRegistry;\n\n    @inject(TaskProviderRegistry)\n    protected readonly taskProviderRegistry: TaskProviderRegistry;\n\n    @inject(TaskResolverRegistry)\n    protected readonly taskResolverRegistry: TaskResolverRegistry;\n\n    @inject(ProgressService)\n    protected readonly progressService: ProgressService;\n\n    @inject(WebviewEnvironment)\n    protected readonly webviewEnvironment: WebviewEnvironment;\n\n    @inject(WidgetManager)\n    protected readonly widgets: WidgetManager;\n\n    @inject(TerminalService)\n    protected readonly terminalService: TerminalService;\n\n    @inject(EnvVariablesServer)\n    protected readonly envServer: EnvVariablesServer;\n\n    @inject(JsonSchemaStore)\n    protected readonly jsonSchemaStore: JsonSchemaStore;\n\n    @inject(PluginCustomEditorRegistry)\n    protected readonly customEditorRegistry: PluginCustomEditorRegistry;\n\n    private theiaReadyPromise: Promise<any>;\n\n    protected readonly managers = new Map<string, PluginManagerExt>();\n\n    private readonly contributions = new Map<string, PluginContributions>();\n\n    protected readonly activationEvents = new Set<string>();\n\n    protected readonly onDidChangePluginsEmitter = new Emitter<void>();\n    readonly onDidChangePlugins = this.onDidChangePluginsEmitter.event;\n\n    protected readonly deferredWillStart = new Deferred<void>();\n    /**\n     * Resolves when the initial plugins are loaded and about to be started.\n     */\n    get willStart(): Promise<void> {\n        return this.deferredWillStart.promise;\n    }\n\n    protected readonly deferredDidStart = new Deferred<void>();\n    /**\n     * Resolves when the initial plugins are started.\n     */\n    get didStart(): Promise<void> {\n        return this.deferredDidStart.promise;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.theiaReadyPromise = Promise.all([this.preferenceServiceImpl.ready, this.workspaceService.roots]);\n        this.workspaceService.onWorkspaceChanged(() => this.updateStoragePath());\n\n        const modeService = monaco.services.StaticServices.modeService.get();\n        for (const modeId of Object.keys(modeService['_instantiatedModes'])) {\n            const mode = modeService['_instantiatedModes'][modeId];\n            this.activateByLanguage(mode.getId());\n        }\n        modeService.onDidCreateMode(mode => this.activateByLanguage(mode.getId()));\n        this.commands.onWillExecuteCommand(event => this.ensureCommandHandlerRegistration(event));\n        this.debugSessionManager.onWillStartDebugSession(event => this.ensureDebugActivation(event));\n        this.debugSessionManager.onWillResolveDebugConfiguration(event => this.ensureDebugActivation(event, 'onDebugResolve', event.debugType));\n        this.debugConfigurationManager.onWillProvideDebugConfiguration(event => this.ensureDebugActivation(event, 'onDebugInitialConfigurations'));\n        this.viewRegistry.onDidExpandView(id => this.activateByView(id));\n        this.taskProviderRegistry.onWillProvideTaskProvider(event => this.ensureTaskActivation(event));\n        this.taskResolverRegistry.onWillProvideTaskResolver(event => this.ensureTaskActivation(event));\n        this.fileService.onWillActivateFileSystemProvider(event => this.ensureFileSystemActivation(event));\n        this.customEditorRegistry.onWillOpenCustomEditor(event => this.activateByCustomEditor(event));\n\n        this.widgets.onDidCreateWidget(({ factoryId, widget }) => {\n            if ((factoryId === WebviewWidget.FACTORY_ID || factoryId === CustomEditorWidget.FACTORY_ID) && widget instanceof WebviewWidget) {\n                const storeState = widget.storeState.bind(widget);\n                const restoreState = widget.restoreState.bind(widget);\n\n                widget.storeState = () => {\n                    if (this.webviewRevivers.has(widget.viewType)) {\n                        return storeState();\n                    }\n                    return undefined;\n                };\n\n                widget.restoreState = state => {\n                    if (state.viewType) {\n                        restoreState(state);\n                        this.preserveWebview(widget);\n                    } else {\n                        widget.dispose();\n                    }\n                };\n            }\n        });\n    }\n\n    get plugins(): PluginMetadata[] {\n        const plugins: PluginMetadata[] = [];\n        this.contributions.forEach(contributions => plugins.push(contributions.plugin.metadata));\n        return plugins;\n    }\n\n    getPlugin(id: string): DeployedPlugin | undefined {\n        const contributions = this.contributions.get(id);\n        return contributions && contributions.plugin;\n    }\n\n    /** do not call it, except from the plugin frontend contribution */\n    onStart(container: interfaces.Container): void {\n        this.container = container;\n        this.load();\n        this.watcher.onDidDeploy(() => this.load());\n        this.server.onDidOpenConnection(() => this.load());\n    }\n\n    protected loadQueue: Promise<void> = Promise.resolve(undefined);\n    load = debounce(() => this.loadQueue = this.loadQueue.then(async () => {\n        try {\n            await this.progressService.withProgress('', PluginProgressLocation, () => this.doLoad());\n        } catch (e) {\n            console.error('Failed to load plugins:', e);\n        }\n    }), 50, { leading: true });\n\n    protected async doLoad(): Promise<void> {\n        const toDisconnect = new DisposableCollection(Disposable.create(() => { /* mark as connected */ }));\n        toDisconnect.push(Disposable.create(() => this.preserveWebviews()));\n        this.server.onDidCloseConnection(() => toDisconnect.dispose());\n\n        // process empty plugins as well in order to properly remove stale plugin widgets\n        await this.syncPlugins();\n\n        // it has to be resolved before awaiting layout is initialized\n        // otherwise clients can hang forever in the initialization phase\n        this.deferredWillStart.resolve();\n\n        // make sure that the previous state, including plugin widgets, is restored\n        // and core layout is initialized, i.e. explorer, scm, debug views are already added to the shell\n        // but shell is not yet revealed\n        await this.appState.reachedState('initialized_layout');\n\n        if (toDisconnect.disposed) {\n            // if disconnected then don't try to load plugin contributions\n            return;\n        }\n        const contributionsByHost = this.loadContributions(toDisconnect);\n\n        await this.viewRegistry.initWidgets();\n        // remove restored plugin widgets which were not registered by contributions\n        this.viewRegistry.removeStaleWidgets();\n        await this.theiaReadyPromise;\n\n        if (toDisconnect.disposed) {\n            // if disconnected then don't try to init plugin code and dynamic contributions\n            return;\n        }\n        await this.startPlugins(contributionsByHost, toDisconnect);\n\n        this.deferredDidStart.resolve();\n\n        this.restoreWebviews();\n    }\n\n    /**\n     * Sync loaded and deployed plugins:\n     * - undeployed plugins are unloaded\n     * - newly deployed plugins are initialized\n     */\n    protected async syncPlugins(): Promise<void> {\n        let initialized = 0;\n        const syncPluginsMeasurement = this.createMeasurement('syncPlugins');\n\n        const toUnload = new Set(this.contributions.keys());\n        try {\n            const pluginIds: string[] = [];\n            const deployedPluginIds = await this.server.getDeployedPluginIds();\n            for (const pluginId of deployedPluginIds) {\n                toUnload.delete(pluginId);\n                if (!this.contributions.has(pluginId)) {\n                    pluginIds.push(pluginId);\n                }\n            }\n            for (const pluginId of toUnload) {\n                const contribution = this.contributions.get(pluginId);\n                if (contribution) {\n                    contribution.dispose();\n                }\n            }\n            if (pluginIds.length) {\n                const plugins = await this.server.getDeployedPlugins({ pluginIds });\n                for (const plugin of plugins) {\n                    const pluginId = plugin.metadata.model.id;\n                    const contributions = new PluginContributions(plugin);\n                    this.contributions.set(pluginId, contributions);\n                    contributions.push(Disposable.create(() => this.contributions.delete(pluginId)));\n                    initialized++;\n                }\n            }\n        } finally {\n            if (initialized || toUnload.size) {\n                this.onDidChangePluginsEmitter.fire(undefined);\n            }\n        }\n\n        this.logMeasurement('Sync', initialized, syncPluginsMeasurement);\n    }\n\n    /**\n     * Always synchronous in order to simplify handling disconnections.\n     * @throws never\n     */\n    protected loadContributions(toDisconnect: DisposableCollection): Map<PluginHost, PluginContributions[]> {\n        let loaded = 0;\n        const loadPluginsMeasurement = this.createMeasurement('loadPlugins');\n\n        const hostContributions = new Map<PluginHost, PluginContributions[]>();\n        for (const contributions of this.contributions.values()) {\n            const plugin = contributions.plugin.metadata;\n            const pluginId = plugin.model.id;\n\n            if (contributions.state === PluginContributions.State.INITIALIZING) {\n                contributions.state = PluginContributions.State.LOADING;\n                contributions.push(Disposable.create(() => console.log(`[${pluginId}]: Unloaded plugin.`)));\n                contributions.push(this.contributionHandler.handleContributions(this.clientId, contributions.plugin));\n                contributions.state = PluginContributions.State.LOADED;\n                console.log(`[${this.clientId}][${pluginId}]: Loaded contributions.`);\n                loaded++;\n            }\n\n            if (contributions.state === PluginContributions.State.LOADED) {\n                contributions.state = PluginContributions.State.STARTING;\n                const host = plugin.model.entryPoint.frontend ? 'frontend' : plugin.host;\n                const dynamicContributions = hostContributions.get(plugin.host) || [];\n                dynamicContributions.push(contributions);\n                hostContributions.set(host, dynamicContributions);\n                toDisconnect.push(Disposable.create(() => {\n                    contributions!.state = PluginContributions.State.LOADED;\n                    console.log(`[${this.clientId}][${pluginId}]: Disconnected.`);\n                }));\n            }\n        }\n\n        this.logMeasurement('Load contributions', loaded, loadPluginsMeasurement);\n\n        return hostContributions;\n    }\n\n    protected async startPlugins(contributionsByHost: Map<PluginHost, PluginContributions[]>, toDisconnect: DisposableCollection): Promise<void> {\n        let started = 0;\n        const startPluginsMeasurement = this.createMeasurement('startPlugins');\n\n        const [hostLogPath, hostStoragePath, hostGlobalStoragePath] = await Promise.all([\n            this.pluginPathsService.getHostLogPath(),\n            this.getStoragePath(),\n            this.getHostGlobalStoragePath()\n        ]);\n        if (toDisconnect.disposed) {\n            return;\n        }\n        const thenable: Promise<void>[] = [];\n        const configStorage: ConfigStorage = {\n            hostLogPath,\n            hostStoragePath,\n            hostGlobalStoragePath\n        };\n        for (const [host, hostContributions] of contributionsByHost) {\n            const manager = await this.obtainManager(host, hostContributions, toDisconnect);\n            if (!manager) {\n                return;\n            }\n            const plugins = hostContributions.map(contributions => contributions.plugin.metadata);\n            thenable.push((async () => {\n                try {\n                    const activationEvents = [...this.activationEvents];\n                    await manager.$start({ plugins, configStorage, activationEvents });\n                    if (toDisconnect.disposed) {\n                        return;\n                    }\n                    for (const contributions of hostContributions) {\n                        started++;\n                        const plugin = contributions.plugin;\n                        const id = plugin.metadata.model.id;\n                        contributions.state = PluginContributions.State.STARTED;\n                        console.log(`[${this.clientId}][${id}]: Started plugin.`);\n                        toDisconnect.push(contributions.push(Disposable.create(() => {\n                            console.log(`[${this.clientId}][${id}]: Stopped plugin.`);\n                            manager.$stop(id);\n                        })));\n\n                        this.activateByWorkspaceContains(manager, plugin);\n                    }\n                } catch (e) {\n                    console.error(`Failed to start plugins for '${host}' host`, e);\n                }\n            })());\n        }\n        await Promise.all(thenable);\n        await this.activateByEvent('onStartupFinished');\n        if (toDisconnect.disposed) {\n            return;\n        }\n        this.logMeasurement('Start', started, startPluginsMeasurement);\n    }\n\n    protected async obtainManager(host: string, hostContributions: PluginContributions[], toDisconnect: DisposableCollection): Promise<PluginManagerExt | undefined> {\n        let manager = this.managers.get(host);\n        if (!manager) {\n            const pluginId = getPluginId(hostContributions[0].plugin.metadata.model);\n            const rpc = this.initRpc(host, pluginId);\n            toDisconnect.push(rpc);\n\n            manager = rpc.getProxy(MAIN_RPC_CONTEXT.HOSTED_PLUGIN_MANAGER_EXT);\n            this.managers.set(host, manager);\n            toDisconnect.push(Disposable.create(() => this.managers.delete(host)));\n\n            const [extApi, globalState, workspaceState, webviewResourceRoot, webviewCspSource, defaultShell, jsonValidation] = await Promise.all([\n                this.server.getExtPluginAPI(),\n                this.pluginServer.getAllStorageValues(undefined),\n                this.pluginServer.getAllStorageValues({\n                    workspace: this.workspaceService.workspace?.resource.toString(),\n                    roots: this.workspaceService.tryGetRoots().map(root => root.resource.toString())\n                }),\n                this.webviewEnvironment.resourceRoot(),\n                this.webviewEnvironment.cspSource(),\n                this.terminalService.getDefaultShell(),\n                this.jsonSchemaStore.schemas\n            ]);\n            if (toDisconnect.disposed) {\n                return undefined;\n            }\n\n            await manager.$init({\n                preferences: getPreferences(this.preferenceProviderProvider, this.workspaceService.tryGetRoots()),\n                globalState,\n                workspaceState,\n                env: {\n                    queryParams: getQueryParameters(),\n                    language: navigator.language,\n                    shell: defaultShell,\n                    uiKind: environment.electron.is() ? UIKind.Desktop : UIKind.Web,\n                    appName: FrontendApplicationConfigProvider.get().applicationName\n                },\n                extApi,\n                webview: {\n                    webviewResourceRoot,\n                    webviewCspSource\n                },\n                jsonValidation\n            });\n            if (toDisconnect.disposed) {\n                return undefined;\n            }\n        }\n        return manager;\n    }\n\n    protected initRpc(host: PluginHost, pluginId: string): RPCProtocol {\n        const rpc = host === 'frontend' ? new PluginWorker().rpc : this.createServerRpc(host);\n        setUpPluginApi(rpc, this.container);\n        this.mainPluginApiProviders.getContributions().forEach(p => p.initialize(rpc, this.container));\n        return rpc;\n    }\n\n    private createServerRpc(pluginHostId: string): RPCProtocol {\n        const emitter = new Emitter<string>();\n        this.watcher.onPostMessageEvent(received => {\n            if (pluginHostId === received.pluginHostId) {\n                emitter.fire(received.message);\n            }\n        });\n        return new RPCProtocolImpl({\n            onMessage: emitter.event,\n            send: message => {\n                this.server.onMessage(pluginHostId, message);\n            }\n        });\n    }\n\n    private async updateStoragePath(): Promise<void> {\n        const path = await this.getStoragePath();\n        for (const manager of this.managers.values()) {\n            manager.$updateStoragePath(path);\n        }\n    }\n\n    protected async getStoragePath(): Promise<string | undefined> {\n        const roots = await this.workspaceService.roots;\n        return this.pluginPathsService.getHostStoragePath(this.workspaceService.workspace?.resource.toString(), roots.map(root => root.resource.toString()));\n    }\n\n    protected async getHostGlobalStoragePath(): Promise<string> {\n        const configDirUri = await this.envServer.getConfigDirUri();\n        const globalStorageFolderUri = new URI(configDirUri).resolve('globalStorage');\n\n        // Make sure that folder by the path exists\n        if (!await this.fileService.exists(globalStorageFolderUri)) {\n            await this.fileService.createFolder(globalStorageFolderUri);\n        }\n        const globalStorageFolderFsPath = await this.fileService.fsPath(globalStorageFolderUri);\n        if (!globalStorageFolderFsPath) {\n            throw new Error(`Could not resolve the FS path for URI: ${globalStorageFolderUri}`);\n        }\n        return globalStorageFolderFsPath;\n    }\n\n    async activateByEvent(activationEvent: string): Promise<void> {\n        if (this.activationEvents.has(activationEvent)) {\n            return;\n        }\n        this.activationEvents.add(activationEvent);\n        const activation: Promise<void>[] = [];\n        for (const manager of this.managers.values()) {\n            activation.push(manager.$activateByEvent(activationEvent));\n        }\n        await Promise.all(activation);\n    }\n\n    async activateByViewContainer(viewContainerId: string): Promise<void> {\n        await Promise.all(this.viewRegistry.getContainerViews(viewContainerId).map(viewId => this.activateByView(viewId)));\n    }\n\n    async activateByView(viewId: string): Promise<void> {\n        await this.activateByEvent(`onView:${viewId}`);\n    }\n\n    async activateByLanguage(languageId: string): Promise<void> {\n        await this.activateByEvent(`onLanguage:${languageId}`);\n    }\n\n    async activateByCommand(commandId: string): Promise<void> {\n        await this.activateByEvent(`onCommand:${commandId}`);\n    }\n\n    async activateByCustomEditor(viewType: string): Promise<void> {\n        await this.activateByEvent(`onCustomEditor:${viewType}`);\n    }\n\n    activateByFileSystem(event: FileSystemProviderActivationEvent): Promise<void> {\n        return this.activateByEvent(`onFileSystem:${event.scheme}`);\n    }\n\n    protected ensureFileSystemActivation(event: FileSystemProviderActivationEvent): void {\n        event.waitUntil(this.activateByFileSystem(event));\n    }\n\n    protected ensureCommandHandlerRegistration(event: WillExecuteCommandEvent): void {\n        const activation = this.activateByCommand(event.commandId);\n        if (this.commands.getCommand(event.commandId) &&\n            (!this.contributionHandler.hasCommand(event.commandId) ||\n                this.contributionHandler.hasCommandHandler(event.commandId))) {\n            return;\n        }\n        const waitForCommandHandler = new Deferred<void>();\n        const listener = this.contributionHandler.onDidRegisterCommandHandler(id => {\n            if (id === event.commandId) {\n                listener.dispose();\n                waitForCommandHandler.resolve();\n            }\n        });\n        const p = Promise.all([\n            activation,\n            waitForCommandHandler.promise\n        ]);\n        p.then(() => listener.dispose(), () => listener.dispose());\n        event.waitUntil(p);\n    }\n\n    protected ensureTaskActivation(event: WaitUntilEvent): void {\n        event.waitUntil(this.activateByCommand('workbench.action.tasks.runTask'));\n    }\n\n    protected ensureDebugActivation(event: WaitUntilEvent, activationEvent?: DebugActivationEvent, debugType?: string): void {\n        event.waitUntil(this.activateByDebug(activationEvent, debugType));\n    }\n\n    async activateByDebug(activationEvent?: DebugActivationEvent, debugType?: string): Promise<void> {\n        const promises = [this.activateByEvent('onDebug')];\n        if (activationEvent) {\n            promises.push(this.activateByEvent(activationEvent));\n            if (debugType) {\n                promises.push(this.activateByEvent(activationEvent + ':' + debugType));\n            }\n        }\n        await Promise.all(promises);\n    }\n\n    protected async activateByWorkspaceContains(manager: PluginManagerExt, plugin: DeployedPlugin): Promise<void> {\n        const activationEvents = plugin.contributes && plugin.contributes.activationEvents;\n        if (!activationEvents) {\n            return;\n        }\n        const paths: string[] = [];\n        const includePatterns: string[] = [];\n        // should be aligned with https://github.com/microsoft/vscode/blob/da5fb7d5b865aa522abc7e82c10b746834b98639/src/vs/workbench/api/node/extHostExtensionService.ts#L460-L469\n        for (const activationEvent of activationEvents) {\n            if (/^workspaceContains:/.test(activationEvent)) {\n                const fileNameOrGlob = activationEvent.substr('workspaceContains:'.length);\n                if (fileNameOrGlob.indexOf('*') >= 0 || fileNameOrGlob.indexOf('?') >= 0) {\n                    includePatterns.push(fileNameOrGlob);\n                } else {\n                    paths.push(fileNameOrGlob);\n                }\n            }\n        }\n        const activatePlugin = () => manager.$activateByEvent(`onPlugin:${plugin.metadata.model.id}`);\n        const promises: Promise<boolean>[] = [];\n        if (paths.length) {\n            promises.push(this.workspaceService.containsSome(paths));\n        }\n        if (includePatterns.length) {\n            const tokenSource = new CancellationTokenSource();\n            const searchTimeout = setTimeout(() => {\n                tokenSource.cancel();\n                // activate eagerly if took to long to search\n                activatePlugin();\n            }, 7000);\n            promises.push((async () => {\n                try {\n                    const result = await this.fileSearchService.find('', {\n                        rootUris: this.workspaceService.tryGetRoots().map(r => r.resource.toString()),\n                        includePatterns,\n                        limit: 1\n                    }, tokenSource.token);\n                    return result.length > 0;\n                } catch (e) {\n                    if (!isCancelled(e)) {\n                        console.error(e);\n                    }\n                    return false;\n                } finally {\n                    clearTimeout(searchTimeout);\n                }\n            })());\n        }\n        if (promises.length && await Promise.all(promises).then(exists => exists.some(v => v))) {\n            await activatePlugin();\n        }\n    }\n\n    async activatePlugin(id: string): Promise<void> {\n        const activation = [];\n        for (const manager of this.managers.values()) {\n            activation.push(manager.$activatePlugin(id));\n        }\n        await Promise.all(activation);\n    }\n\n    protected createMeasurement(name: string): () => number {\n        const startMarker = `${name}-start`;\n        const endMarker = `${name}-end`;\n        performance.clearMeasures(name);\n        performance.clearMarks(startMarker);\n        performance.clearMarks(endMarker);\n\n        performance.mark(startMarker);\n        return () => {\n            performance.mark(endMarker);\n            performance.measure(name, startMarker, endMarker);\n\n            const entries = performance.getEntriesByName(name);\n            const duration = entries.length > 0 ? entries[0].duration : Number.NaN;\n\n            performance.clearMeasures(name);\n            performance.clearMarks(startMarker);\n            performance.clearMarks(endMarker);\n            return duration;\n        };\n    }\n\n    protected logMeasurement(prefix: string, count: number, measurement: () => number): void {\n        const duration = measurement();\n        if (duration === Number.NaN) {\n            // Measurement was prevented by native API, do not log NaN duration\n            return;\n        }\n\n        const pluginCount = `${count} plugin${count === 1 ? '' : 's'}`;\n        console.log(`[${this.clientId}] ${prefix} of ${pluginCount} took: ${duration.toFixed(1)} ms`);\n    }\n\n    protected readonly webviewsToRestore = new Set<WebviewWidget>();\n    protected readonly webviewRevivers = new Map<string, (webview: WebviewWidget) => Promise<void>>();\n\n    registerWebviewReviver(viewType: string, reviver: (webview: WebviewWidget) => Promise<void>): void {\n        if (this.webviewRevivers.has(viewType)) {\n            throw new Error(`Reviver for ${viewType} already registered`);\n        }\n        this.webviewRevivers.set(viewType, reviver);\n    }\n\n    unregisterWebviewReviver(viewType: string): void {\n        this.webviewRevivers.delete(viewType);\n    }\n\n    protected async preserveWebviews(): Promise<void> {\n        for (const webview of this.widgets.getWidgets(WebviewWidget.FACTORY_ID)) {\n            this.preserveWebview(webview as WebviewWidget);\n        }\n        for (const webview of this.widgets.getWidgets(CustomEditorWidget.FACTORY_ID)) {\n            (webview as CustomEditorWidget).modelRef.dispose();\n            if ((webview as any)['closeWithoutSaving']) {\n                delete (webview as any)['closeWithoutSaving'];\n            }\n            this.customEditorRegistry.resolveWidget(webview as CustomEditorWidget);\n        }\n    }\n\n    protected preserveWebview(webview: WebviewWidget): void {\n        if (!this.webviewsToRestore.has(webview)) {\n            this.webviewsToRestore.add(webview);\n            webview.disposed.connect(() => this.webviewsToRestore.delete(webview));\n        }\n    }\n\n    protected restoreWebviews(): void {\n        for (const webview of this.webviewsToRestore) {\n            this.restoreWebview(webview);\n        }\n        this.webviewsToRestore.clear();\n    }\n\n    protected async restoreWebview(webview: WebviewWidget): Promise<void> {\n        await this.activateByEvent(`onWebviewPanel:${webview.viewType}`);\n        const restore = this.webviewRevivers.get(webview.viewType);\n        if (!restore) {\n            /* eslint-disable max-len */\n            webview.setHTML(this.getDeserializationFailedContents(`\n            <p>The extension providing '${webview.viewType}' view is not capable of restoring it.</p>\n            <p>Want to help fix this? Please inform the extension developer to register a <a href=\"https://code.visualstudio.com/api/extension-guides/webview#serialization\">reviver</a>.</p>\n            `));\n            /* eslint-enable max-len */\n            return;\n        }\n        try {\n            await restore(webview);\n        } catch (e) {\n            webview.setHTML(this.getDeserializationFailedContents(`\n            An error occurred while restoring '${webview.viewType}' view. Please check logs.\n            `));\n            console.error('Failed to restore the webview', e);\n        }\n    }\n\n    protected getDeserializationFailedContents(message: string): string {\n        return `<!DOCTYPE html>\n        <html>\n            <head>\n                <meta http-equiv=\"Content-type\" content=\"text/html;charset=UTF-8\">\n                <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none';\">\n            </head>\n            <body>${message}</body>\n        </html>`;\n    }\n\n}\n\nexport class PluginContributions extends DisposableCollection {\n    constructor(\n        readonly plugin: DeployedPlugin\n    ) {\n        super();\n    }\n    state: PluginContributions.State = PluginContributions.State.INITIALIZING;\n}\nexport namespace PluginContributions {\n    export enum State {\n        INITIALIZING = 0,\n        LOADING = 1,\n        LOADED = 2,\n        STARTING = 3,\n        STARTED = 4\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.47.3/src/vs/workbench/api/browser/mainThreadAuthentication.ts\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { AuthenticationExt, AuthenticationMain, MAIN_RPC_CONTEXT } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { StorageService } from '@theia/core/lib/browser';\nimport {\n    AuthenticationProvider,\n    AuthenticationService,\n    readAllowedExtensions\n} from '@theia/core/lib/browser/authentication-service';\nimport { QuickPickItem, QuickPickService } from '@theia/core/lib/common/quick-pick-service';\nimport {\n    AuthenticationSession,\n    AuthenticationSessionsChangeEvent\n} from '../../common/plugin-api-rpc-model';\n\nexport class AuthenticationMainImpl implements AuthenticationMain {\n    private readonly proxy: AuthenticationExt;\n    private readonly messageService: MessageService;\n    private readonly storageService: StorageService;\n    private readonly authenticationService: AuthenticationService;\n    private readonly quickPickService: QuickPickService;\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.AUTHENTICATION_EXT);\n        this.messageService = container.get(MessageService);\n        this.storageService = container.get(StorageService);\n        this.authenticationService = container.get(AuthenticationService);\n        this.quickPickService = container.get(QuickPickService);\n\n        this.authenticationService.onDidChangeSessions(e => {\n            this.proxy.$onDidChangeAuthenticationSessions(e.providerId, e.label, e.event);\n        });\n        this.authenticationService.onDidRegisterAuthenticationProvider(info => {\n            this.proxy.$onDidChangeAuthenticationProviders([info], []);\n        });\n        this.authenticationService.onDidUnregisterAuthenticationProvider(providerId => {\n            this.proxy.$onDidChangeAuthenticationProviders([], [providerId]);\n        });\n    }\n    $getProviderIds(): Promise<string[]> {\n        return Promise.resolve(this.authenticationService.getProviderIds());\n    }\n\n    async $registerAuthenticationProvider(id: string, label: string, supportsMultipleAccounts: boolean): Promise<void> {\n        const provider = new AuthenticationProviderImpl(this.proxy, id, label, supportsMultipleAccounts, this.storageService, this.messageService);\n        this.authenticationService.registerAuthenticationProvider(id, provider);\n    }\n\n    async $unregisterAuthenticationProvider(id: string): Promise<void> {\n        this.authenticationService.unregisterAuthenticationProvider(id);\n    }\n\n    async $updateSessions(id: string, event: AuthenticationSessionsChangeEvent): Promise<void> {\n        this.authenticationService.updateSessions(id, event);\n    }\n\n    $logout(providerId: string, sessionId: string): Promise<void> {\n        return this.authenticationService.logout(providerId, sessionId);\n    }\n\n    protected async requestNewSession(providerId: string, scopes: string[], extensionId: string, extensionName: string): Promise<void> {\n        return this.authenticationService.requestNewSession(providerId, scopes, extensionId, extensionName);\n    }\n\n    async $getSession(providerId: string, scopes: string[], extensionId: string, extensionName: string,\n        options: { createIfNone: boolean, clearSessionPreference: boolean }): Promise<AuthenticationSession | undefined> {\n        const orderedScopes = scopes.sort().join(' ');\n        const sessions = (await this.authenticationService.getSessions(providerId)).filter(session => session.scopes.slice().sort().join(' ') === orderedScopes);\n        const label = this.authenticationService.getLabel(providerId);\n\n        if (sessions.length) {\n            if (!this.authenticationService.supportsMultipleAccounts(providerId)) {\n                const session = sessions[0];\n                const allowed = await this.getSessionsPrompt(providerId, session.account.label, label, extensionId, extensionName);\n                if (allowed) {\n                    return session;\n                } else {\n                    throw new Error('User did not consent to login.');\n                }\n            }\n\n            // On renderer side, confirm consent, ask user to choose between accounts if multiple sessions are valid\n            const selected = await this.selectSession(providerId, label, extensionId, extensionName, sessions, scopes, !!options.clearSessionPreference);\n            return sessions.find(session => session.id === selected.id);\n        } else {\n            if (options.createIfNone) {\n                const isAllowed = await this.loginPrompt(label, extensionName);\n                if (!isAllowed) {\n                    throw new Error('User did not consent to login.');\n                }\n\n                const session = await this.authenticationService.login(providerId, scopes);\n                await this.setTrustedExtensionAndAccountPreference(providerId, session.account.label, extensionId, extensionName, session.id);\n                return session;\n            } else {\n                await this.requestNewSession(providerId, scopes, extensionId, extensionName);\n                return undefined;\n            }\n        }\n    }\n\n    protected async selectSession(providerId: string, providerName: string, extensionId: string, extensionName: string,\n        potentialSessions: AuthenticationSession[], scopes: string[], clearSessionPreference: boolean): Promise<AuthenticationSession> {\n        if (!potentialSessions.length) {\n            throw new Error('No potential sessions found');\n        }\n\n        if (clearSessionPreference) {\n            await this.storageService.setData(`authentication-session-${extensionName}-${providerId}`, undefined);\n        } else {\n            const existingSessionPreference = await this.storageService.getData(`authentication-session-${extensionName}-${providerId}`);\n            if (existingSessionPreference) {\n                const matchingSession = potentialSessions.find(session => session.id === existingSessionPreference);\n                if (matchingSession) {\n                    const allowed = await this.getSessionsPrompt(providerId, matchingSession.account.label, providerName, extensionId, extensionName);\n                    if (allowed) {\n                        return matchingSession;\n                    }\n                }\n            }\n        }\n\n        return new Promise(async (resolve, reject) => {\n            const items: QuickPickItem<{ session?: AuthenticationSession }>[] = potentialSessions.map(session => ({\n                label: session.account.label,\n                value: { session }\n            }));\n            items.push({\n                label: 'Sign in to another account',\n                value: { session: undefined }\n            });\n            const selected = await this.quickPickService.show<{ session?: AuthenticationSession }>(items,\n                {\n                    title: `The extension '${extensionName}' wants to access a ${providerName} account`,\n                    ignoreFocusOut: true\n                });\n            if (selected) {\n                const session = selected.session ?? await this.authenticationService.login(providerId, scopes);\n                const accountName = session.account.label;\n\n                const allowList = await readAllowedExtensions(this.storageService, providerId, accountName);\n                if (!allowList.find(allowed => allowed.id === extensionId)) {\n                    allowList.push({ id: extensionId, name: extensionName });\n                    this.storageService.setData(`authentication-trusted-extensions-${providerId}-${accountName}`, JSON.stringify(allowList));\n                }\n\n                this.storageService.setData(`authentication-session-${extensionName}-${providerId}`, session.id);\n\n                resolve(session);\n\n            } else {\n                reject('User did not consent to account access');\n            }\n        });\n    }\n\n    protected async getSessionsPrompt(providerId: string, accountName: string, providerName: string, extensionId: string, extensionName: string): Promise<boolean> {\n        const allowList = await readAllowedExtensions(this.storageService, providerId, accountName);\n        const extensionData = allowList.find(extension => extension.id === extensionId);\n        if (extensionData) {\n            addAccountUsage(this.storageService, providerId, accountName, extensionId, extensionName);\n            return true;\n        }\n        const choice = await this.messageService.info(`The extension '${extensionName}' wants to access the ${providerName} account '${accountName}'.`, 'Allow', 'Cancel');\n\n        const allow = choice === 'Allow';\n        if (allow) {\n            await addAccountUsage(this.storageService, providerId, accountName, extensionId, extensionName);\n            allowList.push({ id: extensionId, name: extensionName });\n            this.storageService.setData(`authentication-trusted-extensions-${providerId}-${accountName}`, JSON.stringify(allowList));\n        }\n\n        return allow;\n    }\n\n    protected async loginPrompt(providerName: string, extensionName: string): Promise<boolean> {\n        const choice = await this.messageService.info(`The extension '${extensionName}' wants to sign in using ${providerName}.`, 'Allow', 'Cancel');\n        return choice === 'Allow';\n    }\n\n    protected async setTrustedExtensionAndAccountPreference(providerId: string, accountName: string, extensionId: string, extensionName: string, sessionId: string): Promise<void> {\n        const allowList = await readAllowedExtensions(this.storageService, providerId, accountName);\n        if (!allowList.find(allowed => allowed.id === extensionId)) {\n            allowList.push({ id: extensionId, name: extensionName });\n            this.storageService.setData(`authentication-trusted-extensions-${providerId}-${accountName}`, JSON.stringify(allowList));\n        }\n\n        this.storageService.setData(`authentication-session-${extensionName}-${providerId}`, sessionId);\n    }\n}\n\nasync function addAccountUsage(storageService: StorageService, providerId: string, accountName: string, extensionId: string, extensionName: string): Promise<void> {\n    const accountKey = `authentication-${providerId}-${accountName}-usages`;\n    const usages = await readAccountUsages(storageService, providerId, accountName);\n\n    const existingUsageIndex = usages.findIndex(usage => usage.extensionId === extensionId);\n    if (existingUsageIndex > -1) {\n        usages.splice(existingUsageIndex, 1, {\n            extensionId,\n            extensionName,\n            lastUsed: Date.now()\n        });\n    } else {\n        usages.push({\n            extensionId,\n            extensionName,\n            lastUsed: Date.now()\n        });\n    }\n\n    await storageService.setData(accountKey, JSON.stringify(usages));\n}\n\ninterface AccountUsage {\n    extensionId: string;\n    extensionName: string;\n    lastUsed: number;\n}\n\nexport class AuthenticationProviderImpl implements AuthenticationProvider {\n    private accounts = new Map<string, string[]>(); // Map account name to session ids\n    private sessions = new Map<string, string>(); // Map account id to name\n\n    constructor(\n        private readonly proxy: AuthenticationExt,\n        public readonly id: string,\n        public readonly label: string,\n        public readonly supportsMultipleAccounts: boolean,\n        private readonly storageService: StorageService,\n        private readonly messageService: MessageService\n    ) { }\n\n    public hasSessions(): boolean {\n        return !!this.sessions.size;\n    }\n\n    private registerSession(session: AuthenticationSession): void {\n        this.sessions.set(session.id, session.account.label);\n\n        const existingSessionsForAccount = this.accounts.get(session.account.label);\n        if (existingSessionsForAccount) {\n            this.accounts.set(session.account.label, existingSessionsForAccount.concat(session.id));\n            return;\n        } else {\n            this.accounts.set(session.account.label, [session.id]);\n        }\n    }\n\n    async signOut(accountName: string): Promise<void> {\n        const accountUsages = await readAccountUsages(this.storageService, this.id, accountName);\n        const sessionsForAccount = this.accounts.get(accountName);\n        const result = await this.messageService.info(accountUsages.length ? `The account ${accountName} has been used by:\n        ${accountUsages.map(usage => usage.extensionName).join(', ')}. Sign out of these features?` : `Sign out of ${accountName}?`, 'Yes');\n\n        if (result && result === 'Yes' && sessionsForAccount) {\n            sessionsForAccount.forEach(sessionId => this.logout(sessionId));\n            removeAccountUsage(this.storageService, this.id, accountName);\n        }\n    }\n\n    async getSessions(): Promise<ReadonlyArray<AuthenticationSession>> {\n        return this.proxy.$getSessions(this.id);\n    }\n\n    async updateSessionItems(event: AuthenticationSessionsChangeEvent): Promise<void> {\n        const { added, removed } = event;\n        const session = await this.proxy.$getSessions(this.id);\n        const addedSessions = session.filter(s => added.some(id => id === s.id));\n\n        removed.forEach(sessionId => {\n            const accountName = this.sessions.get(sessionId);\n            if (accountName) {\n                this.sessions.delete(sessionId);\n                const sessionsForAccount = this.accounts.get(accountName) || [];\n                const sessionIndex = sessionsForAccount.indexOf(sessionId);\n                sessionsForAccount.splice(sessionIndex);\n\n                if (!sessionsForAccount.length) {\n                    this.accounts.delete(accountName);\n                }\n            }\n        });\n\n        addedSessions.forEach(s => this.registerSession(s));\n    }\n\n    login(scopes: string[]): Promise<AuthenticationSession> {\n        return this.proxy.$login(this.id, scopes);\n    }\n\n    async logout(sessionId: string): Promise<void> {\n        await this.proxy.$logout(this.id, sessionId);\n        this.messageService.info('Successfully signed out.');\n    }\n}\n\nasync function readAccountUsages(storageService: StorageService, providerId: string, accountName: string): Promise<AccountUsage[]> {\n    const accountKey = `authentication-${providerId}-${accountName}-usages`;\n    const storedUsages: string | undefined = await storageService.getData(accountKey);\n    let usages: AccountUsage[] = [];\n    if (storedUsages) {\n        try {\n            usages = JSON.parse(storedUsages);\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    return usages;\n}\n\nfunction removeAccountUsage(storageService: StorageService, providerId: string, accountName: string): void {\n    const accountKey = `authentication-${providerId}-${accountName}-usages`;\n    storageService.setData(accountKey, undefined);\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Definition as CallHierarchyDefinition, Caller as CallHierarchyCaller } from '@theia/callhierarchy/lib/browser';\nimport * as model from '../../../common/plugin-api-rpc-model';\nimport * as rpc from '../../../common/plugin-api-rpc';\nimport * as callhierarchy from '@theia/core/shared/vscode-languageserver-types';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { UriComponents } from '../../../common/uri-components';\nimport { Location } from '@theia/core/shared/vscode-languageserver-types';\n\nexport function toUriComponents(uri: string): UriComponents {\n    return URI.parse(uri);\n}\n\nexport function fromUriComponents(uri: UriComponents): string {\n    return URI.revive(uri).toString();\n}\n\nexport function fromLocation(location: Location): model.Location {\n    return <model.Location>{\n        uri: URI.parse(location.uri),\n        range: fromRange(location.range)\n    };\n}\n\nexport function toLocation(uri: UriComponents, range: model.Range): Location {\n    return <Location>{\n        uri: URI.revive(uri).toString(),\n        range: toRange(range)\n    };\n}\n\nexport function fromPosition(position: callhierarchy.Position): rpc.Position {\n    return <rpc.Position>{\n        lineNumber: position.line,\n        column: position.character\n    };\n}\n\nexport function fromRange(range: callhierarchy.Range): model.Range {\n    const { start, end } = range;\n    return {\n        startLineNumber: start.line,\n        startColumn: start.character,\n        endLineNumber: end.line,\n        endColumn: end.character\n    };\n}\n\nexport function toRange(range: model.Range): callhierarchy.Range {\n    return callhierarchy.Range.create(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n}\n\nexport namespace SymbolKindConverter {\n    // tslint:disable-next-line:no-null-keyword\n    const fromMapping: { [kind: number]: model.SymbolKind } = Object.create(null);\n    fromMapping[callhierarchy.SymbolKind.File] = model.SymbolKind.File;\n    fromMapping[callhierarchy.SymbolKind.Module] = model.SymbolKind.Module;\n    fromMapping[callhierarchy.SymbolKind.Namespace] = model.SymbolKind.Namespace;\n    fromMapping[callhierarchy.SymbolKind.Package] = model.SymbolKind.Package;\n    fromMapping[callhierarchy.SymbolKind.Class] = model.SymbolKind.Class;\n    fromMapping[callhierarchy.SymbolKind.Method] = model.SymbolKind.Method;\n    fromMapping[callhierarchy.SymbolKind.Property] = model.SymbolKind.Property;\n    fromMapping[callhierarchy.SymbolKind.Field] = model.SymbolKind.Field;\n    fromMapping[callhierarchy.SymbolKind.Constructor] = model.SymbolKind.Constructor;\n    fromMapping[callhierarchy.SymbolKind.Enum] = model.SymbolKind.Enum;\n    fromMapping[callhierarchy.SymbolKind.Interface] = model.SymbolKind.Interface;\n    fromMapping[callhierarchy.SymbolKind.Function] = model.SymbolKind.Function;\n    fromMapping[callhierarchy.SymbolKind.Variable] = model.SymbolKind.Variable;\n    fromMapping[callhierarchy.SymbolKind.Constant] = model.SymbolKind.Constant;\n    fromMapping[callhierarchy.SymbolKind.String] = model.SymbolKind.String;\n    fromMapping[callhierarchy.SymbolKind.Number] = model.SymbolKind.Number;\n    fromMapping[callhierarchy.SymbolKind.Boolean] = model.SymbolKind.Boolean;\n    fromMapping[callhierarchy.SymbolKind.Array] = model.SymbolKind.Array;\n    fromMapping[callhierarchy.SymbolKind.Object] = model.SymbolKind.Object;\n    fromMapping[callhierarchy.SymbolKind.Key] = model.SymbolKind.Key;\n    fromMapping[callhierarchy.SymbolKind.Null] = model.SymbolKind.Null;\n    fromMapping[callhierarchy.SymbolKind.EnumMember] = model.SymbolKind.EnumMember;\n    fromMapping[callhierarchy.SymbolKind.Struct] = model.SymbolKind.Struct;\n    fromMapping[callhierarchy.SymbolKind.Event] = model.SymbolKind.Event;\n    fromMapping[callhierarchy.SymbolKind.Operator] = model.SymbolKind.Operator;\n    fromMapping[callhierarchy.SymbolKind.TypeParameter] = model.SymbolKind.TypeParameter;\n\n    export function fromSymbolKind(kind: callhierarchy.SymbolKind): model.SymbolKind {\n        return fromMapping[kind] || model.SymbolKind.Property;\n    }\n\n    // tslint:disable-next-line:no-null-keyword\n    const toMapping: { [kind: number]: callhierarchy.SymbolKind } = Object.create(null);\n    toMapping[model.SymbolKind.File] = callhierarchy.SymbolKind.File;\n    toMapping[model.SymbolKind.Module] = callhierarchy.SymbolKind.Module;\n    toMapping[model.SymbolKind.Namespace] = callhierarchy.SymbolKind.Namespace;\n    toMapping[model.SymbolKind.Package] = callhierarchy.SymbolKind.Package;\n    toMapping[model.SymbolKind.Class] = callhierarchy.SymbolKind.Class;\n    toMapping[model.SymbolKind.Method] = callhierarchy.SymbolKind.Method;\n    toMapping[model.SymbolKind.Property] = callhierarchy.SymbolKind.Property;\n    toMapping[model.SymbolKind.Field] = callhierarchy.SymbolKind.Field;\n    toMapping[model.SymbolKind.Constructor] = callhierarchy.SymbolKind.Constructor;\n    toMapping[model.SymbolKind.Enum] = callhierarchy.SymbolKind.Enum;\n    toMapping[model.SymbolKind.Interface] = callhierarchy.SymbolKind.Interface;\n    toMapping[model.SymbolKind.Function] = callhierarchy.SymbolKind.Function;\n    toMapping[model.SymbolKind.Variable] = callhierarchy.SymbolKind.Variable;\n    toMapping[model.SymbolKind.Constant] = callhierarchy.SymbolKind.Constant;\n    toMapping[model.SymbolKind.String] = callhierarchy.SymbolKind.String;\n    toMapping[model.SymbolKind.Number] = callhierarchy.SymbolKind.Number;\n    toMapping[model.SymbolKind.Boolean] = callhierarchy.SymbolKind.Boolean;\n    toMapping[model.SymbolKind.Array] = callhierarchy.SymbolKind.Array;\n    toMapping[model.SymbolKind.Object] = callhierarchy.SymbolKind.Object;\n    toMapping[model.SymbolKind.Key] = callhierarchy.SymbolKind.Key;\n    toMapping[model.SymbolKind.Null] = callhierarchy.SymbolKind.Null;\n    toMapping[model.SymbolKind.EnumMember] = callhierarchy.SymbolKind.EnumMember;\n    toMapping[model.SymbolKind.Struct] = callhierarchy.SymbolKind.Struct;\n    toMapping[model.SymbolKind.Event] = callhierarchy.SymbolKind.Event;\n    toMapping[model.SymbolKind.Operator] = callhierarchy.SymbolKind.Operator;\n    toMapping[model.SymbolKind.TypeParameter] = callhierarchy.SymbolKind.TypeParameter;\n\n    export function toSymbolKind(kind: model.SymbolKind): callhierarchy.SymbolKind {\n        return toMapping[kind] || model.SymbolKind.Property;\n    }\n}\n\nexport function toDefinition(definition: model.CallHierarchyDefinition): CallHierarchyDefinition;\nexport function toDefinition(definition: model.CallHierarchyDefinition | undefined): CallHierarchyDefinition | undefined;\nexport function toDefinition(definition: model.CallHierarchyDefinition | undefined): CallHierarchyDefinition | undefined {\n    if (!definition) {\n        return undefined;\n    }\n    return {\n        location: {\n            uri: fromUriComponents(definition.uri),\n            range: toRange(definition.range)\n        },\n        selectionRange: toRange(definition.selectionRange),\n        symbolName: definition.name,\n        symbolKind: SymbolKindConverter.toSymbolKind(definition.kind),\n        containerName: undefined\n    };\n}\n\nexport function fromDefinition(definition: CallHierarchyDefinition): model.CallHierarchyDefinition {\n    return {\n        uri: toUriComponents(definition.location.uri),\n        range: fromRange(definition.location.range),\n        selectionRange: fromRange(definition.selectionRange),\n        name: definition.symbolName,\n        kind: SymbolKindConverter.fromSymbolKind(definition.symbolKind)\n    };\n}\n\nexport function toCaller(caller: model.CallHierarchyReference): CallHierarchyCaller {\n    return {\n        callerDefinition: toDefinition(caller.callerDefinition),\n        references: caller.references.map(toRange)\n    };\n}\n\nexport function fromCaller(caller: CallHierarchyCaller): model.CallHierarchyReference {\n    return <model.CallHierarchyReference>{\n        callerDefinition: fromDefinition(caller.callerDefinition),\n        references: caller.references.map(fromRange)\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2019 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { ClipboardMain } from '../../common';\nimport { ClipboardService } from '@theia/core/lib/browser/clipboard-service';\n\nexport class ClipboardMainImpl implements ClipboardMain {\n\n    protected readonly clipboardService: ClipboardService;\n\n    constructor(container: interfaces.Container) {\n        this.clipboardService = container.get(ClipboardService);\n    }\n\n    async $readText(): Promise<string> {\n        const result = await this.clipboardService.readText();\n        return result;\n    }\n\n    async $writeText(value: string): Promise<void> {\n        await this.clipboardService.writeText(value);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { CommandRegistry } from '@theia/core/lib/common/command';\nimport * as theia from '@theia/plugin';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryMain, CommandRegistryExt, MAIN_RPC_CONTEXT } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { KeybindingRegistry } from '@theia/core/lib/browser';\nimport { PluginContributionHandler } from './plugin-contribution-handler';\n\nexport class CommandRegistryMainImpl implements CommandRegistryMain, Disposable {\n    private readonly proxy: CommandRegistryExt;\n    private readonly commands = new Map<string, Disposable>();\n    private readonly handlers = new Map<string, Disposable>();\n    private readonly delegate: CommandRegistry;\n    private readonly keyBinding: KeybindingRegistry;\n    private readonly contributions: PluginContributionHandler;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.COMMAND_REGISTRY_EXT);\n        this.delegate = container.get(CommandRegistry);\n        this.keyBinding = container.get(KeybindingRegistry);\n        this.contributions = container.get(PluginContributionHandler);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    $registerCommand(command: theia.CommandDescription): void {\n        const id = command.id;\n        this.commands.set(id, this.contributions.registerCommand(command));\n        this.toDispose.push(Disposable.create(() => this.$unregisterCommand(id)));\n    }\n    $unregisterCommand(id: string): void {\n        const command = this.commands.get(id);\n        if (command) {\n            command.dispose();\n            this.commands.delete(id);\n        }\n    }\n\n    $registerHandler(id: string): void {\n        this.handlers.set(id, this.contributions.registerCommandHandler(id, (...args) =>\n            this.proxy.$executeCommand(id, ...args)\n        ));\n        this.toDispose.push(Disposable.create(() => this.$unregisterHandler(id)));\n    }\n    $unregisterHandler(id: string): void {\n        const handler = this.handlers.get(id);\n        if (handler) {\n            handler.dispose();\n            this.handlers.delete(id);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async $executeCommand<T>(id: string, ...args: any[]): Promise<T | undefined> {\n        if (!this.delegate.getCommand(id)) {\n            throw new Error(`Command with id '${id}' is not registered.`);\n        }\n        try {\n            return await this.delegate.executeCommand(id, ...args);\n        } catch (e) {\n            // Command handler may be not active at the moment so the error must be caught. See https://github.com/eclipse-theia/theia/pull/6687#discussion_r354810079\n            if ('code' in e && e['code'] === 'NO_ACTIVE_HANDLER') {\n                return;\n            } else {\n                throw e;\n            }\n        }\n    }\n\n    $getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n        try {\n            const keyBindings = this.keyBinding.getKeybindingsForCommand(commandId);\n            if (keyBindings) {\n                // transform inner type to CommandKeyBinding\n                return Promise.resolve(keyBindings.map(keyBinding => ({ id: commandId, value: keyBinding.keybinding })));\n            } else {\n                return Promise.resolve(undefined);\n            }\n\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }\n\n    $getCommands(): PromiseLike<string[]> {\n        return Promise.resolve(this.delegate.commandIds);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { Command, CommandService } from '@theia/core/lib/common/command';\nimport { AbstractDialog } from '@theia/core/lib/browser';\nimport { WindowService } from '@theia/core/lib/browser/window/window-service';\nimport * as DOMPurify from '@theia/core/shared/dompurify';\n\n@injectable()\nexport class OpenUriCommandHandler {\n    public static readonly COMMAND_METADATA: Command = {\n        id: 'theia.open'\n    };\n\n    private openNewTabDialog: OpenNewTabDialog;\n\n    constructor(\n        @inject(WindowService)\n        protected readonly windowService: WindowService,\n        @inject(CommandService)\n        protected readonly commandService: CommandService\n    ) {\n        this.openNewTabDialog = new OpenNewTabDialog(windowService);\n    }\n\n    public execute(resource: URI | string | undefined): void {\n        if (!resource) {\n            return;\n        }\n\n        const uriString = resource.toString();\n        if (uriString.startsWith('http://') || uriString.startsWith('https://')) {\n            this.openWebUri(uriString);\n        } else {\n            this.commandService.executeCommand('editor.action.openLink', uriString);\n        }\n    }\n\n    private openWebUri(uri: string): void {\n        try {\n            this.windowService.openNewWindow(uri);\n        } catch (err) {\n            // browser has blocked opening of a new tab\n            this.openNewTabDialog.showOpenNewTabDialog(uri);\n        }\n    }\n}\n\nclass OpenNewTabDialog extends AbstractDialog<string> {\n    protected readonly windowService: WindowService;\n    protected readonly openButton: HTMLButtonElement;\n    protected readonly messageNode: HTMLDivElement;\n    protected readonly linkNode: HTMLAnchorElement;\n    value: string;\n\n    constructor(windowService: WindowService) {\n        super({\n            title: 'Your browser prevented opening of a new tab'\n        });\n        this.windowService = windowService;\n\n        this.linkNode = document.createElement('a');\n        this.linkNode.target = '_blank';\n        this.linkNode.setAttribute('style', 'color: var(--theia-editorWidget-foreground);');\n        this.contentNode.appendChild(this.linkNode);\n\n        const messageNode = document.createElement('div');\n        messageNode.innerText = 'You are going to open: ';\n        messageNode.appendChild(this.linkNode);\n        this.contentNode.appendChild(messageNode);\n\n        this.appendCloseButton();\n        this.openButton = this.appendAcceptButton('Open');\n    }\n\n    showOpenNewTabDialog(uri: string): void {\n        this.value = uri;\n\n        this.linkNode.innerHTML = DOMPurify.sanitize(uri);\n        this.linkNode.href = uri;\n        this.openButton.onclick = () => {\n            this.windowService.openNewWindow(uri);\n        };\n\n        // show dialog window to user\n        this.open();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable } from '@theia/core/lib/common';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/contrib/comments/browser/commentGlyphWidget.ts\n\nexport class CommentGlyphWidget implements Disposable {\n\n    private lineNumber!: number;\n    private editor: monaco.editor.ICodeEditor;\n    private commentsDecorations: string[] = [];\n    readonly commentsOptions: monaco.editor.IModelDecorationOptions;\n    constructor(editor: monaco.editor.ICodeEditor) {\n        this.commentsOptions = {\n            isWholeLine: true,\n            linesDecorationsClassName: 'comment-range-glyph comment-thread'\n        };\n        this.editor = editor;\n    }\n\n    getPosition(): number {\n        const model = this.editor.getModel();\n        const range = model && this.commentsDecorations && this.commentsDecorations.length\n            ? model.getDecorationRange(this.commentsDecorations[0])\n            : null;\n\n        return range ? range.startLineNumber : this.lineNumber;\n    }\n\n    setLineNumber(lineNumber: number): void {\n        this.lineNumber = lineNumber;\n        const commentsDecorations = [{\n            range: {\n                startLineNumber: lineNumber, startColumn: 1,\n                endLineNumber: lineNumber, endColumn: 1\n            },\n            options: this.commentsOptions\n        }];\n\n        this.commentsDecorations = this.editor.deltaDecorations(this.commentsDecorations, commentsDecorations);\n    }\n\n    dispose(): void {\n        if (this.commentsDecorations) {\n            this.editor.deltaDecorations(this.commentsDecorations, []);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { MonacoEditorZoneWidget } from '@theia/monaco/lib/browser/monaco-editor-zone-widget';\nimport {\n    Comment,\n    CommentMode,\n    CommentThread,\n    CommentThreadCollapsibleState\n} from '../../../common/plugin-api-rpc-model';\nimport { CommentGlyphWidget } from './comment-glyph-widget';\nimport { BaseWidget, DISABLED_CLASS } from '@theia/core/lib/browser';\nimport * as ReactDOM from '@theia/core/shared/react-dom';\nimport * as React from '@theia/core/shared/react';\nimport { MouseTargetType } from '@theia/editor/lib/browser';\nimport { CommentsService } from './comments-service';\nimport {\n    ActionMenuNode,\n    CommandRegistry,\n    CompositeMenuNode,\n    MenuModelRegistry,\n    MenuPath\n} from '@theia/core/lib/common';\nimport { CommentsContextKeyService } from './comments-context-key-service';\nimport { RefObject } from '@theia/core/shared/react';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/contrib/comments/browser/commentThreadWidget.ts\n\nexport const COMMENT_THREAD_CONTEXT: MenuPath = ['comment_thread-context-menu'];\nexport const COMMENT_CONTEXT: MenuPath = ['comment-context-menu'];\nexport const COMMENT_TITLE: MenuPath = ['comment-title-menu'];\n\nexport class CommentThreadWidget extends BaseWidget {\n\n    protected readonly zoneWidget: MonacoEditorZoneWidget;\n    protected readonly commentGlyphWidget: CommentGlyphWidget;\n    protected readonly contextMenu: CompositeMenuNode;\n    protected readonly commentFormRef: RefObject<CommentForm> = React.createRef<CommentForm>();\n\n    protected isExpanded?: boolean;\n\n    constructor(\n        editor: monaco.editor.IStandaloneCodeEditor,\n        private _owner: string,\n        private _commentThread: CommentThread,\n        private commentService: CommentsService,\n        protected readonly menus: MenuModelRegistry,\n        protected readonly contextKeyService: CommentsContextKeyService,\n        protected readonly commands: CommandRegistry\n    ) {\n        super();\n        this.toDispose.push(this.zoneWidget = new MonacoEditorZoneWidget(editor));\n        this.toDispose.push(this.commentGlyphWidget = new CommentGlyphWidget(editor));\n        this.toDispose.push(this._commentThread.onDidChangeCollapsibleState(state => {\n            if (state === CommentThreadCollapsibleState.Expanded && !this.isExpanded) {\n                const lineNumber = this._commentThread.range.startLineNumber;\n\n                this.display({ afterLineNumber: lineNumber, afterColumn: 1, heightInLines: 2 });\n                return;\n            }\n\n            if (state === CommentThreadCollapsibleState.Collapsed && this.isExpanded) {\n                this.hide();\n                return;\n            }\n        }));\n        this.contextKeyService.commentIsEmpty.set(true);\n        this.toDispose.push(this.zoneWidget.editor.onMouseDown(e => this.onEditorMouseDown(e)));\n        this.toDispose.push(this.contextKeyService.onDidChange(() => {\n            const commentForm = this.commentFormRef.current;\n            if (commentForm) {\n                commentForm.update();\n            }\n        }));\n        this.contextMenu = this.menus.getMenu(COMMENT_THREAD_CONTEXT);\n        this.contextMenu.children.map(node => node instanceof ActionMenuNode && node.action.when).forEach(exp => {\n            if (typeof exp === 'string') {\n                this.contextKeyService.setExpression(exp);\n            }\n        });\n    }\n\n    public getGlyphPosition(): number {\n        return this.commentGlyphWidget.getPosition();\n    }\n\n    public collapse(): void {\n        this._commentThread.collapsibleState = CommentThreadCollapsibleState.Collapsed;\n        if (this._commentThread.comments && this._commentThread.comments.length === 0) {\n            this.deleteCommentThread();\n        }\n\n        this.hide();\n    }\n\n    private deleteCommentThread(): void {\n        this.dispose();\n        this.commentService.disposeCommentThread(this.owner, this._commentThread.threadId);\n    }\n\n    dispose(): void {\n        super.dispose();\n        if (this.commentGlyphWidget) {\n            this.commentGlyphWidget.dispose();\n        }\n    }\n\n    toggleExpand(lineNumber: number): void {\n        if (this.isExpanded) {\n            this._commentThread.collapsibleState = CommentThreadCollapsibleState.Collapsed;\n            this.hide();\n            if (!this._commentThread.comments || !this._commentThread.comments.length) {\n                this.deleteCommentThread();\n            }\n        } else {\n            this._commentThread.collapsibleState = CommentThreadCollapsibleState.Expanded;\n            this.display({ afterLineNumber: lineNumber, afterColumn: 1, heightInLines: 2 });\n        }\n    }\n\n    hide(): void {\n        this.zoneWidget.hide();\n        this.isExpanded = false;\n        super.hide();\n    }\n\n    display(options: MonacoEditorZoneWidget.Options): void {\n        this.isExpanded = true;\n        if (this._commentThread.collapsibleState && this._commentThread.collapsibleState !== CommentThreadCollapsibleState.Expanded) {\n            return;\n        }\n        this.commentGlyphWidget.setLineNumber(options.afterLineNumber);\n        this._commentThread.collapsibleState = CommentThreadCollapsibleState.Expanded;\n        this.zoneWidget.show(options);\n        this.update();\n    }\n\n    private onEditorMouseDown(e: monaco.editor.IEditorMouseEvent): void {\n        const range = e.target.range;\n\n        if (!range) {\n            return;\n        }\n\n        if (!e.event.leftButton) {\n            return;\n        }\n\n        if (e.target.type !== MouseTargetType.GUTTER_LINE_DECORATIONS) {\n            return;\n        }\n\n        const data = e.target.detail;\n        const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\n\n        // don't collide with folding and git decorations\n        if (gutterOffsetX > 14) {\n            return;\n        }\n\n        const mouseDownInfo = { lineNumber: range.startLineNumber };\n\n        const { lineNumber } = mouseDownInfo;\n\n        if (!range || range.startLineNumber !== lineNumber) {\n            return;\n        }\n\n        if (e.target.type !== MouseTargetType.GUTTER_LINE_DECORATIONS) {\n            return;\n        }\n\n        if (!e.target.element) {\n            return;\n        }\n\n        if (this.commentGlyphWidget && this.commentGlyphWidget.getPosition() !== lineNumber) {\n            return;\n        }\n\n        if (e.target.element.className.indexOf('comment-thread') >= 0) {\n            this.toggleExpand(lineNumber);\n            return;\n        }\n\n        if (this._commentThread.collapsibleState === CommentThreadCollapsibleState.Collapsed) {\n            this.display({ afterLineNumber: mouseDownInfo.lineNumber, heightInLines: 2 });\n        } else {\n            this.hide();\n        }\n    }\n\n    public get owner(): string {\n        return this._owner;\n    }\n\n    public get commentThread(): CommentThread {\n        return this._commentThread;\n    }\n\n    private getThreadLabel(): string {\n        let label: string | undefined;\n        label = this._commentThread.label;\n\n        if (label === undefined) {\n            if (this._commentThread.comments && this._commentThread.comments.length) {\n                const onlyUnique = (value: Comment, index: number, self: Comment[]) => self.indexOf(value) === index;\n                const participantsList = this._commentThread.comments.filter(onlyUnique).map(comment => `@${comment.userName}`).join(', ');\n                label = `Participants: ${participantsList}`;\n            } else {\n                label = 'Start discussion';\n            }\n        }\n\n        return label;\n    }\n\n    update(): void {\n        if (!this.isExpanded) {\n            return;\n        }\n        this.render();\n        const headHeight = Math.ceil(this.zoneWidget.editor.getOption(monaco.editor.EditorOption.lineHeight) * 1.2);\n        const lineHeight = this.zoneWidget.editor.getOption(monaco.editor.EditorOption.lineHeight);\n        const arrowHeight = Math.round(lineHeight / 3);\n        const frameThickness = Math.round(lineHeight / 9) * 2;\n        const body = this.zoneWidget.containerNode.getElementsByClassName('body')[0];\n\n        const computedLinesNumber = Math.ceil((headHeight + body.clientHeight + arrowHeight + frameThickness + 8 /** margin bottom to avoid margin collapse */) / lineHeight);\n        this.zoneWidget.show({ afterLineNumber: this._commentThread.range.startLineNumber, heightInLines: computedLinesNumber });\n    }\n\n    protected render(): void {\n        const headHeight = Math.ceil(this.zoneWidget.editor.getOption(monaco.editor.EditorOption.lineHeight) * 1.2);\n        ReactDOM.render(<div className={'review-widget'}>\n            <div className={'head'} style={{ height: headHeight, lineHeight: `${headHeight}px` }}>\n                <div className={'review-title'}>\n                    <span className={'filename'}>{this.getThreadLabel()}</span>\n                </div>\n                <div className={'review-actions'}>\n                    <div className={'monaco-action-bar animated'}>\n                        <ul className={'actions-container'} role={'toolbar'}>\n                            <li className={'action-item'} role={'presentation'}>\n                                <a className={'action-label codicon expand-review-action codicon-chevron-up'}\n                                    role={'button'}\n                                    tabIndex={0}\n                                    title={'Collapse'}\n                                    onClick={() => this.collapse()}\n                                />\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div className={'body'}>\n                <div className={'comments-container'} role={'presentation'} tabIndex={0}>\n                    {this._commentThread.comments?.map((comment, index) => <ReviewComment\n                        key={index}\n                        contextKeyService={this.contextKeyService}\n                        menus={this.menus}\n                        comment={comment}\n                        commentForm={this.commentFormRef}\n                        commands={this.commands}\n                        commentThread={this._commentThread}\n                    />)}\n                </div>\n                <CommentForm contextKeyService={this.contextKeyService}\n                    commands={this.commands}\n                    commentThread={this._commentThread}\n                    menus={this.menus}\n                    widget={this}\n                    ref={this.commentFormRef}\n                />\n            </div>\n        </div>, this.zoneWidget.containerNode);\n    }\n}\n\nnamespace CommentForm {\n    export interface Props {\n        menus: MenuModelRegistry,\n        commentThread: CommentThread;\n        commands: CommandRegistry;\n        contextKeyService: CommentsContextKeyService;\n        widget: CommentThreadWidget;\n    }\n\n    export interface State {\n        expanded: boolean\n    }\n}\n\nexport class CommentForm<P extends CommentForm.Props = CommentForm.Props> extends React.Component<P, CommentForm.State> {\n    private readonly menu: CompositeMenuNode;\n    private inputRef: RefObject<HTMLTextAreaElement> = React.createRef<HTMLTextAreaElement>();\n    private inputValue: string = '';\n    private readonly getInput = () => this.inputValue;\n    private readonly clearInput: () => void = () => {\n        const input = this.inputRef.current;\n        if (input) {\n            this.inputValue = '';\n            input.value = this.inputValue;\n            this.props.contextKeyService.commentIsEmpty.set(true);\n        }\n    };\n\n    update(): void {\n        this.setState(this.state);\n    }\n\n    protected expand = () => {\n        this.setState({ expanded: true });\n        // Wait for the widget to be rendered.\n        setTimeout(() => {\n            // Update the widget's height.\n            this.props.widget.update();\n            this.inputRef.current?.focus();\n        }, 100);\n    };\n    protected collapse = () => {\n        this.setState({ expanded: false });\n        // Wait for the widget to be rendered.\n        setTimeout(() => {\n            // Update the widget's height.\n            this.props.widget.update();\n        }, 100);\n    };\n\n    componentDidMount(): void {\n        // Wait for the widget to be rendered.\n        setTimeout(() => {\n            this.inputRef.current?.focus();\n        }, 100);\n    }\n\n    private readonly onInput: (event: React.FormEvent) => void = (event: React.FormEvent) => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const value = (event.target as any).value;\n        if (this.inputValue.length === 0 || value.length === 0) {\n            this.props.contextKeyService.commentIsEmpty.set(value.length === 0);\n        }\n        this.inputValue = value;\n    };\n\n    constructor(props: P) {\n        super(props);\n        this.state = {\n            expanded: false\n        };\n\n        const setState = this.setState.bind(this);\n        this.setState = newState => {\n            setState(newState);\n        };\n\n        this.menu = this.props.menus.getMenu(COMMENT_THREAD_CONTEXT);\n        this.menu.children.map(node => node instanceof ActionMenuNode && node.action.when).forEach(exp => {\n            if (typeof exp === 'string') {\n                this.props.contextKeyService.setExpression(exp);\n            }\n        });\n    }\n\n    render(): React.ReactNode {\n        const { commands, commentThread, contextKeyService } = this.props;\n        const hasExistingComments = commentThread.comments && commentThread.comments.length > 0;\n        return <div className={'comment-form' + (this.state.expanded || commentThread.comments && commentThread.comments.length === 0 ? ' expand' : '')}>\n            <div className={'theia-comments-input-message-container'}>\n                <textarea className={'theia-comments-input-message theia-input'}\n                    placeholder={hasExistingComments ? 'Reply...' : 'Type a new comment'}\n                    onInput={this.onInput}\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    onBlur={(event: any) => {\n                        if (event.target.value.length > 0) {\n                            return;\n                        }\n                        if (event.relatedTarget && event.relatedTarget.className === 'comments-button comments-text-button theia-button') {\n                            this.state = { expanded: false };\n                            return;\n                        }\n                        this.collapse();\n                    }}\n                    ref={this.inputRef}>\n                </textarea>\n            </div>\n            <CommentActions menu={this.menu}\n                contextKeyService={contextKeyService}\n                commands={commands}\n                commentThread={commentThread}\n                getInput={this.getInput}\n                clearInput={this.clearInput}\n            />\n            <button className={'review-thread-reply-button'} title={'Reply...'} onClick={this.expand}>Reply...</button>\n        </div>;\n    }\n}\n\nnamespace ReviewComment {\n    export interface Props {\n        menus: MenuModelRegistry,\n        comment: Comment;\n        commentThread: CommentThread;\n        contextKeyService: CommentsContextKeyService;\n        commands: CommandRegistry;\n        commentForm: RefObject<CommentForm>;\n    }\n\n    export interface State {\n        hover: boolean\n    }\n}\n\nexport class ReviewComment<P extends ReviewComment.Props = ReviewComment.Props> extends React.Component<P, ReviewComment.State> {\n\n    constructor(props: P) {\n        super(props);\n        this.state = {\n            hover: false\n        };\n\n        const setState = this.setState.bind(this);\n        this.setState = newState => {\n            setState(newState);\n        };\n    }\n\n    protected detectHover = (element: HTMLElement | null) => {\n        if (element) {\n            window.requestAnimationFrame(() => {\n                const hover = element.matches(':hover');\n                this.setState({ hover });\n            });\n        }\n    };\n\n    protected showHover = () => this.setState({ hover: true });\n    protected hideHover = () => this.setState({ hover: false });\n\n    render(): React.ReactNode {\n        const { comment, commentForm, contextKeyService, menus, commands, commentThread } = this.props;\n        const commentUniqueId = comment.uniqueIdInThread;\n        const { hover } = this.state;\n        contextKeyService.comment.set(comment.contextValue);\n        return <div className={'review-comment'}\n            tabIndex={-1}\n            aria-label={`${comment.userName}, ${comment.body.value}`}\n            ref={this.detectHover}\n            onMouseEnter={this.showHover}\n            onMouseLeave={this.hideHover}>\n            <div className={'avatar-container'}>\n                <img className={'avatar'} src={comment.userIconPath} />\n            </div>\n            <div className={'review-comment-contents'}>\n                <div className={'comment-title monaco-mouse-cursor-text'}>\n                    <strong className={'author'}>{comment.userName}</strong>\n                    <span className={'isPending'}>{comment.label}</span>\n                    <div className={'theia-comments-inline-actions-container'}>\n                        <div className={'theia-comments-inline-actions'} role={'toolbar'}>\n                            {hover && menus.getMenu(COMMENT_TITLE).children.map((node, index) => node instanceof ActionMenuNode &&\n                                <CommentsInlineAction key={index} {...{ node, commands, commentThread, commentUniqueId, contextKeyService }} />)}\n                        </div>\n                    </div>\n                </div>\n                <CommentBody value={comment.body.value}\n                    isVisible={comment.mode === undefined || comment.mode === CommentMode.Preview} />\n                <CommentEditContainer contextKeyService={contextKeyService}\n                    menus={menus}\n                    comment={comment}\n                    commentThread={commentThread}\n                    commentForm={commentForm}\n                    commands={commands} />\n            </div>\n        </div>;\n    }\n}\n\nnamespace CommentBody {\n    export interface Props {\n        value: string\n        isVisible: boolean\n    }\n}\n\nexport class CommentBody extends React.Component<CommentBody.Props> {\n    render(): React.ReactNode {\n        const { value, isVisible } = this.props;\n        if (!isVisible) {\n            return false;\n        }\n        return <div className={'comment-body monaco-mouse-cursor-text'}>\n            <div>\n                <p>{value}</p>\n            </div>\n        </div>;\n    }\n}\n\nnamespace CommentEditContainer {\n    export interface Props {\n        contextKeyService: CommentsContextKeyService\n        menus: MenuModelRegistry,\n        comment: Comment;\n        commentThread: CommentThread;\n        commentForm: RefObject<CommentForm>;\n        commands: CommandRegistry;\n    }\n}\n\nexport class CommentEditContainer extends React.Component<CommentEditContainer.Props> {\n    private readonly inputRef: RefObject<HTMLTextAreaElement> = React.createRef<HTMLTextAreaElement>();\n    private dirtyCommentMode: CommentMode | undefined;\n    private dirtyCommentFormState: boolean | undefined;\n\n    componentDidUpdate(prevProps: Readonly<CommentEditContainer.Props>, prevState: Readonly<{}>): void {\n        const commentFormState = this.props.commentForm.current?.state;\n        const mode = this.props.comment.mode;\n        if (this.dirtyCommentMode !== mode || (this.dirtyCommentFormState !== commentFormState?.expanded && !commentFormState?.expanded)) {\n            const currentInput = this.inputRef.current;\n            if (currentInput) {\n                // Wait for the widget to be rendered.\n                setTimeout(() => {\n                    currentInput.focus();\n                    currentInput.setSelectionRange(currentInput.value.length, currentInput.value.length);\n                }, 50);\n            }\n        }\n        this.dirtyCommentMode = mode;\n        this.dirtyCommentFormState = commentFormState?.expanded;\n    }\n\n    render(): React.ReactNode {\n        const { menus, comment, commands, commentThread, contextKeyService } = this.props;\n        if (!(comment.mode === CommentMode.Editing)) {\n            return false;\n        }\n        return <div className={'edit-container'}>\n            <div className={'edit-textarea'}>\n                <div className={'theia-comments-input-message-container'}>\n                    <textarea className={'theia-comments-input-message theia-input'}\n                        defaultValue={comment.body.value}\n                        ref={this.inputRef} />\n                </div>\n            </div>\n            <div className={'form-actions'}>\n                {menus.getMenu(COMMENT_CONTEXT).children.map((node, index) => {\n                    const onClick = () => {\n                        commands.executeCommand(node.id, {\n                            thread: commentThread,\n                            commentUniqueId: comment.uniqueIdInThread,\n                            text: this.inputRef.current ? this.inputRef.current.value : ''\n                        });\n                    };\n                    return node instanceof ActionMenuNode &&\n                        <CommentAction key={index} {...{ node, commands, onClick, contextKeyService }} />;\n                }\n                )}\n            </div>\n        </div>;\n    }\n}\n\nnamespace CommentsInlineAction {\n    export interface Props {\n        node: ActionMenuNode;\n        commentThread: CommentThread;\n        commentUniqueId: number;\n        commands: CommandRegistry;\n        contextKeyService: CommentsContextKeyService;\n    }\n}\n\nexport class CommentsInlineAction extends React.Component<CommentsInlineAction.Props> {\n    render(): React.ReactNode {\n        const { node, commands, contextKeyService, commentThread, commentUniqueId } = this.props;\n        if (node.action.when && !contextKeyService.match(node.action.when)) {\n            return false;\n        }\n        return <div className='theia-comments-inline-action'>\n            <a className={node.icon}\n                title={node.label}\n                onClick={() => {\n                    commands.executeCommand(node.id, {\n                        thread: commentThread,\n                        commentUniqueId\n                    });\n                }} />\n        </div>;\n    }\n}\n\nnamespace CommentActions {\n    export interface Props {\n        contextKeyService: CommentsContextKeyService;\n        commands: CommandRegistry;\n        menu: CompositeMenuNode;\n        commentThread: CommentThread;\n        getInput: () => string;\n        clearInput: () => void;\n    }\n}\n\nexport class CommentActions extends React.Component<CommentActions.Props> {\n    render(): React.ReactNode {\n        const { contextKeyService, commands, menu, commentThread, getInput, clearInput } = this.props;\n        return <div className={'form-actions'}>\n            {menu.children.map((node, index) => node instanceof ActionMenuNode &&\n                <CommentAction key={index}\n                    commands={commands}\n                    node={node}\n                    onClick={() => {\n                        commands.executeCommand(node.id, {\n                            thread: commentThread,\n                            text: getInput()\n                        });\n                        clearInput();\n                    }}\n                    contextKeyService={contextKeyService}\n                />)}\n        </div>;\n    }\n}\nnamespace CommentAction {\n    export interface Props {\n        contextKeyService: CommentsContextKeyService;\n        commands: CommandRegistry;\n        node: ActionMenuNode;\n        onClick: () => void;\n    }\n}\n\nexport class CommentAction extends React.Component<CommentAction.Props> {\n    render(): React.ReactNode {\n        const classNames = ['comments-button', 'comments-text-button', 'theia-button'];\n        const { node, commands, contextKeyService, onClick } = this.props;\n        if (node.action.when && !contextKeyService.match(node.action.when)) {\n            return false;\n        }\n        const isEnabled = commands.isEnabled(node.action.commandId);\n        if (!isEnabled) {\n            classNames.push(DISABLED_CLASS);\n        }\n        return <button\n            className={classNames.join(' ')}\n            tabIndex={0}\n            role={'button'}\n            onClick={() => {\n                if (isEnabled) {\n                    onClick();\n                }\n            }}>{node.label}\n        </button>;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { ContextKeyService, ContextKey } from '@theia/core/lib/browser/context-key-service';\nimport { Emitter } from '@theia/core/lib/common';\n\n@injectable()\nexport class CommentsContextKeyService {\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n    protected readonly contextKeys: Set<string> = new Set();\n    protected readonly onDidChangeEmitter = new Emitter<void>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n    protected _commentIsEmpty: ContextKey<boolean>;\n    protected _commentController: ContextKey<string | undefined>;\n    protected _comment: ContextKey<string | undefined>;\n\n    get commentController(): ContextKey<string | undefined> {\n        return this._commentController;\n    }\n\n    get comment(): ContextKey<string | undefined> {\n        return this._comment;\n    }\n\n    get commentIsEmpty(): ContextKey<boolean> {\n        return this._commentIsEmpty;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.contextKeys.add('commentIsEmpty');\n        this._commentController = this.contextKeyService.createKey<string | undefined>('commentController', undefined);\n        this._comment = this.contextKeyService.createKey<string | undefined>('comment', undefined);\n        this._commentIsEmpty = this.contextKeyService.createKey<boolean>('commentIsEmpty', true);\n        this.contextKeyService.onDidChange(event => {\n            if (event.affects(this.contextKeys)) {\n                this.onDidChangeEmitter.fire();\n            }\n        });\n    }\n\n    setExpression(expression: string): void {\n        this.contextKeyService.parseKeys(expression).forEach(key => {\n            this.contextKeys.add(key);\n        });\n    }\n\n    match(expression: string | undefined): boolean {\n        return !expression || this.contextKeyService.match(expression);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from '@theia/core/shared/inversify';\nimport { CommentingRangeDecorator } from './comments-decorator';\nimport { EditorManager, EditorMouseEvent, EditorWidget } from '@theia/editor/lib/browser';\nimport { MonacoDiffEditor } from '@theia/monaco/lib/browser/monaco-diff-editor';\nimport { CommentThreadWidget } from './comment-thread-widget';\nimport { CommentsService, CommentInfoMain } from './comments-service';\nimport { CommentThread } from '../../../common/plugin-api-rpc-model';\nimport { CommandRegistry, DisposableCollection, MenuModelRegistry } from '@theia/core/lib/common';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { CommentsContextKeyService } from './comments-context-key-service';\nimport { ContextKeyService } from '@theia/core/lib/browser/context-key-service';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/contrib/comments/browser/comments.contribution.ts\n\n@injectable()\nexport class CommentsContribution {\n\n    private addInProgress!: boolean;\n    private commentWidgets: CommentThreadWidget[];\n    private commentInfos: CommentInfoMain[];\n    private emptyThreadsToAddQueue: [number, EditorMouseEvent | undefined][] = [];\n\n    @inject(MenuModelRegistry) protected readonly menus: MenuModelRegistry;\n    @inject(CommentsContextKeyService) protected readonly commentsContextKeyService: CommentsContextKeyService;\n    @inject(ContextKeyService) protected readonly contextKeyService: ContextKeyService;\n    @inject(CommandRegistry) protected readonly commands: CommandRegistry;\n\n    constructor(@inject(CommentingRangeDecorator) protected readonly rangeDecorator: CommentingRangeDecorator,\n        @inject(CommentsService) protected readonly commentService: CommentsService,\n        @inject(EditorManager) protected readonly editorManager: EditorManager) {\n        this.commentWidgets = [];\n        this.commentInfos = [];\n        this.commentService.onDidSetResourceCommentInfos(e => {\n            const editor = this.getCurrentEditor();\n            const editorURI = editor && editor.editor instanceof MonacoDiffEditor && editor.editor.diffEditor.getModifiedEditor().getModel();\n            if (editorURI && editorURI.toString() === e.resource.toString()) {\n                this.setComments(e.commentInfos.filter(commentInfo => commentInfo !== null));\n            }\n        });\n        this.editorManager.onCreated(async widget => {\n            const disposables = new DisposableCollection();\n            const editor = widget.editor;\n            if (editor instanceof MonacoDiffEditor) {\n                const originalEditorModel = editor.diffEditor.getOriginalEditor().getModel();\n                if (originalEditorModel) {\n                    const originalComments = await this.commentService.getComments(originalEditorModel.uri);\n                    if (originalComments) {\n                        this.rangeDecorator.update(editor.diffEditor.getOriginalEditor(), <CommentInfoMain[]>originalComments.filter(c => !!c));\n                    }\n                }\n                const modifiedEditorModel = editor.diffEditor.getModifiedEditor().getModel();\n                if (modifiedEditorModel) {\n                    const modifiedComments = await this.commentService.getComments(modifiedEditorModel.uri);\n                    if (modifiedComments) {\n                        this.rangeDecorator.update(editor.diffEditor.getModifiedEditor(), <CommentInfoMain[]>modifiedComments.filter(c => !!c));\n                    }\n                }\n                disposables.push(editor.onMouseDown(e => this.onEditorMouseDown(e)));\n                disposables.push(this.commentService.onDidUpdateCommentThreads(async e => {\n                    const editorURI = editor.document.uri;\n                    const commentInfo = this.commentInfos.filter(info => info.owner === e.owner);\n                    if (!commentInfo || !commentInfo.length) {\n                        return;\n                    }\n\n                    const added = e.added.filter(thread => thread.resource && thread.resource.toString() === editorURI.toString());\n                    const removed = e.removed.filter(thread => thread.resource && thread.resource.toString() === editorURI.toString());\n                    const changed = e.changed.filter(thread => thread.resource && thread.resource.toString() === editorURI.toString());\n\n                    removed.forEach(thread => {\n                        const matchedZones = this.commentWidgets.filter(zoneWidget => zoneWidget.owner === e.owner\n                            && zoneWidget.commentThread.threadId === thread.threadId && zoneWidget.commentThread.threadId !== '');\n                        if (matchedZones.length) {\n                            const matchedZone = matchedZones[0];\n                            const index = this.commentWidgets.indexOf(matchedZone);\n                            this.commentWidgets.splice(index, 1);\n                            matchedZone.dispose();\n                        }\n                    });\n\n                    changed.forEach(thread => {\n                        const matchedZones = this.commentWidgets.filter(zoneWidget => zoneWidget.owner === e.owner\n                            && zoneWidget.commentThread.threadId === thread.threadId);\n                        if (matchedZones.length) {\n                            const matchedZone = matchedZones[0];\n                            matchedZone.update();\n                        }\n                    });\n                    added.forEach(thread => {\n                        this.displayCommentThread(e.owner, thread);\n                        this.commentInfos.filter(info => info.owner === e.owner)[0].threads.push(thread);\n                    });\n                })\n                );\n                editor.onDispose(() => {\n                    disposables.dispose();\n                });\n                this.beginCompute();\n            }\n        });\n    }\n\n    private onEditorMouseDown(e: EditorMouseEvent): void {\n        let mouseDownInfo = null;\n\n        const range = e.target.range;\n\n        if (!range) {\n            return;\n        }\n\n        if (e.target.type !== monaco.editor.MouseTargetType.GUTTER_LINE_DECORATIONS) {\n            return;\n        }\n\n        const data = e.target.detail;\n        const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\n\n        // don't collide with folding and git decorations\n        if (gutterOffsetX > 14) {\n            return;\n        }\n\n        mouseDownInfo = { lineNumber: range.start };\n\n        const { lineNumber } = mouseDownInfo;\n        mouseDownInfo = null;\n\n        if (!range || range.start !== lineNumber) {\n            return;\n        }\n\n        if (!e.target.element) {\n            return;\n        }\n\n        if (e.target.element.className.indexOf('comment-diff-added') >= 0) {\n            this.addOrToggleCommentAtLine(e.target.position!.line + 1, e);\n        }\n    }\n\n    private async beginCompute(): Promise<void> {\n        const editorModel = this.editor && this.editor.getModel();\n        const editorURI = this.editor && editorModel && editorModel.uri;\n        if (editorURI) {\n            const comments = await this.commentService.getComments(editorURI);\n            this.setComments(<CommentInfoMain[]>comments.filter(c => !!c));\n        }\n    }\n\n    private setComments(commentInfos: CommentInfoMain[]): void {\n        if (!this.editor) {\n            return;\n        }\n\n        this.commentInfos = commentInfos;\n    }\n\n    get editor(): monaco.editor.IStandaloneCodeEditor | undefined {\n        const editor = this.getCurrentEditor();\n        if (editor && editor.editor instanceof MonacoDiffEditor) {\n            return editor.editor.diffEditor.getModifiedEditor();\n        }\n    }\n\n    private displayCommentThread(owner: string, thread: CommentThread): void {\n        const editor = this.editor;\n        if (editor) {\n            const provider = this.commentService.getCommentController(owner);\n            if (provider) {\n                this.commentsContextKeyService.commentController.set(provider.id);\n            }\n            const zoneWidget = new CommentThreadWidget(editor, owner, thread, this.commentService, this.menus, this.commentsContextKeyService, this.commands);\n            zoneWidget.display({ afterLineNumber: thread.range.startLineNumber, heightInLines: 5 });\n            const currentEditor = this.getCurrentEditor();\n            if (currentEditor) {\n                currentEditor.onDispose(() => zoneWidget.dispose());\n            }\n            this.commentWidgets.push(zoneWidget);\n        }\n    }\n\n    public async addOrToggleCommentAtLine(lineNumber: number, e: EditorMouseEvent | undefined): Promise<void> {\n        // If an add is already in progress, queue the next add and process it after the current one finishes to\n        // prevent empty comment threads from being added to the same line.\n        if (!this.addInProgress) {\n            this.addInProgress = true;\n            // The widget's position is undefined until the widget has been displayed, so rely on the glyph position instead\n            const existingCommentsAtLine = this.commentWidgets.filter(widget => widget.getGlyphPosition() === lineNumber);\n            if (existingCommentsAtLine.length) {\n                existingCommentsAtLine.forEach(widget => widget.toggleExpand(lineNumber));\n                this.processNextThreadToAdd();\n                return;\n            } else {\n                this.addCommentAtLine(lineNumber, e);\n            }\n        } else {\n            this.emptyThreadsToAddQueue.push([lineNumber, e]);\n        }\n    }\n\n    private processNextThreadToAdd(): void {\n        this.addInProgress = false;\n        const info = this.emptyThreadsToAddQueue.shift();\n        if (info) {\n            this.addOrToggleCommentAtLine(info[0], info[1]);\n        }\n    }\n\n    private getCurrentEditor(): EditorWidget | undefined {\n        return this.editorManager.currentEditor;\n    }\n\n    public addCommentAtLine(lineNumber: number, e: EditorMouseEvent | undefined): Promise<void> {\n        const newCommentInfos = this.rangeDecorator.getMatchedCommentAction(lineNumber);\n        const editor = this.getCurrentEditor();\n        if (!editor) {\n            return Promise.resolve();\n        }\n        if (!newCommentInfos.length) {\n            return Promise.resolve();\n        }\n\n        const { ownerId } = newCommentInfos[0]!;\n        this.addCommentAtLine2(lineNumber, ownerId);\n\n        return Promise.resolve();\n    }\n\n    public addCommentAtLine2(lineNumber: number, ownerId: string): void {\n        const editorModel = this.editor && this.editor.getModel();\n        const editorURI = this.editor && editorModel && editorModel.uri;\n        if (editorURI) {\n            this.commentService.createCommentThreadTemplate(ownerId, URI.parse(editorURI.toString()), {\n                startLineNumber: lineNumber,\n                endLineNumber: lineNumber,\n                startColumn: 1,\n                endColumn: 1\n            });\n            this.processNextThreadToAdd();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { CommentInfoMain } from './comments-service';\nimport { CommentingRanges, Range } from '../../../common/plugin-api-rpc-model';\n\n@injectable()\nexport class CommentingRangeDecorator {\n\n    private decorationOptions: monaco.editor.IModelDecorationOptions;\n    private commentingRangeDecorations: CommentingRangeDecoration[] = [];\n\n    constructor() {\n        this.decorationOptions = {\n            isWholeLine: true,\n            linesDecorationsClassName: 'comment-range-glyph comment-diff-added'\n        };\n    }\n\n    public update(editor: monaco.editor.ICodeEditor, commentInfos: CommentInfoMain[]): void {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n\n        const commentingRangeDecorations: CommentingRangeDecoration[] = [];\n        for (const info of commentInfos) {\n            info.commentingRanges.ranges.forEach(range => {\n                commentingRangeDecorations.push(new CommentingRangeDecoration(editor, info.owner, info.extensionId, info.label,\n                    range, this.decorationOptions, info.commentingRanges));\n            });\n        }\n\n        const oldDecorations = this.commentingRangeDecorations.map(decoration => decoration.id);\n        editor.deltaDecorations(oldDecorations, []);\n\n        this.commentingRangeDecorations = commentingRangeDecorations;\n    }\n\n    public getMatchedCommentAction(line: number): { ownerId: string, extensionId: string | undefined, label: string | undefined, commentingRangesInfo: CommentingRanges }[] {\n        const result = [];\n        for (const decoration of this.commentingRangeDecorations) {\n            const range = decoration.getActiveRange();\n            if (range && range.startLineNumber <= line && line <= range.endLineNumber) {\n                result.push(decoration.getCommentAction());\n            }\n        }\n\n        return result;\n    }\n}\n\nclass CommentingRangeDecoration {\n    private decorationId: string;\n\n    public get id(): string {\n        return this.decorationId;\n    }\n\n    constructor(private _editor: monaco.editor.ICodeEditor, private _ownerId: string, private _extensionId: string | undefined,\n        private _label: string | undefined, private _range: Range, commentingOptions: monaco.editor.IModelDecorationOptions,\n        private commentingRangesInfo: CommentingRanges) {\n        const startLineNumber = _range.startLineNumber;\n        const endLineNumber = _range.endLineNumber;\n        const commentingRangeDecorations = [{\n            range: {\n                startLineNumber: startLineNumber, startColumn: 1,\n                endLineNumber: endLineNumber, endColumn: 1\n            },\n            options: commentingOptions\n        }];\n\n        this.decorationId = this._editor.deltaDecorations([], commentingRangeDecorations)[0];\n    }\n\n    public getCommentAction(): { ownerId: string, extensionId: string | undefined, label: string | undefined, commentingRangesInfo: CommentingRanges } {\n        return {\n            extensionId: this._extensionId,\n            label: this._label,\n            ownerId: this._ownerId,\n            commentingRangesInfo: this.commentingRangesInfo\n        };\n    }\n\n    public getOriginalRange(): Range {\n        return this._range;\n    }\n\n    public getActiveRange(): Range | undefined {\n        const range = this._editor.getModel()!.getDecorationRange(this.decorationId);\n        if (range) {\n            return range;\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    Range,\n    Comment,\n    CommentInput,\n    CommentOptions,\n    CommentThread,\n    CommentThreadChangedEvent\n} from '../../../common/plugin-api-rpc-model';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { CommentThreadCollapsibleState } from '../../../plugin/types-impl';\nimport {\n    CommentProviderFeatures,\n    CommentsExt,\n    CommentsMain,\n    CommentThreadChanges,\n    MAIN_RPC_CONTEXT\n} from '../../../common/plugin-api-rpc';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { CommentsService, CommentInfoMain } from './comments-service';\nimport { UriComponents } from '../../../common/uri-components';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { CancellationToken } from '@theia/core/lib/common';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { v4 as uuidv4 } from 'uuid';\nimport { CommentsContribution } from './comments-contribution';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/api/browser/mainThreadComments.ts\n\nexport class CommentThreadImpl implements CommentThread, Disposable {\n    private _input?: CommentInput;\n    get input(): CommentInput | undefined {\n        return this._input;\n    }\n\n    set input(value: CommentInput | undefined) {\n        this._input = value;\n        this.onDidChangeInputEmitter.fire(value);\n    }\n\n    private readonly onDidChangeInputEmitter = new Emitter<CommentInput | undefined>();\n    get onDidChangeInput(): Event<CommentInput | undefined> { return this.onDidChangeInputEmitter.event; }\n\n    private _label: string | undefined;\n\n    get label(): string | undefined {\n        return this._label;\n    }\n\n    set label(label: string | undefined) {\n        this._label = label;\n        this.onDidChangeLabelEmitter.fire(this._label);\n    }\n\n    private readonly onDidChangeLabelEmitter = new Emitter<string | undefined>();\n    readonly onDidChangeLabel: Event<string | undefined> = this.onDidChangeLabelEmitter.event;\n\n    private _contextValue: string | undefined;\n\n    get contextValue(): string | undefined {\n        return this._contextValue;\n    }\n\n    set contextValue(context: string | undefined) {\n        this._contextValue = context;\n    }\n\n    private _comments: Comment[] | undefined;\n\n    public get comments(): Comment[] | undefined {\n        return this._comments;\n    }\n\n    public set comments(newComments: Comment[] | undefined) {\n        this._comments = newComments;\n        this.onDidChangeCommentsEmitter.fire(this._comments);\n    }\n\n    private readonly onDidChangeCommentsEmitter = new Emitter<Comment[] | undefined>();\n    get onDidChangeComments(): Event<Comment[] | undefined> { return this.onDidChangeCommentsEmitter.event; }\n\n    set range(range: Range) {\n        this._range = range;\n        this.onDidChangeRangeEmitter.fire(this._range);\n    }\n\n    get range(): Range {\n        return this._range;\n    }\n\n    private readonly onDidChangeRangeEmitter = new Emitter<Range>();\n    public onDidChangeRange = this.onDidChangeRangeEmitter.event;\n\n    private _collapsibleState: CommentThreadCollapsibleState | undefined;\n    get collapsibleState(): CommentThreadCollapsibleState | undefined {\n        return this._collapsibleState;\n    }\n\n    set collapsibleState(newState: CommentThreadCollapsibleState | undefined) {\n        this._collapsibleState = newState;\n        this.onDidChangeCollapsibleStateEmitter.fire(this._collapsibleState);\n    }\n\n    private readonly onDidChangeCollapsibleStateEmitter = new Emitter<CommentThreadCollapsibleState | undefined>();\n    readonly onDidChangeCollapsibleState = this.onDidChangeCollapsibleStateEmitter.event;\n\n    private _isDisposed: boolean;\n\n    get isDisposed(): boolean {\n        return this._isDisposed;\n    }\n\n    constructor(\n        public commentThreadHandle: number,\n        public controllerHandle: number,\n        public extensionId: string,\n        public threadId: string,\n        public resource: string,\n        private _range: Range\n    ) {\n        this._isDisposed = false;\n    }\n\n    batchUpdate(changes: CommentThreadChanges): void {\n        const modified = (value: keyof CommentThreadChanges): boolean =>\n            Object.prototype.hasOwnProperty.call(changes, value);\n\n        if (modified('range')) { this._range = changes.range!; }\n        if (modified('label')) { this._label = changes.label; }\n        if (modified('contextValue')) { this._contextValue = changes.contextValue; }\n        if (modified('comments')) { this._comments = changes.comments; }\n        if (modified('collapseState')) { this._collapsibleState = changes.collapseState; }\n    }\n\n    dispose(): void {\n        this._isDisposed = true;\n        this.onDidChangeCollapsibleStateEmitter.dispose();\n        this.onDidChangeCommentsEmitter.dispose();\n        this.onDidChangeInputEmitter.dispose();\n        this.onDidChangeLabelEmitter.dispose();\n        this.onDidChangeRangeEmitter.dispose();\n    }\n}\n\nexport class CommentController {\n    get handle(): number {\n        return this._handle;\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get contextValue(): string {\n        return this._id;\n    }\n\n    get proxy(): CommentsExt {\n        return this._proxy;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get options(): CommentOptions | undefined {\n        return this._features.options;\n    }\n\n    private readonly threads: Map<number, CommentThreadImpl> = new Map<number, CommentThreadImpl>();\n    public activeCommentThread?: CommentThread;\n\n    get features(): CommentProviderFeatures {\n        return this._features;\n    }\n\n    constructor(\n        private readonly _proxy: CommentsExt,\n        private readonly _commentService: CommentsService,\n        private readonly _handle: number,\n        private readonly _uniqueId: string,\n        private readonly _id: string,\n        private readonly _label: string,\n        private _features: CommentProviderFeatures\n    ) { }\n\n    updateFeatures(features: CommentProviderFeatures): void {\n        this._features = features;\n    }\n\n    createCommentThread(extensionId: string,\n        commentThreadHandle: number,\n        threadId: string,\n        resource: UriComponents,\n        range: Range,\n    ): CommentThread {\n        const thread = new CommentThreadImpl(\n            commentThreadHandle,\n            this.handle,\n            extensionId,\n            threadId,\n            URI.revive(resource).toString(),\n            range\n        );\n\n        this.threads.set(commentThreadHandle, thread);\n\n        this._commentService.updateComments(this._uniqueId, {\n            added: [thread],\n            removed: [],\n            changed: []\n        });\n\n        return thread;\n    }\n\n    updateCommentThread(commentThreadHandle: number,\n        threadId: string,\n        resource: UriComponents,\n        changes: CommentThreadChanges): void {\n        const thread = this.getKnownThread(commentThreadHandle);\n        thread.batchUpdate(changes);\n\n        this._commentService.updateComments(this._uniqueId, {\n            added: [],\n            removed: [],\n            changed: [thread]\n        });\n    }\n\n    deleteCommentThread(commentThreadHandle: number): void {\n        const thread = this.getKnownThread(commentThreadHandle);\n        this.threads.delete(commentThreadHandle);\n\n        this._commentService.updateComments(this._uniqueId, {\n            added: [],\n            removed: [thread],\n            changed: []\n        });\n\n        thread.dispose();\n    }\n\n    deleteCommentThreadMain(commentThreadId: string): void {\n        this.threads.forEach(thread => {\n            if (thread.threadId === commentThreadId) {\n                this._proxy.$deleteCommentThread(this._handle, thread.commentThreadHandle);\n            }\n        });\n    }\n\n    updateInput(input: string): void {\n        const thread = this.activeCommentThread;\n\n        if (thread && thread.input) {\n            const commentInput = thread.input;\n            commentInput.value = input;\n            thread.input = commentInput;\n        }\n    }\n\n    private getKnownThread(commentThreadHandle: number): CommentThreadImpl {\n        const thread = this.threads.get(commentThreadHandle);\n        if (!thread) {\n            throw new Error('unknown thread');\n        }\n        return thread;\n    }\n\n    async getDocumentComments(resource: URI, token: CancellationToken): Promise<CommentInfoMain> {\n        const ret: CommentThread[] = [];\n        for (const thread of [...this.threads.keys()]) {\n            const commentThread = this.threads.get(thread)!;\n            if (commentThread.resource === resource.toString()) {\n                ret.push(commentThread);\n            }\n        }\n\n        const commentingRanges = await this._proxy.$provideCommentingRanges(this.handle, resource, token);\n\n        return <CommentInfoMain>{\n            owner: this._uniqueId,\n            label: this.label,\n            threads: ret,\n            commentingRanges: {\n                resource: resource,\n                ranges: commentingRanges || []\n            }\n        };\n    }\n\n    async getCommentingRanges(resource: URI, token: CancellationToken): Promise<Range[]> {\n        const commentingRanges = await this._proxy.$provideCommentingRanges(this.handle, resource, token);\n        return commentingRanges || [];\n    }\n\n    getAllComments(): CommentThread[] {\n        const ret: CommentThread[] = [];\n        for (const thread of [...this.threads.keys()]) {\n            ret.push(this.threads.get(thread)!);\n        }\n\n        return ret;\n    }\n\n    createCommentThreadTemplate(resource: UriComponents, range: Range): void {\n        this._proxy.$createCommentThreadTemplate(this.handle, resource, range);\n    }\n\n    async updateCommentThreadTemplate(threadHandle: number, range: Range): Promise<void> {\n        await this._proxy.$updateCommentThreadTemplate(this.handle, threadHandle, range);\n    }\n}\n\nexport class CommentsMainImp implements CommentsMain {\n    private readonly proxy: CommentsExt;\n    private documentProviders = new Map<number, Disposable>();\n    private workspaceProviders = new Map<number, Disposable>();\n    private handlers = new Map<number, string>();\n    private commentControllers = new Map<number, CommentController>();\n\n    private activeCommentThread?: CommentThread;\n    private readonly commentService: CommentsService;\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.COMMENTS_EXT);\n        container.get(CommentsContribution);\n        this.commentService = container.get(CommentsService);\n        this.commentService.onDidChangeActiveCommentThread(async thread => {\n            const handle = (thread as CommentThread).controllerHandle;\n            const controller = this.commentControllers.get(handle);\n\n            if (!controller) {\n                return;\n            }\n\n            this.activeCommentThread = thread as CommentThread;\n            controller.activeCommentThread = this.activeCommentThread;\n        });\n    }\n\n    $registerCommentController(handle: number, id: string, label: string): void {\n        const providerId = uuidv4();\n        this.handlers.set(handle, providerId);\n\n        const provider = new CommentController(this.proxy, this.commentService, handle, providerId, id, label, {});\n        this.commentService.registerCommentController(providerId, provider);\n        this.commentControllers.set(handle, provider);\n        this.commentService.setWorkspaceComments(String(handle), []);\n    }\n\n    $unregisterCommentController(handle: number): void {\n        const providerId = this.handlers.get(handle);\n        if (typeof providerId !== 'string') {\n            throw new Error('unknown handler');\n        }\n        this.commentService.unregisterCommentController(providerId);\n        this.handlers.delete(handle);\n        this.commentControllers.delete(handle);\n    }\n\n    $updateCommentControllerFeatures(handle: number, features: CommentProviderFeatures): void {\n        const provider = this.commentControllers.get(handle);\n\n        if (!provider) {\n            return undefined;\n        }\n\n        provider.updateFeatures(features);\n    }\n\n    $createCommentThread(handle: number,\n        commentThreadHandle: number,\n        threadId: string,\n        resource: UriComponents,\n        range: Range,\n        extensionId: string\n    ): CommentThread | undefined {\n        const provider = this.commentControllers.get(handle);\n\n        if (!provider) {\n            return undefined;\n        }\n\n        return provider.createCommentThread(extensionId, commentThreadHandle, threadId, resource, range);\n    }\n\n    $updateCommentThread(handle: number,\n        commentThreadHandle: number,\n        threadId: string,\n        resource: UriComponents,\n        changes: CommentThreadChanges): void {\n        const provider = this.commentControllers.get(handle);\n\n        if (!provider) {\n            return undefined;\n        }\n\n        return provider.updateCommentThread(commentThreadHandle, threadId, resource, changes);\n    }\n\n    $deleteCommentThread(handle: number, commentThreadHandle: number): void {\n        const provider = this.commentControllers.get(handle);\n\n        if (!provider) {\n            return;\n        }\n\n        return provider.deleteCommentThread(commentThreadHandle);\n    }\n\n    private getHandler(handle: number): string {\n        if (!this.handlers.has(handle)) {\n            throw new Error('Unknown handler');\n        }\n        return this.handlers.get(handle)!;\n    }\n\n    $onDidCommentThreadsChange(handle: number, event: CommentThreadChangedEvent): void {\n        const providerId = this.getHandler(handle);\n        this.commentService.updateComments(providerId, event);\n    }\n\n    dispose(): void {\n        this.workspaceProviders.forEach(value => value.dispose());\n        this.workspaceProviders.clear();\n        this.documentProviders.forEach(value => value.dispose());\n        this.documentProviders.clear();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport {\n    Range,\n    CommentInfo,\n    CommentingRanges,\n    CommentThread,\n    CommentThreadChangedEvent,\n    CommentThreadChangedEventMain\n} from '../../../common/plugin-api-rpc-model';\nimport { CommentController } from './comments-main';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/contrib/comments/browser/commentService.ts\n\nexport interface ResourceCommentThreadEvent {\n    resource: URI;\n    commentInfos: CommentInfoMain[];\n}\n\nexport interface CommentInfoMain extends CommentInfo {\n    owner: string;\n    label?: string;\n}\n\nexport interface WorkspaceCommentThreadsEventMain {\n    ownerId: string;\n    commentThreads: CommentThread[];\n}\n\nexport const CommentsService = Symbol('CommentsService');\n\nexport interface CommentsService {\n    readonly onDidSetResourceCommentInfos: Event<ResourceCommentThreadEvent>;\n    readonly onDidSetAllCommentThreads: Event<WorkspaceCommentThreadsEventMain>;\n    readonly onDidUpdateCommentThreads: Event<CommentThreadChangedEventMain>;\n    readonly onDidChangeActiveCommentThread: Event<CommentThread | null>;\n    readonly onDidChangeActiveCommentingRange: Event<{ range: Range, commentingRangesInfo: CommentingRanges }>;\n    readonly onDidSetDataProvider: Event<void>;\n    readonly onDidDeleteDataProvider: Event<string>;\n\n    setDocumentComments(resource: URI, commentInfos: CommentInfoMain[]): void;\n\n    setWorkspaceComments(owner: string, commentsByResource: CommentThread[]): void;\n\n    removeWorkspaceComments(owner: string): void;\n\n    registerCommentController(owner: string, commentControl: CommentController): void;\n\n    unregisterCommentController(owner: string): void;\n\n    getCommentController(owner: string): CommentController | undefined;\n\n    createCommentThreadTemplate(owner: string, resource: URI, range: Range): void;\n\n    updateCommentThreadTemplate(owner: string, threadHandle: number, range: Range): Promise<void>;\n\n    updateComments(ownerId: string, event: CommentThreadChangedEvent): void;\n\n    disposeCommentThread(ownerId: string, threadId: string): void;\n\n    getComments(resource: URI): Promise<(CommentInfoMain | null)[]>;\n\n    getCommentingRanges(resource: URI): Promise<Range[]>;\n\n    setActiveCommentThread(commentThread: CommentThread | null): void;\n}\n\n@injectable()\nexport class PluginCommentService implements CommentsService {\n\n    private readonly onDidSetDataProviderEmitter: Emitter<void> = new Emitter<void>();\n    readonly onDidSetDataProvider: Event<void> = this.onDidSetDataProviderEmitter.event;\n\n    private readonly onDidDeleteDataProviderEmitter: Emitter<string> = new Emitter<string>();\n    readonly onDidDeleteDataProvider: Event<string> = this.onDidDeleteDataProviderEmitter.event;\n\n    private readonly onDidSetResourceCommentInfosEmitter: Emitter<ResourceCommentThreadEvent> = new Emitter<ResourceCommentThreadEvent>();\n    readonly onDidSetResourceCommentInfos: Event<ResourceCommentThreadEvent> = this.onDidSetResourceCommentInfosEmitter.event;\n\n    private readonly onDidSetAllCommentThreadsEmitter: Emitter<WorkspaceCommentThreadsEventMain> = new Emitter<WorkspaceCommentThreadsEventMain>();\n    readonly onDidSetAllCommentThreads: Event<WorkspaceCommentThreadsEventMain> = this.onDidSetAllCommentThreadsEmitter.event;\n\n    private readonly onDidUpdateCommentThreadsEmitter: Emitter<CommentThreadChangedEventMain> = new Emitter<CommentThreadChangedEventMain>();\n    readonly onDidUpdateCommentThreads: Event<CommentThreadChangedEventMain> = this.onDidUpdateCommentThreadsEmitter.event;\n\n    private readonly onDidChangeActiveCommentThreadEmitter = new Emitter<CommentThread | null>();\n    readonly onDidChangeActiveCommentThread = this.onDidChangeActiveCommentThreadEmitter.event;\n\n    private readonly onDidChangeActiveCommentingRangeEmitter = new Emitter<{ range: Range, commentingRangesInfo: CommentingRanges }>();\n    readonly onDidChangeActiveCommentingRange: Event<{ range: Range, commentingRangesInfo: CommentingRanges }> = this.onDidChangeActiveCommentingRangeEmitter.event;\n\n    private commentControls = new Map<string, CommentController>();\n\n    setActiveCommentThread(commentThread: CommentThread | null): void {\n        this.onDidChangeActiveCommentThreadEmitter.fire(commentThread);\n    }\n\n    setDocumentComments(resource: URI, commentInfos: CommentInfoMain[]): void {\n        this.onDidSetResourceCommentInfosEmitter.fire({ resource, commentInfos });\n    }\n\n    setWorkspaceComments(owner: string, commentsByResource: CommentThread[]): void {\n        this.onDidSetAllCommentThreadsEmitter.fire({ ownerId: owner, commentThreads: commentsByResource });\n    }\n\n    removeWorkspaceComments(owner: string): void {\n        this.onDidSetAllCommentThreadsEmitter.fire({ ownerId: owner, commentThreads: [] });\n    }\n\n    registerCommentController(owner: string, commentControl: CommentController): void {\n        this.commentControls.set(owner, commentControl);\n        this.onDidSetDataProviderEmitter.fire();\n    }\n\n    unregisterCommentController(owner: string): void {\n        this.commentControls.delete(owner);\n        this.onDidDeleteDataProviderEmitter.fire(owner);\n    }\n\n    getCommentController(owner: string): CommentController | undefined {\n        return this.commentControls.get(owner);\n    }\n\n    createCommentThreadTemplate(owner: string, resource: URI, range: Range): void {\n        const commentController = this.commentControls.get(owner);\n\n        if (!commentController) {\n            return;\n        }\n\n        commentController.createCommentThreadTemplate(resource, range);\n    }\n\n    async updateCommentThreadTemplate(owner: string, threadHandle: number, range: Range): Promise<void> {\n        const commentController = this.commentControls.get(owner);\n\n        if (!commentController) {\n            return;\n        }\n\n        await commentController.updateCommentThreadTemplate(threadHandle, range);\n    }\n\n    disposeCommentThread(owner: string, threadId: string): void {\n        const controller = this.getCommentController(owner);\n        if (controller) {\n            controller.deleteCommentThreadMain(threadId);\n        }\n    }\n\n    updateComments(ownerId: string, event: CommentThreadChangedEvent): void {\n        const evt: CommentThreadChangedEventMain = Object.assign({}, event, { owner: ownerId });\n        this.onDidUpdateCommentThreadsEmitter.fire(evt);\n    }\n\n    async getComments(resource: URI): Promise<(CommentInfoMain | null)[]> {\n        const commentControlResult: Promise<CommentInfoMain | null>[] = [];\n\n        this.commentControls.forEach(control => {\n            commentControlResult.push(control.getDocumentComments(resource, CancellationToken.None)\n                .catch(e => {\n                    console.log(e);\n                    return null;\n                }));\n        });\n\n        return Promise.all(commentControlResult);\n    }\n\n    async getCommentingRanges(resource: URI): Promise<Range[]> {\n        const commentControlResult: Promise<Range[]>[] = [];\n\n        this.commentControls.forEach(control => {\n            commentControlResult.push(control.getCommentingRanges(resource, CancellationToken.None));\n        });\n\n        const ret = await Promise.all(commentControlResult);\n        return ret.reduce((prev, curr) => {\n            prev.push(...curr);\n            return prev;\n        }, []);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { MAIN_RPC_CONTEXT, ConnectionMain, ConnectionExt } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PluginConnection } from '../../common/connection';\nimport { PluginMessageReader } from '../../common/plugin-message-reader';\nimport { PluginMessageWriter } from '../../common/plugin-message-writer';\n\n/**\n * Implementation of connection system of the plugin API.\n * Creates holds the connections to the plugins. Allows to send a message to the plugin by getting already created connection via id.\n */\nexport class ConnectionMainImpl implements ConnectionMain, Disposable {\n\n    private readonly proxy: ConnectionExt;\n    private readonly connections = new Map<string, PluginConnection>();\n    private readonly toDispose = new DisposableCollection();\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.CONNECTION_EXT);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    /**\n     * Gets the connection between plugin by id and sends string message to it.\n     *\n     * @param id connection's id\n     * @param message incoming message\n     */\n    async $sendMessage(id: string, message: string): Promise<void> {\n        if (this.connections.has(id)) {\n            this.connections.get(id)!.reader.readMessage(message);\n        } else {\n            console.warn('It is not possible to read message. Connection missed.');\n        }\n    }\n\n    /**\n     * Instantiates a new connection by the given id.\n     * @param id the connection id\n     */\n    async $createConnection(id: string): Promise<void> {\n        await this.doEnsureConnection(id);\n    }\n\n    /**\n     * Deletes a connection.\n     * @param id the connection id\n     */\n    async $deleteConnection(id: string): Promise<void> {\n        this.connections.delete(id);\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async ensureConnection(id: string): Promise<PluginConnection> {\n        const connection = await this.doEnsureConnection(id);\n        await this.proxy.$createConnection(id);\n        return connection;\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async doEnsureConnection(id: string): Promise<PluginConnection> {\n        const connection = this.connections.get(id) || await this.doCreateConnection(id);\n        this.connections.set(id, connection);\n        return connection;\n    }\n\n    protected async doCreateConnection(id: string): Promise<PluginConnection> {\n        const reader = new PluginMessageReader();\n        const writer = new PluginMessageWriter(id, this.proxy);\n        const connection = new PluginConnection(\n            reader,\n            writer,\n            () => {\n                this.connections.delete(id);\n                if (!toClose.disposed) {\n                    this.proxy.$deleteConnection(id);\n                }\n            });\n        const toClose = new DisposableCollection(Disposable.create(() => reader.fireClose()));\n        this.toDispose.push(toClose);\n        return connection;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { CommandRegistry, CommandContribution } from '@theia/core/lib/common';\nimport { ApplicationShell, CommonCommands } from '@theia/core/lib/browser';\nimport { CustomEditorWidget } from './custom-editor-widget';\n\n@injectable()\nexport class CustomEditorContribution implements CommandContribution {\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerHandler(CommonCommands.UNDO.id, {\n            isEnabled: () => this.shell.activeWidget instanceof CustomEditorWidget,\n            execute: () => (this.shell.activeWidget as CustomEditorWidget).undo()\n        });\n        commands.registerHandler(CommonCommands.REDO.id, {\n            isEnabled: () => this.shell.activeWidget instanceof CustomEditorWidget,\n            execute: () => (this.shell.activeWidget as CustomEditorWidget).redo()\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { ApplicationShell, OpenerOptions, OpenHandler, Widget, WidgetManager } from '@theia/core/lib/browser';\nimport { CustomEditorPriority, CustomEditorSelector } from '../../../common';\nimport * as glob from './glob';\nimport { CustomEditor } from '../../../common';\nimport { CustomEditorWidget } from './custom-editor-widget';\nimport { v4 } from 'uuid';\nimport { Emitter } from '@theia/core';\n\nexport class CustomEditorOpener implements OpenHandler {\n\n    readonly id: string;\n    readonly label: string;\n\n    private readonly onDidOpenCustomEditorEmitter = new Emitter<CustomEditorWidget>();\n    readonly onDidOpenCustomEditor = this.onDidOpenCustomEditorEmitter.event;\n\n    constructor(\n        private readonly editor: CustomEditor,\n        @inject(ApplicationShell) protected readonly shell: ApplicationShell,\n        @inject(WidgetManager) protected readonly widgetManager: WidgetManager\n    ) {\n        this.id = `custom-editor-${this.editor.viewType}`;\n        this.label = this.editor.displayName;\n    }\n\n    canHandle(uri: URI): number {\n        if (this.matches(this.editor.selector, uri)) {\n            return this.getPriority();\n        }\n        return 0;\n    }\n\n    getPriority(): number {\n        switch (this.editor.priority) {\n            case CustomEditorPriority.default: return 500;\n            case CustomEditorPriority.builtin: return 400;\n            case CustomEditorPriority.option: return 300;\n            default: return 200;\n        }\n    }\n\n    async open(uri: URI, options?: OpenerOptions): Promise<Widget | undefined> {\n        let widget: CustomEditorWidget | undefined;\n        const widgets = this.widgetManager.getWidgets(CustomEditorWidget.FACTORY_ID) as CustomEditorWidget[];\n        widget = widgets.find(w => w.viewType === this.editor.viewType && w.resource.toString() === uri.toString());\n\n        if (widget?.isVisible) {\n            return this.shell.revealWidget(widget.id);\n        }\n        if (widget?.isAttached) {\n            return this.shell.activateWidget(widget.id);\n        }\n        if (!widget) {\n            const id = v4();\n            widget = await this.widgetManager.getOrCreateWidget<CustomEditorWidget>(CustomEditorWidget.FACTORY_ID, { id });\n            widget.viewType = this.editor.viewType;\n            widget.resource = uri;\n        }\n\n        this.onDidOpenCustomEditorEmitter.fire(widget);\n    }\n\n    matches(selectors: CustomEditorSelector[], resource: URI): boolean {\n        return selectors.some(selector => this.selectorMatches(selector, resource));\n    }\n\n    selectorMatches(selector: CustomEditorSelector, resource: URI): boolean {\n        if (selector.filenamePattern) {\n            if (glob.match(selector.filenamePattern.toLowerCase(), resource.path.name.toLowerCase() + resource.path.ext.toLowerCase())) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/contrib/customEditor/browser/customEditors.ts\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { Reference } from '@theia/core/lib/common/reference';\nimport { CustomEditorModel } from './custom-editors-main';\n\n@injectable()\nexport class CustomEditorService {\n    protected _models = new CustomEditorModelManager();\n    get models(): CustomEditorModelManager { return this._models; }\n}\n\nexport class CustomEditorModelManager {\n\n    private readonly references = new Map<string, {\n        readonly viewType: string,\n        readonly model: Promise<CustomEditorModel>,\n        counter: number\n    }>();\n\n    add(resource: URI, viewType: string, model: Promise<CustomEditorModel>): Promise<Reference<CustomEditorModel>> {\n        const key = this.key(resource, viewType);\n        const existing = this.references.get(key);\n        if (existing) {\n            throw new Error('Model already exists');\n        }\n\n        this.references.set(key, { viewType, model, counter: 0 });\n        return this.tryRetain(resource, viewType)!;\n    }\n\n    async get(resource: URI, viewType: string): Promise<CustomEditorModel | undefined> {\n        const key = this.key(resource, viewType);\n        const entry = this.references.get(key);\n        return entry?.model;\n    }\n\n    tryRetain(resource: URI, viewType: string): Promise<Reference<CustomEditorModel>> | undefined {\n        const key = this.key(resource, viewType);\n\n        const entry = this.references.get(key);\n        if (!entry) {\n            return undefined;\n        }\n\n        entry.counter++;\n\n        return entry.model.then(model => ({\n            object: model,\n            dispose: once(() => {\n                if (--entry!.counter <= 0) {\n                    entry.model.then(x => x.dispose());\n                    this.references.delete(key);\n                }\n            }),\n        }));\n    }\n\n    disposeAllModelsForView(viewType: string): void {\n        for (const [key, value] of this.references) {\n            if (value.viewType === viewType) {\n                value.model.then(x => x.dispose());\n                this.references.delete(key);\n            }\n        }\n    }\n\n    private key(resource: URI, viewType: string): string {\n        return `${resource.toString()}@@@${viewType}`;\n    }\n}\n\nexport function once<T extends Function>(this: unknown, fn: T): T {\n    const _this = this;\n    let didCall = false;\n    let result: unknown;\n\n    return function (): unknown {\n        if (didCall) {\n            return result;\n        }\n\n        didCall = true;\n        result = fn.apply(_this, arguments);\n\n        return result;\n    } as unknown as T;\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { CustomEditorWidget } from '../custom-editors/custom-editor-widget';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { WebviewWidgetIdentifier, WebviewWidgetExternalEndpoint } from '../webview/webview';\nimport { WebviewEnvironment } from '../webview/webview-environment';\n\nexport class CustomEditorWidgetFactory {\n\n    readonly id = CustomEditorWidget.FACTORY_ID;\n\n    protected readonly container: interfaces.Container;\n\n    constructor(container: interfaces.Container) {\n        this.container = container;\n    }\n\n    async createWidget(identifier: WebviewWidgetIdentifier): Promise<CustomEditorWidget> {\n        const externalEndpoint = await this.container.get(WebviewEnvironment).externalEndpoint();\n        let endpoint = externalEndpoint.replace('{{uuid}}', identifier.id);\n        if (endpoint[endpoint.length - 1] === '/') {\n            endpoint = endpoint.slice(0, endpoint.length - 1);\n        }\n        const child = this.container.createChild();\n        child.bind(WebviewWidgetIdentifier).toConstantValue(identifier);\n        child.bind(WebviewWidgetExternalEndpoint).toConstantValue(endpoint);\n        return child.get(CustomEditorWidget);\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { FileOperation } from '@theia/filesystem/lib/common/files';\nimport { NavigatableWidget, Saveable, SaveableSource, SaveOptions } from '@theia/core/lib/browser';\nimport { Reference } from '@theia/core/lib/common/reference';\nimport { WebviewWidget } from '../webview/webview';\nimport { UndoRedoService } from './undo-redo-service';\nimport { CustomEditorModel } from './custom-editors-main';\n\n@injectable()\nexport class CustomEditorWidget extends WebviewWidget implements SaveableSource, NavigatableWidget {\n    static FACTORY_ID = 'plugin-custom-editor';\n\n    id: string;\n    resource: URI;\n\n    protected _modelRef: Reference<CustomEditorModel>;\n    get modelRef(): Reference<CustomEditorModel> {\n        return this._modelRef;\n    }\n    set modelRef(modelRef: Reference<CustomEditorModel>) {\n        this._modelRef = modelRef;\n        this.doUpdateContent();\n        Saveable.apply(this);\n    }\n    get saveable(): Saveable {\n        return this._modelRef.object;\n    }\n\n    @inject(UndoRedoService)\n    protected readonly undoRedoService: UndoRedoService;\n\n    @postConstruct()\n    protected init(): void {\n        super.init();\n        this.id = CustomEditorWidget.FACTORY_ID + ':' + this.identifier.id;\n        this.toDispose.push(this.fileService.onDidRunOperation(e => {\n            if (e.isOperation(FileOperation.MOVE)) {\n                this.doMove(e.target.resource);\n            }\n        }));\n    }\n\n    undo(): void {\n        this.undoRedoService.undo(this.resource);\n    }\n\n    redo(): void {\n        this.undoRedoService.redo(this.resource);\n    }\n\n    async save(options?: SaveOptions): Promise<void> {\n        await this._modelRef.object.saveCustomEditor(options);\n    }\n\n    async saveAs(source: URI, target: URI, options?: SaveOptions): Promise<void> {\n        const result = await this._modelRef.object.saveCustomEditorAs(source, target, options);\n        this.doMove(target);\n        return result;\n    }\n\n    getResourceUri(): URI | undefined {\n        return this.resource;\n    }\n\n    createMoveToUri(resourceUri: URI): URI | undefined {\n        return this.resource.withPath(resourceUri.path);\n    }\n\n    storeState(): CustomEditorWidget.State {\n        return {\n            ...super.storeState(),\n            strResource: this.resource.toString(),\n        };\n    }\n\n    restoreState(oldState: CustomEditorWidget.State): void {\n        const { strResource } = oldState;\n        this.resource = new URI(strResource);\n        super.restoreState(oldState);\n    }\n\n    onMove(handler: (newResource: URI) => Promise<void>): void {\n        this._moveHandler = handler;\n    }\n\n    private _moveHandler?: (newResource: URI) => void;\n\n    private doMove(target: URI): void {\n        if (this._moveHandler) {\n            this._moveHandler(target);\n        }\n    }\n}\n\nexport namespace CustomEditorWidget {\n    export interface State extends WebviewWidget.State {\n        strResource: string\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/api/browser/mainThreadCustomEditors.ts\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { MAIN_RPC_CONTEXT, CustomEditorsMain, CustomEditorsExt, CustomTextEditorCapabilities } from '../../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport { HostedPluginSupport } from '../../../hosted/browser/hosted-plugin';\nimport { PluginCustomEditorRegistry } from './plugin-custom-editor-registry';\nimport { CustomEditorWidget } from './custom-editor-widget';\nimport { Emitter } from '@theia/core';\nimport { UriComponents } from '../../../common/uri-components';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport TheiaURI from '@theia/core/lib/common/uri';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Reference } from '@theia/core/lib/common/reference';\nimport { CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { MonacoEditorModel } from '@theia/monaco/lib/browser/monaco-editor-model';\nimport { EditorModelService } from '../text-editor-model-service';\nimport { CustomEditorService } from './custom-editor-service';\nimport { FileService } from '@theia/filesystem/lib/browser/file-service';\nimport { UndoRedoService } from './undo-redo-service';\nimport { WebviewsMainImpl } from '../webviews-main';\nimport { WidgetManager } from '@theia/core/lib/browser/widget-manager';\nimport { ApplicationShell, DefaultUriLabelProviderContribution, Saveable, SaveOptions } from '@theia/core/lib/browser';\nimport { WebviewOptions, WebviewPanelOptions, ViewColumn } from '@theia/plugin';\nimport { WebviewWidgetIdentifier } from '../webview/webview';\nimport { EditorPreferences } from '@theia/editor/lib/browser';\nimport { EditorPosition } from '../../../common/plugin-api-rpc';\n\nconst enum CustomEditorModelType {\n    Custom,\n    Text,\n}\n\nexport class CustomEditorsMainImpl implements CustomEditorsMain, Disposable {\n    protected readonly pluginService: HostedPluginSupport;\n    protected readonly shell: ApplicationShell;\n    protected readonly textModelService: EditorModelService;\n    protected readonly fileService: FileService;\n    protected readonly customEditorService: CustomEditorService;\n    protected readonly undoRedoService: UndoRedoService;\n    protected readonly customEditorRegistry: PluginCustomEditorRegistry;\n    protected readonly labelProvider: DefaultUriLabelProviderContribution;\n    protected readonly widgetManager: WidgetManager;\n    protected readonly editorPreferences: EditorPreferences;\n    private readonly proxy: CustomEditorsExt;\n    private readonly editorProviders = new Map<string, Disposable>();\n\n    constructor(rpc: RPCProtocol,\n        container: interfaces.Container,\n        readonly webviewsMain: WebviewsMainImpl,\n    ) {\n        this.pluginService = container.get(HostedPluginSupport);\n        this.shell = container.get(ApplicationShell);\n        this.textModelService = container.get(EditorModelService);\n        this.fileService = container.get(FileService);\n        this.customEditorService = container.get(CustomEditorService);\n        this.undoRedoService = container.get(UndoRedoService);\n        this.customEditorRegistry = container.get(PluginCustomEditorRegistry);\n        this.labelProvider = container.get(DefaultUriLabelProviderContribution);\n        this.editorPreferences = container.get(EditorPreferences);\n        this.widgetManager = container.get(WidgetManager);\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.CUSTOM_EDITORS_EXT);\n    }\n\n    dispose(): void {\n        for (const disposable of this.editorProviders.values()) {\n            disposable.dispose();\n        }\n        this.editorProviders.clear();\n    }\n\n    $registerTextEditorProvider(\n        viewType: string, options: WebviewPanelOptions, capabilities: CustomTextEditorCapabilities): void {\n        this.registerEditorProvider(CustomEditorModelType.Text, viewType, options, capabilities, true);\n    }\n\n    $registerCustomEditorProvider(viewType: string, options: WebviewPanelOptions, supportsMultipleEditorsPerDocument: boolean): void {\n        this.registerEditorProvider(CustomEditorModelType.Custom, viewType, options, {}, supportsMultipleEditorsPerDocument);\n    }\n\n    protected async registerEditorProvider(\n        modelType: CustomEditorModelType,\n        viewType: string,\n        options: WebviewPanelOptions,\n        capabilities: CustomTextEditorCapabilities,\n        supportsMultipleEditorsPerDocument: boolean,\n    ): Promise<void> {\n        if (this.editorProviders.has(viewType)) {\n            throw new Error(`Provider for ${viewType} already registered`);\n        }\n\n        const disposables = new DisposableCollection();\n\n        disposables.push(\n            this.customEditorRegistry.registerResolver(viewType, async widget => {\n                const { resource, identifier } = widget;\n                widget.options = options;\n\n                const cancellationSource = new CancellationTokenSource();\n                let modelRef = await this.getOrCreateCustomEditorModel(modelType, resource, viewType, cancellationSource.token);\n                widget.modelRef = modelRef;\n\n                widget.onDidDispose(() => {\n                    // If the model is still dirty, make sure we have time to save it\n                    if (modelRef.object.dirty) {\n                        const sub = modelRef.object.onDirtyChanged(() => {\n                            if (!modelRef.object.dirty) {\n                                sub.dispose();\n                                modelRef.dispose();\n                            }\n                        });\n                        return;\n                    }\n\n                    modelRef.dispose();\n                });\n\n                if (capabilities.supportsMove) {\n                    const onMoveCancelTokenSource = new CancellationTokenSource();\n                    widget.onMove(async (newResource: TheiaURI) => {\n                        const oldModel = modelRef;\n                        modelRef = await this.getOrCreateCustomEditorModel(modelType, newResource, viewType, onMoveCancelTokenSource.token);\n                        this.proxy.$onMoveCustomEditor(identifier.id, URI.file(newResource.path.toString()), viewType);\n                        oldModel.dispose();\n                    });\n                }\n\n                const _cancellationSource = new CancellationTokenSource();\n                await this.proxy.$resolveWebviewEditor(\n                    URI.file(resource.path.toString()),\n                    identifier.id,\n                    viewType,\n                    this.labelProvider.getName(resource)!,\n                    EditorPosition.ONE, // TODO: fix this when Theia has support splitting editors,\n                    options,\n                    _cancellationSource.token\n                );\n            })\n        );\n\n        this.editorProviders.set(viewType, disposables);\n    }\n\n    $unregisterEditorProvider(viewType: string): void {\n        const provider = this.editorProviders.get(viewType);\n        if (!provider) {\n            throw new Error(`No provider for ${viewType} registered`);\n        }\n\n        provider.dispose();\n        this.editorProviders.delete(viewType);\n\n        this.customEditorService.models.disposeAllModelsForView(viewType);\n    }\n\n    protected async getOrCreateCustomEditorModel(\n        modelType: CustomEditorModelType,\n        resource: TheiaURI,\n        viewType: string,\n        cancellationToken: CancellationToken,\n    ): Promise<Reference<CustomEditorModel>> {\n        const existingModel = this.customEditorService.models.tryRetain(resource, viewType);\n        if (existingModel) {\n            return existingModel;\n        }\n\n        switch (modelType) {\n            case CustomEditorModelType.Text: {\n                const model = CustomTextEditorModel.create(viewType, resource, this.textModelService, this.fileService);\n                return this.customEditorService.models.add(resource, viewType, model);\n            }\n            case CustomEditorModelType.Custom: {\n                const model = MainCustomEditorModel.create(this.proxy, viewType, resource, this.undoRedoService, this.fileService, this.editorPreferences, cancellationToken);\n                return this.customEditorService.models.add(resource, viewType, model);\n            }\n        }\n    }\n\n    protected async getCustomEditorModel(resourceComponents: UriComponents, viewType: string): Promise<MainCustomEditorModel> {\n        const resource = URI.revive(resourceComponents);\n        const model = await this.customEditorService.models.get(new TheiaURI(resource), viewType);\n        if (!model || !(model instanceof MainCustomEditorModel)) {\n            throw new Error('Could not find model for custom editor');\n        }\n        return model;\n    }\n\n    async $onDidEdit(resourceComponents: UriComponents, viewType: string, editId: number, label: string | undefined): Promise<void> {\n        const model = await this.getCustomEditorModel(resourceComponents, viewType);\n        model.pushEdit(editId, label);\n    }\n\n    async $onContentChange(resourceComponents: UriComponents, viewType: string): Promise<void> {\n        const model = await this.getCustomEditorModel(resourceComponents, viewType);\n        model.changeContent();\n    }\n\n    async $createCustomEditorPanel(\n        panelId: string,\n        title: string,\n        viewColumn: ViewColumn,\n        options: WebviewPanelOptions & WebviewOptions\n    ): Promise<void> {\n        const view = await this.widgetManager.getOrCreateWidget<CustomEditorWidget>(CustomEditorWidget.FACTORY_ID, <WebviewWidgetIdentifier>{ id: panelId });\n        this.webviewsMain.hookWebview(view);\n        view.title.label = title;\n        const { enableFindWidget, retainContextWhenHidden, enableScripts, localResourceRoots, ...contentOptions } = options;\n        view.viewColumn = viewColumn;\n        view.options = { enableFindWidget, retainContextWhenHidden };\n        view.setContentOptions({\n            allowScripts: enableScripts,\n            localResourceRoots: localResourceRoots && localResourceRoots.map(root => root.toString()),\n            ...contentOptions,\n            ...view.contentOptions\n        });\n        if (view.isAttached) {\n            if (view.isVisible) {\n                this.shell.revealWidget(view.id);\n            }\n            return;\n        }\n        this.webviewsMain.addOrReattachWidget(view, { preserveFocus: true });\n    }\n}\n\nexport interface CustomEditorModel extends Saveable, Disposable {\n    readonly viewType: string;\n    readonly resource: URI;\n    readonly readonly: boolean;\n    readonly dirty: boolean;\n\n    revert(options?: Saveable.RevertOptions): Promise<void>;\n    saveCustomEditor(options?: SaveOptions): Promise<void>;\n    saveCustomEditorAs(resource: TheiaURI, targetResource: TheiaURI, options?: SaveOptions): Promise<void>;\n}\n\nexport class MainCustomEditorModel implements CustomEditorModel {\n    private currentEditIndex: number = -1;\n    private savePoint: number = -1;\n    private isDirtyFromContentChange = false;\n    private ongoingSave?: CancellationTokenSource;\n    private readonly edits: Array<number> = [];\n    private readonly toDispose = new DisposableCollection();\n\n    private readonly onDirtyChangedEmitter = new Emitter<void>();\n    readonly onDirtyChanged = this.onDirtyChangedEmitter.event;\n\n    autoSave: 'on' | 'off';\n    autoSaveDelay: number;\n\n    static async create(\n        proxy: CustomEditorsExt,\n        viewType: string,\n        resource: TheiaURI,\n        undoRedoService: UndoRedoService,\n        fileService: FileService,\n        editorPreferences: EditorPreferences,\n        cancellation: CancellationToken,\n    ): Promise<MainCustomEditorModel> {\n        const { editable } = await proxy.$createCustomDocument(URI.file(resource.path.toString()), viewType, undefined, cancellation);\n        return new MainCustomEditorModel(proxy, viewType, resource, editable, undoRedoService, fileService, editorPreferences);\n    }\n\n    constructor(\n        private proxy: CustomEditorsExt,\n        readonly viewType: string,\n        private readonly editorResource: TheiaURI,\n        private readonly editable: boolean,\n        private readonly undoRedoService: UndoRedoService,\n        private readonly fileService: FileService,\n        private readonly editorPreferences: EditorPreferences\n    ) {\n        this.autoSave = this.editorPreferences.get('editor.autoSave', undefined, editorResource.toString());\n        this.autoSaveDelay = this.editorPreferences.get('editor.autoSaveDelay', undefined, editorResource.toString());\n\n        this.toDispose.push(\n            this.editorPreferences.onPreferenceChanged(event => {\n                if (event.preferenceName === 'editor.autoSave') {\n                    this.autoSave = this.editorPreferences.get('editor.autoSave', undefined, editorResource.toString());\n                }\n                if (event.preferenceName === 'editor.autoSaveDelay') {\n                    this.autoSaveDelay = this.editorPreferences.get('editor.autoSaveDelay', undefined, editorResource.toString());\n                }\n            })\n        );\n        this.toDispose.push(this.onDirtyChangedEmitter);\n    }\n\n    get resource(): URI {\n        return URI.file(this.editorResource.path.toString());\n    }\n\n    get dirty(): boolean {\n        if (this.isDirtyFromContentChange) {\n            return true;\n        }\n        if (this.edits.length > 0) {\n            return this.savePoint !== this.currentEditIndex;\n        }\n        return false;\n    }\n\n    get readonly(): boolean {\n        return !this.editable;\n    }\n\n    setProxy(proxy: CustomEditorsExt): void {\n        this.proxy = proxy;\n    }\n\n    dispose(): void {\n        if (this.editable) {\n            this.undoRedoService.removeElements(this.editorResource);\n        }\n        this.proxy.$disposeCustomDocument(this.resource, this.viewType);\n    }\n\n    changeContent(): void {\n        this.change(() => {\n            this.isDirtyFromContentChange = true;\n        });\n    }\n\n    pushEdit(editId: number, label: string | undefined): void {\n        if (!this.editable) {\n            throw new Error('Document is not editable');\n        }\n\n        this.change(() => {\n            this.spliceEdits(editId);\n            this.currentEditIndex = this.edits.length - 1;\n        });\n\n        this.undoRedoService.pushElement(\n            this.editorResource,\n            () => this.undo(),\n            () => this.redo(),\n        );\n    }\n\n    async revert(options?: Saveable.RevertOptions): Promise<void> {\n        if (!this.editable) {\n            return;\n        }\n\n        if (this.currentEditIndex === this.savePoint && !this.isDirtyFromContentChange) {\n            return;\n        }\n\n        const cancellationSource = new CancellationTokenSource();\n        this.proxy.$revert(this.resource, this.viewType, cancellationSource.token);\n        this.change(() => {\n            this.isDirtyFromContentChange = false;\n            this.currentEditIndex = this.savePoint;\n            this.spliceEdits();\n        });\n    }\n\n    async save(options?: SaveOptions): Promise<void> {\n        await this.saveCustomEditor(options);\n    }\n\n    async saveCustomEditor(options?: SaveOptions): Promise<void> {\n        if (!this.editable) {\n            return;\n        }\n\n        const cancelable = new CancellationTokenSource();\n        const savePromise = this.proxy.$onSave(this.resource, this.viewType, cancelable.token);\n        this.ongoingSave?.cancel();\n        this.ongoingSave = cancelable;\n\n        try {\n            await savePromise;\n\n            if (this.ongoingSave === cancelable) { // Make sure we are still doing the same save\n                this.change(() => {\n                    this.isDirtyFromContentChange = false;\n                    this.savePoint = this.currentEditIndex;\n                });\n            }\n        } finally {\n            if (this.ongoingSave === cancelable) { // Make sure we are still doing the same save\n                this.ongoingSave = undefined;\n            }\n        }\n    }\n\n    async saveCustomEditorAs(resource: TheiaURI, targetResource: TheiaURI, options?: SaveOptions): Promise<void> {\n        if (this.editable) {\n            const source = new CancellationTokenSource();\n            await this.proxy.$onSaveAs(this.resource, this.viewType, URI.file(targetResource.path.toString()), source.token);\n            this.change(() => {\n                this.savePoint = this.currentEditIndex;\n            });\n        } else {\n            // Since the editor is readonly, just copy the file over\n            await this.fileService.copy(resource, targetResource, { overwrite: false });\n        }\n    }\n\n    private async undo(): Promise<void> {\n        if (!this.editable) {\n            return;\n        }\n\n        if (this.currentEditIndex < 0) {\n            // nothing to undo\n            return;\n        }\n\n        const undoneEdit = this.edits[this.currentEditIndex];\n        this.change(() => {\n            --this.currentEditIndex;\n        });\n        await this.proxy.$undo(this.resource, this.viewType, undoneEdit, this.dirty);\n    }\n\n    private async redo(): Promise<void> {\n        if (!this.editable) {\n            return;\n        }\n\n        if (this.currentEditIndex >= this.edits.length - 1) {\n            // nothing to redo\n            return;\n        }\n\n        const redoneEdit = this.edits[this.currentEditIndex + 1];\n        this.change(() => {\n            ++this.currentEditIndex;\n        });\n        await this.proxy.$redo(this.resource, this.viewType, redoneEdit, this.dirty);\n    }\n\n    private spliceEdits(editToInsert?: number): void {\n        const start = this.currentEditIndex + 1;\n        const toRemove = this.edits.length - this.currentEditIndex;\n\n        const removedEdits = typeof editToInsert === 'number'\n            ? this.edits.splice(start, toRemove, editToInsert)\n            : this.edits.splice(start, toRemove);\n\n        if (removedEdits.length) {\n            this.proxy.$disposeEdits(this.resource, this.viewType, removedEdits);\n        }\n    }\n\n    private change(makeEdit: () => void): void {\n        const wasDirty = this.dirty;\n        makeEdit();\n\n        if (this.dirty !== wasDirty) {\n            this.onDirtyChangedEmitter.fire();\n        }\n\n        if (this.autoSave === 'on') {\n            const handle = window.setTimeout(() => {\n                this.save();\n                window.clearTimeout(handle);\n            }, this.autoSaveDelay);\n        }\n    }\n\n}\n\n// copied from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/contrib/customEditor/common/customTextEditorModel.ts\nexport class CustomTextEditorModel implements CustomEditorModel {\n    private readonly toDispose = new DisposableCollection();\n    private readonly onDirtyChangedEmitter = new Emitter<void>();\n    readonly onDirtyChanged = this.onDirtyChangedEmitter.event;\n    readonly autoSave: 'on' | 'off';\n\n    static async create(\n        viewType: string,\n        resource: TheiaURI,\n        editorModelService: EditorModelService,\n        fileService: FileService\n    ): Promise<CustomTextEditorModel> {\n        const model = await editorModelService.createModelReference(resource);\n        model.object.suppressOpenEditorWhenDirty = true;\n        return new CustomTextEditorModel(viewType, resource, model, fileService);\n    }\n\n    constructor(\n        readonly viewType: string,\n        readonly editorResource: TheiaURI,\n        private readonly model: Reference<MonacoEditorModel>,\n        private readonly fileService: FileService\n    ) {\n        this.toDispose.push(\n            this.editorTextModel.onDirtyChanged(e => {\n                this.onDirtyChangedEmitter.fire();\n            })\n        );\n        this.toDispose.push(this.onDirtyChangedEmitter);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n        this.model.dispose();\n    }\n\n    get resource(): URI {\n        return URI.file(this.editorResource.path.toString());\n    }\n\n    get dirty(): boolean {\n        return this.editorTextModel.dirty;\n    };\n\n    get readonly(): boolean {\n        return this.editorTextModel.readOnly;\n    }\n\n    get editorTextModel(): MonacoEditorModel {\n        return this.model.object;\n    }\n\n    revert(options?: Saveable.RevertOptions): Promise<void> {\n        return this.editorTextModel.revert(options);\n    }\n\n    save(options?: SaveOptions): Promise<void> {\n        return this.saveCustomEditor(options);\n    }\n\n    saveCustomEditor(options?: SaveOptions): Promise<void> {\n        return this.editorTextModel.save(options);\n    }\n\n    async saveCustomEditorAs(resource: TheiaURI, targetResource: TheiaURI, options?: SaveOptions): Promise<void> {\n        await this.saveCustomEditor(options);\n        await this.fileService.copy(resource, targetResource, { overwrite: false });\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/glob.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as strings from '@theia/core/lib/common/strings';\nimport * as paths from './paths';\nimport { CharCode } from '@theia/core/lib/common/char-code';\n\n/* eslint-disable @typescript-eslint/no-shadow, no-null/no-null */\n\nexport interface IExpression {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [pattern: string]: boolean | SiblingClause | any;\n}\n\nexport interface IRelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport function getEmptyExpression(): IExpression {\n    return Object.create(null);\n}\n\nexport interface SiblingClause {\n    when: string;\n}\n\nconst GLOBSTAR = '**';\nconst GLOB_SPLIT = '/';\nconst PATH_REGEX = '[/\\\\\\\\]';        // any slash or backslash\nconst NO_PATH_REGEX = '[^/\\\\\\\\]';    // any non-slash and non-backslash\nconst ALL_FORWARD_SLASHES = /\\//g;\n\nfunction starsToRegExp(starCount: number): string {\n    switch (starCount) {\n        case 0:\n            return '';\n        case 1:\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\n        default:\n            // Matches:  (Path Sep OR Path Val followed by Path Sep OR Path Sep followed by Path Val) 0-many times\n            // Group is non capturing because we don't need to capture at all (?:...)\n            // Overall we use non-greedy matching because it could be that we match too much\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}|${PATH_REGEX}${NO_PATH_REGEX}+)*?`;\n    }\n}\n\nexport function splitGlobAware(pattern: string, splitChar: string): string[] {\n    if (!pattern) {\n        return [];\n    }\n\n    const segments: string[] = [];\n\n    let inBraces = false;\n    let inBrackets = false;\n\n    let char: string;\n    let curVal = '';\n    for (let i = 0; i < pattern.length; i++) {\n        char = pattern[i];\n\n        switch (char) {\n            case splitChar:\n                if (!inBraces && !inBrackets) {\n                    segments.push(curVal);\n                    curVal = '';\n\n                    continue;\n                }\n                break;\n            case '{':\n                inBraces = true;\n                break;\n            case '}':\n                inBraces = false;\n                break;\n            case '[':\n                inBrackets = true;\n                break;\n            case ']':\n                inBrackets = false;\n                break;\n        }\n\n        curVal += char;\n    }\n\n    // Tail\n    if (curVal) {\n        segments.push(curVal);\n    }\n\n    return segments;\n}\n\nfunction parseRegExp(pattern: string): string {\n    if (!pattern) {\n        return '';\n    }\n\n    let regEx = '';\n\n    // Split up into segments for each slash found\n    // eslint-disable-next-line prefer-const\n    let segments = splitGlobAware(pattern, GLOB_SPLIT);\n\n    // Special case where we only have globstars\n    if (segments.every(s => s === GLOBSTAR)) {\n        regEx = '.*';\n    }\n\n    // Build regex over segments\n    // tslint:disable-next-line:one-line\n    else {\n        let previousSegmentWasGlobStar = false;\n        segments.forEach((segment, index) => {\n\n            // Globstar is special\n            if (segment === GLOBSTAR) {\n\n                // if we have more than one globstar after another, just ignore it\n                if (!previousSegmentWasGlobStar) {\n                    regEx += starsToRegExp(2);\n                    previousSegmentWasGlobStar = true;\n                }\n\n                return;\n            }\n\n            // States\n            let inBraces = false;\n            let braceVal = '';\n\n            let inBrackets = false;\n            let bracketVal = '';\n\n            let char: string;\n            for (let i = 0; i < segment.length; i++) {\n                char = segment[i];\n\n                // Support brace expansion\n                if (char !== '}' && inBraces) {\n                    braceVal += char;\n                    continue;\n                }\n\n                // Support brackets\n                if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\n                    let res: string;\n\n                    // range operator\n                    if (char === '-') {\n                        res = char;\n                    }\n\n                    // negation operator (only valid on first index in bracket)\n                    // tslint:disable-next-line:one-line\n                    else if ((char === '^' || char === '!') && !bracketVal) {\n                        res = '^';\n                    }\n\n                    // glob split matching is not allowed within character ranges\n                    // see http://man7.org/linux/man-pages/man7/glob.7.html\n                    // tslint:disable-next-line:one-line\n                    else if (char === GLOB_SPLIT) {\n                        res = '';\n                    }\n\n                    // anything else gets escaped\n                    // tslint:disable-next-line:one-line\n                    else {\n                        res = strings.escapeRegExpCharacters(char);\n                    }\n\n                    bracketVal += res;\n                    continue;\n                }\n\n                switch (char) {\n                    case '{':\n                        inBraces = true;\n                        continue;\n\n                    case '[':\n                        inBrackets = true;\n                        continue;\n\n                    case '}':\n                        // eslint-disable-next-line prefer-const\n                        let choices = splitGlobAware(braceVal, ',');\n\n                        // Converts {foo,bar} => [foo|bar]\n                        // eslint-disable-next-line prefer-const\n                        let braceRegExp = `(?:${choices.map(c => parseRegExp(c)).join('|')})`;\n\n                        regEx += braceRegExp;\n\n                        inBraces = false;\n                        braceVal = '';\n\n                        break;\n\n                    case ']':\n                        regEx += ('[' + bracketVal + ']');\n\n                        inBrackets = false;\n                        bracketVal = '';\n\n                        break;\n\n                    case '?':\n                        regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\n                        continue;\n\n                    case '*':\n                        regEx += starsToRegExp(1);\n                        continue;\n\n                    default:\n                        regEx += strings.escapeRegExpCharacters(char);\n                }\n            }\n\n            // Tail: Add the slash we had split on if there is more to come and the remaining pattern is not a globstar\n            // For example if pattern: some/**/*.js we want the \"/\" after some to be included in the RegEx to prevent\n            // a folder called \"something\" to match as well.\n            // However, if pattern: some/**, we tolerate that we also match on \"something\" because our globstar behavior\n            // is to match 0-N segments.\n            if (index < segments.length - 1 && (segments[index + 1] !== GLOBSTAR || index + 2 < segments.length)) {\n                regEx += PATH_REGEX;\n            }\n\n            // reset state\n            previousSegmentWasGlobStar = false;\n        });\n    }\n\n    return regEx;\n}\n\n// regexes to check for trivial glob patterns that just check for String#endsWith\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/;                                        // **/*.something\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/;                                            // **/something\nconst T3 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?)*}$/;     // {**/*.something,**/*.else} or {**/package.json,**/project.json}\nconst T3_2 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/;     // Like T3, with optional trailing /**\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/;                                        // **/something/else\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/;                                    // something/else\n\nexport type ParsedPattern = (path: string, basename?: string) => boolean;\n\n// The ParsedExpression returns a Promise iff hasSibling returns a Promise.\n// eslint-disable-next-line max-len\nexport type ParsedExpression = (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>) => string | Promise<string> /* the matching pattern */;\n\nexport interface IGlobOptions {\n    /**\n     * Simplify patterns for use as exclusion filters during tree traversal to skip entire subtrees. Cannot be used outside of a tree traversal.\n     */\n    trimForExclusions?: boolean;\n}\n\ninterface ParsedStringPattern {\n    (path: string, basename: string): string | Promise<string> /* the matching pattern */;\n    basenames?: string[];\n    patterns?: string[];\n    allBasenames?: string[];\n    allPaths?: string[];\n}\ninterface ParsedExpressionPattern {\n    (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>): string | Promise<string> /* the matching pattern */;\n    requiresSiblings?: boolean;\n    allBasenames?: string[];\n    allPaths?: string[];\n}\n\nconst CACHE = new Map<string, ParsedStringPattern>();  // new LRUCache<string, ParsedStringPattern>(10000); // bounded to 10000 elements\n\nconst FALSE = function (): boolean {\n    return false;\n};\n\nconst NULL = function (): string {\n    return null!;\n};\n\nfunction parsePattern(arg1: string | IRelativePattern, options: IGlobOptions): ParsedStringPattern {\n    if (!arg1) {\n        return NULL;\n    }\n\n    // Handle IRelativePattern\n    let pattern: string;\n    if (typeof arg1 !== 'string') {\n        pattern = arg1.pattern;\n    } else {\n        pattern = arg1;\n    }\n\n    // Whitespace trimming\n    pattern = pattern.trim();\n\n    // Check cache\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\n    let parsedPattern = CACHE.get(patternKey);\n    if (parsedPattern) {\n        return wrapRelativePattern(parsedPattern, arg1);\n    }\n\n    // Check for Trivias\n    let match: RegExpExecArray;\n    if (T1.test(pattern)) { // common pattern: **/*.txt just need endsWith check\n        const base = pattern.substr(4); // '**/*'.length === 4\n        parsedPattern = function (path, basename): string {\n            return path && strings.endsWith(path, base) ? pattern : null!;\n        };\n    } else if (match = T2.exec(trimForExclusions(pattern, options))!) { // common pattern: **/some.txt just need basename check\n        parsedPattern = trivia2(match[1], pattern);\n    } else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\n        parsedPattern = trivia3(pattern, options);\n    } else if (match = T4.exec(trimForExclusions(pattern, options))!) { // common pattern: **/something/else just need endsWith check\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\n    } else if (match = T5.exec(trimForExclusions(pattern, options))!) { // common pattern: something/else just need equals check\n        parsedPattern = trivia4and5(match[1], pattern, false);\n    }\n\n    // Otherwise convert to pattern\n    // tslint:disable-next-line:one-line\n    else {\n        parsedPattern = toRegExp(pattern);\n    }\n\n    // Cache\n    CACHE.set(patternKey, parsedPattern);\n\n    return wrapRelativePattern(parsedPattern, arg1);\n}\n\nfunction wrapRelativePattern(parsedPattern: ParsedStringPattern, arg2: string | IRelativePattern): ParsedStringPattern {\n    if (typeof arg2 === 'string') {\n        return parsedPattern;\n    }\n\n    return function (path, basename): string | Promise<string> {\n        if (!paths.isEqualOrParent(path, arg2.base)) {\n            return null!;\n        }\n\n        return parsedPattern(paths.normalize(arg2.pathToRelative(arg2.base, path)), basename);\n    };\n}\n\nfunction trimForExclusions(pattern: string, options: IGlobOptions): string {\n    return options.trimForExclusions && strings.endsWith(pattern, '/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\n}\n\n// common pattern: **/some.txt just need basename check\nfunction trivia2(base: string, originalPattern: string): ParsedStringPattern {\n    const slashBase = `/${base}`;\n    const backslashBase = `\\\\${base}`;\n    const parsedPattern: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (basename) {\n            return basename === base ? originalPattern : null!;\n        }\n        return path === base || strings.endsWith(path, slashBase) || strings.endsWith(path, backslashBase) ? originalPattern : null!;\n    };\n    const basenames = [base];\n    parsedPattern.basenames = basenames;\n    parsedPattern.patterns = [originalPattern];\n    parsedPattern.allBasenames = basenames;\n    return parsedPattern;\n}\n\n// repetition of common patterns (see above) {**/*.txt,**/*.png}\nfunction trivia3(pattern: string, options: IGlobOptions): ParsedStringPattern {\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1).split(',')\n        .map(pattern => parsePattern(pattern, options))\n        .filter(pattern => pattern !== NULL), pattern);\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n    if (n === 1) {\n        return <ParsedStringPattern>parsedPatterns[0];\n    }\n    const parsedPattern: ParsedStringPattern = function (path: string, basename: string): string {\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            if ((<ParsedStringPattern>parsedPatterns[i])(path, basename)) {\n                return pattern;\n            }\n        }\n        return null!;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    // const withBasenames = arrays.first(parsedPatterns, pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        parsedPattern.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        parsedPattern.allPaths = allPaths;\n    }\n    return parsedPattern;\n}\n\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\nfunction trivia4and5(path: string, pattern: string, matchPathEnds: boolean): ParsedStringPattern {\n    const nativePath = paths.nativeSep !== paths.sep ? path.replace(ALL_FORWARD_SLASHES, paths.nativeSep) : path;\n    const nativePathEnd = paths.nativeSep + nativePath;\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const parsedPattern: ParsedStringPattern = matchPathEnds ? function (path, basename): string {\n        return path && (path === nativePath || strings.endsWith(path, nativePathEnd)) ? pattern : null!;\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n    } : function (path, basename): string {\n        return path && path === nativePath ? pattern : null!;\n    };\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + path];\n    return parsedPattern;\n}\n\nfunction toRegExp(pattern: string): ParsedStringPattern {\n    try {\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\n        return function (path: string, basename: string): string {\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\n            return path && regExp.test(path) ? pattern : null!;\n        };\n    } catch (error) {\n        return NULL;\n    }\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function match(pattern: string | IRelativePattern, path: string): boolean;\nexport function match(expression: IExpression, path: string, hasSibling?: (name: string) => boolean): string /* the matching pattern */;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function match(arg1: string | IExpression | IRelativePattern, path: string, hasSibling?: (name: string) => boolean): any {\n    if (!arg1 || !path) {\n        return false;\n    }\n\n    return parse(<IExpression>arg1)(path, undefined, hasSibling);\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function parse(pattern: string | IRelativePattern, options?: IGlobOptions): ParsedPattern;\nexport function parse(expression: IExpression, options?: IGlobOptions): ParsedExpression;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function parse(arg1: string | IExpression | IRelativePattern, options: IGlobOptions = {}): any {\n    if (!arg1) {\n        return FALSE;\n    }\n\n    // Glob with String\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\n        const parsedPattern = parsePattern(arg1 as string | IRelativePattern, options);\n        if (parsedPattern === NULL) {\n            return FALSE;\n        }\n        const resultPattern = function (path: string, basename: string): boolean {\n            return !!parsedPattern(path, basename);\n        };\n        if (parsedPattern.allBasenames) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allBasenames = parsedPattern.allBasenames;\n        }\n        if (parsedPattern.allPaths) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allPaths = parsedPattern.allPaths;\n        }\n        return resultPattern;\n    }\n\n    // Glob with Expression\n    return parsedExpression(<IExpression>arg1, options);\n}\n\nexport function hasSiblingPromiseFn(siblingsFn?: () => Promise<string[]>): ((name: string) => Promise<boolean>) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Promise<Record<string, true>>;\n    return (name: string) => {\n        if (!siblings) {\n            siblings = (siblingsFn() || Promise.resolve([]))\n                .then(list => list ? listToMap(list) : {});\n        }\n        return siblings.then(map => !!map[name]);\n    };\n}\n\nexport function hasSiblingFn(siblingsFn?: () => string[]): ((name: string) => boolean) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Record<string, true>;\n    return (name: string) => {\n        if (!siblings) {\n            const list = siblingsFn();\n            siblings = list ? listToMap(list) : {};\n        }\n        return !!siblings[name];\n    };\n}\n\nfunction listToMap(list: string[]): Record<string, true> {\n    const map: Record<string, true> = {};\n    for (const key of list) {\n        map[key] = true;\n    }\n    return map;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isRelativePattern(obj: any): obj is IRelativePattern {\n    const rp = obj as IRelativePattern;\n\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string' && typeof rp.pathToRelative === 'function';\n}\n\n/**\n * Same as `parse`, but the ParsedExpression is guaranteed to return a Promise\n */\nexport function parseToAsync(expression: IExpression, options?: IGlobOptions): ParsedExpression {\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const parsedExpression = parse(expression, options);\n    return (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> => {\n        const result = parsedExpression(path, basename, hasSibling);\n        return result instanceof Promise ? result : Promise.resolve(result);\n    };\n}\n\nexport function getBasenameTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allBasenames || [];\n}\n\nexport function getPathTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allPaths || [];\n}\n\nfunction parsedExpression(expression: IExpression, options: IGlobOptions): ParsedExpression {\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\n        .filter(pattern => pattern !== NULL));\n\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n\n    if (!parsedPatterns.some(parsedPattern => (<ParsedExpressionPattern>parsedPattern).requiresSiblings!)) {\n        if (n === 1) {\n            return <ParsedStringPattern>parsedPatterns[0];\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const resultExpression: ParsedStringPattern = function (path: string, basename: string): string | Promise<string> {\n            // eslint-disable-next-line @typescript-eslint/no-shadow\n            // tslint:disable-next-line:one-variable-per-declaration\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n                // Pattern matches path\n                const result = (<ParsedStringPattern>parsedPatterns[i])(path, basename);\n                if (result) {\n                    return result;\n                }\n            }\n\n            return null!;\n        };\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n        if (withBasenames) {\n            resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n        if (allPaths.length) {\n            resultExpression.allPaths = allPaths;\n        }\n\n        return resultExpression;\n    }\n\n    const resultExpression: ParsedStringPattern = function (path: string, basename: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> {\n        let name: string = null!;\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            // Pattern matches path\n            const parsedPattern = (<ParsedExpressionPattern>parsedPatterns[i]);\n            if (parsedPattern.requiresSiblings && hasSibling) {\n                if (!basename) {\n                    basename = paths.basename(path);\n                }\n                if (!name) {\n                    name = basename.substr(0, basename.length - paths.extname(path).length);\n                }\n            }\n            const result = parsedPattern(path, basename, name, hasSibling!);\n            if (result) {\n                return result;\n            }\n        }\n\n        return null!;\n    };\n\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        resultExpression.allPaths = allPaths;\n    }\n\n    return resultExpression;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction parseExpressionPattern(pattern: string, value: any, options: IGlobOptions): (ParsedStringPattern | ParsedExpressionPattern) {\n    if (value === false) {\n        return NULL; // pattern is disabled\n    }\n\n    const parsedPattern = parsePattern(pattern, options);\n    if (parsedPattern === NULL) {\n        return NULL;\n    }\n\n    // Expression Pattern is <boolean>\n    if (typeof value === 'boolean') {\n        return parsedPattern;\n    }\n\n    // Expression Pattern is <SiblingClause>\n    if (value) {\n        const when = (<SiblingClause>value).when;\n        if (typeof when === 'string') {\n            const result: ParsedExpressionPattern = (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>) => {\n                if (!hasSibling || !parsedPattern(path, basename)) {\n                    return null!;\n                }\n\n                const clausePattern = when.replace('$(basename)', name);\n                const matched = hasSibling(clausePattern);\n                return matched instanceof Promise ?\n                    matched.then(m => m ? pattern : null!) :\n                    matched ? pattern : null!;\n            };\n            result.requiresSiblings = true;\n            return result;\n        }\n    }\n\n    // Expression is Anything\n    return parsedPattern;\n}\n\nfunction aggregateBasenameMatches(parsedPatterns: (ParsedStringPattern | ParsedExpressionPattern)[], result?: string): (ParsedStringPattern | ParsedExpressionPattern)[] {\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!(<ParsedStringPattern>parsedPattern).basenames);\n    if (basenamePatterns.length < 2) {\n        return parsedPatterns;\n    }\n\n    const basenames = basenamePatterns.reduce<string[]>((all, current) => all.concat((<ParsedStringPattern>current).basenames!), []);\n    let patterns: string[];\n    if (result) {\n        patterns = [];\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, n = basenames.length; i < n; i++) {\n            patterns.push(result);\n        }\n    } else {\n        patterns = basenamePatterns.reduce((all, current) => all.concat((<ParsedStringPattern>current).patterns!), <string[]>[]);\n    }\n    const aggregate: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (!basename) {\n            let i: number;\n            for (i = path.length; i > 0; i--) {\n                const ch = path.charCodeAt(i - 1);\n                if (ch === CharCode.Slash || ch === CharCode.Backslash) {\n                    break;\n                }\n            }\n            basename = path.substr(i);\n        }\n        const index = basenames.indexOf(basename);\n        return index !== -1 ? patterns[index] : null!;\n    };\n    aggregate.basenames = basenames;\n    aggregate.patterns = patterns;\n    aggregate.allBasenames = basenames;\n\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !(<ParsedStringPattern>parsedPattern).basenames);\n    aggregatedPatterns.push(aggregate);\n    return aggregatedPatterns;\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/paths.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/* eslint-disable no-void */\n/* eslint-disable no-null/no-null */\n'use strict';\nimport { isWindows } from '@theia/core/lib/common/os';\nimport { startsWithIgnoreCase } from '@theia/core/lib/common/strings';\nimport { CharCode } from '@theia/core/lib/common/char-code';\n\n/**\n * The forward slash path separator.\n */\nexport const sep = '/';\n\n/**\n * The native path separator depending on the OS.\n */\nexport const nativeSep = isWindows ? '\\\\' : '/';\n\nconst _posixBadPath = /(\\/\\.\\.?\\/)|(\\/\\.\\.?)$|^(\\.\\.?\\/)|(\\/\\/+)|(\\\\)/;\nconst _winBadPath = /(\\\\\\.\\.?\\\\)|(\\\\\\.\\.?)$|^(\\.\\.?\\\\)|(\\\\\\\\+)|(\\/)/;\n\nfunction _isNormal(path: string, win: boolean): boolean {\n    return win\n        ? !_winBadPath.test(path)\n        : !_posixBadPath.test(path);\n}\n\n/**\n * @returns the base name of a path.\n */\nexport function basename(path: string): string {\n    const idx = ~path.lastIndexOf('/') || ~path.lastIndexOf('\\\\');\n    if (idx === 0) {\n        return path;\n    } else if (~idx === path.length - 1) {\n        return basename(path.substring(0, path.length - 1));\n    } else {\n        return path.substr(~idx + 1);\n    }\n}\n\n/**\n * @returns `.far` from `boo.far` or the empty string.\n */\nexport function extname(path: string): string {\n    path = basename(path);\n    const idx = ~path.lastIndexOf('.');\n    return idx ? path.substring(~idx) : '';\n}\n\nexport function normalize(path: string, toOSPath?: boolean): string {\n    if (path === null || path === void 0) {\n        return path;\n    }\n\n    const len = path.length;\n    if (len === 0) {\n        return '.';\n    }\n\n    const wantsBackslash = isWindows && toOSPath;\n    if (_isNormal(path, wantsBackslash!)) {\n        return path;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const sep = wantsBackslash ? '\\\\' : '/';\n    const root = getRoot(path, sep);\n\n    // skip the root-portion of the path\n    let start = root.length;\n    let skip = false;\n    let res = '';\n\n    for (let end = root.length; end <= len; end++) {\n\n        // either at the end or at a path-separator character\n        if (end === len || path.charCodeAt(end) === CharCode.Slash || path.charCodeAt(end) === CharCode.Backslash) {\n\n            if (streql(path, start, end, '..')) {\n                // skip current and remove parent (if there is already something)\n                const prev_start = res.lastIndexOf(sep);\n                const prev_part = res.slice(prev_start + 1);\n                if ((root || prev_part.length > 0) && prev_part !== '..') {\n                    res = prev_start === -1 ? '' : res.slice(0, prev_start);\n                    skip = true;\n                }\n            } else if (streql(path, start, end, '.') && (root || res || end < len - 1)) {\n                // skip current (if there is already something or if there is more to come)\n                skip = true;\n            }\n\n            if (!skip) {\n                const part = path.slice(start, end);\n                if (res !== '' && res[res.length - 1] !== sep) {\n                    res += sep;\n                }\n                res += part;\n            }\n            start = end + 1;\n            skip = false;\n        }\n    }\n\n    return root + res;\n}\nfunction streql(value: string, start: number, end: number, other: string): boolean {\n    return start + other.length === end && value.indexOf(other, start) === start;\n}\n\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\n// eslint-disable-next-line @typescript-eslint/no-shadow\nexport function getRoot(path: string, sep: string = '/'): string {\n\n    if (!path) {\n        return '';\n    }\n\n    const len = path.length;\n    let code = path.charCodeAt(0);\n    if (code === CharCode.Slash || code === CharCode.Backslash) {\n\n        code = path.charCodeAt(1);\n        if (code === CharCode.Slash || code === CharCode.Backslash) {\n            // UNC candidate \\\\localhost\\shares\\ddd\n            //               ^^^^^^^^^^^^^^^^^^^\n            code = path.charCodeAt(2);\n            if (code !== CharCode.Slash && code !== CharCode.Backslash) {\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                let pos = 3;\n                const start = pos;\n                for (; pos < len; pos++) {\n                    code = path.charCodeAt(pos);\n                    if (code === CharCode.Slash || code === CharCode.Backslash) {\n                        break;\n                    }\n                }\n                code = path.charCodeAt(pos + 1);\n                if (start !== pos && code !== CharCode.Slash && code !== CharCode.Backslash) {\n                    pos += 1;\n                    for (; pos < len; pos++) {\n                        code = path.charCodeAt(pos);\n                        if (code === CharCode.Slash || code === CharCode.Backslash) {\n                            return path.slice(0, pos + 1) // consume this separator\n                                .replace(/[\\\\/]/g, sep);\n                        }\n                    }\n                }\n            }\n        }\n\n        // /user/far\n        // ^\n        return sep;\n\n    } else if ((code >= CharCode.A && code <= CharCode.Z) || (code >= CharCode.a && code <= CharCode.z)) {\n        // check for windows drive letter c:\\ or c:\n\n        if (path.charCodeAt(1) === CharCode.Colon) {\n            code = path.charCodeAt(2);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                // C:\\fff\n                // ^^^\n                return path.slice(0, 2) + sep;\n            } else {\n                // C:\n                // ^^\n                return path.slice(0, 2);\n            }\n        }\n    }\n\n    // check for URI\n    // scheme://authority/path\n    // ^^^^^^^^^^^^^^^^^^^\n    let pos = path.indexOf('://');\n    if (pos !== -1) {\n        pos += 3; // 3 -> \"://\".length\n        for (; pos < len; pos++) {\n            code = path.charCodeAt(pos);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                return path.slice(0, pos + 1); // consume this separator\n            }\n        }\n    }\n\n    return '';\n}\n\nexport function isEqualOrParent(path: string, candidate: string, ignoreCase?: boolean): boolean {\n    if (path === candidate) {\n        return true;\n    }\n\n    if (!path || !candidate) {\n        return false;\n    }\n\n    if (candidate.length > path.length) {\n        return false;\n    }\n\n    if (ignoreCase) {\n        const beginsWith = startsWithIgnoreCase(path, candidate);\n        if (!beginsWith) {\n            return false;\n        }\n\n        if (candidate.length === path.length) {\n            return true; // same path, different casing\n        }\n\n        let sepOffset = candidate.length;\n        if (candidate.charAt(candidate.length - 1) === nativeSep) {\n            sepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n        }\n\n        return path.charAt(sepOffset) === nativeSep;\n    }\n\n    if (candidate.charAt(candidate.length - 1) !== nativeSep) {\n        candidate += nativeSep;\n    }\n\n    return path.indexOf(candidate) === 0;\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { CustomEditor } from '../../../common';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CustomEditorOpener } from './custom-editor-opener';\nimport { WorkspaceCommands } from '@theia/workspace/lib/browser';\nimport { CommandRegistry, Emitter, MenuModelRegistry } from '@theia/core';\nimport { SelectionService } from '@theia/core/lib/common';\nimport { UriAwareCommandHandler } from '@theia/core/lib/common/uri-command-handler';\nimport { NavigatorContextMenu } from '@theia/navigator/lib//browser/navigator-contribution';\nimport { ApplicationShell, DefaultOpenerService, WidgetManager } from '@theia/core/lib/browser';\nimport { CustomEditorWidget } from './custom-editor-widget';\n\n@injectable()\nexport class PluginCustomEditorRegistry {\n    private readonly editors = new Map<string, CustomEditor>();\n    private readonly pendingEditors = new Set<CustomEditorWidget>();\n    private readonly resolvers = new Map<string, (widget: CustomEditorWidget) => void>();\n\n    private readonly onWillOpenCustomEditorEmitter = new Emitter<string>();\n    readonly onWillOpenCustomEditor = this.onWillOpenCustomEditorEmitter.event;\n\n    @inject(DefaultOpenerService)\n    protected readonly defaultOpenerService: DefaultOpenerService;\n\n    @inject(MenuModelRegistry)\n    protected readonly menuModelRegistry: MenuModelRegistry;\n\n    @inject(CommandRegistry)\n    protected readonly commandRegistry: CommandRegistry;\n\n    @inject(SelectionService)\n    protected readonly selectionService: SelectionService;\n\n    @inject(WidgetManager)\n    protected readonly widgetManager: WidgetManager;\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @postConstruct()\n    protected init(): void {\n        this.widgetManager.onDidCreateWidget(({ factoryId, widget }) => {\n            if (factoryId === CustomEditorWidget.FACTORY_ID && widget instanceof CustomEditorWidget) {\n                const restoreState = widget.restoreState.bind(widget);\n\n                widget.restoreState = state => {\n                    if (state.viewType && state.strResource) {\n                        restoreState(state);\n                        this.resolveWidget(widget);\n                    } else {\n                        widget.dispose();\n                    }\n                };\n            }\n        });\n    }\n\n    registerCustomEditor(editor: CustomEditor): Disposable {\n        if (this.editors.has(editor.viewType)) {\n            console.warn('editor with such id already registered: ', JSON.stringify(editor));\n            return Disposable.NULL;\n        }\n        this.editors.set(editor.viewType, editor);\n\n        const toDispose = new DisposableCollection();\n        toDispose.push(Disposable.create(() => this.editors.delete(editor.viewType)));\n\n        const editorOpenHandler = new CustomEditorOpener(\n            editor,\n            this.shell,\n            this.widgetManager\n        );\n        toDispose.push(this.defaultOpenerService.addHandler(editorOpenHandler));\n\n        const openWithCommand = WorkspaceCommands.FILE_OPEN_WITH(editorOpenHandler);\n        toDispose.push(\n            this.menuModelRegistry.registerMenuAction(\n                NavigatorContextMenu.OPEN_WITH,\n                {\n                    commandId: openWithCommand.id,\n                    label: editorOpenHandler.label\n                }\n            )\n        );\n        toDispose.push(\n            this.commandRegistry.registerCommand(\n                openWithCommand,\n                UriAwareCommandHandler.MonoSelect(this.selectionService, {\n                    execute: uri => editorOpenHandler.open(uri),\n                    isEnabled: uri => editorOpenHandler.canHandle(uri) > 0,\n                    isVisible: uri => editorOpenHandler.canHandle(uri) > 0\n                })\n            )\n        );\n        toDispose.push(\n            editorOpenHandler.onDidOpenCustomEditor(widget => this.resolveWidget(widget))\n        );\n        return toDispose;\n    }\n\n    resolveWidget = (widget: CustomEditorWidget) => {\n        const resolver = this.resolvers.get(widget.viewType);\n        if (resolver) {\n            resolver(widget);\n        } else {\n            this.pendingEditors.add(widget);\n            this.onWillOpenCustomEditorEmitter.fire(widget.viewType);\n        }\n    };\n\n    registerResolver(viewType: string, resolver: (widget: CustomEditorWidget) => void): Disposable {\n        if (this.resolvers.has(viewType)) {\n            throw new Error(`Resolver for ${viewType} already registered`);\n        }\n\n        for (const editorWidget of this.pendingEditors) {\n            if (editorWidget.viewType === viewType) {\n                resolver(editorWidget);\n                this.pendingEditors.delete(editorWidget);\n            }\n        }\n\n        this.resolvers.set(viewType, resolver);\n        return Disposable.create(() => this.resolvers.delete(viewType));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/platform/undoRedo/common/undoRedoService.ts#\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\n\n@injectable()\nexport class UndoRedoService {\n    private readonly editStacks = new Map<string, ResourceEditStack>();\n\n    pushElement(resource: URI, undo: () => Promise<void>, redo: () => Promise<void>): void {\n        let editStack: ResourceEditStack;\n        if (this.editStacks.has(resource.toString())) {\n            editStack = this.editStacks.get(resource.toString())!;\n        } else {\n            editStack = new ResourceEditStack();\n            this.editStacks.set(resource.toString(), editStack);\n        }\n\n        editStack.pushElement({ undo, redo });\n    }\n\n    removeElements(resource: URI): void {\n        if (this.editStacks.has(resource.toString())) {\n            this.editStacks.delete(resource.toString());\n        }\n    }\n\n    undo(resource: URI): void {\n        if (!this.editStacks.has(resource.toString())) {\n            return;\n        }\n\n        const editStack = this.editStacks.get(resource.toString())!;\n        const element = editStack.getClosestPastElement();\n        if (!element) {\n            return;\n        }\n\n        editStack.moveBackward(element);\n        element.undo();\n    }\n\n    redo(resource: URI): void {\n        if (!this.editStacks.has(resource.toString())) {\n            return;\n        }\n\n        const editStack = this.editStacks.get(resource.toString())!;\n        const element = editStack.getClosestFutureElement();\n        if (!element) {\n            return;\n        }\n\n        editStack.moveForward(element);\n        element.redo();\n    }\n}\n\ninterface StackElement {\n    undo(): Promise<void> | void;\n    redo(): Promise<void> | void;\n}\n\nexport class ResourceEditStack {\n    private past: StackElement[];\n    private future: StackElement[];\n\n    constructor() {\n        this.past = [];\n        this.future = [];\n    }\n\n    pushElement(element: StackElement): void {\n        this.future = [];\n        this.past.push(element);\n    }\n\n    getClosestPastElement(): StackElement | null {\n        if (this.past.length === 0) {\n            return null;\n        }\n        return this.past[this.past.length - 1];\n    }\n\n    getClosestFutureElement(): StackElement | null {\n        if (this.future.length === 0) {\n            return null;\n        }\n        return this.future[this.future.length - 1];\n    }\n\n    moveBackward(element: StackElement): void {\n        this.past.pop();\n        this.future.push(element);\n    }\n\n    moveForward(element: StackElement): void {\n        this.future.pop();\n        this.past.push(element);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport {\n    DebugMain,\n    DebugExt,\n    MAIN_RPC_CONTEXT\n} from '../../../common/plugin-api-rpc';\nimport { DebugSessionManager } from '@theia/debug/lib/browser/debug-session-manager';\nimport { Breakpoint, WorkspaceFolder } from '../../../common/plugin-api-rpc-model';\nimport { LabelProvider } from '@theia/core/lib/browser';\nimport { EditorManager } from '@theia/editor/lib/browser';\nimport { BreakpointManager, BreakpointsChangeEvent } from '@theia/debug/lib/browser/breakpoint/breakpoint-manager';\nimport { DebugSourceBreakpoint } from '@theia/debug/lib/browser/model/debug-source-breakpoint';\nimport { URI as Uri } from '@theia/core/shared/vscode-uri';\nimport { DebugConsoleSession } from '@theia/debug/lib/browser/console/debug-console-session';\nimport { SourceBreakpoint, FunctionBreakpoint } from '@theia/debug/lib/browser/breakpoint/breakpoint-marker';\nimport { DebugConfiguration } from '@theia/debug/lib/common/debug-configuration';\nimport { ConnectionMainImpl } from '../connection-main';\nimport { DebuggerDescription } from '@theia/debug/lib/common/debug-service';\nimport { DebugProtocol } from 'vscode-debugprotocol';\nimport { DebugConfigurationManager } from '@theia/debug/lib/browser/debug-configuration-manager';\nimport { TerminalService } from '@theia/terminal/lib/browser/base/terminal-service';\nimport { MessageClient } from '@theia/core/lib/common/message-service-protocol';\nimport { OutputChannelManager } from '@theia/output/lib/common/output-channel';\nimport { DebugPreferences } from '@theia/debug/lib/browser/debug-preferences';\nimport { PluginDebugAdapterContribution } from './plugin-debug-adapter-contribution';\nimport { PluginDebugSessionContributionRegistrator, PluginDebugSessionContributionRegistry } from './plugin-debug-session-contribution-registry';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { PluginDebugSessionFactory } from './plugin-debug-session-factory';\nimport { PluginWebSocketChannel } from '../../../common/connection';\nimport { PluginDebugAdapterContributionRegistrator, PluginDebugService } from './plugin-debug-service';\nimport { HostedPluginSupport } from '../../../hosted/browser/hosted-plugin';\nimport { DebugFunctionBreakpoint } from '@theia/debug/lib/browser/model/debug-function-breakpoint';\nimport { FileService } from '@theia/filesystem/lib/browser/file-service';\n\nexport class DebugMainImpl implements DebugMain, Disposable {\n    private readonly debugExt: DebugExt;\n\n    private readonly sessionManager: DebugSessionManager;\n    private readonly labelProvider: LabelProvider;\n    private readonly editorManager: EditorManager;\n    private readonly breakpointsManager: BreakpointManager;\n    private readonly debugConsoleSession: DebugConsoleSession;\n    private readonly configurationManager: DebugConfigurationManager;\n    private readonly terminalService: TerminalService;\n    private readonly messages: MessageClient;\n    private readonly outputChannelManager: OutputChannelManager;\n    private readonly debugPreferences: DebugPreferences;\n    private readonly sessionContributionRegistrator: PluginDebugSessionContributionRegistrator;\n    private readonly adapterContributionRegistrator: PluginDebugAdapterContributionRegistrator;\n    private readonly fileService: FileService;\n    private readonly pluginService: HostedPluginSupport;\n\n    private readonly debuggerContributions = new Map<string, DisposableCollection>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, readonly connectionMain: ConnectionMainImpl, container: interfaces.Container) {\n        this.debugExt = rpc.getProxy(MAIN_RPC_CONTEXT.DEBUG_EXT);\n        this.sessionManager = container.get(DebugSessionManager);\n        this.labelProvider = container.get(LabelProvider);\n        this.editorManager = container.get(EditorManager);\n        this.breakpointsManager = container.get(BreakpointManager);\n        this.debugConsoleSession = container.get(DebugConsoleSession);\n        this.configurationManager = container.get(DebugConfigurationManager);\n        this.terminalService = container.get(TerminalService);\n        this.messages = container.get(MessageClient);\n        this.outputChannelManager = container.get(OutputChannelManager);\n        this.debugPreferences = container.get(DebugPreferences);\n        this.adapterContributionRegistrator = container.get(PluginDebugService);\n        this.sessionContributionRegistrator = container.get(PluginDebugSessionContributionRegistry);\n        this.fileService = container.get(FileService);\n        this.pluginService = container.get(HostedPluginSupport);\n\n        const fireDidChangeBreakpoints = ({ added, removed, changed }: BreakpointsChangeEvent<SourceBreakpoint | FunctionBreakpoint>) => {\n            this.debugExt.$breakpointsDidChange(\n                this.toTheiaPluginApiBreakpoints(added),\n                removed.map(b => b.id),\n                this.toTheiaPluginApiBreakpoints(changed)\n            );\n        };\n        this.debugExt.$breakpointsDidChange(this.toTheiaPluginApiBreakpoints(this.breakpointsManager.getBreakpoints()), [], []);\n        this.debugExt.$breakpointsDidChange(this.toTheiaPluginApiBreakpoints(this.breakpointsManager.getFunctionBreakpoints()), [], []);\n\n        this.toDispose.pushAll([\n            this.breakpointsManager.onDidChangeBreakpoints(fireDidChangeBreakpoints),\n            this.breakpointsManager.onDidChangeFunctionBreakpoints(fireDidChangeBreakpoints),\n            this.sessionManager.onDidCreateDebugSession(debugSession => this.debugExt.$sessionDidCreate(debugSession.id)),\n            this.sessionManager.onDidDestroyDebugSession(debugSession => this.debugExt.$sessionDidDestroy(debugSession.id)),\n            this.sessionManager.onDidChangeActiveDebugSession(event => this.debugExt.$sessionDidChange(event.current && event.current.id)),\n            this.sessionManager.onDidReceiveDebugSessionCustomEvent(event => this.debugExt.$onSessionCustomEvent(event.session.id, event.event, event.body))\n        ]);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $appendToDebugConsole(value: string): Promise<void> {\n        this.debugConsoleSession.append(value);\n    }\n\n    async $appendLineToDebugConsole(value: string): Promise<void> {\n        this.debugConsoleSession.appendLine(value);\n    }\n\n    async $registerDebuggerContribution(description: DebuggerDescription): Promise<void> {\n        const debugType = description.type;\n        const terminalOptionsExt = await this.debugExt.$getTerminalCreationOptions(debugType);\n        if (this.toDispose.disposed) {\n            return;\n        }\n\n        const debugSessionFactory = new PluginDebugSessionFactory(\n            this.terminalService,\n            this.editorManager,\n            this.breakpointsManager,\n            this.labelProvider,\n            this.messages,\n            this.outputChannelManager,\n            this.debugPreferences,\n            async (sessionId: string) => {\n                const connection = await this.connectionMain.ensureConnection(sessionId);\n                return new PluginWebSocketChannel(connection);\n            },\n            this.fileService,\n            terminalOptionsExt\n        );\n\n        const toDispose = new DisposableCollection(\n            Disposable.create(() => this.debuggerContributions.delete(debugType))\n        );\n        this.debuggerContributions.set(debugType, toDispose);\n        toDispose.pushAll([\n            this.adapterContributionRegistrator.registerDebugAdapterContribution(\n                new PluginDebugAdapterContribution(description, this.debugExt, this.pluginService)\n            ),\n            this.sessionContributionRegistrator.registerDebugSessionContribution({\n                debugType: description.type,\n                debugSessionFactory: () => debugSessionFactory\n            })\n        ]);\n        this.toDispose.push(Disposable.create(() => this.$unregisterDebuggerConfiguration(debugType)));\n    }\n\n    async $unregisterDebuggerConfiguration(debugType: string): Promise<void> {\n        const disposable = this.debuggerContributions.get(debugType);\n        if (disposable) {\n            disposable.dispose();\n        }\n    }\n\n    async $addBreakpoints(breakpoints: Breakpoint[]): Promise<void> {\n        const newBreakpoints = new Map<string, Breakpoint>();\n        breakpoints.forEach(b => newBreakpoints.set(b.id, b));\n        this.breakpointsManager.findMarkers({\n            dataFilter: data => {\n                // install only new breakpoints\n                if (newBreakpoints.has(data.id)) {\n                    newBreakpoints.delete(data.id);\n                }\n                return false;\n            }\n        });\n        let addedFunctionBreakpoints = false;\n        const functionBreakpoints = this.breakpointsManager.getFunctionBreakpoints();\n        for (const breakpoint of functionBreakpoints) {\n            // install only new breakpoints\n            if (newBreakpoints.has(breakpoint.id)) {\n                newBreakpoints.delete(breakpoint.id);\n            }\n        }\n        for (const breakpoint of newBreakpoints.values()) {\n            if (breakpoint.location) {\n                const location = breakpoint.location;\n                const column = breakpoint.location.range.startColumn;\n                this.breakpointsManager.addBreakpoint({\n                    id: breakpoint.id,\n                    uri: Uri.revive(location.uri).toString(),\n                    enabled: breakpoint.enabled,\n                    raw: {\n                        line: breakpoint.location.range.startLineNumber + 1,\n                        column: column > 0 ? column + 1 : undefined,\n                        condition: breakpoint.condition,\n                        hitCondition: breakpoint.hitCondition,\n                        logMessage: breakpoint.logMessage\n                    }\n                });\n            } else if (breakpoint.functionName) {\n                addedFunctionBreakpoints = true;\n                functionBreakpoints.push({\n                    id: breakpoint.id,\n                    enabled: breakpoint.enabled,\n                    raw: {\n                        name: breakpoint.functionName\n                    }\n                });\n            }\n        }\n        if (addedFunctionBreakpoints) {\n            this.breakpointsManager.setFunctionBreakpoints(functionBreakpoints);\n        }\n    }\n\n    async $removeBreakpoints(breakpoints: string[]): Promise<void> {\n        const { labelProvider, breakpointsManager, editorManager } = this;\n        const session = this.sessionManager.currentSession;\n\n        const ids = new Set<string>(breakpoints);\n        for (const origin of this.breakpointsManager.findMarkers({ dataFilter: data => ids.has(data.id) })) {\n            const breakpoint = new DebugSourceBreakpoint(origin.data, { labelProvider, breakpoints: breakpointsManager, editorManager, session });\n            breakpoint.remove();\n        }\n        for (const origin of this.breakpointsManager.getFunctionBreakpoints()) {\n            if (ids.has(origin.id)) {\n                const breakpoint = new DebugFunctionBreakpoint(origin, { labelProvider, breakpoints: breakpointsManager, editorManager, session });\n                breakpoint.remove();\n            }\n        }\n    }\n\n    async $customRequest(sessionId: string, command: string, args?: any): Promise<DebugProtocol.Response> {\n        const session = this.sessionManager.getSession(sessionId);\n        if (session) {\n            return session.sendCustomRequest(command, args);\n        }\n\n        throw new Error(`Debug session '${sessionId}' not found`);\n    }\n\n    async $startDebugging(folder: WorkspaceFolder | undefined, nameOrConfiguration: string | DebugConfiguration): Promise<boolean> {\n        let configuration: DebugConfiguration | undefined;\n\n        if (typeof nameOrConfiguration === 'string') {\n            for (const options of this.configurationManager.all) {\n                if (options.configuration.name === nameOrConfiguration) {\n                    configuration = options.configuration;\n                }\n            }\n        } else {\n            configuration = nameOrConfiguration;\n        }\n\n        if (!configuration) {\n            console.error(`There is no debug configuration for ${nameOrConfiguration}`);\n            return false;\n        }\n\n        const session = await this.sessionManager.start({\n            configuration,\n            workspaceFolderUri: folder && Uri.revive(folder.uri).toString()\n        });\n\n        return !!session;\n    }\n\n    private toTheiaPluginApiBreakpoints(breakpoints: (SourceBreakpoint | FunctionBreakpoint)[]): Breakpoint[] {\n        return breakpoints.map(b => this.toTheiaPluginApiBreakpoint(b));\n    }\n\n    private toTheiaPluginApiBreakpoint(breakpoint: SourceBreakpoint | FunctionBreakpoint): Breakpoint {\n        if ('uri' in breakpoint) {\n            const raw = breakpoint.raw;\n            return {\n                id: breakpoint.id,\n                enabled: breakpoint.enabled,\n                condition: breakpoint.raw.condition,\n                hitCondition: breakpoint.raw.hitCondition,\n                logMessage: raw.logMessage,\n                location: {\n                    uri: Uri.parse(breakpoint.uri),\n                    range: {\n                        startLineNumber: raw.line - 1,\n                        startColumn: (raw.column || 1) - 1,\n                        endLineNumber: raw.line - 1,\n                        endColumn: (raw.column || 1) - 1\n                    }\n                }\n            };\n        }\n        return {\n            id: breakpoint.id,\n            enabled: breakpoint.enabled,\n            functionName: breakpoint.raw.name\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DebugExt, } from '../../../common/plugin-api-rpc';\nimport { DebugConfiguration } from '@theia/debug/lib/common/debug-configuration';\nimport { MaybePromise } from '@theia/core/lib/common/types';\nimport { DebuggerDescription } from '@theia/debug/lib/common/debug-service';\nimport { HostedPluginSupport } from '../../../hosted/browser/hosted-plugin';\n\n/**\n * Plugin [DebugAdapterContribution](#DebugAdapterContribution).\n */\nexport class PluginDebugAdapterContribution {\n    constructor(\n        protected readonly description: DebuggerDescription,\n        protected readonly debugExt: DebugExt,\n        protected readonly pluginService: HostedPluginSupport) { }\n\n    get type(): string {\n        return this.description.type;\n    }\n\n    get label(): MaybePromise<string | undefined> {\n        return this.description.label;\n    }\n\n    async provideDebugConfigurations(workspaceFolderUri: string | undefined): Promise<DebugConfiguration[]> {\n        return this.debugExt.$provideDebugConfigurations(this.type, workspaceFolderUri);\n    }\n\n    async resolveDebugConfiguration(config: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<DebugConfiguration | undefined> {\n        return this.debugExt.$resolveDebugConfigurations(config, workspaceFolderUri);\n    }\n\n    async resolveDebugConfigurationWithSubstitutedVariables(config: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<DebugConfiguration | undefined> {\n        return this.debugExt.$resolveDebugConfigurationWithSubstitutedVariables(config, workspaceFolderUri);\n    }\n\n    async createDebugSession(config: DebugConfiguration): Promise<string> {\n        await this.pluginService.activateByDebug('onDebugAdapterProtocolTracker', config.type);\n        return this.debugExt.$createDebugSession(config);\n    }\n\n    async terminateDebugSession(sessionId: string): Promise<void> {\n        this.debugExt.$terminateDebugSession(sessionId);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DebugService, DebuggerDescription, DebugPath } from '@theia/debug/lib/common/debug-service';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { DebugConfiguration } from '@theia/debug/lib/common/debug-configuration';\nimport { IJSONSchema, IJSONSchemaSnippet } from '@theia/core/lib/common/json-schema';\nimport { PluginDebugAdapterContribution } from './plugin-debug-adapter-contribution';\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { WebSocketConnectionProvider } from '@theia/core/lib/browser/messaging/ws-connection-provider';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { DebuggerContribution } from '../../../common/plugin-protocol';\n\n/**\n * Debug adapter contribution registrator.\n */\nexport interface PluginDebugAdapterContributionRegistrator {\n    /**\n     * Registers [PluginDebugAdapterContribution](#PluginDebugAdapterContribution).\n     * @param contrib contribution\n     */\n    registerDebugAdapterContribution(contrib: PluginDebugAdapterContribution): Disposable;\n\n    /**\n     * Unregisters [PluginDebugAdapterContribution](#PluginDebugAdapterContribution).\n     * @param debugType the debug type\n     */\n    unregisterDebugAdapterContribution(debugType: string): void;\n}\n\n/**\n * Debug service to work with plugin and extension contributions.\n */\n@injectable()\nexport class PluginDebugService implements DebugService, PluginDebugAdapterContributionRegistrator {\n\n    protected readonly debuggers: DebuggerContribution[] = [];\n    protected readonly contributors = new Map<string, PluginDebugAdapterContribution>();\n    protected readonly toDispose = new DisposableCollection();\n\n    // maps session and contribution\n    protected readonly sessionId2contrib = new Map<string, PluginDebugAdapterContribution>();\n    protected delegated: DebugService;\n\n    @inject(WebSocketConnectionProvider)\n    protected readonly connectionProvider: WebSocketConnectionProvider;\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n\n    @postConstruct()\n    protected init(): void {\n        this.delegated = this.connectionProvider.createProxy<DebugService>(DebugPath);\n        this.toDispose.pushAll([\n            Disposable.create(() => this.delegated.dispose()),\n            Disposable.create(() => {\n                for (const sessionId of this.sessionId2contrib.keys()) {\n                    const contrib = this.sessionId2contrib.get(sessionId)!;\n                    contrib.terminateDebugSession(sessionId);\n                }\n                this.sessionId2contrib.clear();\n            })]);\n    }\n\n    registerDebugAdapterContribution(contrib: PluginDebugAdapterContribution): Disposable {\n        const { type } = contrib;\n\n        if (this.contributors.has(type)) {\n            console.warn(`Debugger with type '${type}' already registered.`);\n            return Disposable.NULL;\n        }\n\n        this.contributors.set(type, contrib);\n        return Disposable.create(() => this.unregisterDebugAdapterContribution(type));\n    }\n\n    unregisterDebugAdapterContribution(debugType: string): void {\n        this.contributors.delete(debugType);\n    }\n\n    async debugTypes(): Promise<string[]> {\n        const debugTypes = new Set(await this.delegated.debugTypes());\n        for (const contribution of this.debuggers) {\n            debugTypes.add(contribution.type);\n        }\n        for (const debugType of this.contributors.keys()) {\n            debugTypes.add(debugType);\n        }\n        return [...debugTypes];\n    }\n\n    async provideDebugConfigurations(debugType: string, workspaceFolderUri: string | undefined): Promise<DebugConfiguration[]> {\n        const contributor = this.contributors.get(debugType);\n        if (contributor) {\n            return contributor.provideDebugConfigurations && contributor.provideDebugConfigurations(workspaceFolderUri) || [];\n        } else {\n            return this.delegated.provideDebugConfigurations(debugType, workspaceFolderUri);\n        }\n    }\n\n    async resolveDebugConfiguration(config: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<DebugConfiguration> {\n        let resolved = config;\n\n        // we should iterate over all to handle configuration providers for `*`\n        for (const contributor of this.contributors.values()) {\n            if (contributor) {\n                try {\n                    const next = await contributor.resolveDebugConfiguration(resolved, workspaceFolderUri);\n                    if (next) {\n                        resolved = next;\n                    } else {\n                        return resolved;\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n            }\n        }\n\n        return this.delegated.resolveDebugConfiguration(resolved, workspaceFolderUri);\n    }\n\n    async resolveDebugConfigurationWithSubstitutedVariables(config: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<DebugConfiguration> {\n        let resolved = config;\n\n        // we should iterate over all to handle configuration providers for `*`\n        for (const contributor of this.contributors.values()) {\n            if (contributor) {\n                try {\n                    const next = await contributor.resolveDebugConfigurationWithSubstitutedVariables(resolved, workspaceFolderUri);\n                    if (next) {\n                        resolved = next;\n                    } else {\n                        return resolved;\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n            }\n        }\n\n        return this.delegated.resolveDebugConfigurationWithSubstitutedVariables(resolved, workspaceFolderUri);\n    }\n\n    registerDebugger(contribution: DebuggerContribution): Disposable {\n        this.debuggers.push(contribution);\n        return Disposable.create(() => {\n            const index = this.debuggers.indexOf(contribution);\n            if (index !== -1) {\n                this.debuggers.splice(index, 1);\n            }\n        });\n    }\n\n    async getDebuggersForLanguage(language: string): Promise<DebuggerDescription[]> {\n        const debuggers = await this.delegated.getDebuggersForLanguage(language);\n\n        for (const contributor of this.debuggers) {\n            const languages = contributor.languages;\n            if (languages && languages.indexOf(language) !== -1) {\n                const { label, type } = contributor;\n                debuggers.push({ type, label: label || type });\n            }\n        }\n\n        return debuggers;\n    }\n\n    async getSchemaAttributes(debugType: string): Promise<IJSONSchema[]> {\n        let schemas = await this.delegated.getSchemaAttributes(debugType);\n        for (const contribution of this.debuggers) {\n            if (contribution.configurationAttributes &&\n                (contribution.type === debugType || contribution.type === '*' || debugType === '*')) {\n                schemas = schemas.concat(contribution.configurationAttributes);\n            }\n        }\n        return schemas;\n    }\n\n    async getConfigurationSnippets(): Promise<IJSONSchemaSnippet[]> {\n        let snippets = await this.delegated.getConfigurationSnippets();\n\n        for (const contribution of this.debuggers) {\n            if (contribution.configurationSnippets) {\n                snippets = snippets.concat(contribution.configurationSnippets);\n            }\n        }\n\n        return snippets;\n    }\n\n    async createDebugSession(config: DebugConfiguration): Promise<string> {\n        const contributor = this.contributors.get(config.type);\n        if (contributor) {\n            const sessionId = await contributor.createDebugSession(config);\n            this.sessionId2contrib.set(sessionId, contributor);\n            return sessionId;\n        } else {\n            return this.delegated.createDebugSession(config);\n        }\n    }\n\n    async terminateDebugSession(sessionId: string): Promise<void> {\n        const contributor = this.sessionId2contrib.get(sessionId);\n        if (contributor) {\n            this.sessionId2contrib.delete(sessionId);\n            return contributor.terminateDebugSession(sessionId);\n        } else {\n            return this.delegated.terminateDebugSession(sessionId);\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DebugSessionContributionRegistry, DebugSessionContribution } from '@theia/debug/lib/browser/debug-session-contribution';\nimport { injectable, inject, named, postConstruct } from '@theia/core/shared/inversify';\nimport { ContributionProvider } from '@theia/core/lib/common/contribution-provider';\nimport { Disposable } from '@theia/core/lib/common/disposable';\n\n/**\n * Debug session contribution registrator.\n */\nexport interface PluginDebugSessionContributionRegistrator {\n    /**\n     * Registers [DebugSessionContribution](#DebugSessionContribution).\n     * @param contrib contribution\n     */\n    registerDebugSessionContribution(contrib: DebugSessionContribution): Disposable;\n\n    /**\n     * Unregisters [DebugSessionContribution](#DebugSessionContribution).\n     * @param debugType the debug type\n     */\n    unregisterDebugSessionContribution(debugType: string): void;\n}\n\n/**\n * Plugin debug session contribution registry implementation with functionality\n * to register / unregister plugin contributions.\n */\n@injectable()\nexport class PluginDebugSessionContributionRegistry implements DebugSessionContributionRegistry, PluginDebugSessionContributionRegistrator {\n    protected readonly contribs = new Map<string, DebugSessionContribution>();\n\n    @inject(ContributionProvider) @named(DebugSessionContribution)\n    protected readonly contributions: ContributionProvider<DebugSessionContribution>;\n\n    @postConstruct()\n    protected init(): void {\n        for (const contrib of this.contributions.getContributions()) {\n            this.contribs.set(contrib.debugType, contrib);\n        }\n    }\n\n    get(debugType: string): DebugSessionContribution | undefined {\n        return this.contribs.get(debugType);\n    }\n\n    registerDebugSessionContribution(contrib: DebugSessionContribution): Disposable {\n        const { debugType } = contrib;\n\n        if (this.contribs.has(debugType)) {\n            console.warn(`Debug session contribution already registered for ${debugType}`);\n            return Disposable.NULL;\n        }\n\n        this.contribs.set(debugType, contrib);\n        return Disposable.create(() => this.unregisterDebugSessionContribution(debugType));\n    }\n\n    unregisterDebugSessionContribution(debugType: string): void {\n        this.contribs.delete(debugType);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DefaultDebugSessionFactory, } from '@theia/debug/lib/browser/debug-session-contribution';\nimport { TerminalService } from '@theia/terminal/lib/browser/base/terminal-service';\nimport { EditorManager } from '@theia/editor/lib/browser/editor-manager';\nimport { BreakpointManager } from '@theia/debug/lib/browser/breakpoint/breakpoint-manager';\nimport { LabelProvider } from '@theia/core/lib/browser/label-provider';\nimport { MessageClient } from '@theia/core/lib/common/message-service-protocol';\nimport { OutputChannelManager } from '@theia/output/lib/common/output-channel';\nimport { DebugPreferences } from '@theia/debug/lib/browser/debug-preferences';\nimport { DebugSessionOptions } from '@theia/debug/lib/browser/debug-session-options';\nimport { DebugSession } from '@theia/debug/lib/browser/debug-session';\nimport { DebugSessionConnection } from '@theia/debug/lib/browser/debug-session-connection';\nimport { IWebSocket } from '@theia/core/shared/vscode-ws-jsonrpc';\nimport { TerminalWidgetOptions, TerminalWidget } from '@theia/terminal/lib/browser/base/terminal-widget';\nimport { TerminalOptionsExt } from '../../../common/plugin-api-rpc';\nimport { FileService } from '@theia/filesystem/lib/browser/file-service';\n\nexport class PluginDebugSession extends DebugSession {\n    constructor(\n        readonly id: string,\n        readonly options: DebugSessionOptions,\n        protected readonly connection: DebugSessionConnection,\n        protected readonly terminalServer: TerminalService,\n        protected readonly editorManager: EditorManager,\n        protected readonly breakpoints: BreakpointManager,\n        protected readonly labelProvider: LabelProvider,\n        protected readonly messages: MessageClient,\n        protected readonly fileService: FileService,\n        protected readonly terminalOptionsExt: TerminalOptionsExt | undefined) {\n        super(id, options, connection, terminalServer, editorManager, breakpoints, labelProvider, messages, fileService);\n    }\n\n    protected async doCreateTerminal(terminalWidgetOptions: TerminalWidgetOptions): Promise<TerminalWidget> {\n        terminalWidgetOptions = Object.assign({}, terminalWidgetOptions, this.terminalOptionsExt);\n        return super.doCreateTerminal(terminalWidgetOptions);\n    }\n}\n\n/**\n * Session factory for a client debug session that communicates with debug adapter contributed as plugin.\n * The main difference is to use a connection factory that creates [IWebSocket](#IWebSocket) over Rpc channel.\n */\nexport class PluginDebugSessionFactory extends DefaultDebugSessionFactory {\n    constructor(\n        protected readonly terminalService: TerminalService,\n        protected readonly editorManager: EditorManager,\n        protected readonly breakpoints: BreakpointManager,\n        protected readonly labelProvider: LabelProvider,\n        protected readonly messages: MessageClient,\n        protected readonly outputChannelManager: OutputChannelManager,\n        protected readonly debugPreferences: DebugPreferences,\n        protected readonly connectionFactory: (sessionId: string) => Promise<IWebSocket>,\n        protected readonly fileService: FileService,\n        protected readonly terminalOptionsExt: TerminalOptionsExt | undefined\n    ) {\n        super();\n    }\n\n    get(sessionId: string, options: DebugSessionOptions): DebugSession {\n        const connection = new DebugSessionConnection(\n            sessionId,\n            this.connectionFactory,\n            this.getTraceOutputChannel());\n\n        return new PluginDebugSession(\n            sessionId,\n            options,\n            connection,\n            this.terminalService,\n            this.editorManager,\n            this.breakpoints,\n            this.labelProvider,\n            this.messages,\n            this.fileService,\n            this.terminalOptionsExt);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    DecorationData,\n    DecorationRequest,\n    DecorationsExt,\n    DecorationsMain,\n    MAIN_RPC_CONTEXT\n} from '../../../common/plugin-api-rpc';\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport { UriComponents } from '../../../common/uri-components';\nimport { URI as VSCodeURI } from '@theia/core/shared/vscode-uri';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport URI from '@theia/core/lib/common/uri';\nimport { Decoration, DecorationsService } from '@theia/core/lib/browser/decorations-service';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/browser/mainThreadDecorations.ts#L85\n\nclass DecorationRequestsQueue {\n\n    private idPool = 0;\n    private requests = new Map<number, DecorationRequest>();\n    private resolver = new Map<number, (data: DecorationData) => void>();\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private timer: any;\n\n    constructor(\n        private readonly proxy: DecorationsExt,\n        private readonly handle: number\n    ) {\n    }\n\n    enqueue(uri: URI, token: CancellationToken): Promise<DecorationData> {\n        const id = ++this.idPool;\n        const result = new Promise<DecorationData>(resolve => {\n            this.requests.set(id, { id, uri: VSCodeURI.parse(uri.toString()) });\n            this.resolver.set(id, resolve);\n            this.processQueue();\n        });\n        token.onCancellationRequested(() => {\n            this.requests.delete(id);\n            this.resolver.delete(id);\n        });\n        return result;\n    }\n\n    private processQueue(): void {\n        if (typeof this.timer === 'number') {\n            // already queued\n            return;\n        }\n        this.timer = setTimeout(() => {\n            // make request\n            const requests = this.requests;\n            const resolver = this.resolver;\n            this.proxy.$provideDecorations(this.handle, [...requests.values()], CancellationToken.None).then(data => {\n                for (const [id, resolve] of resolver) {\n                    resolve(data[id]);\n                }\n            });\n\n            // reset\n            this.requests = new Map();\n            this.resolver = new Map();\n            this.timer = undefined;\n        }, 0);\n    }\n}\n\nexport class DecorationsMainImpl implements DecorationsMain, Disposable {\n\n    private readonly proxy: DecorationsExt;\n    private readonly providers = new Map<number, [Emitter<URI[]>, Disposable]>();\n    private readonly decorationsService: DecorationsService;\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.DECORATIONS_EXT);\n        this.decorationsService = container.get(DecorationsService);\n    }\n\n    dispose(): void {\n        this.providers.forEach(value => value.forEach(v => v.dispose()));\n        this.providers.clear();\n    }\n\n    async $registerDecorationProvider(handle: number): Promise<void> {\n        const emitter = new Emitter<URI[]>();\n        const queue = new DecorationRequestsQueue(this.proxy, handle);\n        const registration = this.decorationsService.registerDecorationsProvider({\n            onDidChange: emitter.event,\n            provideDecorations: async (uri, token) => {\n                const data = await queue.enqueue(uri, token);\n                if (!data) {\n                    return undefined;\n                }\n                const [bubble, tooltip, letter, themeColor] = data;\n                return <Decoration>{\n                    weight: 10,\n                    bubble: bubble ?? false,\n                    colorId: themeColor?.id,\n                    tooltip,\n                    letter\n                };\n            }\n        });\n        this.providers.set(handle, [emitter, registration]);\n    }\n\n    $onDidChange(handle: number, resources: UriComponents[]): void {\n        const providerSet = this.providers.get(handle);\n        if (providerSet) {\n            const [emitter] = providerSet;\n            emitter.fire(resources && resources.map(r => new URI(VSCodeURI.revive(r).toString())));\n        }\n    }\n\n    $unregisterDecorationProvider(handle: number): void {\n        const provider = this.providers.get(handle);\n        if (provider) {\n            provider.forEach(p => p.dispose());\n            this.providers.delete(handle);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { OpenDialogOptionsMain, SaveDialogOptionsMain, DialogsMain, UploadDialogOptionsMain } from '../../common/plugin-api-rpc';\nimport { OpenFileDialogProps, SaveFileDialogProps, FileDialogService } from '@theia/filesystem/lib/browser';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport URI from '@theia/core/lib/common/uri';\nimport { FileUploadService } from '@theia/filesystem/lib/browser/file-upload-service';\nimport { FileService } from '@theia/filesystem/lib/browser/file-service';\nimport { FileStat } from '@theia/filesystem/lib/common/files';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\n\nexport class DialogsMainImpl implements DialogsMain {\n\n    private workspaceService: WorkspaceService;\n    private fileService: FileService;\n    private environments: EnvVariablesServer;\n\n    private fileDialogService: FileDialogService;\n    private uploadService: FileUploadService;\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.workspaceService = container.get(WorkspaceService);\n        this.fileService = container.get(FileService);\n        this.environments = container.get(EnvVariablesServer);\n        this.fileDialogService = container.get(FileDialogService);\n        this.uploadService = container.get(FileUploadService);\n    }\n\n    protected async getRootStat(defaultUri: string | undefined): Promise<FileStat | undefined> {\n        let rootStat: FileStat | undefined;\n\n        // Try to use default URI as root\n        if (defaultUri) {\n            try {\n                rootStat = await this.fileService.resolve(new URI(defaultUri));\n            } catch {\n                rootStat = undefined;\n            }\n        }\n\n        // Try to use as root the parent folder of existing file URI/non existing URI\n        if (rootStat && !rootStat.isDirectory || !rootStat) {\n            try {\n                rootStat = await this.fileService.resolve(new URI(defaultUri).parent);\n            } catch {\n                rootStat = undefined;\n            }\n        }\n\n        // Try to use workspace service root if there is no pre-configured URI\n        if (!rootStat) {\n            rootStat = (await this.workspaceService.roots)[0];\n        }\n\n        // Try to use current user home if root folder is still not taken\n        if (!rootStat) {\n            const homeDirUri = await this.environments.getHomeDirUri();\n            try {\n                rootStat = await this.fileService.resolve(new URI(homeDirUri));\n            } catch { }\n        }\n\n        return rootStat;\n    }\n\n    async $showOpenDialog(options: OpenDialogOptionsMain): Promise<string[] | undefined> {\n        const rootStat = await this.getRootStat(options.defaultUri ? options.defaultUri : undefined);\n        if (!rootStat) {\n            throw new Error('Unable to find the rootStat');\n        }\n\n        try {\n            const canSelectFiles = typeof options.canSelectFiles === 'boolean' ? options.canSelectFiles : true;\n            const canSelectFolders = typeof options.canSelectFolders === 'boolean' ? options.canSelectFolders : true;\n\n            let title = options.title;\n            if (!title) {\n                if (canSelectFiles && canSelectFolders) {\n                    title = 'Open';\n                } else {\n                    if (canSelectFiles) {\n                        title = 'Open File';\n                    } else {\n                        title = 'Open Folder';\n                    }\n                    if (options.canSelectMany) {\n                        title += '(s)';\n                    }\n                }\n            }\n\n            // Create open file dialog props\n            const dialogProps = {\n                title: title,\n                openLabel: options.openLabel,\n                canSelectFiles: options.canSelectFiles,\n                canSelectFolders: options.canSelectFolders,\n                canSelectMany: options.canSelectMany,\n                filters: options.filters\n            } as OpenFileDialogProps;\n\n            const result = await this.fileDialogService.showOpenDialog(dialogProps, rootStat);\n            if (Array.isArray(result)) {\n                return result.map(uri => uri.path.toString());\n            } else {\n                return result ? [result].map(uri => uri.path.toString()) : undefined;\n            }\n        } catch (error) {\n            console.error(error);\n        }\n\n        return undefined;\n    }\n\n    async $showSaveDialog(options: SaveDialogOptionsMain): Promise<string | undefined> {\n        const rootStat = await this.getRootStat(options.defaultUri ? options.defaultUri : undefined);\n\n        // File name field should be empty unless the URI is a file\n        let fileNameValue = '';\n        if (options.defaultUri) {\n            let defaultURIStat: FileStat | undefined;\n            try {\n                defaultURIStat = await this.fileService.resolve(new URI(options.defaultUri));\n            } catch { }\n            if (defaultURIStat && !defaultURIStat.isDirectory || !defaultURIStat) {\n                fileNameValue = new URI(options.defaultUri).path.base;\n            }\n        }\n\n        try {\n            // Create save file dialog props\n            const dialogProps = {\n                title: options.title ?? 'Save',\n                saveLabel: options.saveLabel,\n                filters: options.filters,\n                inputValue: fileNameValue\n            } as SaveFileDialogProps;\n\n            const result = await this.fileDialogService.showSaveDialog(dialogProps, rootStat);\n            if (result) {\n                return result.path.toString();\n            }\n            return undefined;\n        } catch (error) {\n            console.error(error);\n        }\n\n        return undefined;\n    }\n\n    async $showUploadDialog(options: UploadDialogOptionsMain): Promise<string[] | undefined> {\n        const rootStat = await this.getRootStat(options.defaultUri);\n\n        // Fail if root not fount\n        if (!rootStat) {\n            throw new Error('Failed to resolve base directory where files should be uploaded');\n        }\n\n        const uploadResult = await this.uploadService.upload(rootStat.resource.toString());\n\n        if (uploadResult) {\n            return uploadResult.uploaded;\n        }\n\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from '@theia/core/shared/inversify';\nimport { Message } from '@theia/core/shared/@phosphor/messaging';\nimport { Key } from '@theia/core/lib/browser';\nimport { AbstractDialog } from '@theia/core/lib/browser/dialogs';\nimport '../../../../src/main/browser/dialogs/style/modal-notification.css';\nimport { MainMessageItem } from '../../../common/plugin-api-rpc';\n\nexport enum MessageType {\n    Error = 'error',\n    Warning = 'warning',\n    Info = 'info'\n}\n\nconst NOTIFICATION = 'modal-Notification';\nconst ICON = 'icon';\nconst TEXT = 'text';\n\n@injectable()\nexport class ModalNotification extends AbstractDialog<string | undefined> {\n\n    protected actionTitle: string | undefined;\n\n    constructor() {\n        super({ title: 'Theia' });\n    }\n\n    protected onCloseRequest(msg: Message): void {\n        this.actionTitle = undefined;\n        this.accept();\n    }\n\n    get value(): string | undefined {\n        return this.actionTitle;\n    }\n\n    showDialog(messageType: MessageType, text: string, actions: MainMessageItem[]): Promise<string | undefined> {\n        this.contentNode.appendChild(this.createMessageNode(messageType, text, actions));\n        return this.open();\n    }\n\n    protected createMessageNode(messageType: MessageType, text: string, actions: MainMessageItem[]): HTMLElement {\n        const messageNode = document.createElement('div');\n        messageNode.classList.add(NOTIFICATION);\n\n        const iconContainer = messageNode.appendChild(document.createElement('div'));\n        iconContainer.classList.add(ICON);\n        const iconElement = iconContainer.appendChild(document.createElement('i'));\n        iconElement.classList.add('fa', this.toIconClass(messageType), 'fa-fw', messageType.toString());\n\n        const textContainer = messageNode.appendChild(document.createElement('div'));\n        textContainer.classList.add(TEXT);\n        const textElement = textContainer.appendChild(document.createElement('p'));\n        textElement.textContent = text;\n\n        actions.forEach((action: MainMessageItem) => {\n            const button = this.createButton(action.title);\n            button.classList.add('main');\n            this.controlPanel.appendChild(button);\n            this.addKeyListener(button,\n                Key.ENTER,\n                () => {\n                    this.actionTitle = action.title;\n                    this.accept();\n                },\n                'click');\n        });\n        if (!actions.some(action => action.isCloseAffordance === true)) {\n            this.appendCloseButton('close');\n        }\n\n        return messageNode;\n    }\n\n    protected toIconClass(icon: MessageType): string {\n        if (icon === MessageType.Error) {\n            return 'fa-times-circle';\n        }\n        if (icon === MessageType.Warning) {\n            return 'fa-warning';\n        }\n        return 'fa-info-circle';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DocumentsMain, MAIN_RPC_CONTEXT, DocumentsExt } from '../../common/plugin-api-rpc';\nimport { UriComponents } from '../../common/uri-components';\nimport { EditorsAndDocumentsMain } from './editors-and-documents-main';\nimport { DisposableCollection, Disposable } from '@theia/core';\nimport { MonacoEditorModel } from '@theia/monaco/lib/browser/monaco-editor-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { EditorModelService } from './text-editor-model-service';\nimport { UntitledResourceResolver } from './editor/untitled-resource';\nimport { EditorManager, EditorOpenerOptions } from '@theia/editor/lib/browser';\nimport URI from '@theia/core/lib/common/uri';\nimport { URI as CodeURI } from '@theia/core/shared/vscode-uri';\nimport { ApplicationShell, Saveable } from '@theia/core/lib/browser';\nimport { TextDocumentShowOptions } from '../../common/plugin-api-rpc-model';\nimport { Range } from '@theia/core/shared/vscode-languageserver-types';\nimport { OpenerService } from '@theia/core/lib/browser/opener-service';\nimport { Reference } from '@theia/core/lib/common/reference';\nimport { dispose } from '../../common/disposable-util';\nimport { FileResourceResolver } from '@theia/filesystem/lib/browser';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class ModelReferenceCollection {\n\n    private data = new Array<{ length: number, dispose(): void }>();\n    private length = 0;\n\n    constructor(\n        private readonly maxAge: number = 1000 * 60 * 3,\n        private readonly maxLength: number = 1024 * 1024 * 80\n    ) { }\n\n    dispose(): void {\n        this.data = dispose(this.data) || [];\n    }\n\n    add(ref: Reference<MonacoEditorModel>): void {\n        const length = ref.object.textEditorModel.getValueLength();\n        const handle = setTimeout(_dispose, this.maxAge);\n        const entry = { length, dispose: _dispose };\n        const self = this;\n        function _dispose(): void {\n            const idx = self.data.indexOf(entry);\n            if (idx >= 0) {\n                self.length -= length;\n                ref.dispose();\n                clearTimeout(handle);\n                self.data.splice(idx, 1);\n            }\n        };\n\n        this.data.push(entry);\n        this.length += length;\n        this.cleanup();\n    }\n\n    private cleanup(): void {\n        while (this.length > this.maxLength) {\n            this.data[0].dispose();\n        }\n    }\n}\n\nexport class DocumentsMainImpl implements DocumentsMain, Disposable {\n\n    private readonly proxy: DocumentsExt;\n    private readonly syncedModels = new Map<string, Disposable>();\n    private readonly modelReferenceCache = new ModelReferenceCollection();\n\n    protected saveTimeout = 1750;\n\n    private readonly toDispose = new DisposableCollection(this.modelReferenceCache);\n\n    constructor(\n        editorsAndDocuments: EditorsAndDocumentsMain,\n        private readonly modelService: EditorModelService,\n        rpc: RPCProtocol,\n        private editorManager: EditorManager,\n        private openerService: OpenerService,\n        private shell: ApplicationShell,\n        private untitledResourceResolver: UntitledResourceResolver,\n        private fileResourceResolver: FileResourceResolver\n    ) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.DOCUMENTS_EXT);\n\n        this.toDispose.push(editorsAndDocuments);\n        this.toDispose.push(editorsAndDocuments.onDocumentAdd(documents => documents.forEach(this.onModelAdded, this)));\n        this.toDispose.push(editorsAndDocuments.onDocumentRemove(documents => documents.forEach(this.onModelRemoved, this)));\n        this.toDispose.push(modelService.onModelModeChanged(this.onModelChanged, this));\n\n        this.toDispose.push(modelService.onModelSaved(m => {\n            this.proxy.$acceptModelSaved(m.textEditorModel.uri);\n        }));\n        this.toDispose.push(modelService.onModelWillSave(onWillSaveModelEvent => {\n            onWillSaveModelEvent.waitUntil(new Promise<monaco.editor.IIdentifiedSingleEditOperation[]>(async (resolve, reject) => {\n                setTimeout(() => reject(new Error(`Aborted onWillSaveTextDocument-event after ${this.saveTimeout}ms`)), this.saveTimeout);\n                const edits = await this.proxy.$acceptModelWillSave(onWillSaveModelEvent.model.textEditorModel.uri, onWillSaveModelEvent.reason, this.saveTimeout);\n                const editOperations: monaco.editor.IIdentifiedSingleEditOperation[] = [];\n                for (const edit of edits) {\n                    const { range, text } = edit;\n                    if (!range && !text) {\n                        continue;\n                    }\n                    if (range && range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn && !edit.text) {\n                        continue;\n                    }\n\n                    editOperations.push({\n                        range: range ? monaco.Range.lift(range) : onWillSaveModelEvent.model.textEditorModel.getFullModelRange(),\n                        /* eslint-disable-next-line no-null/no-null */\n                        text: text || null,\n                        forceMoveMarkers: edit.forceMoveMarkers\n                    });\n                }\n                resolve(editOperations);\n            }));\n        }));\n        this.toDispose.push(modelService.onModelDirtyChanged(m => {\n            this.proxy.$acceptDirtyStateChanged(m.textEditorModel.uri, m.dirty);\n        }));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private onModelChanged(event: { model: MonacoEditorModel, oldModeId: string }): void {\n        const modelUrl = event.model.textEditorModel.uri;\n        if (this.syncedModels.has(modelUrl.toString())) {\n            this.proxy.$acceptModelModeChanged(modelUrl, event.oldModeId, event.model.languageId);\n        }\n    }\n\n    private onModelAdded(model: MonacoEditorModel): void {\n        const modelUri = model.textEditorModel.uri;\n        const key = modelUri.toString();\n\n        const toDispose = new DisposableCollection(\n            model.textEditorModel.onDidChangeContent(e =>\n                this.proxy.$acceptModelChanged(modelUri, {\n                    eol: e.eol,\n                    versionId: e.versionId,\n                    changes: e.changes.map(c =>\n                    ({\n                        text: c.text,\n                        range: c.range,\n                        rangeLength: c.rangeLength,\n                        rangeOffset: c.rangeOffset\n                    }))\n                }, model.dirty)\n            ),\n            Disposable.create(() => this.syncedModels.delete(key))\n        );\n        this.syncedModels.set(key, toDispose);\n        this.toDispose.push(toDispose);\n    }\n\n    private onModelRemoved(url: monaco.Uri): void {\n        const model = this.syncedModels.get(url.toString());\n        if (model) {\n            model.dispose();\n        }\n    }\n\n    async $tryCreateDocument(options?: { language?: string; content?: string; }): Promise<UriComponents> {\n        const language = options && options.language;\n        const content = options && options.content;\n        const resource = await this.untitledResourceResolver.createUntitledResource(this.fileResourceResolver, content, language);\n        return monaco.Uri.parse(resource.uri.toString());\n    }\n\n    async $tryShowDocument(uri: UriComponents, options?: TextDocumentShowOptions): Promise<void> {\n        // Removing try-catch block here makes it not possible to handle errors.\n        // Following message is appeared in browser console\n        //   - Uncaught (in promise) Error: Cannot read property 'message' of undefined.\n        try {\n            const editorOptions = DocumentsMainImpl.toEditorOpenerOptions(this.shell, options);\n            const uriArg = new URI(CodeURI.revive(uri));\n            const opener = await this.openerService.getOpener(uriArg, editorOptions);\n            await opener.open(uriArg, editorOptions);\n        } catch (err) {\n            throw new Error(err);\n        }\n    }\n\n    async $trySaveDocument(uri: UriComponents): Promise<boolean> {\n        const widget = await this.editorManager.getByUri(new URI(CodeURI.revive(uri)));\n        if (widget) {\n            await Saveable.save(widget);\n            return true;\n        }\n\n        return false;\n    }\n\n    async $tryOpenDocument(uri: UriComponents): Promise<boolean> {\n        const ref = await this.modelService.createModelReference(new URI(CodeURI.revive(uri)));\n        if (ref.object) {\n            this.modelReferenceCache.add(ref);\n            return true;\n        } else {\n            ref.dispose();\n            return false;\n        }\n    }\n\n    async $tryCloseDocument(uri: UriComponents): Promise<boolean> {\n        const widget = await this.editorManager.getByUri(new URI(CodeURI.revive(uri)));\n        if (widget) {\n            await Saveable.save(widget);\n            widget.close();\n            return true;\n        }\n\n        return false;\n    }\n\n    static toEditorOpenerOptions(shell: ApplicationShell, options?: TextDocumentShowOptions): EditorOpenerOptions | undefined {\n        if (!options) {\n            return undefined;\n        }\n        let range: Range | undefined;\n        if (options.selection) {\n            const selection = options.selection;\n            range = {\n                start: { line: selection.startLineNumber - 1, character: selection.startColumn - 1 },\n                end: { line: selection.endLineNumber - 1, character: selection.endColumn - 1 }\n            };\n        }\n        /* fall back to side group -> split relative to the active widget */\n        let widgetOptions: ApplicationShell.WidgetOptions | undefined = { mode: 'split-right' };\n        const viewColumn = options.viewColumn;\n        if (viewColumn === undefined || viewColumn === -1) {\n            /* active group -> skip (default behaviour) */\n            widgetOptions = undefined;\n        } else if (viewColumn > 0) {\n            const tabBars = shell.mainAreaTabBars;\n            // convert to zero-based index\n            const tabBar = tabBars[viewColumn - 1];\n            if (tabBar && tabBar.currentTitle) {\n                widgetOptions = { ref: tabBar.currentTitle.owner };\n            }\n        }\n        return {\n            selection: range,\n            mode: options.preserveFocus ? 'reveal' : 'activate',\n            preview: options.preview,\n            widgetOptions\n        };\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { Resource, ResourceResolver, ResourceVersion, ResourceSaveOptions } from '@theia/core/lib/common/resource';\nimport URI from '@theia/core/lib/common/uri';\nimport { Schemes } from '../../../common/uri-components';\nimport { FileResource, FileResourceResolver } from '@theia/filesystem/lib/browser';\nimport { TextDocumentContentChangeEvent } from '@theia/core/shared/vscode-languageserver-protocol';\n\nlet index = 0;\n\n@injectable()\nexport class UntitledResourceResolver implements ResourceResolver {\n\n    @inject(FileResourceResolver)\n    protected readonly fileResourceResolver: FileResourceResolver;\n\n    protected readonly resources = new Map<string, UntitledResource>();\n\n    async resolve(uri: URI): Promise<UntitledResource> {\n        if (uri.scheme !== Schemes.untitled) {\n            throw new Error('The given uri is not untitled file uri: ' + uri);\n        } else {\n            const untitledResource = this.resources.get(uri.toString());\n            if (!untitledResource) {\n                return this.createUntitledResource(this.fileResourceResolver, '', '', uri);\n            } else {\n                return untitledResource;\n            }\n        }\n    }\n\n    async createUntitledResource(fileResourceResolver: FileResourceResolver, content?: string, language?: string, uri?: URI): Promise<UntitledResource> {\n        let extension;\n        if (language) {\n            for (const lang of monaco.languages.getLanguages()) {\n                if (lang.id === language) {\n                    if (lang.extensions) {\n                        extension = lang.extensions[0];\n                        break;\n                    }\n                }\n            }\n        }\n        return new UntitledResource(this.resources, uri ? uri : new URI().withScheme(Schemes.untitled).withPath(`/Untitled-${index++}${extension ? extension : ''}`),\n            fileResourceResolver, content);\n    }\n}\n\nexport class UntitledResource implements Resource {\n\n    private fileResource?: FileResource;\n\n    protected readonly onDidChangeContentsEmitter = new Emitter<void>();\n    readonly onDidChangeContents: Event<void> = this.onDidChangeContentsEmitter.event;\n\n    constructor(private resources: Map<string, UntitledResource>, public uri: URI, private fileResourceResolver: FileResourceResolver, private content?: string) {\n        this.resources.set(this.uri.toString(), this);\n    }\n\n    dispose(): void {\n        this.resources.delete(this.uri.toString());\n        this.onDidChangeContentsEmitter.dispose();\n        if (this.fileResource) {\n            this.fileResource.dispose();\n        }\n    }\n\n    async readContents(options?: { encoding?: string | undefined; } | undefined): Promise<string> {\n        if (this.fileResource) {\n            return this.fileResource.readContents(options);\n        } else if (this.content) {\n            return this.content;\n        } else {\n            return '';\n        }\n    }\n\n    async saveContents(content: string, options?: { encoding?: string, overwriteEncoding?: boolean }): Promise<void> {\n        if (!this.fileResource) {\n            this.fileResource = await this.fileResourceResolver.resolve(new URI(this.uri.path.toString()));\n            if (this.fileResource.onDidChangeContents) {\n                this.fileResource.onDidChangeContents(() => this.fireDidChangeContents());\n            }\n        }\n        await this.fileResource.saveContents(content, options);\n    }\n\n    async saveContentChanges(changes: TextDocumentContentChangeEvent[], options?: ResourceSaveOptions): Promise<void> {\n        if (!this.fileResource || !this.fileResource.saveContentChanges) {\n            throw new Error('FileResource is not available for: ' + this.uri.path.toString());\n        }\n        await this.fileResource.saveContentChanges(changes, options);\n    }\n\n    async guessEncoding(): Promise<string | undefined> {\n        if (this.fileResource) {\n            return this.fileResource.guessEncoding();\n        }\n    }\n\n    protected fireDidChangeContents(): void {\n        this.onDidChangeContentsEmitter.fire(undefined);\n    }\n\n    get version(): ResourceVersion | undefined {\n        if (this.fileResource) {\n            return this.fileResource.version;\n        }\n        return undefined;\n    }\n\n    get encoding(): string | undefined {\n        if (this.fileResource) {\n            return this.fileResource.encoding;\n        }\n        return undefined;\n    }\n}\n\nexport function createUntitledURI(language?: string): URI {\n    let extension;\n    if (language) {\n        for (const lang of monaco.languages.getLanguages()) {\n            if (lang.id === language) {\n                if (lang.extensions) {\n                    extension = lang.extensions[0];\n                    break;\n                }\n            }\n        }\n    }\n    return new URI().withScheme(Schemes.untitled).withPath(`/Untitled-${index++}${extension ? extension : ''}`);\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport {\n    MAIN_RPC_CONTEXT,\n    EditorsAndDocumentsExt,\n    EditorsAndDocumentsDelta,\n    ModelAddedData,\n    TextEditorAddData,\n    EditorPosition\n} from '../../common/plugin-api-rpc';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { EditorModelService } from './text-editor-model-service';\nimport { MonacoEditorModel } from '@theia/monaco/lib/browser/monaco-editor-model';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport { TextEditorMain } from './text-editor-main';\nimport { Emitter } from '@theia/core';\nimport { DisposableCollection } from '@theia/core';\nimport { EditorManager, EditorWidget } from '@theia/editor/lib/browser';\n\nexport class EditorsAndDocumentsMain implements Disposable {\n\n    private readonly proxy: EditorsAndDocumentsExt;\n\n    private readonly stateComputer: EditorAndDocumentStateComputer;\n    private readonly textEditors = new Map<string, TextEditorMain>();\n\n    private readonly modelService: EditorModelService;\n\n    private readonly onTextEditorAddEmitter = new Emitter<TextEditorMain[]>();\n    private readonly onTextEditorRemoveEmitter = new Emitter<string[]>();\n    private readonly onDocumentAddEmitter = new Emitter<MonacoEditorModel[]>();\n    private readonly onDocumentRemoveEmitter = new Emitter<monaco.Uri[]>();\n\n    readonly onTextEditorAdd = this.onTextEditorAddEmitter.event;\n    readonly onTextEditorRemove = this.onTextEditorRemoveEmitter.event;\n    readonly onDocumentAdd = this.onDocumentAddEmitter.event;\n    readonly onDocumentRemove = this.onDocumentRemoveEmitter.event;\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.textEditors.clear())\n    );\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.EDITORS_AND_DOCUMENTS_EXT);\n\n        const editorService = container.get(EditorManager);\n        this.modelService = container.get(EditorModelService);\n\n        this.stateComputer = new EditorAndDocumentStateComputer(d => this.onDelta(d), editorService, this.modelService);\n        this.toDispose.push(this.stateComputer);\n        this.toDispose.push(this.onTextEditorAddEmitter);\n        this.toDispose.push(this.onTextEditorRemoveEmitter);\n        this.toDispose.push(this.onDocumentAddEmitter);\n        this.toDispose.push(this.onDocumentRemoveEmitter);\n    }\n\n    listen(): void {\n        this.stateComputer.listen();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private onDelta(delta: EditorAndDocumentStateDelta): void {\n        const removedEditors = new Array<string>();\n        const addedEditors = new Array<TextEditorMain>();\n\n        const removedDocuments = delta.removedDocuments.map(d => d.textEditorModel.uri);\n\n        for (const editor of delta.addedEditors) {\n            const textEditorMain = new TextEditorMain(editor.id, editor.editor.getControl().getModel()!, editor.editor);\n            this.textEditors.set(editor.id, textEditorMain);\n            this.toDispose.push(textEditorMain);\n            addedEditors.push(textEditorMain);\n        }\n\n        for (const { id } of delta.removedEditors) {\n            const textEditorMain = this.textEditors.get(id);\n            if (textEditorMain) {\n                textEditorMain.dispose();\n                this.textEditors.delete(id);\n                removedEditors.push(id);\n            }\n        }\n\n        const deltaExt: EditorsAndDocumentsDelta = {};\n        let empty = true;\n\n        if (delta.newActiveEditor !== undefined) {\n            empty = false;\n            deltaExt.newActiveEditor = delta.newActiveEditor;\n        }\n        if (removedDocuments.length > 0) {\n            empty = false;\n            deltaExt.removedDocuments = removedDocuments;\n        }\n        if (removedEditors.length > 0) {\n            empty = false;\n            deltaExt.removedEditors = removedEditors;\n        }\n        if (delta.addedDocuments.length > 0) {\n            empty = false;\n            deltaExt.addedDocuments = delta.addedDocuments.map(d => this.toModelAddData(d));\n        }\n        if (delta.addedEditors.length > 0) {\n            empty = false;\n            deltaExt.addedEditors = addedEditors.map(e => this.toTextEditorAddData(e));\n        }\n\n        if (!empty) {\n            this.proxy.$acceptEditorsAndDocumentsDelta(deltaExt);\n            this.onDocumentRemoveEmitter.fire(removedDocuments);\n            this.onDocumentAddEmitter.fire(delta.addedDocuments);\n            this.onTextEditorRemoveEmitter.fire(removedEditors);\n            this.onTextEditorAddEmitter.fire(addedEditors);\n        }\n    }\n\n    private toModelAddData(model: MonacoEditorModel): ModelAddedData {\n        return {\n            uri: model.textEditorModel.uri,\n            versionId: model.textEditorModel.getVersionId(),\n            lines: model.textEditorModel.getLinesContent(),\n            EOL: model.textEditorModel.getEOL(),\n            modeId: model.languageId,\n            isDirty: model.dirty\n        };\n    }\n\n    private toTextEditorAddData(textEditor: TextEditorMain): TextEditorAddData {\n        const properties = textEditor.getProperties();\n        return {\n            id: textEditor.getId(),\n            documentUri: textEditor.getModel().uri,\n            options: properties!.options,\n            selections: properties!.selections,\n            visibleRanges: properties!.visibleRanges,\n            editorPosition: this.findEditorPosition(textEditor)\n        };\n\n    }\n\n    private findEditorPosition(editor: TextEditorMain): EditorPosition | undefined {\n        return EditorPosition.ONE; // TODO: fix this when Theia has support splitting editors\n    }\n\n    getEditor(id: string): TextEditorMain | undefined {\n        return this.textEditors.get(id);\n    }\n\n    saveAll(includeUntitled?: boolean): Promise<boolean> {\n        return this.modelService.saveAll(includeUntitled);\n    }\n}\n\nclass EditorAndDocumentStateComputer implements Disposable {\n    private currentState: EditorAndDocumentState | undefined;\n    private readonly editors = new Map<string, DisposableCollection>();\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.currentState = undefined)\n    );\n\n    constructor(\n        private callback: (delta: EditorAndDocumentStateDelta) => void,\n        private readonly editorService: EditorManager,\n        private readonly modelService: EditorModelService\n    ) { }\n\n    listen(): void {\n        if (this.toDispose.disposed) {\n            return;\n        }\n        this.toDispose.push(this.editorService.onCreated(widget => {\n            this.onTextEditorAdd(widget);\n            this.update();\n        }));\n        this.toDispose.push(this.editorService.onCurrentEditorChanged(() => this.update()));\n        this.toDispose.push(this.modelService.onModelAdded(this.onModelAdded, this));\n        this.toDispose.push(this.modelService.onModelRemoved(() => this.update()));\n\n        for (const widget of this.editorService.all) {\n            this.onTextEditorAdd(widget);\n        }\n        this.update();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private onModelAdded(model: MonacoEditorModel): void {\n        if (!this.currentState) {\n            this.update();\n            return;\n        }\n        this.currentState = new EditorAndDocumentState(\n            this.currentState.documents.add(model),\n            this.currentState.editors,\n            this.currentState.activeEditor);\n\n        this.callback(new EditorAndDocumentStateDelta(\n            [],\n            [model],\n            [],\n            [],\n            undefined,\n            undefined\n        ));\n    }\n\n    private onTextEditorAdd(widget: EditorWidget): void {\n        const editor = MonacoEditor.get(widget);\n        if (!editor) {\n            return;\n        }\n        const id = editor.getControl().getId();\n        const toDispose = new DisposableCollection(\n            editor.onDispose(() => this.onTextEditorRemove(editor)),\n            Disposable.create(() => this.editors.delete(id))\n        );\n        this.editors.set(id, toDispose);\n        this.toDispose.push(toDispose);\n    }\n\n    private onTextEditorRemove(e: MonacoEditor): void {\n        const toDispose = this.editors.get(e.getControl().getId());\n        if (toDispose) {\n            toDispose.dispose();\n            this.update();\n        }\n    }\n\n    private update(): void {\n        const models = new Set<MonacoEditorModel>();\n        for (const model of this.modelService.getModels()) {\n            models.add(model);\n        }\n\n        let activeId: string | null = null;\n        const activeEditor = MonacoEditor.getCurrent(this.editorService);\n\n        const editors = new Map<string, EditorSnapshot>();\n        for (const widget of this.editorService.all) {\n            const editor = MonacoEditor.get(widget);\n            // VS Code tracks only visible widgets\n            if (!editor || !widget.isVisible) {\n                continue;\n            }\n            const model = editor.getControl().getModel();\n            if (model && !model.isDisposed()) {\n                const editorSnapshot = new EditorSnapshot(editor);\n                editors.set(editorSnapshot.id, editorSnapshot);\n                if (activeEditor === editor) {\n                    activeId = editorSnapshot.id;\n                }\n            }\n        }\n\n        const newState = new EditorAndDocumentState(models, editors, activeId);\n        const delta = EditorAndDocumentState.compute(this.currentState, newState);\n        if (!delta.isEmpty) {\n            this.currentState = newState;\n            this.callback(delta);\n        }\n    }\n\n}\n\nclass EditorAndDocumentStateDelta {\n    readonly isEmpty: boolean;\n\n    constructor(\n        readonly removedDocuments: MonacoEditorModel[],\n        readonly addedDocuments: MonacoEditorModel[],\n        readonly removedEditors: EditorSnapshot[],\n        readonly addedEditors: EditorSnapshot[],\n        readonly oldActiveEditor: string | null | undefined,\n        readonly newActiveEditor: string | null | undefined\n    ) {\n        this.isEmpty = this.removedDocuments.length === 0\n            && this.addedDocuments.length === 0\n            && this.addedEditors.length === 0\n            && this.removedEditors.length === 0\n            && this.newActiveEditor === this.oldActiveEditor;\n    }\n}\n\nclass EditorAndDocumentState {\n\n    constructor(\n        readonly documents: Set<MonacoEditorModel>,\n        readonly editors: Map<string, EditorSnapshot>,\n        readonly activeEditor: string | null | undefined) {\n    }\n\n    static compute(before: EditorAndDocumentState | undefined, after: EditorAndDocumentState): EditorAndDocumentStateDelta {\n        if (!before) {\n            return new EditorAndDocumentStateDelta(\n                [],\n                Array.from(after.documents),\n                [],\n                Array.from(after.editors.values()),\n                undefined,\n                after.activeEditor\n            );\n        }\n\n        const documentDelta = Delta.ofSets(before.documents, after.documents);\n        const editorDelta = Delta.ofMaps(before.editors, after.editors);\n        const oldActiveEditor = before.activeEditor !== after.activeEditor ? before.activeEditor : undefined;\n        const newActiveEditor = before.activeEditor !== after.activeEditor ? after.activeEditor : undefined;\n        return new EditorAndDocumentStateDelta(\n            documentDelta.removed,\n            documentDelta.added,\n            editorDelta.removed,\n            editorDelta.added,\n            oldActiveEditor,\n            newActiveEditor\n        );\n    }\n}\n\nclass EditorSnapshot {\n    readonly id: string;\n    constructor(readonly editor: MonacoEditor) {\n        this.id = `${editor.getControl().getId()},${editor.getControl().getModel()!.id}`;\n    }\n}\n\nnamespace Delta {\n\n    export function ofSets<T>(before: Set<T>, after: Set<T>): { removed: T[], added: T[] } {\n        const removed: T[] = [];\n        const added: T[] = [];\n        before.forEach(element => {\n            if (!after.has(element)) {\n                removed.push(element);\n            }\n        });\n        after.forEach(element => {\n            if (!before.has(element)) {\n                added.push(element);\n            }\n        });\n        return { removed, added };\n    }\n\n    export function ofMaps<K, V>(before: Map<K, V>, after: Map<K, V>): { removed: V[], added: V[] } {\n        const removed: V[] = [];\n        const added: V[] = [];\n        before.forEach((value, index) => {\n            if (!after.has(index)) {\n                removed.push(value);\n            }\n        });\n        after.forEach((value, index) => {\n            if (!before.has(index)) {\n                added.push(value);\n            }\n        });\n        return { removed, added };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { EnvMain } from '../../common/plugin-api-rpc';\nimport { QueryParameters } from '../../common/env';\nimport { isWindows, isOSX } from '@theia/core';\nimport { OperatingSystem } from '../../plugin/types-impl';\n\nexport class EnvMainImpl implements EnvMain {\n    private envVariableServer: EnvVariablesServer;\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.envVariableServer = container.get(EnvVariablesServer);\n    }\n\n    $getEnvVariable(envVarName: string): Promise<string | undefined> {\n        return this.envVariableServer.getValue(envVarName).then(result => result ? result.value : undefined);\n    }\n\n    async $getClientOperatingSystem(): Promise<OperatingSystem> {\n        if (isWindows) {\n            return OperatingSystem.Windows;\n        }\n        if (isOSX) {\n            return OperatingSystem.OSX;\n        }\n        return OperatingSystem.Linux;\n    }\n}\n\n/**\n * Returns query parameters from current page.\n */\nexport function getQueryParameters(): QueryParameters {\n    const queryParameters: QueryParameters = {};\n    if (window.location.search !== '') {\n        const queryParametersString = window.location.search.substr(1); // remove question mark\n        const params = queryParametersString.split('&');\n        for (const pair of params) {\n            if (pair === '') {\n                continue;\n            }\n\n            const keyValue = pair.split('=');\n            let key: string = keyValue[0];\n            let value: string = keyValue[1] ? keyValue[1] : '';\n            try {\n                key = decodeURIComponent(key);\n                if (value !== '') {\n                    value = decodeURIComponent(value);\n                }\n            } catch (error) {\n                // skip malformed URI sequence\n                continue;\n            }\n\n            const existedValue = queryParameters[key];\n            if (existedValue) {\n                if (existedValue instanceof Array) {\n                    existedValue.push(value);\n                } else {\n                    // existed value is string\n                    queryParameters[key] = [existedValue, value];\n                }\n            } else {\n                queryParameters[key] = value;\n            }\n        }\n    }\n    return queryParameters;\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/browser/mainThreadFileSystem.ts\n\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport CoreURI from '@theia/core/lib/common/uri';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { MAIN_RPC_CONTEXT, FileSystemMain, FileSystemExt, IFileChangeDto } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { UriComponents } from '../../common/uri-components';\nimport {\n    FileSystemProviderCapabilities, Stat, FileType, FileSystemProviderErrorCode, FileOverwriteOptions, FileDeleteOptions, FileOpenOptions, FileWriteOptions, WatchOptions,\n    FileSystemProviderWithFileReadWriteCapability, FileSystemProviderWithOpenReadWriteCloseCapability, FileSystemProviderWithFileFolderCopyCapability,\n    FileStat, FileChange, FileOperationError, FileOperationResult\n} from '@theia/filesystem/lib/common/files';\nimport { FileService } from '@theia/filesystem/lib/browser/file-service';\n\ntype IDisposable = Disposable;\n\nexport class FileSystemMainImpl implements FileSystemMain, Disposable {\n\n    private readonly _proxy: FileSystemExt;\n    private readonly _fileProvider = new Map<number, RemoteFileSystemProvider>();\n    private readonly _fileService: FileService;\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this._proxy = rpc.getProxy(MAIN_RPC_CONTEXT.FILE_SYSTEM_EXT);\n        this._fileService = container.get(FileService);\n    }\n\n    dispose(): void {\n        this._fileProvider.forEach(value => value.dispose());\n        this._fileProvider.clear();\n    }\n\n    $registerFileSystemProvider(handle: number, scheme: string, capabilities: FileSystemProviderCapabilities): void {\n        this._fileProvider.set(handle, new RemoteFileSystemProvider(this._fileService, scheme, capabilities, handle, this._proxy));\n    }\n\n    $unregisterProvider(handle: number): void {\n        const provider = this._fileProvider.get(handle);\n        if (provider) {\n            provider.dispose();\n            this._fileProvider.delete(handle);\n        }\n    }\n\n    $onFileSystemChange(handle: number, changes: IFileChangeDto[]): void {\n        const fileProvider = this._fileProvider.get(handle);\n        if (!fileProvider) {\n            throw new Error('Unknown file provider');\n        }\n        fileProvider.$onFileSystemChange(changes);\n    }\n\n    // --- consumer fs, vscode.workspace.fs\n\n    $stat(uri: UriComponents): Promise<Stat> {\n        return this._fileService.resolve(new CoreURI(URI.revive(uri)), { resolveMetadata: true }).then(stat => ({\n            ctime: stat.ctime,\n            mtime: stat.mtime,\n            size: stat.size,\n            type: FileStat.asFileType(stat)\n        })).catch(FileSystemMainImpl._handleError);\n    }\n\n    $readdir(uri: UriComponents): Promise<[string, FileType][]> {\n        return this._fileService.resolve(new CoreURI(URI.revive(uri)), { resolveMetadata: false }).then(stat => {\n            if (!stat.isDirectory) {\n                const err = new Error(stat.name);\n                err.name = FileSystemProviderErrorCode.FileNotADirectory;\n                throw err;\n            }\n            return !stat.children ? [] : stat.children.map(child => [child.name, FileStat.asFileType(child)] as [string, FileType]);\n        }).catch(FileSystemMainImpl._handleError);\n    }\n\n    $readFile(uri: UriComponents): Promise<BinaryBuffer> {\n        return this._fileService.readFile(new CoreURI(URI.revive(uri))).then(file => file.value).catch(FileSystemMainImpl._handleError);\n    }\n\n    $writeFile(uri: UriComponents, content: BinaryBuffer): Promise<void> {\n        return this._fileService.writeFile(new CoreURI(URI.revive(uri)), content)\n            .then(() => undefined).catch(FileSystemMainImpl._handleError);\n    }\n\n    $rename(source: UriComponents, target: UriComponents, opts: FileOverwriteOptions): Promise<void> {\n        return this._fileService.move(new CoreURI(URI.revive(source)), new CoreURI(URI.revive(target)), {\n            ...opts,\n            fromUserGesture: false\n        }).then(() => undefined).catch(FileSystemMainImpl._handleError);\n    }\n\n    $copy(source: UriComponents, target: UriComponents, opts: FileOverwriteOptions): Promise<void> {\n        return this._fileService.copy(new CoreURI(URI.revive(source)), new CoreURI(URI.revive(target)), {\n            ...opts,\n            fromUserGesture: false\n        }).then(() => undefined).catch(FileSystemMainImpl._handleError);\n    }\n\n    $mkdir(uri: UriComponents): Promise<void> {\n        return this._fileService.createFolder(new CoreURI(URI.revive(uri)))\n            .then(() => undefined).catch(FileSystemMainImpl._handleError);\n    }\n\n    $delete(uri: UriComponents, opts: FileDeleteOptions): Promise<void> {\n        return this._fileService.delete(new CoreURI(URI.revive(uri)), opts).catch(FileSystemMainImpl._handleError);\n    }\n\n    private static _handleError(err: any): never {\n        if (err instanceof FileOperationError) {\n            switch (err.fileOperationResult) {\n                case FileOperationResult.FILE_NOT_FOUND:\n                    err.name = FileSystemProviderErrorCode.FileNotFound;\n                    break;\n                case FileOperationResult.FILE_IS_DIRECTORY:\n                    err.name = FileSystemProviderErrorCode.FileIsADirectory;\n                    break;\n                case FileOperationResult.FILE_PERMISSION_DENIED:\n                    err.name = FileSystemProviderErrorCode.NoPermissions;\n                    break;\n                case FileOperationResult.FILE_MOVE_CONFLICT:\n                    err.name = FileSystemProviderErrorCode.FileExists;\n                    break;\n            }\n        }\n\n        throw err;\n    }\n\n}\n\nclass RemoteFileSystemProvider implements FileSystemProviderWithFileReadWriteCapability, FileSystemProviderWithOpenReadWriteCloseCapability, FileSystemProviderWithFileFolderCopyCapability {\n\n    private readonly _onDidChange = new Emitter<readonly FileChange[]>();\n    private readonly _registration: IDisposable;\n\n    readonly onDidChangeFile: Event<readonly FileChange[]> = this._onDidChange.event;\n    readonly onFileWatchError: Event<void> = new Emitter<void>().event;  // dummy, never fired\n\n    readonly capabilities: FileSystemProviderCapabilities;\n    readonly onDidChangeCapabilities: Event<void> = Event.None;\n\n    constructor(\n        fileService: FileService,\n        scheme: string,\n        capabilities: FileSystemProviderCapabilities,\n        private readonly _handle: number,\n        private readonly _proxy: FileSystemExt\n    ) {\n        this.capabilities = capabilities;\n        this._registration = fileService.registerProvider(scheme, this);\n    }\n\n    dispose(): void {\n        this._registration.dispose();\n        this._onDidChange.dispose();\n    }\n\n    watch(resource: CoreURI, opts: WatchOptions) {\n        const session = Math.random();\n        this._proxy.$watch(this._handle, session, resource['codeUri'], opts);\n        return Disposable.create(() => {\n            this._proxy.$unwatch(this._handle, session);\n        });\n    }\n\n    $onFileSystemChange(changes: IFileChangeDto[]): void {\n        this._onDidChange.fire(changes.map(RemoteFileSystemProvider._createFileChange));\n    }\n\n    private static _createFileChange(dto: IFileChangeDto): FileChange {\n        return { resource: new CoreURI(URI.revive(dto.resource)), type: dto.type };\n    }\n\n    // --- forwarding calls\n\n    stat(resource: CoreURI): Promise<Stat> {\n        return this._proxy.$stat(this._handle, resource['codeUri']).then(undefined, err => {\n            throw err;\n        });\n    }\n\n    readFile(resource: CoreURI): Promise<Uint8Array> {\n        return this._proxy.$readFile(this._handle, resource['codeUri']).then(buffer => buffer.buffer);\n    }\n\n    writeFile(resource: CoreURI, content: Uint8Array, opts: FileWriteOptions): Promise<void> {\n        return this._proxy.$writeFile(this._handle, resource['codeUri'], BinaryBuffer.wrap(content), opts);\n    }\n\n    delete(resource: CoreURI, opts: FileDeleteOptions): Promise<void> {\n        return this._proxy.$delete(this._handle, resource['codeUri'], opts);\n    }\n\n    mkdir(resource: CoreURI): Promise<void> {\n        return this._proxy.$mkdir(this._handle, resource['codeUri']);\n    }\n\n    readdir(resource: CoreURI): Promise<[string, FileType][]> {\n        return this._proxy.$readdir(this._handle, resource['codeUri']);\n    }\n\n    rename(resource: CoreURI, target: CoreURI, opts: FileOverwriteOptions): Promise<void> {\n        return this._proxy.$rename(this._handle, resource['codeUri'], target['codeUri'], opts);\n    }\n\n    copy(resource: CoreURI, target: CoreURI, opts: FileOverwriteOptions): Promise<void> {\n        return this._proxy.$copy(this._handle, resource['codeUri'], target['codeUri'], opts);\n    }\n\n    open(resource: CoreURI, opts: FileOpenOptions): Promise<number> {\n        return this._proxy.$open(this._handle, resource['codeUri'], opts);\n    }\n\n    close(fd: number): Promise<void> {\n        return this._proxy.$close(this._handle, fd);\n    }\n\n    read(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> {\n        return this._proxy.$read(this._handle, fd, pos, length).then(readData => {\n            data.set(readData.buffer, offset);\n            return readData.byteLength;\n        });\n    }\n\n    write(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> {\n        return this._proxy.$write(this._handle, fd, pos, BinaryBuffer.wrap(data).slice(offset, offset + length));\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { PluginContribution, Keybinding as PluginKeybinding } from '../../../common';\nimport { Keybinding } from '@theia/core/lib/common/keybinding';\nimport { KeybindingRegistry } from '@theia/core/lib/browser/keybinding';\nimport { OS } from '@theia/core/lib/common/os';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { DisposableCollection } from '@theia/core';\n\n@injectable()\nexport class KeybindingsContributionPointHandler {\n\n    @inject(KeybindingRegistry)\n    private readonly keybindingRegistry: KeybindingRegistry;\n\n    handle(contributions: PluginContribution): Disposable {\n        if (!contributions || !contributions.keybindings) {\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n        for (const raw of contributions.keybindings) {\n            const keybinding = this.toKeybinding(raw);\n            if (keybinding) {\n                toDispose.push(this.keybindingRegistry.registerKeybinding(keybinding));\n            }\n        }\n        return toDispose;\n    }\n\n    protected toKeybinding(pluginKeybinding: PluginKeybinding): Keybinding | undefined {\n        const keybinding = this.toOSKeybinding(pluginKeybinding);\n        if (!keybinding) {\n            return undefined;\n        }\n        const { command, when, args } = pluginKeybinding;\n        return { keybinding, command, when, args };\n    }\n\n    protected toOSKeybinding(pluginKeybinding: PluginKeybinding): string | undefined {\n        let keybinding: string | undefined;\n        const os = OS.type();\n        if (os === OS.Type.Windows) {\n            keybinding = pluginKeybinding.win;\n        } else if (os === OS.Type.OSX) {\n            keybinding = pluginKeybinding.mac;\n        } else {\n            keybinding = pluginKeybinding.linux;\n        }\n        return keybinding || pluginKeybinding.keybinding;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { LabelServiceMain } from '../../common/plugin-api-rpc';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { DefaultUriLabelProviderContribution, LabelProviderContribution } from '@theia/core/lib/browser';\nimport { ContributionProvider } from '@theia/core/lib/common';\nimport { ResourceLabelFormatter } from '@theia/core/lib/common/label-protocol';\n\nexport class LabelServiceMainImpl implements LabelServiceMain {\n    private readonly resourceLabelFormatters = new Map<number, Disposable>();\n    private readonly contributionProvider: ContributionProvider<LabelProviderContribution>;\n\n    constructor(container: interfaces.Container) {\n        this.contributionProvider = container.getNamed(ContributionProvider, LabelProviderContribution);\n    }\n\n    $registerResourceLabelFormatter(handle: number, formatter: ResourceLabelFormatter): void {\n        // Dynamically registered formatters should have priority over those contributed via package.json\n        formatter.priority = true;\n        const disposables: DisposableCollection = new DisposableCollection();\n        for (const contribution of this.contributionProvider.getContributions()) {\n            if (contribution instanceof DefaultUriLabelProviderContribution) {\n                disposables.push(contribution.registerFormatter(formatter));\n            }\n        }\n        this.resourceLabelFormatters.set(handle, disposables);\n    }\n\n    $unregisterResourceLabelFormatter(handle: number): void {\n        const toDispose = this.resourceLabelFormatters.get(handle);\n        if (toDispose) {\n            toDispose.dispose();\n        }\n        this.resourceLabelFormatters.delete(handle);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Method `$changeLanguage` copied and modified\n// from https://github.com/microsoft/vscode/blob/e9c50663154c369a06355ce752b447af5b580dc3/src/vs/workbench/api/browser/mainThreadLanguages.ts#L30-L42\n\nimport {\n    LanguagesMain,\n    SerializedLanguageConfiguration,\n    SerializedRegExp,\n    SerializedIndentationRule,\n    SerializedOnEnterRule,\n    MAIN_RPC_CONTEXT,\n    LanguagesExt,\n    WorkspaceEditDto,\n    WorkspaceTextEditDto,\n    PluginInfo\n} from '../../common/plugin-api-rpc';\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport {\n    SerializedDocumentFilter, MarkerData, Range, RelatedInformation,\n    MarkerSeverity, DocumentLink, WorkspaceSymbolParams, CodeAction, CompletionDto\n} from '../../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { MonacoLanguages, WorkspaceSymbolProvider } from '@theia/monaco/lib/browser/monaco-languages';\nimport CoreURI from '@theia/core/lib/common/uri';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ProblemManager } from '@theia/markers/lib/browser';\nimport * as vst from '@theia/core/shared/vscode-languageserver-types';\nimport * as theia from '@theia/plugin';\nimport { UriComponents } from '../../common/uri-components';\nimport { CancellationToken } from '@theia/core/lib/common';\nimport { LanguageSelector, RelativePattern } from '@theia/callhierarchy/lib/common/language-selector';\nimport { CallHierarchyService, CallHierarchyServiceProvider, Caller, Definition } from '@theia/callhierarchy/lib/browser';\nimport { toDefinition, toUriComponents, fromDefinition, fromPosition, toCaller } from './callhierarchy/callhierarchy-type-converters';\nimport { Position, DocumentUri } from '@theia/core/shared/vscode-languageserver-types';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { mixin } from '../../common/types';\nimport { relative } from '../../common/paths-util';\nimport { decodeSemanticTokensDto } from '../../common/semantic-tokens-dto';\n\n@injectable()\nexport class LanguagesMainImpl implements LanguagesMain, Disposable {\n\n    @inject(MonacoLanguages)\n    private readonly monacoLanguages: MonacoLanguages;\n\n    @inject(ProblemManager)\n    private readonly problemManager: ProblemManager;\n\n    @inject(CallHierarchyServiceProvider)\n    private readonly callHierarchyServiceContributionRegistry: CallHierarchyServiceProvider;\n\n    private readonly proxy: LanguagesExt;\n    private readonly services = new Map<number, Disposable>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(@inject(RPCProtocol) rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.LANGUAGES_EXT);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    $getLanguages(): Promise<string[]> {\n        return Promise.resolve(monaco.languages.getLanguages().map(l => l.id));\n    }\n\n    $changeLanguage(resource: UriComponents, languageId: string): Promise<void> {\n        const uri = monaco.Uri.revive(resource);\n        const model = monaco.editor.getModel(uri);\n        if (!model) {\n            return Promise.reject(new Error('Invalid uri'));\n        }\n        const langId = monaco.languages.getEncodedLanguageId(languageId);\n        if (!langId) {\n            return Promise.reject(new Error(`Unknown language ID: ${languageId}`));\n        }\n        monaco.editor.setModelLanguage(model, languageId);\n        return Promise.resolve(undefined);\n    }\n\n    protected register(handle: number, service: Disposable): void {\n        this.services.set(handle, service);\n        this.toDispose.push(Disposable.create(() => this.$unregister(handle)));\n    }\n\n    $unregister(handle: number): void {\n        const disposable = this.services.get(handle);\n        if (disposable) {\n            this.services.delete(handle);\n            disposable.dispose();\n        }\n    }\n\n    $setLanguageConfiguration(handle: number, languageId: string, configuration: SerializedLanguageConfiguration): void {\n        const config: monaco.languages.LanguageConfiguration = {\n            comments: configuration.comments,\n            brackets: configuration.brackets,\n            wordPattern: reviveRegExp(configuration.wordPattern),\n            indentationRules: reviveIndentationRule(configuration.indentationRules),\n            onEnterRules: reviveOnEnterRules(configuration.onEnterRules),\n        };\n\n        this.register(handle, monaco.languages.setLanguageConfiguration(languageId, config));\n    }\n\n    $registerCompletionSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], triggerCharacters: string[], supportsResolveDetails: boolean): void {\n        this.register(handle, monaco.modes.CompletionProviderRegistry.register(this.toLanguageSelector(selector), {\n            triggerCharacters,\n            provideCompletionItems: (model, position, context, token) => this.provideCompletionItems(handle, model, position, context, token),\n            resolveCompletionItem: supportsResolveDetails\n                ? (model, position, suggestion, token) => Promise.resolve(this.resolveCompletionItem(handle, model, position, suggestion, token))\n                : undefined\n        }));\n    }\n\n    protected provideCompletionItems(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        context: monaco.languages.CompletionContext, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.CompletionList> {\n        return this.proxy.$provideCompletionItems(handle, model.uri, position, context, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n            return {\n                suggestions: result.completions.map(c => Object.assign(c, {\n                    range: c.range || result.defaultRange\n                })),\n                incomplete: result.incomplete,\n                dispose: () => this.proxy.$releaseCompletionItems(handle, result.id)\n            };\n        });\n    }\n\n    protected resolveCompletionItem(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        item: monaco.languages.CompletionItem, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.CompletionItem> {\n        const { parentId, id } = item as CompletionDto;\n        return this.proxy.$resolveCompletionItem(handle, parentId, id, token).then(resolved => {\n            if (resolved) {\n                mixin(item, resolved, true);\n            }\n            return item;\n        });\n    }\n\n    $registerDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const definitionProvider = this.createDefinitionProvider(handle);\n        this.register(handle, monaco.languages.registerDefinitionProvider(languageSelector, definitionProvider));\n    }\n\n    $registerDeclarationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const declarationProvider = this.createDeclarationProvider(handle);\n        this.register(handle, monaco.languages.registerDeclarationProvider(languageSelector, declarationProvider));\n    }\n\n    $registerReferenceProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const referenceProvider = this.createReferenceProvider(handle);\n        this.register(handle, monaco.languages.registerReferenceProvider(languageSelector, referenceProvider));\n    }\n\n    protected createReferenceProvider(handle: number): monaco.languages.ReferenceProvider {\n        return {\n            provideReferences: (model, position, context, token) => this.provideReferences(handle, model, position, context, token)\n        };\n    }\n\n    protected provideReferences(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        context: monaco.languages.ReferenceContext, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Location[]> {\n        return this.proxy.$provideReferences(handle, model.uri, position, context, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                const references: monaco.languages.Location[] = [];\n                for (const item of result) {\n                    references.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return references;\n            }\n\n            return undefined;\n        });\n    }\n\n    $registerSignatureHelpProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], metadata: theia.SignatureHelpProviderMetadata): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const signatureHelpProvider = this.createSignatureHelpProvider(handle, metadata);\n        this.register(handle, monaco.languages.registerSignatureHelpProvider(languageSelector, signatureHelpProvider));\n    }\n\n    $clearDiagnostics(id: string): void {\n        for (const uri of this.problemManager.getUris()) {\n            this.problemManager.setMarkers(new CoreURI(uri), id, []);\n        }\n    }\n\n    $changeDiagnostics(id: string, delta: [string, MarkerData[]][]): void {\n        for (const [uriString, markers] of delta) {\n            const uri = new CoreURI(uriString);\n            this.problemManager.setMarkers(uri, id, markers.map(reviveMarker));\n        }\n    }\n\n    $registerImplementationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const implementationProvider = this.createImplementationProvider(handle);\n        this.register(handle, monaco.languages.registerImplementationProvider(languageSelector, implementationProvider));\n    }\n\n    protected createImplementationProvider(handle: number): monaco.languages.ImplementationProvider {\n        return {\n            provideImplementation: (model, position, token) => this.provideImplementation(handle, model, position, token)\n        };\n    }\n\n    protected provideImplementation(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Definition> {\n        return this.proxy.$provideImplementation(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                // using DefinitionLink because Location is mandatory part of DefinitionLink\n                const definitionLinks: monaco.languages.LocationLink[] = [];\n                for (const item of result) {\n                    definitionLinks.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return definitionLinks;\n            } else {\n                // single Location\n                return <monaco.languages.Location>{\n                    uri: monaco.Uri.revive(result.uri),\n                    range: result.range\n                };\n            }\n        });\n    }\n\n    $registerTypeDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const typeDefinitionProvider = this.createTypeDefinitionProvider(handle);\n        this.register(handle, monaco.languages.registerTypeDefinitionProvider(languageSelector, typeDefinitionProvider));\n    }\n\n    protected createTypeDefinitionProvider(handle: number): monaco.languages.TypeDefinitionProvider {\n        return {\n            provideTypeDefinition: (model, position, token) => this.provideTypeDefinition(handle, model, position, token)\n        };\n    }\n\n    protected provideTypeDefinition(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Definition> {\n        return this.proxy.$provideTypeDefinition(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                // using DefinitionLink because Location is mandatory part of DefinitionLink\n                const definitionLinks: monaco.languages.LocationLink[] = [];\n                for (const item of result) {\n                    definitionLinks.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return definitionLinks;\n            } else {\n                // single Location\n                return <monaco.languages.Location>{\n                    uri: monaco.Uri.revive(result.uri),\n                    range: result.range\n                };\n            }\n        });\n    }\n\n    $registerHoverProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const hoverProvider = this.createHoverProvider(handle);\n        this.register(handle, monaco.languages.registerHoverProvider(languageSelector, hoverProvider));\n    }\n\n    protected createHoverProvider(handle: number): monaco.languages.HoverProvider {\n        return {\n            provideHover: (model, position, token) => this.provideHover(handle, model, position, token)\n        };\n    }\n\n    protected provideHover(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Hover> {\n        return this.proxy.$provideHover(handle, model.uri, position, token);\n    }\n\n    $registerDocumentHighlightProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const documentHighlightProvider = this.createDocumentHighlightProvider(handle);\n        this.register(handle, monaco.languages.registerDocumentHighlightProvider(languageSelector, documentHighlightProvider));\n    }\n\n    protected createDocumentHighlightProvider(handle: number): monaco.languages.DocumentHighlightProvider {\n        return {\n            provideDocumentHighlights: (model, position, token) => this.provideDocumentHighlights(handle, model, position, token)\n        };\n    }\n\n    protected provideDocumentHighlights(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.DocumentHighlight[]> {\n        return this.proxy.$provideDocumentHighlights(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                const highlights: monaco.languages.DocumentHighlight[] = [];\n                for (const item of result) {\n                    highlights.push(\n                        {\n                            ...item,\n                            kind: (item.kind ? item.kind : monaco.languages.DocumentHighlightKind.Text)\n                        });\n                }\n                return highlights;\n            }\n\n            return undefined;\n        });\n    }\n\n    $registerWorkspaceSymbolProvider(handle: number, pluginInfo: PluginInfo): void {\n        const workspaceSymbolProvider = this.createWorkspaceSymbolProvider(handle);\n        this.register(handle, this.monacoLanguages.registerWorkspaceSymbolProvider(workspaceSymbolProvider));\n    }\n\n    protected createWorkspaceSymbolProvider(handle: number): WorkspaceSymbolProvider {\n        return {\n            provideWorkspaceSymbols: (params, token) => this.provideWorkspaceSymbols(handle, params, token),\n            resolveWorkspaceSymbol: (symbol, token) => this.resolveWorkspaceSymbol(handle, symbol, token)\n        };\n    }\n\n    protected provideWorkspaceSymbols(handle: number, params: WorkspaceSymbolParams, token: monaco.CancellationToken): Thenable<vst.SymbolInformation[]> {\n        return this.proxy.$provideWorkspaceSymbols(handle, params.query, token);\n    }\n\n    protected resolveWorkspaceSymbol(handle: number, symbol: vst.SymbolInformation, token: monaco.CancellationToken): Thenable<vst.SymbolInformation | undefined> {\n        return this.proxy.$resolveWorkspaceSymbol(handle, symbol, token);\n    }\n\n    $registerDocumentLinkProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const linkProvider = this.createLinkProvider(handle);\n        this.register(handle, monaco.languages.registerLinkProvider(languageSelector, linkProvider));\n    }\n\n    protected createLinkProvider(handle: number): monaco.languages.LinkProvider {\n        return {\n            provideLinks: async (model, token) => this.provideLinks(handle, model, token),\n            resolveLink: async (link, token) => this.resolveLink(handle, link, token)\n        };\n    }\n\n    protected async provideLinks(handle: number, model: monaco.editor.ITextModel,\n        token: monaco.CancellationToken): Promise<monaco.languages.ProviderResult<monaco.languages.ILinksList>> {\n        const links = await this.proxy.$provideDocumentLinks(handle, model.uri, token);\n        if (!links) {\n            return undefined;\n        }\n        return {\n            links: links.map(link => this.toMonacoLink(link)),\n            dispose: () => {\n                if (links && Array.isArray(links)) {\n                    this.proxy.$releaseDocumentLinks(handle, links.map(link => ObjectIdentifier.of(link)));\n                }\n            }\n        };\n    }\n\n    protected async resolveLink(handle: number, link: monaco.languages.ILink,\n        token: monaco.CancellationToken): Promise<monaco.languages.ProviderResult<monaco.languages.ILink>> {\n        const resolved = await this.proxy.$resolveDocumentLink(handle, link, token);\n        return resolved && this.toMonacoLink(resolved);\n    }\n\n    protected toMonacoLink(link: DocumentLink): monaco.languages.ILink {\n        return {\n            ...link,\n            url: !!link.url && typeof link.url !== 'string' ? monaco.Uri.revive(link.url) : link.url\n        };\n    }\n\n    $registerCodeLensSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], eventHandle: number): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const lensProvider = this.createCodeLensProvider(handle);\n\n        if (typeof eventHandle === 'number') {\n            const emitter = new Emitter<monaco.languages.CodeLensProvider>();\n            this.register(eventHandle, emitter);\n            lensProvider.onDidChange = emitter.event;\n        }\n\n        this.register(handle, monaco.languages.registerCodeLensProvider(languageSelector, lensProvider));\n    }\n\n    protected createCodeLensProvider(handle: number): monaco.languages.CodeLensProvider {\n        return {\n            provideCodeLenses: async (model, token) => this.provideCodeLenses(handle, model, token),\n            resolveCodeLens: (model, codeLens, token) => this.resolveCodeLens(handle, model, codeLens, token)\n        };\n    }\n\n    protected async provideCodeLenses(handle: number, model: monaco.editor.ITextModel,\n        token: monaco.CancellationToken): Promise<monaco.languages.ProviderResult<monaco.languages.CodeLensList>> {\n        const lenses = await this.proxy.$provideCodeLenses(handle, model.uri, token);\n        if (!lenses) {\n            return undefined;\n        }\n        return {\n            lenses,\n            dispose: () => {\n                if (lenses && Array.isArray(lenses)) {\n                    this.proxy.$releaseCodeLenses(handle, lenses.map(symbol => ObjectIdentifier.of(symbol)));\n                }\n            }\n        };\n    }\n\n    protected resolveCodeLens(handle: number, model: monaco.editor.ITextModel,\n        codeLens: monaco.languages.CodeLens, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.CodeLens> {\n        return this.proxy.$resolveCodeLens(handle, model.uri, codeLens, token);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $emitCodeLensEvent(eventHandle: number, event?: any): void {\n        const obj = this.services.get(eventHandle);\n        if (obj instanceof Emitter) {\n            obj.fire(event);\n        }\n    }\n\n    $registerOutlineSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const symbolProvider = this.createDocumentSymbolProvider(handle);\n        this.register(handle, monaco.modes.DocumentSymbolProviderRegistry.register(languageSelector, symbolProvider));\n    }\n\n    protected createDocumentSymbolProvider(handle: number): monaco.languages.DocumentSymbolProvider {\n        return {\n            provideDocumentSymbols: (model, token) => this.provideDocumentSymbols(handle, model, token)\n        };\n    }\n\n    protected provideDocumentSymbols(handle: number, model: monaco.editor.ITextModel,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.DocumentSymbol[]> {\n        return this.proxy.$provideDocumentSymbols(handle, model.uri, token);\n    }\n\n    protected createDefinitionProvider(handle: number): monaco.languages.DefinitionProvider {\n        return {\n            provideDefinition: (model, position, token) => this.provideDefinition(handle, model, position, token)\n        };\n    }\n\n    protected createDeclarationProvider(handle: number): monaco.languages.DeclarationProvider {\n        return {\n            provideDeclaration: (model, position, token) => this.provideDeclaration(handle, model, position, token)\n        };\n    }\n\n    protected provideDeclaration(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Definition> {\n        return this.proxy.$provideDeclaration(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                // using DefinitionLink because Location is mandatory part of DefinitionLink\n                const definitionLinks: monaco.languages.LocationLink[] = [];\n                for (const item of result) {\n                    definitionLinks.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return definitionLinks;\n            } else {\n                // single Location\n                return <monaco.languages.Location>{\n                    uri: monaco.Uri.revive(result.uri),\n                    range: result.range\n                };\n            }\n        });\n    }\n\n    protected provideDefinition(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.Definition> {\n        return this.proxy.$provideDefinition(handle, model.uri, position, token).then(result => {\n            if (!result) {\n                return undefined;\n            }\n\n            if (Array.isArray(result)) {\n                // using DefinitionLink because Location is mandatory part of DefinitionLink\n                const definitionLinks: monaco.languages.LocationLink[] = [];\n                for (const item of result) {\n                    definitionLinks.push({ ...item, uri: monaco.Uri.revive(item.uri) });\n                }\n                return definitionLinks;\n            } else {\n                // single Location\n                return <monaco.languages.Location>{\n                    uri: monaco.Uri.revive(result.uri),\n                    range: result.range\n                };\n            }\n        });\n    }\n\n    protected createSignatureHelpProvider(handle: number, metadata: theia.SignatureHelpProviderMetadata): monaco.languages.SignatureHelpProvider {\n        return {\n            signatureHelpTriggerCharacters: metadata.triggerCharacters,\n            signatureHelpRetriggerCharacters: metadata.retriggerCharacters,\n            provideSignatureHelp: async (model, position, token, context) => this.provideSignatureHelp(handle, model, position, token, context)\n        };\n    }\n\n    protected async provideSignatureHelp(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken,\n        context: monaco.languages.SignatureHelpContext): Promise<monaco.languages.ProviderResult<monaco.languages.SignatureHelpResult>> {\n        const value = await this.proxy.$provideSignatureHelp(handle, model.uri, position, context, token);\n        if (!value) {\n            return undefined;\n        }\n        return {\n            value,\n            dispose: () => {\n                if (typeof value.id === 'number') {\n                    this.proxy.$releaseSignatureHelp(handle, value.id);\n                }\n            }\n        };\n    }\n\n    $registerDocumentFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const documentFormattingEditSupport = this.createDocumentFormattingSupport(handle, pluginInfo);\n        this.register(handle, monaco.languages.registerDocumentFormattingEditProvider(languageSelector, documentFormattingEditSupport));\n    }\n\n    createDocumentFormattingSupport(handle: number, pluginInfo: PluginInfo): monaco.languages.DocumentFormattingEditProvider {\n        const provider: monaco.languages.DocumentFormattingEditProvider = {\n            extensionId: {\n                value: pluginInfo.id\n            },\n            displayName: pluginInfo.name,\n            provideDocumentFormattingEdits: (model, options, token) =>\n                this.provideDocumentFormattingEdits(handle, model, options, token)\n        };\n\n        return provider;\n    }\n\n    protected provideDocumentFormattingEdits(handle: number, model: monaco.editor.ITextModel,\n        options: monaco.languages.FormattingOptions, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.TextEdit[]> {\n        return this.proxy.$provideDocumentFormattingEdits(handle, model.uri, options, token);\n    }\n\n    $registerRangeFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const rangeFormattingEditProvider = this.createRangeFormattingSupport(handle, pluginInfo);\n        this.register(handle, monaco.languages.registerDocumentRangeFormattingEditProvider(languageSelector, rangeFormattingEditProvider));\n    }\n\n    createRangeFormattingSupport(handle: number, pluginInfo: PluginInfo): monaco.languages.DocumentRangeFormattingEditProvider {\n        const provider: monaco.languages.DocumentRangeFormattingEditProvider = {\n            extensionId: {\n                value: pluginInfo.id\n            },\n            displayName: pluginInfo.name,\n            provideDocumentRangeFormattingEdits: (model, range: Range, options, token) =>\n                this.provideDocumentRangeFormattingEdits(handle, model, range, options, token)\n        };\n\n        return provider;\n    }\n\n    protected provideDocumentRangeFormattingEdits(handle: number, model: monaco.editor.ITextModel,\n        range: Range, options: monaco.languages.FormattingOptions, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.TextEdit[]> {\n        return this.proxy.$provideDocumentRangeFormattingEdits(handle, model.uri, range, options, token);\n    }\n\n    $registerOnTypeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], autoFormatTriggerCharacters: string[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const onTypeFormattingProvider = this.createOnTypeFormattingProvider(handle, autoFormatTriggerCharacters);\n        this.register(handle, monaco.languages.registerOnTypeFormattingEditProvider(languageSelector, onTypeFormattingProvider));\n    }\n\n    protected createOnTypeFormattingProvider(\n        handle: number,\n        autoFormatTriggerCharacters: string[]\n    ): monaco.languages.OnTypeFormattingEditProvider {\n        return {\n            autoFormatTriggerCharacters,\n            provideOnTypeFormattingEdits: (model, position, ch, options, token) => this.provideOnTypeFormattingEdits(handle, model, position, ch, options, token)\n        };\n    }\n\n    protected provideOnTypeFormattingEdits(handle: number, model: monaco.editor.ITextModel, position: monaco.Position,\n        ch: string, options: monaco.languages.FormattingOptions, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.TextEdit[]> {\n        return this.proxy.$provideOnTypeFormattingEdits(handle, model.uri, position, ch, options, token);\n    }\n\n    $registerFoldingRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const provider = this.createFoldingRangeProvider(handle);\n        this.register(handle, monaco.languages.registerFoldingRangeProvider(languageSelector, provider));\n    }\n\n    createFoldingRangeProvider(handle: number): monaco.languages.FoldingRangeProvider {\n        return {\n            provideFoldingRanges: (model, context, token) => this.provideFoldingRanges(handle, model, context, token)\n        };\n    }\n\n    protected provideFoldingRanges(handle: number, model: monaco.editor.ITextModel,\n        context: monaco.languages.FoldingContext, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.FoldingRange[]> {\n        return this.proxy.$provideFoldingRange(handle, model.uri, context, token);\n    }\n\n    $registerSelectionRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const provider = this.createSelectionRangeProvider(handle);\n        this.register(handle, monaco.languages.registerSelectionRangeProvider(languageSelector, provider));\n    }\n\n    protected createSelectionRangeProvider(handle: number): monaco.languages.SelectionRangeProvider {\n        return {\n            provideSelectionRanges: (model, positions, token) => this.provideSelectionRanges(handle, model, positions, token)\n        };\n    }\n\n    protected provideSelectionRanges(handle: number, model: monaco.editor.ITextModel,\n        positions: monaco.Position[], token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.SelectionRange[][]> {\n        return this.proxy.$provideSelectionRanges(handle, model.uri, positions, token);\n    }\n\n    $registerDocumentColorProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const colorProvider = this.createColorProvider(handle);\n        this.register(handle, monaco.languages.registerColorProvider(languageSelector, colorProvider));\n    }\n\n    createColorProvider(handle: number): monaco.languages.DocumentColorProvider {\n        return {\n            provideDocumentColors: (model, token) => this.provideDocumentColors(handle, model, token),\n            provideColorPresentations: (model, colorInfo, token) => this.provideColorPresentations(handle, model, colorInfo, token)\n        };\n    }\n\n    protected provideDocumentColors(handle: number, model: monaco.editor.ITextModel,\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.IColorInformation[]> {\n        return this.proxy.$provideDocumentColors(handle, model.uri, token).then(documentColors =>\n            documentColors.map(documentColor => {\n                const [red, green, blue, alpha] = documentColor.color;\n                const color = {\n                    red: red,\n                    green: green,\n                    blue: blue,\n                    alpha: alpha\n                };\n\n                return {\n                    color,\n                    range: documentColor.range\n                };\n            })\n        );\n    }\n\n    protected provideColorPresentations(handle: number, model: monaco.editor.ITextModel,\n        colorInfo: monaco.languages.IColorInformation, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.IColorPresentation[]> {\n        return this.proxy.$provideColorPresentations(handle, model.uri, {\n            color: [\n                colorInfo.color.red,\n                colorInfo.color.green,\n                colorInfo.color.blue,\n                colorInfo.color.alpha\n            ],\n            range: colorInfo.range\n        }, token);\n    }\n\n    $registerQuickFixProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], providedCodeActionKinds?: string[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const quickFixProvider = {\n            provideCodeActions: (model: monaco.editor.ITextModel, range: monaco.Range,\n                context: monaco.languages.CodeActionContext, token: monaco.CancellationToken): monaco.languages.CodeActionList | Promise<monaco.languages.CodeActionList> => {\n                const markers = monaco.services.StaticServices.markerService.get().read({ resource: model.uri }).filter(m => monaco.Range.areIntersectingOrTouching(m, range));\n                return this.provideCodeActions(handle, model, range, { markers, only: context.only }, token);\n            },\n            providedCodeActionKinds\n        };\n        this.register(handle, monaco.modes.CodeActionProviderRegistry.register(languageSelector, quickFixProvider));\n    }\n\n    protected async provideCodeActions(handle: number, model: monaco.editor.ITextModel,\n        rangeOrSelection: Range, context: monaco.languages.CodeActionContext,\n        token: monaco.CancellationToken): Promise<monaco.languages.CodeActionList | monaco.languages.CodeActionList> {\n        const actions = await this.proxy.$provideCodeActions(handle, model.uri, rangeOrSelection, {\n            ...context\n        }, token);\n        if (!actions) {\n            return undefined!;\n        }\n        return {\n            actions: actions.map(a => toMonacoAction(a)),\n            dispose: () => {\n                // TODO this.proxy.$releaseCodeActions(handle, cacheId);\n            }\n        };\n    }\n\n    $registerRenameProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], supportsResolveLocation: boolean): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const renameProvider = this.createRenameProvider(handle, supportsResolveLocation);\n        this.register(handle, monaco.languages.registerRenameProvider(languageSelector, renameProvider));\n    }\n\n    protected createRenameProvider(handle: number, supportsResolveLocation: boolean): monaco.languages.RenameProvider {\n        return {\n            provideRenameEdits: (model, position, newName, token) => this.provideRenameEdits(handle, model, position, newName, token)\n            ,\n            resolveRenameLocation: supportsResolveLocation\n                ? (model, position, token) =>\n                    this.resolveRenameLocation(handle, model, position, token)\n                : undefined\n        };\n    }\n\n    protected provideRenameEdits(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, newName: string, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.WorkspaceEdit & monaco.languages.Rejection> {\n        return this.proxy.$provideRenameEdits(handle, model.uri, position, newName, token).then(toMonacoWorkspaceEdit);\n    }\n\n    $registerCallHierarchyProvider(handle: number, selector: SerializedDocumentFilter[]): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const callHierarchyService = this.createCallHierarchyService(handle, languageSelector);\n        this.register(handle, this.callHierarchyServiceContributionRegistry.add(callHierarchyService));\n    }\n\n    protected createCallHierarchyService(handle: number, language: LanguageSelector): CallHierarchyService {\n        return {\n            selector: language,\n            getRootDefinition: (uri: DocumentUri, position: Position, cancellationToken: CancellationToken) =>\n                this.proxy.$provideRootDefinition(handle, toUriComponents(uri), fromPosition(position), cancellationToken)\n                    .then(def => toDefinition(def)),\n            getCallers: (definition: Definition, cancellationToken: CancellationToken) => this.proxy.$provideCallers(handle, fromDefinition(definition), cancellationToken)\n                .then(result => {\n                    if (!result) {\n                        return undefined!;\n                    }\n\n                    if (Array.isArray(result)) {\n                        const callers: Caller[] = [];\n                        for (const item of result) {\n                            callers.push(toCaller(item));\n                        }\n                        return callers;\n                    }\n\n                    return undefined!;\n                })\n        };\n    }\n\n    protected resolveRenameLocation(handle: number, model: monaco.editor.ITextModel,\n        position: monaco.Position, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.RenameLocation> {\n        return this.proxy.$resolveRenameLocation(handle, model.uri, position, token);\n    }\n\n    // --- semantic tokens\n\n    $registerDocumentSemanticTokensProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], legend: theia.SemanticTokensLegend,\n        eventHandle: number | undefined): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        let event: Event<void> | undefined = undefined;\n        if (typeof eventHandle === 'number') {\n            const emitter = new Emitter<void>();\n            this.register(eventHandle, emitter);\n            event = emitter.event;\n        }\n        const provider = this.createDocumentSemanticTokensProvider(handle, legend, event);\n        this.register(handle, monaco.languages.registerDocumentSemanticTokensProvider(languageSelector, provider));\n    }\n\n    protected createDocumentSemanticTokensProvider(handle: number, legend: theia.SemanticTokensLegend, event?: Event<void>): monaco.languages.DocumentSemanticTokensProvider {\n        return {\n            releaseDocumentSemanticTokens: resultId => {\n                if (resultId) {\n                    this.proxy.$releaseDocumentSemanticTokens(handle, parseInt(resultId, 10));\n                }\n            },\n            getLegend: () => legend,\n            provideDocumentSemanticTokens: async (model, lastResultId, token) => {\n                const nLastResultId = lastResultId ? parseInt(lastResultId, 10) : 0;\n                const encodedDto = await this.proxy.$provideDocumentSemanticTokens(handle, model.uri, nLastResultId, token);\n                if (!encodedDto) {\n                    return null;\n                }\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                const dto = decodeSemanticTokensDto(encodedDto);\n                if (dto.type === 'full') {\n                    return {\n                        resultId: String(dto.id),\n                        data: dto.data\n                    };\n                }\n                return {\n                    resultId: String(dto.id),\n                    edits: dto.deltas\n                };\n            }\n        };\n    }\n\n    $emitDocumentSemanticTokensEvent(eventHandle: number): void {\n        const obj = this.services.get(eventHandle);\n        if (obj instanceof Emitter) {\n            obj.fire(undefined);\n        }\n    }\n\n    $registerDocumentRangeSemanticTokensProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], legend: theia.SemanticTokensLegend): void {\n        const languageSelector = this.toLanguageSelector(selector);\n        const provider = this.createDocumentRangeSemanticTokensProvider(handle, legend);\n        this.register(handle, monaco.languages.registerDocumentRangeSemanticTokensProvider(languageSelector, provider));\n    }\n\n    protected createDocumentRangeSemanticTokensProvider(handle: number, legend: theia.SemanticTokensLegend): monaco.languages.DocumentRangeSemanticTokensProvider {\n        return {\n            getLegend: () => legend,\n            provideDocumentRangeSemanticTokens: async (model, range, token) => {\n                const encodedDto = await this.proxy.$provideDocumentRangeSemanticTokens(handle, model.uri, range, token);\n                if (!encodedDto) {\n                    return null;\n                }\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                const dto = decodeSemanticTokensDto(encodedDto);\n                if (dto.type === 'full') {\n                    return {\n                        resultId: String(dto.id),\n                        data: dto.data\n                    };\n                }\n                throw new Error('Unexpected');\n            }\n        };\n    }\n\n    // --- suggest\n\n    protected toLanguageSelector(filters: SerializedDocumentFilter[]): monaco.modes.LanguageSelector & LanguageSelector {\n        return filters.map(filter => {\n            let pattern: string | (monaco.modes.IRelativePattern & RelativePattern) | undefined;\n            if (typeof filter.pattern === 'string') {\n                pattern = filter.pattern;\n            } else if (filter.pattern) {\n                pattern = {\n                    base: monaco.path.normalize(filter.pattern.base),\n                    pattern: filter.pattern.pattern,\n                    pathToRelative: relative\n                };\n            }\n            return {\n                language: filter.language,\n                scheme: filter.scheme,\n                pattern\n            };\n        });\n    }\n\n}\n\nfunction reviveMarker(marker: MarkerData): vst.Diagnostic {\n    const monacoMarker: vst.Diagnostic = {\n        code: marker.code,\n        severity: reviveSeverity(marker.severity),\n        range: reviveRange(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn),\n        message: marker.message,\n        source: marker.source,\n        relatedInformation: undefined\n    };\n\n    if (marker.relatedInformation) {\n        monacoMarker.relatedInformation = marker.relatedInformation.map(reviveRelated);\n    }\n\n    return monacoMarker;\n}\n\nfunction reviveSeverity(severity: MarkerSeverity): vst.DiagnosticSeverity {\n    switch (severity) {\n        case MarkerSeverity.Error: return vst.DiagnosticSeverity.Error;\n        case MarkerSeverity.Warning: return vst.DiagnosticSeverity.Warning;\n        case MarkerSeverity.Info: return vst.DiagnosticSeverity.Information;\n        case MarkerSeverity.Hint: return vst.DiagnosticSeverity.Hint;\n    }\n}\n\nfunction reviveRange(startLine: number, startColumn: number, endLine: number, endColumn: number): vst.Range {\n    // note: language server range is 0-based, marker is 1-based, so need to deduct 1 here\n    return {\n        start: {\n            line: startLine - 1,\n            character: startColumn - 1\n        },\n        end: {\n            line: endLine - 1,\n            character: endColumn - 1\n        }\n    };\n}\n\nfunction reviveRelated(related: RelatedInformation): vst.DiagnosticRelatedInformation {\n    return {\n        message: related.message,\n        location: {\n            uri: related.resource,\n            range: reviveRange(related.startLineNumber, related.startColumn, related.endLineNumber, related.endColumn)\n        }\n    };\n}\n\nfunction reviveRegExp(regExp?: SerializedRegExp): RegExp | undefined {\n    if (typeof regExp === 'undefined' || regExp === null) {\n        return undefined;\n    }\n    return new RegExp(regExp.pattern, regExp.flags);\n}\n\nfunction reviveIndentationRule(indentationRule?: SerializedIndentationRule): monaco.languages.IndentationRule | undefined {\n    if (typeof indentationRule === 'undefined' || indentationRule === null) {\n        return undefined;\n    }\n    return {\n        increaseIndentPattern: reviveRegExp(indentationRule.increaseIndentPattern)!,\n        decreaseIndentPattern: reviveRegExp(indentationRule.decreaseIndentPattern)!,\n        indentNextLinePattern: reviveRegExp(indentationRule.indentNextLinePattern),\n        unIndentedLinePattern: reviveRegExp(indentationRule.unIndentedLinePattern),\n    };\n}\n\nfunction reviveOnEnterRule(onEnterRule: SerializedOnEnterRule): monaco.languages.OnEnterRule {\n    return {\n        beforeText: reviveRegExp(onEnterRule.beforeText)!,\n        afterText: reviveRegExp(onEnterRule.afterText),\n        action: onEnterRule.action\n    };\n}\n\nfunction reviveOnEnterRules(onEnterRules?: SerializedOnEnterRule[]): monaco.languages.OnEnterRule[] | undefined {\n    if (typeof onEnterRules === 'undefined' || onEnterRules === null) {\n        return undefined;\n    }\n    return onEnterRules.map(reviveOnEnterRule);\n}\n\nfunction toMonacoAction(action: CodeAction): monaco.languages.CodeAction {\n    return {\n        ...action,\n        diagnostics: action.diagnostics ? action.diagnostics.map(m => toMonacoMarkerData(m)) : undefined,\n        edit: action.edit ? toMonacoWorkspaceEdit(action.edit) : undefined\n    };\n}\n\nfunction toMonacoMarkerData(marker: MarkerData): monaco.editor.IMarkerData {\n    return {\n        ...marker,\n        relatedInformation: marker.relatedInformation\n            ? marker.relatedInformation.map(i => toMonacoRelatedInformation(i))\n            : undefined\n    };\n}\n\nfunction toMonacoRelatedInformation(relatedInfo: RelatedInformation): monaco.editor.IRelatedInformation {\n    return {\n        ...relatedInfo,\n        resource: monaco.Uri.parse(relatedInfo.resource)\n    };\n}\n\nexport function toMonacoWorkspaceEdit(data: WorkspaceEditDto | undefined): monaco.languages.WorkspaceEdit {\n    return {\n        edits: (data && data.edits || []).map(edit => {\n            if (WorkspaceTextEditDto.is(edit)) {\n                return <monaco.languages.WorkspaceTextEdit>{\n                    resource: monaco.Uri.revive(edit.resource),\n                    edit: edit.edit, metadata: edit.metadata\n                };\n            } else {\n                return <monaco.languages.WorkspaceFileEdit>{\n                    newUri: monaco.Uri.revive(edit.newUri), oldUri: monaco.Uri.revive(edit.oldUri),\n                    options: edit.options, metadata: edit.metadata\n                };\n            }\n        })\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { CommandRegistryMainImpl } from './command-registry-main';\nimport { PreferenceRegistryMainImpl } from './preference-registry-main';\nimport { QuickOpenMainImpl } from './quick-open-main';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, LanguagesMainFactory, OutputChannelRegistryFactory } from '../../common/plugin-api-rpc';\nimport { MessageRegistryMainImpl } from './message-registry-main';\nimport { WindowStateMain } from './window-state-main';\nimport { WorkspaceMainImpl } from './workspace-main';\nimport { StatusBarMessageRegistryMainImpl } from './status-bar-message-registry-main';\nimport { EnvMainImpl } from './env-main';\nimport { EditorsAndDocumentsMain } from './editors-and-documents-main';\nimport { TerminalServiceMainImpl } from './terminal-main';\nimport { DialogsMainImpl } from './dialogs-main';\nimport { TreeViewsMainImpl } from './view/tree-views-main';\nimport { NotificationMainImpl } from './notification-main';\nimport { ConnectionMainImpl } from './connection-main';\nimport { WebviewsMainImpl } from './webviews-main';\nimport { TasksMainImpl } from './tasks-main';\nimport { StorageMainImpl } from './plugin-storage';\nimport { DebugMainImpl } from './debug/debug-main';\nimport { FileSystemMainImpl } from './file-system-main-impl';\nimport { ScmMainImpl } from './scm-main';\nimport { DecorationsMainImpl } from './decorations/decorations-main';\nimport { ClipboardMainImpl } from './clipboard-main';\nimport { DocumentsMainImpl } from './documents-main';\nimport { TextEditorsMainImpl } from './text-editors-main';\nimport { EditorManager } from '@theia/editor/lib/browser';\nimport { EditorModelService } from './text-editor-model-service';\nimport { OpenerService } from '@theia/core/lib/browser/opener-service';\nimport { ApplicationShell } from '@theia/core/lib/browser/shell/application-shell';\nimport { MonacoBulkEditService } from '@theia/monaco/lib/browser/monaco-bulk-edit-service';\nimport { MonacoEditorService } from '@theia/monaco/lib/browser/monaco-editor-service';\nimport { UntitledResourceResolver } from './editor/untitled-resource';\nimport { FileResourceResolver } from '@theia/filesystem/lib/browser';\nimport { MainFileSystemEventService } from './main-file-system-event-service';\nimport { LabelServiceMainImpl } from './label-service-main';\nimport { TimelineMainImpl } from './timeline-main';\nimport { AuthenticationMainImpl } from './authentication-main';\nimport { ThemingMainImpl } from './theming-main';\nimport { CommentsMainImp } from './comments/comments-main';\nimport { CustomEditorsMainImpl } from './custom-editors/custom-editors-main';\nimport { SecretsMainImpl } from './secrets-main';\n\nexport function setUpPluginApi(rpc: RPCProtocol, container: interfaces.Container): void {\n    const authenticationMain = new AuthenticationMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.AUTHENTICATION_MAIN, authenticationMain);\n\n    const commandRegistryMain = new CommandRegistryMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.COMMAND_REGISTRY_MAIN, commandRegistryMain);\n\n    const quickOpenMain = new QuickOpenMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.QUICK_OPEN_MAIN, quickOpenMain);\n\n    const workspaceMain = new WorkspaceMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.WORKSPACE_MAIN, workspaceMain);\n\n    const dialogsMain = new DialogsMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.DIALOGS_MAIN, dialogsMain);\n\n    const messageRegistryMain = new MessageRegistryMainImpl(container);\n    rpc.set(PLUGIN_RPC_CONTEXT.MESSAGE_REGISTRY_MAIN, messageRegistryMain);\n\n    const preferenceRegistryMain = new PreferenceRegistryMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.PREFERENCE_REGISTRY_MAIN, preferenceRegistryMain);\n\n    const editorsAndDocuments = new EditorsAndDocumentsMain(rpc, container);\n\n    const modelService = container.get(EditorModelService);\n    const editorManager = container.get(EditorManager);\n    const openerService = container.get<OpenerService>(OpenerService);\n    const shell = container.get(ApplicationShell);\n    const untitledResourceResolver = container.get(UntitledResourceResolver);\n    const fileResourceResolver = container.get(FileResourceResolver);\n    const documentsMain = new DocumentsMainImpl(editorsAndDocuments, modelService, rpc, editorManager, openerService, shell, untitledResourceResolver, fileResourceResolver);\n    rpc.set(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN, documentsMain);\n\n    const bulkEditService = container.get(MonacoBulkEditService);\n    const monacoEditorService = container.get(MonacoEditorService);\n    const editorsMain = new TextEditorsMainImpl(editorsAndDocuments, rpc, bulkEditService, monacoEditorService);\n    rpc.set(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN, editorsMain);\n\n    // start listening only after all clients are subscribed to events\n    editorsAndDocuments.listen();\n\n    const statusBarMessageRegistryMain = new StatusBarMessageRegistryMainImpl(container);\n    rpc.set(PLUGIN_RPC_CONTEXT.STATUS_BAR_MESSAGE_REGISTRY_MAIN, statusBarMessageRegistryMain);\n\n    const envMain = new EnvMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.ENV_MAIN, envMain);\n\n    const notificationMain = new NotificationMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN, notificationMain);\n\n    const terminalMain = new TerminalServiceMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.TERMINAL_MAIN, terminalMain);\n\n    const treeViewsMain = new TreeViewsMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.TREE_VIEWS_MAIN, treeViewsMain);\n\n    const outputChannelRegistryFactory: OutputChannelRegistryFactory = container.get(OutputChannelRegistryFactory);\n    const outputChannelRegistryMain = outputChannelRegistryFactory();\n    rpc.set(PLUGIN_RPC_CONTEXT.OUTPUT_CHANNEL_REGISTRY_MAIN, outputChannelRegistryMain);\n\n    const languagesMainFactory: LanguagesMainFactory = container.get(LanguagesMainFactory);\n    const languagesMain = languagesMainFactory(rpc);\n    rpc.set(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN, languagesMain);\n\n    const webviewsMain = new WebviewsMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.WEBVIEWS_MAIN, webviewsMain);\n\n    const customEditorsMain = new CustomEditorsMainImpl(rpc, container, webviewsMain);\n    rpc.set(PLUGIN_RPC_CONTEXT.CUSTOM_EDITORS_MAIN, customEditorsMain);\n\n    const storageMain = new StorageMainImpl(container);\n    rpc.set(PLUGIN_RPC_CONTEXT.STORAGE_MAIN, storageMain);\n\n    const connectionMain = new ConnectionMainImpl(rpc);\n    rpc.set(PLUGIN_RPC_CONTEXT.CONNECTION_MAIN, connectionMain);\n\n    const tasksMain = new TasksMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.TASKS_MAIN, tasksMain);\n\n    const debugMain = new DebugMainImpl(rpc, connectionMain, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.DEBUG_MAIN, debugMain);\n\n    const fs = new FileSystemMainImpl(rpc, container);\n    const fsEventService = new MainFileSystemEventService(rpc, container);\n    const disposeFS = fs.dispose.bind(fs);\n    fs.dispose = () => {\n        fsEventService.dispose();\n        disposeFS();\n    };\n\n    rpc.set(PLUGIN_RPC_CONTEXT.FILE_SYSTEM_MAIN, fs);\n\n    const scmMain = new ScmMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.SCM_MAIN, scmMain);\n\n    const secretsMain = new SecretsMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.SECRETS_MAIN, secretsMain);\n\n    const decorationsMain = new DecorationsMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.DECORATIONS_MAIN, decorationsMain);\n\n    const windowMain = new WindowStateMain(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.WINDOW_MAIN, windowMain);\n\n    const clipboardMain = new ClipboardMainImpl(container);\n    rpc.set(PLUGIN_RPC_CONTEXT.CLIPBOARD_MAIN, clipboardMain);\n\n    const labelServiceMain = new LabelServiceMainImpl(container);\n    rpc.set(PLUGIN_RPC_CONTEXT.LABEL_SERVICE_MAIN, labelServiceMain);\n\n    const timelineMain = new TimelineMainImpl(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.TIMELINE_MAIN, timelineMain);\n\n    const themingMain = new ThemingMainImpl(rpc);\n    rpc.set(PLUGIN_RPC_CONTEXT.THEMING_MAIN, themingMain);\n\n    const commentsMain = new CommentsMainImp(rpc, container);\n    rpc.set(PLUGIN_RPC_CONTEXT.COMMENTS_MAIN, commentsMain);\n}\n","/********************************************************************************\n * Copyright (C) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/browser/mainThreadFileSystemEventService.ts\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { MAIN_RPC_CONTEXT, FileSystemEvents } from '../../common/plugin-api-rpc';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { FileService } from '@theia/filesystem/lib/browser/file-service';\nimport { FileChangeType } from '@theia/filesystem/lib/common/files';\n\nexport class MainFileSystemEventService {\n\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(\n        rpc: RPCProtocol,\n        container: interfaces.Container\n    ) {\n        const proxy = rpc.getProxy(MAIN_RPC_CONTEXT.ExtHostFileSystemEventService);\n        const fileService = container.get(FileService);\n\n        // file system events - (changes the editor and other make)\n        const events: FileSystemEvents = {\n            created: [],\n            changed: [],\n            deleted: []\n        };\n        this.toDispose.push(fileService.onDidFilesChange(event => {\n            for (const change of event.changes) {\n                switch (change.type) {\n                    case FileChangeType.ADDED:\n                        events.created.push(change.resource['codeUri']);\n                        break;\n                    case FileChangeType.UPDATED:\n                        events.changed.push(change.resource['codeUri']);\n                        break;\n                    case FileChangeType.DELETED:\n                        events.deleted.push(change.resource['codeUri']);\n                        break;\n                }\n            }\n\n            proxy.$onFileEvent(events);\n            events.created.length = 0;\n            events.changed.length = 0;\n            events.deleted.length = 0;\n        }));\n\n        // BEFORE file operation\n        fileService.addFileOperationParticipant({\n            participate: (target, source, operation, timeout, token) => proxy.$onWillRunFileOperation(operation, target['codeUri'], source?.['codeUri'], timeout, token)\n        });\n\n        // AFTER file operation\n        this.toDispose.push(fileService.onDidRunUserOperation(e => proxy.$onDidRunFileOperation(e.operation, e.target['codeUri'], e.source?.['codeUri'])));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { URI as CodeUri } from '@theia/core/shared/vscode-uri';\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { MenuPath, ILogger, CommandRegistry, Command, Mutable, MenuAction, SelectionService, CommandHandler, Disposable, DisposableCollection } from '@theia/core';\nimport { EDITOR_CONTEXT_MENU, EditorWidget } from '@theia/editor/lib/browser';\nimport { MenuModelRegistry } from '@theia/core/lib/common';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { TabBarToolbarRegistry, TabBarToolbarItem } from '@theia/core/lib/browser/shell/tab-bar-toolbar';\nimport { NAVIGATOR_CONTEXT_MENU } from '@theia/navigator/lib/browser/navigator-contribution';\nimport { QuickCommandService } from '@theia/core/lib/browser/quick-open/quick-command-service';\nimport { VIEW_ITEM_CONTEXT_MENU, TreeViewWidget, VIEW_ITEM_INLINE_MENU } from '../view/tree-view-widget';\nimport { DeployedPlugin, Menu, ScmCommandArg, TimelineCommandArg, TreeViewSelection } from '../../../common';\nimport { DebugStackFramesWidget } from '@theia/debug/lib/browser/view/debug-stack-frames-widget';\nimport { DebugThreadsWidget } from '@theia/debug/lib/browser/view/debug-threads-widget';\nimport { TreeWidgetSelection } from '@theia/core/lib/browser/tree/tree-widget-selection';\nimport { ScmWidget } from '@theia/scm/lib/browser/scm-widget';\nimport { ScmTreeWidget } from '@theia/scm/lib/browser/scm-tree-widget';\nimport { ScmService } from '@theia/scm/lib/browser/scm-service';\nimport { ScmRepository } from '@theia/scm/lib/browser/scm-repository';\nimport { PluginScmProvider, PluginScmResourceGroup, PluginScmResource } from '../scm-main';\nimport { ResourceContextKey } from '@theia/core/lib/browser/resource-context-key';\nimport { PluginViewWidget } from '../view/plugin-view-widget';\nimport { ViewContextKeyService } from '../view/view-context-key-service';\nimport { WebviewWidget } from '../webview/webview';\nimport { Navigatable } from '@theia/core/lib/browser/navigatable';\nimport { ContextKeyService } from '@theia/core/lib/browser/context-key-service';\nimport { TIMELINE_ITEM_CONTEXT_MENU } from '@theia/timeline/lib/browser/timeline-tree-widget';\nimport { TimelineItem } from '@theia/timeline/lib/common/timeline-model';\nimport { COMMENT_CONTEXT, COMMENT_THREAD_CONTEXT, COMMENT_TITLE } from '../comments/comment-thread-widget';\n\ntype CodeEditorWidget = EditorWidget | WebviewWidget;\n@injectable()\nexport class CodeEditorWidgetUtil {\n    is(arg: any): arg is CodeEditorWidget {\n        return arg instanceof EditorWidget || arg instanceof WebviewWidget;\n    }\n    getResourceUri(editor: CodeEditorWidget): CodeUri | undefined {\n        const resourceUri = Navigatable.is(editor) && editor.getResourceUri();\n        return resourceUri ? resourceUri['codeUri'] : undefined;\n    }\n}\n\n@injectable()\nexport class MenusContributionPointHandler {\n\n    @inject(MenuModelRegistry)\n    protected readonly menuRegistry: MenuModelRegistry;\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(ScmService)\n    protected readonly scmService: ScmService;\n\n    @inject(QuickCommandService)\n    protected readonly quickCommandService: QuickCommandService;\n\n    @inject(TabBarToolbarRegistry)\n    protected readonly tabBarToolbar: TabBarToolbarRegistry;\n\n    @inject(SelectionService)\n    protected readonly selectionService: SelectionService;\n\n    @inject(ResourceContextKey)\n    protected readonly resourceContextKey: ResourceContextKey;\n\n    @inject(ViewContextKeyService)\n    protected readonly viewContextKeys: ViewContextKeyService;\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @inject(CodeEditorWidgetUtil)\n    protected readonly codeEditorWidgetUtil: CodeEditorWidgetUtil;\n\n    handle(plugin: DeployedPlugin): Disposable {\n        const allMenus = plugin.contributes && plugin.contributes.menus;\n        if (!allMenus) {\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n\n        const tree = this.getMenusTree(plugin);\n        tree.forEach(rootMenu => {\n\n            const registerMenuActions = (menus: MenuTree[], group: string | undefined, submenusOrder: string | undefined = '') => {\n                menus.forEach(menu => {\n                    if (group) {\n                        // Adding previous group to the start of current menu group.\n                        menu.group = `${group}/${menu.group || '_'}`;\n                    }\n                    if (menu.isSubmenu) {\n                        let [submenuGroup, submenuOrder = ''] = (menu.group || '_').split('@');\n                        // Generating group in format: `<submenu group>/<submenu name>`\n                        submenuGroup = `${submenuGroup}/${menu.label}`;\n                        if (submenusOrder) {\n                            // Adding previous submenus order to the start of current submenu order\n                            // in format: `<submenu order>/<submenu order>.../<menu order>`.\n                            submenuOrder = `${submenusOrder}/${submenuOrder}`;\n                        }\n                        registerMenuActions(menu.children, submenuGroup, submenuOrder);\n                    } else {\n                        menu.submenusOrder = submenusOrder;\n                        toDispose.push(\n                            this.registerAction(plugin, rootMenu.id!, menu)\n                        );\n                    }\n                });\n            };\n\n            registerMenuActions(rootMenu.children, undefined, undefined);\n        });\n\n        return toDispose;\n    }\n\n    /**\n     * Transforms the structure of Menus & Submenus\n     * into something more tree-like.\n     */\n    protected getMenusTree(plugin: DeployedPlugin): MenuTree[] {\n        const allMenus = plugin.contributes && plugin.contributes.menus;\n        if (!allMenus) {\n            return [];\n        }\n        const allSubmenus = plugin.contributes && plugin.contributes.submenus;\n        const tree: MenuTree[] = [];\n\n        Object.keys(allMenus).forEach(location => {\n            // Don't build menus tree for a submenu declaration at root.\n            if (allSubmenus && allSubmenus.findIndex(submenu => submenu.id === location) > -1) {\n                return;\n            }\n\n            /**\n             * @param menus the menus to create a tree from.\n             * @param submenusIds contains all the previous submenus ids in the current tree.\n             * @returns {MenuTree[]} the trees for the given menus.\n             */\n            const getChildren = (menus: Menu[], submenusIds: Set<string>) => {\n                // Contains all the submenus ids of the current parent.\n                const parentSubmenusIds = new Set<string>();\n\n                return menus.reduce((children: MenuTree[], menuItem) => {\n                    if (menuItem.submenu) {\n                        if (parentSubmenusIds.has(menuItem.submenu)) {\n                            console.warn(`Submenu ${menuItem.submenu} already registered`);\n                        } else if (submenusIds.has(menuItem.submenu)) {\n                            console.warn(`Found submenu cycle: ${menuItem.submenu}`);\n                        } else {\n                            parentSubmenusIds.add(menuItem.submenu);\n                            const submenu = allSubmenus!.find(s => s.id === menuItem.submenu)!;\n                            const menuTree = new MenuTree({ ...menuItem }, menuItem.submenu, submenu.label);\n                            menuTree.children = getChildren(allMenus[submenu.id], new Set([...submenusIds, menuItem.submenu]));\n                            children.push(menuTree);\n                        }\n                    } else {\n                        children.push(new MenuTree({ ...menuItem }));\n                    }\n                    return children;\n                }, []);\n            };\n\n            const rootMenu = new MenuTree(undefined, location);\n            rootMenu.children = getChildren(allMenus[location], new Set());\n            tree.push(rootMenu);\n        });\n\n        return tree;\n    }\n\n    protected registerAction(plugin: DeployedPlugin, location: string, action: MenuTree): Disposable {\n        const allMenus = plugin.contributes && plugin.contributes.menus;\n        if (!allMenus) {\n            return Disposable.NULL;\n        }\n\n        switch (location) {\n            case 'commandPalette': return this.registerCommandPaletteAction(action);\n            case 'editor/title': return this.registerEditorTitleAction(location, action);\n            case 'view/title': return this.registerViewTitleAction(location, action);\n            case 'view/item/context': return this.registerViewItemContextAction(action);\n            case 'scm/title': return this.registerScmTitleAction(location, action);\n            case 'scm/resourceGroup/context': return this.registerScmResourceGroupAction(action);\n            case 'scm/resourceFolder/context': return this.registerScmResourceFolderAction(action);\n            case 'scm/resourceState/context': return this.registerScmResourceStateAction(action);\n            case 'timeline/item/context': return this.registerTimelineItemAction(action);\n            case 'comments/commentThread/context': return this.registerCommentThreadAction(action, plugin);\n            case 'comments/comment/title': return this.registerCommentTitleAction(action);\n            case 'comments/comment/context': return this.registerCommentContextAction(action);\n            case 'debug/callstack/context': return this.registerDebugCallstackAction(action);\n\n            default: if (allMenus.hasOwnProperty(location)) {\n                return this.registerGlobalMenuAction(action, location, plugin);\n            }\n                return Disposable.NULL;\n        }\n    }\n\n    protected static parseMenuPaths(value: string): MenuPath[] {\n        switch (value) {\n            case 'editor/context': return [EDITOR_CONTEXT_MENU];\n            case 'explorer/context': return [NAVIGATOR_CONTEXT_MENU];\n        }\n        return [];\n    }\n\n    protected registerCommandPaletteAction(menu: Menu): Disposable {\n        if (menu.command && menu.when) {\n            return this.quickCommandService.pushCommandContext(menu.command, menu.when);\n        }\n        return Disposable.NULL;\n    }\n\n    protected registerEditorTitleAction(location: string, action: Menu): Disposable {\n        return this.registerTitleAction(location, action, {\n            execute: widget => this.codeEditorWidgetUtil.is(widget) &&\n                this.commands.executeCommand(action.command!, this.codeEditorWidgetUtil.getResourceUri(widget)),\n            isEnabled: widget => this.codeEditorWidgetUtil.is(widget) && this.commands.isEnabled(action.command!, this.codeEditorWidgetUtil.getResourceUri(widget)),\n            isVisible: widget => this.codeEditorWidgetUtil.is(widget) && this.commands.isVisible(action.command!, this.codeEditorWidgetUtil.getResourceUri(widget))\n        });\n    }\n\n    protected registerViewTitleAction(location: string, action: Menu): Disposable {\n        return this.registerTitleAction(location, { ...action, when: undefined }, {\n            execute: widget => widget instanceof PluginViewWidget && this.commands.executeCommand(action.command!),\n            isEnabled: widget => widget instanceof PluginViewWidget &&\n                this.viewContextKeys.with({ view: widget.options.viewId }, () =>\n                    this.commands.isEnabled(action.command!) && this.viewContextKeys.match(action.when)),\n            isVisible: widget => widget instanceof PluginViewWidget &&\n                this.viewContextKeys.with({ view: widget.options.viewId }, () =>\n                    this.commands.isVisible(action.command!) && this.viewContextKeys.match(action.when))\n        });\n    }\n\n    protected registerViewItemContextAction(menu: MenuTree): Disposable {\n        const inline = menu.group && /^inline/.test(menu.group) || false;\n        const menuPath = inline ? VIEW_ITEM_INLINE_MENU : VIEW_ITEM_CONTEXT_MENU;\n        return this.registerTreeMenuAction(menuPath, menu);\n    }\n\n    protected registerScmResourceGroupAction(menu: MenuTree): Disposable {\n        const inline = menu.group && /^inline/.test(menu.group) || false;\n        const menuPath = inline ? ScmTreeWidget.RESOURCE_GROUP_INLINE_MENU : ScmTreeWidget.RESOURCE_GROUP_CONTEXT_MENU;\n        return this.registerScmMenuAction(menuPath, menu);\n    }\n\n    protected registerScmResourceFolderAction(menu: MenuTree): Disposable {\n        const inline = menu.group && /^inline/.test(menu.group) || false;\n        const menuPath = inline ? ScmTreeWidget.RESOURCE_FOLDER_INLINE_MENU : ScmTreeWidget.RESOURCE_FOLDER_CONTEXT_MENU;\n        return this.registerScmMenuAction(menuPath, menu);\n    }\n\n    protected registerScmResourceStateAction(menu: MenuTree): Disposable {\n        const inline = menu.group && /^inline/.test(menu.group) || false;\n        const menuPath = inline ? ScmTreeWidget.RESOURCE_INLINE_MENU : ScmTreeWidget.RESOURCE_CONTEXT_MENU;\n        return this.registerScmMenuAction(menuPath, menu);\n    }\n\n    protected registerTimelineItemAction(menu: MenuTree): Disposable {\n        return this.registerMenuAction(TIMELINE_ITEM_CONTEXT_MENU, menu,\n            command => ({\n                execute: (...args) => this.commands.executeCommand(command, ...this.toTimelineArgs(...args)),\n                isEnabled: (...args) => this.commands.isEnabled(command, ...this.toTimelineArgs(...args)),\n                isVisible: (...args) => this.commands.isVisible(command, ...this.toTimelineArgs(...args))\n            }));\n    }\n\n    protected registerCommentThreadAction(menu: MenuTree, plugin: DeployedPlugin): Disposable {\n        return this.registerMenuAction(COMMENT_THREAD_CONTEXT, menu,\n            command => ({\n                execute: (...args) => this.commands.executeCommand(command, ...this.toCommentArgs(...args)),\n                isEnabled: () => {\n                    const commandContributions = plugin.contributes?.commands;\n                    if (commandContributions) {\n                        const commandContribution = commandContributions.find(c => c.command === command);\n                        if (commandContribution && commandContribution.enablement) {\n                            return this.contextKeyService.match(commandContribution.enablement);\n                        }\n                    }\n                    return true;\n                },\n                isVisible: (...args) => this.commands.isVisible(command, ...this.toCommentArgs(...args))\n            }));\n    }\n\n    protected registerCommentTitleAction(menu: MenuTree): Disposable {\n        return this.registerMenuAction(COMMENT_TITLE, menu,\n            command => ({\n                execute: (...args) => this.commands.executeCommand(command, ...this.toCommentArgs(...args)),\n                isEnabled: (...args) => this.commands.isEnabled(command, ...this.toCommentArgs(...args)),\n                isVisible: (...args) => this.commands.isVisible(command, ...this.toCommentArgs(...args))\n            }));\n    }\n\n    protected registerCommentContextAction(menu: MenuTree): Disposable {\n        return this.registerMenuAction(COMMENT_CONTEXT, menu,\n            command => ({\n                execute: (...args) => this.commands.executeCommand(command, ...this.toCommentArgs(...args)),\n                isEnabled: () => true,\n                isVisible: (...args) => this.commands.isVisible(command, ...this.toCommentArgs(...args))\n            }));\n    }\n\n    protected registerDebugCallstackAction(menu: MenuTree): Disposable {\n        const toDispose = new DisposableCollection();\n        [DebugStackFramesWidget.CONTEXT_MENU, DebugThreadsWidget.CONTEXT_MENU].forEach(menuPath => {\n            toDispose.push(\n                this.registerMenuAction(menuPath, menu, command => ({\n                    execute: (...args) => this.commands.executeCommand(command, args[0]),\n                    isEnabled: (...args) => this.commands.isEnabled(command, args[0]),\n                    isVisible: (...args) => this.commands.isVisible(command, args[0])\n                })));\n        });\n        return toDispose;\n    }\n\n    protected registerTreeMenuAction(menuPath: MenuPath, menu: MenuTree): Disposable {\n        return this.registerMenuAction(menuPath, menu, command => ({\n            execute: (...args) => this.commands.executeCommand(command, ...this.toTreeArgs(...args)),\n            isEnabled: (...args) => this.commands.isEnabled(command, ...this.toTreeArgs(...args)),\n            isVisible: (...args) => this.commands.isVisible(command, ...this.toTreeArgs(...args))\n        }));\n    }\n    protected toTreeArgs(...args: any[]): any[] {\n        const treeArgs: any[] = [];\n        for (const arg of args) {\n            if (TreeViewSelection.is(arg)) {\n                treeArgs.push(arg);\n            }\n        }\n        return treeArgs;\n    }\n\n    protected registerTitleAction(location: string, action: Menu, handler: CommandHandler): Disposable {\n        if (!action.command) {\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n        const id = this.createSyntheticCommandId(action.command, { prefix: `__plugin.${location.replace('/', '.')}.action.` });\n        const command: Command = { id };\n        toDispose.push(this.commands.registerCommand(command, handler));\n\n        const { when } = action;\n        const whenKeys = when && this.contextKeyService.parseKeys(when);\n        let onDidChange;\n        if (whenKeys && whenKeys.size) {\n            const onDidChangeEmitter = new Emitter<void>();\n            toDispose.push(onDidChangeEmitter);\n            onDidChange = onDidChangeEmitter.event;\n            this.contextKeyService.onDidChange.maxListeners = this.contextKeyService.onDidChange.maxListeners + 1;\n            toDispose.push(this.contextKeyService.onDidChange(event => {\n                if (event.affects(whenKeys)) {\n                    onDidChangeEmitter.fire(undefined);\n                }\n            }));\n            toDispose.push(Disposable.create(() => {\n                this.contextKeyService.onDidChange.maxListeners = this.contextKeyService.onDidChange.maxListeners - 1;\n            }));\n        }\n\n        // handle group and priority\n        // if group is empty or white space is will be set to navigation\n        // ' ' => ['navigation', 0]\n        // 'navigation@1' => ['navigation', 1]\n        // '1_rest-client@2' => ['1_rest-client', 2]\n        // if priority is not a number it will be set to 0\n        // navigation@test => ['navigation', 0]\n        const [group, sort] = (action.group || 'navigation').split('@');\n        const item: Mutable<TabBarToolbarItem> = { id, command: id, group: group.trim() || 'navigation', priority: ~~sort || undefined, when, onDidChange };\n        toDispose.push(this.tabBarToolbar.registerItem(item));\n\n        toDispose.push(this.onDidRegisterCommand(action.command, pluginCommand => {\n            command.category = pluginCommand.category;\n            item.tooltip = pluginCommand.label;\n            if (group === 'navigation') {\n                command.iconClass = pluginCommand.iconClass;\n            }\n        }));\n        return toDispose;\n    }\n\n    protected registerScmTitleAction(location: string, action: Menu): Disposable {\n        if (!action.command) {\n            return Disposable.NULL;\n        }\n        const selectedRepository = () => this.toScmArgs(this.scmService.selectedRepository);\n        return this.registerTitleAction(location, action, {\n            execute: widget => widget instanceof ScmWidget && this.commands.executeCommand(action.command!, selectedRepository()),\n            isEnabled: widget => widget instanceof ScmWidget && this.commands.isEnabled(action.command!, selectedRepository()),\n            isVisible: widget => widget instanceof ScmWidget && this.commands.isVisible(action.command!, selectedRepository())\n        });\n    }\n    protected registerScmMenuAction(menuPath: MenuPath, menu: MenuTree): Disposable {\n        return this.registerMenuAction(menuPath, menu, command => ({\n            execute: (...args) => this.commands.executeCommand(command, ...this.toScmArgs(...args)),\n            isEnabled: (...args) => this.commands.isEnabled(command, ...this.toScmArgs(...args)),\n            isVisible: (...args) => this.commands.isVisible(command, ...this.toScmArgs(...args))\n        }));\n    }\n    protected toScmArgs(...args: any[]): any[] {\n        const scmArgs: any[] = [];\n        for (const arg of args) {\n            const scmArg = this.toScmArg(arg);\n            if (scmArg) {\n                scmArgs.push(scmArg);\n            }\n        }\n        return scmArgs;\n    }\n    protected toScmArg(arg: any): ScmCommandArg | undefined {\n        if (arg instanceof ScmRepository && arg.provider instanceof PluginScmProvider) {\n            return {\n                sourceControlHandle: arg.provider.handle\n            };\n        }\n        if (arg instanceof PluginScmResourceGroup) {\n            return {\n                sourceControlHandle: arg.provider.handle,\n                resourceGroupHandle: arg.handle\n            };\n        }\n        if (arg instanceof PluginScmResource) {\n            return {\n                sourceControlHandle: arg.group.provider.handle,\n                resourceGroupHandle: arg.group.handle,\n                resourceStateHandle: arg.handle\n            };\n        }\n    }\n\n    protected toTimelineArgs(...args: any[]): any[] {\n        const timelineArgs: any[] = [];\n        const arg = args[0];\n        timelineArgs.push(this.toTimelineArg(arg));\n        timelineArgs.push(CodeUri.parse(arg.uri));\n        timelineArgs.push('source' in arg ? arg.source : '');\n        return timelineArgs;\n    }\n    protected toTimelineArg(arg: TimelineItem): TimelineCommandArg {\n        return {\n            timelineHandle: arg.handle,\n            source: arg.source,\n            uri: arg.uri\n        };\n    }\n\n    protected toCommentArgs(...args: any[]): any[] {\n        const arg = args[0];\n        if ('text' in arg) {\n            if ('commentUniqueId' in arg) {\n                return [{\n                    commentControlHandle: arg.thread.controllerHandle,\n                    commentThreadHandle: arg.thread.commentThreadHandle,\n                    text: arg.text,\n                    commentUniqueId: arg.commentUniqueId\n                }];\n            }\n            return [{\n                commentControlHandle: arg.thread.controllerHandle,\n                commentThreadHandle: arg.thread.commentThreadHandle,\n                text: arg.text\n            }];\n        }\n        return [{\n            commentControlHandle: arg.thread.controllerHandle,\n            commentThreadHandle: arg.thread.commentThreadHandle,\n            commentUniqueId: arg.commentUniqueId\n        }];\n    }\n\n    protected registerGlobalMenuAction(menu: MenuTree, location: string, plugin: DeployedPlugin): Disposable {\n        const menuPaths = MenusContributionPointHandler.parseMenuPaths(location);\n        if (!menuPaths.length) {\n            this.logger.warn(`'${plugin.metadata.model.id}' plugin contributes items to a menu with invalid identifier: ${location}`);\n            return Disposable.NULL;\n        }\n\n        const selectedResource = () => {\n            const selection = this.selectionService.selection;\n            if (TreeWidgetSelection.is(selection) && selection.source instanceof TreeViewWidget && selection[0]) {\n                return selection.source.toTreeViewSelection(selection[0]);\n            }\n            const uri = this.resourceContextKey.get();\n            return uri ? uri['codeUri'] : undefined;\n        };\n\n        const toDispose = new DisposableCollection();\n        menuPaths.forEach(menuPath => {\n            toDispose.push(this.registerMenuAction(menuPath, menu, command => ({\n                execute: () => this.commands.executeCommand(command, selectedResource()),\n                isEnabled: () => this.commands.isEnabled(command, selectedResource()),\n                isVisible: () => this.commands.isVisible(command, selectedResource())\n            })));\n        });\n        return toDispose;\n    }\n\n    protected registerMenuAction(menuPath: MenuPath, menu: MenuTree, handler: (command: string) => CommandHandler): Disposable {\n        if (!menu.command) {\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n        const commandId = this.createSyntheticCommandId(menu.command, { prefix: '__plugin.menu.action.' });\n        const command: Command = { id: commandId };\n        toDispose.push(this.commands.registerCommand(command, handler(menu.command)));\n        toDispose.push(this.quickCommandService.pushCommandContext(commandId, 'false'));\n\n        let altId: string | undefined;\n        if (menu.alt) {\n            altId = this.createSyntheticCommandId(menu.alt, { prefix: '__plugin.menu.action.' });\n            const alt: Command = { id: altId };\n            toDispose.push(this.commands.registerCommand(alt, handler(menu.alt)));\n            toDispose.push(this.quickCommandService.pushCommandContext(altId, 'false'));\n            toDispose.push(this.onDidRegisterCommand(menu.alt, pluginCommand => {\n                alt.category = pluginCommand.category;\n                alt.label = pluginCommand.label;\n                if (inline) {\n                    alt.iconClass = pluginCommand.iconClass;\n                }\n            }));\n        }\n\n        const { when } = menu;\n        const [group, order = undefined] = (menu.group || '_').split('@');\n        const action: MenuAction = { commandId, alt: altId, order, when };\n\n        // Register a submenu if the group is in format `<submenu group>/<submenu name>/<submenu order>.../<menu group>`\n        if (group!.indexOf('/') !== -1) {\n            const groupSplit = group!.split('/');\n            const orderSplit = (menu.submenusOrder || '').split('/');\n            const paths: string[] = [];\n            for (let i = 0, j = 0; i < groupSplit.length - 1; i += 2, j += 1) {\n                const submenuGroup = groupSplit[i];\n                const submenuLabel = groupSplit[i + 1];\n                const submenuOrder = orderSplit[j];\n                paths.push(submenuGroup, submenuLabel);\n                toDispose.push(this.menuRegistry.registerSubmenu([...menuPath, ...paths], submenuLabel, { order: submenuOrder }));\n            }\n        }\n        const inline = /^inline/.test(group);\n        menuPath = inline ? menuPath : [...menuPath, ...group.split('/')];\n        toDispose.push(this.menuRegistry.registerMenuAction(menuPath, action));\n\n        toDispose.push(this.onDidRegisterCommand(menu.command, pluginCommand => {\n            command.category = pluginCommand.category;\n            command.label = pluginCommand.label;\n            if (inline) {\n                command.iconClass = pluginCommand.iconClass;\n            }\n        }));\n        return toDispose;\n    }\n\n    protected createSyntheticCommandId(command: string, { prefix }: { prefix: string }): string {\n        let id = prefix + command;\n        let index = 0;\n        while (this.commands.getCommand(id)) {\n            id = prefix + command + ':' + index;\n            index++;\n        }\n        return id;\n    }\n\n    protected onDidRegisterCommand(id: string, cb: (command: Command) => void): Disposable {\n        const command = this.commands.getCommand(id);\n        if (command) {\n            cb(command);\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n        // Registering a menu action requires the related command to be already registered.\n        // But Theia plugin registers the commands dynamically via the Commands API.\n        // Let's wait for ~2 sec. It should be enough to finish registering all the contributed commands.\n        // FIXME: remove this workaround (timer) once the https://github.com/theia-ide/theia/issues/3344 is fixed\n        const handle = setTimeout(() => toDispose.push(this.onDidRegisterCommand(id, cb)), 2000);\n        toDispose.push(Disposable.create(() => clearTimeout(handle)));\n        return toDispose;\n    }\n\n}\n\n/**\n * MenuTree representing a (sub)menu in the menu tree structure.\n */\nexport class MenuTree implements Menu {\n\n    protected _children: MenuTree[] = [];\n    command?: string;\n    alt?: string;\n    group?: string;\n    when?: string;\n    /** The orders of the menu items which lead to the submenus */\n    submenusOrder?: string;\n\n    constructor(menu?: Menu,\n        /** The location where the menu item will be open from. */\n        public readonly id?: string,\n        /** The label of the menu item which leads to the submenu. */\n        public label?: string) {\n        if (menu) {\n            this.command = menu.command;\n            this.alt = menu.alt;\n            this.group = menu.group;\n            this.when = menu.when;\n        }\n    }\n\n    get children(): MenuTree[] {\n        return this._children;\n    }\n    set children(items: MenuTree[]) {\n        this._children.push(...items);\n    }\n\n    public addChild(node: MenuTree): void {\n        this._children.push(node);\n    }\n\n    get isSubmenu(): boolean {\n        return this.label !== undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { MessageRegistryMain, MainMessageType, MainMessageOptions, MainMessageItem } from '../../common/plugin-api-rpc';\nimport { ModalNotification, MessageType } from './dialogs/modal-notification';\n\nexport class MessageRegistryMainImpl implements MessageRegistryMain {\n    private readonly messageService: MessageService;\n\n    constructor(container: interfaces.Container) {\n        this.messageService = container.get(MessageService);\n    }\n\n    async $showMessage(type: MainMessageType, message: string, options: MainMessageOptions, actions: MainMessageItem[]): Promise<number | undefined> {\n        const action = await this.doShowMessage(type, message, options, actions);\n        const handle = action\n            ? actions.map(a => a.title).indexOf(action)\n            : undefined;\n        return handle === undefined && options.modal ? options.onCloseActionHandle : handle;\n    }\n\n    protected async doShowMessage(type: MainMessageType, message: string, options: MainMessageOptions, actions: MainMessageItem[]): Promise<string | undefined> {\n        if (options.modal) {\n            const messageType = type === MainMessageType.Error ? MessageType.Error :\n                type === MainMessageType.Warning ? MessageType.Warning :\n                    MessageType.Info;\n            const modalNotification = new ModalNotification();\n            return modalNotification.showDialog(messageType, message, actions);\n        }\n        switch (type) {\n            case MainMessageType.Info:\n                return this.messageService.info(message, ...actions.map(a => a.title));\n            case MainMessageType.Warning:\n                return this.messageService.warn(message, ...actions.map(a => a.title));\n            case MainMessageType.Error:\n                return this.messageService.error(message, ...actions.map(a => a.title));\n        }\n        throw new Error(`Message type '${type}' is not supported yet!`);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { NotificationMain } from '../../common/plugin-api-rpc';\nimport { ProgressService, Progress, ProgressMessage } from '@theia/core/lib/common';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class NotificationMainImpl implements NotificationMain, Disposable {\n\n    private readonly progressService: ProgressService;\n    private readonly progressMap = new Map<string, Progress>();\n    private readonly progress2Work = new Map<string, number>();\n\n    protected readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as not disposed */ })\n    );\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.progressService = container.get(ProgressService);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $startProgress(options: NotificationMain.StartProgressOptions): Promise<string> {\n        const progressMessage = this.mapOptions(options);\n        const progress = await this.progressService.showProgress(progressMessage);\n        const id = progress.id;\n        this.progressMap.set(id, progress);\n        this.progress2Work.set(id, 0);\n        if (this.toDispose.disposed) {\n            this.$stopProgress(id);\n        } else {\n            this.toDispose.push(Disposable.create(() => this.$stopProgress(id)));\n        }\n        return id;\n    }\n    protected mapOptions(options: NotificationMain.StartProgressOptions): ProgressMessage {\n        const { title, location, cancellable } = options;\n        return { text: title, options: { location, cancelable: cancellable } };\n    }\n\n    $stopProgress(id: string): void {\n        const progress = this.progressMap.get(id);\n        if (progress) {\n            progress.cancel();\n            this.progressMap.delete(id);\n            this.progress2Work.delete(id);\n        }\n    }\n\n    $updateProgress(id: string, item: NotificationMain.ProgressReport): void {\n        const progress = this.progressMap.get(id);\n        if (!progress) {\n            return;\n        }\n        const done = Math.min((this.progress2Work.get(id) || 0) + (item.increment || 0), 100);\n        this.progress2Work.set(id, done);\n        progress.report({ message: item.message, work: done ? { done, total: 100 } : undefined });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { CommandService } from '@theia/core/lib/common/command';\nimport { OutputCommands } from '@theia/output/lib/browser/output-commands';\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\n\n@injectable()\nexport class OutputChannelRegistryMainImpl implements OutputChannelRegistryMain {\n\n    @inject(CommandService)\n    protected readonly commandService: CommandService;\n\n    $append(name: string, text: string, pluginInfo: PluginInfo): PromiseLike<void> {\n        this.commandService.executeCommand(OutputCommands.APPEND.id, { name, text });\n        return Promise.resolve();\n    }\n\n    $clear(name: string): PromiseLike<void> {\n        this.commandService.executeCommand(OutputCommands.CLEAR.id, { name });\n        return Promise.resolve();\n    }\n\n    $dispose(name: string): PromiseLike<void> {\n        this.commandService.executeCommand(OutputCommands.DISPOSE.id, { name });\n        return Promise.resolve();\n    }\n\n    async $reveal(name: string, preserveFocus: boolean): Promise<void> {\n        const options = { preserveFocus };\n        this.commandService.executeCommand(OutputCommands.SHOW.id, { name, options });\n    }\n\n    $close(name: string): PromiseLike<void> {\n        this.commandService.executeCommand(OutputCommands.HIDE.id, { name });\n        return Promise.resolve();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from '@theia/core/shared/inversify';\nimport { ITokenTypeMap, IEmbeddedLanguagesMap, StandardTokenType } from 'vscode-textmate';\nimport { TextmateRegistry, getEncodedLanguageId, MonacoTextmateService, GrammarDefinition } from '@theia/monaco/lib/browser/textmate';\nimport { MenusContributionPointHandler } from './menus/menus-contribution-handler';\nimport { PluginViewRegistry } from './view/plugin-view-registry';\nimport { PluginCustomEditorRegistry } from './custom-editors/plugin-custom-editor-registry';\nimport { PluginContribution, IndentationRules, FoldingRules, ScopeMap, DeployedPlugin, GrammarsContribution } from '../../common';\nimport {\n    DefaultUriLabelProviderContribution,\n    LabelProviderContribution,\n    PreferenceSchemaProvider\n} from '@theia/core/lib/browser';\nimport { PreferenceLanguageOverrideService, PreferenceSchema, PreferenceSchemaProperties } from '@theia/core/lib/browser/preferences';\nimport { KeybindingsContributionPointHandler } from './keybindings/keybindings-contribution-handler';\nimport { MonacoSnippetSuggestProvider } from '@theia/monaco/lib/browser/monaco-snippet-suggest-provider';\nimport { PluginSharedStyle } from './plugin-shared-style';\nimport { CommandRegistry, Command, CommandHandler } from '@theia/core/lib/common/command';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { TaskDefinitionRegistry, ProblemMatcherRegistry, ProblemPatternRegistry } from '@theia/task/lib/browser';\nimport { PluginDebugService } from './debug/plugin-debug-service';\nimport { DebugSchemaUpdater } from '@theia/debug/lib/browser/debug-schema-updater';\nimport { MonacoThemingService } from '@theia/monaco/lib/browser/monaco-theming-service';\nimport { ColorRegistry } from '@theia/core/lib/browser/color-registry';\nimport { PluginIconThemeService } from './plugin-icon-theme-service';\nimport { ContributionProvider } from '@theia/core/lib/common';\n\n@injectable()\nexport class PluginContributionHandler {\n\n    private injections = new Map<string, string[]>();\n\n    @inject(TextmateRegistry)\n    private readonly grammarsRegistry: TextmateRegistry;\n\n    @inject(PluginViewRegistry)\n    private readonly viewRegistry: PluginViewRegistry;\n\n    @inject(PluginCustomEditorRegistry)\n    private readonly customEditorRegistry: PluginCustomEditorRegistry;\n\n    @inject(MenusContributionPointHandler)\n    private readonly menusContributionHandler: MenusContributionPointHandler;\n\n    @inject(PreferenceSchemaProvider)\n    private readonly preferenceSchemaProvider: PreferenceSchemaProvider;\n\n    @inject(PreferenceLanguageOverrideService)\n    private readonly preferenceOverrideService: PreferenceLanguageOverrideService;\n\n    @inject(MonacoTextmateService)\n    private readonly monacoTextmateService: MonacoTextmateService;\n\n    @inject(KeybindingsContributionPointHandler)\n    private readonly keybindingsContributionHandler: KeybindingsContributionPointHandler;\n\n    @inject(MonacoSnippetSuggestProvider)\n    protected readonly snippetSuggestProvider: MonacoSnippetSuggestProvider;\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(PluginSharedStyle)\n    protected readonly style: PluginSharedStyle;\n\n    @inject(TaskDefinitionRegistry)\n    protected readonly taskDefinitionRegistry: TaskDefinitionRegistry;\n\n    @inject(ProblemMatcherRegistry)\n    protected readonly problemMatcherRegistry: ProblemMatcherRegistry;\n\n    @inject(ProblemPatternRegistry)\n    protected readonly problemPatternRegistry: ProblemPatternRegistry;\n\n    @inject(PluginDebugService)\n    protected readonly debugService: PluginDebugService;\n\n    @inject(DebugSchemaUpdater)\n    protected readonly debugSchema: DebugSchemaUpdater;\n\n    @inject(MonacoThemingService)\n    protected readonly monacoThemingService: MonacoThemingService;\n\n    @inject(ColorRegistry)\n    protected readonly colors: ColorRegistry;\n\n    @inject(PluginIconThemeService)\n    protected readonly iconThemeService: PluginIconThemeService;\n\n    @inject(ContributionProvider) @named(LabelProviderContribution)\n    protected readonly contributionProvider: ContributionProvider<LabelProviderContribution>;\n\n    protected readonly commandHandlers = new Map<string, CommandHandler['execute'] | undefined>();\n\n    protected readonly onDidRegisterCommandHandlerEmitter = new Emitter<string>();\n    readonly onDidRegisterCommandHandler = this.onDidRegisterCommandHandlerEmitter.event;\n\n    /**\n     * Always synchronous in order to simplify handling disconnections.\n     * @throws never, loading of each contribution should handle errors\n     * in order to avoid preventing loading of other contributions or extensions\n     */\n    handleContributions(clientId: string, plugin: DeployedPlugin): Disposable {\n        const contributions = plugin.contributes;\n        if (!contributions) {\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection(Disposable.create(() => { /* mark as not disposed */ }));\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        const logError = (message: string, ...args: any[]) => console.error(`[${clientId}][${plugin.metadata.model.id}]: ${message}`, ...args);\n        const logWarning = (message: string, ...args: any[]) => console.warn(`[${clientId}][${plugin.metadata.model.id}]: ${message}`, ...args);\n        const pushContribution = (id: string, contribute: () => Disposable) => {\n            if (toDispose.disposed) {\n                return;\n            }\n            try {\n                toDispose.push(contribute());\n            } catch (e) {\n                logError(`Failed to load '${id}' contribution.`, e);\n            }\n        };\n\n        const configuration = contributions.configuration;\n        if (configuration) {\n            for (const config of configuration) {\n                pushContribution('configuration', () => this.preferenceSchemaProvider.setSchema(config));\n            }\n        }\n\n        const configurationDefaults = contributions.configurationDefaults;\n        if (configurationDefaults) {\n            pushContribution('configurationDefaults', () => this.updateDefaultOverridesSchema(configurationDefaults));\n        }\n\n        const languages = contributions.languages;\n        if (languages && languages.length) {\n            for (const lang of languages) {\n                // it is not possible to unregister a language\n                monaco.languages.register({\n                    id: lang.id,\n                    aliases: lang.aliases,\n                    extensions: lang.extensions,\n                    filenamePatterns: lang.filenamePatterns,\n                    filenames: lang.filenames,\n                    firstLine: lang.firstLine,\n                    mimetypes: lang.mimetypes\n                });\n                const langConfiguration = lang.configuration;\n                if (langConfiguration) {\n                    pushContribution(`language.${lang.id}.configuration`, () => monaco.languages.setLanguageConfiguration(lang.id, {\n                        wordPattern: this.createRegex(langConfiguration.wordPattern),\n                        autoClosingPairs: langConfiguration.autoClosingPairs,\n                        brackets: langConfiguration.brackets,\n                        comments: langConfiguration.comments,\n                        folding: this.convertFolding(langConfiguration.folding),\n                        surroundingPairs: langConfiguration.surroundingPairs,\n                        indentationRules: this.convertIndentationRules(langConfiguration.indentationRules)\n                    }));\n                }\n            }\n        }\n\n        const grammars = contributions.grammars;\n        if (grammars && grammars.length) {\n            const grammarsWithLanguage: GrammarsContribution[] = [];\n            for (const grammar of grammars) {\n                if (grammar.injectTo) {\n                    for (const injectScope of grammar.injectTo) {\n                        pushContribution(`grammar.injectTo.${injectScope}`, () => {\n                            const injections = this.injections.get(injectScope) || [];\n                            injections.push(grammar.scope);\n                            this.injections.set(injectScope, injections);\n                            return Disposable.create(() => {\n                                const index = injections.indexOf(grammar.scope);\n                                if (index !== -1) {\n                                    injections.splice(index, 1);\n                                }\n                            });\n                        });\n                    }\n                }\n                if (grammar.language) {\n                    // processing is deferred.\n                    grammarsWithLanguage.push(grammar);\n                }\n                pushContribution(`grammar.textmate.scope.${grammar.scope}`, () => this.grammarsRegistry.registerTextmateGrammarScope(grammar.scope, {\n                    async getGrammarDefinition(): Promise<GrammarDefinition> {\n                        return {\n                            format: grammar.format,\n                            content: grammar.grammar || '',\n                            location: grammar.grammarLocation\n                        };\n                    },\n                    getInjections: (scopeName: string) =>\n                        this.injections.get(scopeName)!\n                }));\n            }\n            // load grammars on next tick to await registration of languages from all plugins in current tick\n            // see https://github.com/eclipse-theia/theia/issues/6907#issuecomment-578600243\n            setTimeout(() => {\n                for (const grammar of grammarsWithLanguage) {\n                    const language = grammar.language!;\n                    pushContribution(`grammar.language.${language}.scope`, () => this.grammarsRegistry.mapLanguageIdToTextmateGrammar(language, grammar.scope));\n                    pushContribution(`grammar.language.${language}.configuration`, () => this.grammarsRegistry.registerGrammarConfiguration(language, {\n                        embeddedLanguages: this.convertEmbeddedLanguages(grammar.embeddedLanguages, logWarning),\n                        tokenTypes: this.convertTokenTypes(grammar.tokenTypes)\n                    }));\n                }\n                // activate grammars only once everything else is loaded.\n                // see https://github.com/eclipse-theia/theia-cpp-extensions/issues/100#issuecomment-610643866\n                setTimeout(() => {\n                    for (const grammar of grammarsWithLanguage) {\n                        const language = grammar.language!;\n                        pushContribution(`grammar.language.${language}.activation`,\n                            () => this.monacoTextmateService.activateLanguage(language)\n                        );\n                    }\n                });\n            });\n        }\n\n        pushContribution('commands', () => this.registerCommands(contributions));\n        pushContribution('menus', () => this.menusContributionHandler.handle(plugin));\n        pushContribution('keybindings', () => this.keybindingsContributionHandler.handle(contributions));\n\n        if (contributions.customEditors) {\n            for (const customEditor of contributions.customEditors) {\n                pushContribution(`customEditors.${customEditor.viewType}`,\n                    () => this.customEditorRegistry.registerCustomEditor(customEditor)\n                );\n            }\n        }\n\n        if (contributions.viewsContainers) {\n            for (const location in contributions.viewsContainers) {\n                if (contributions.viewsContainers!.hasOwnProperty(location)) {\n                    for (const viewContainer of contributions.viewsContainers[location]) {\n                        pushContribution(`viewContainers.${viewContainer.id}`,\n                            () => this.viewRegistry.registerViewContainer(location, viewContainer)\n                        );\n                    }\n                }\n            }\n        }\n        if (contributions.views) {\n            // eslint-disable-next-line guard-for-in\n            for (const location in contributions.views) {\n                for (const view of contributions.views[location]) {\n                    pushContribution(`views.${view.id}`,\n                        () => this.viewRegistry.registerView(location, view)\n                    );\n                }\n            }\n        }\n\n        if (contributions.viewsWelcome) {\n            for (const [index, viewWelcome] of contributions.viewsWelcome.entries()) {\n                pushContribution(`viewsWelcome.${viewWelcome.view}.${index}`,\n                    () => this.viewRegistry.registerViewWelcome(viewWelcome)\n                );\n            }\n        }\n\n        if (contributions.snippets) {\n            for (const snippet of contributions.snippets) {\n                pushContribution(`snippets.${snippet.uri}`, () => this.snippetSuggestProvider.fromURI(snippet.uri, {\n                    language: snippet.language,\n                    source: snippet.source\n                }));\n            }\n        }\n\n        if (contributions.themes && contributions.themes.length) {\n            const pending = {};\n            for (const theme of contributions.themes) {\n                pushContribution(`themes.${theme.uri}`, () => this.monacoThemingService.register(theme, pending));\n            }\n        }\n\n        if (contributions.iconThemes && contributions.iconThemes.length) {\n            for (const iconTheme of contributions.iconThemes) {\n                pushContribution(`iconThemes.${iconTheme.uri}`, () => this.iconThemeService.register(iconTheme, plugin));\n            }\n        }\n\n        if (contributions.colors) {\n            pushContribution('colors', () => this.colors.register(...contributions.colors));\n        }\n\n        if (contributions.taskDefinitions) {\n            for (const taskDefinition of contributions.taskDefinitions) {\n                pushContribution(`taskDefinitions.${taskDefinition.taskType}`,\n                    () => this.taskDefinitionRegistry.register(taskDefinition)\n                );\n            }\n        }\n\n        if (contributions.problemPatterns) {\n            for (const problemPattern of contributions.problemPatterns) {\n                pushContribution(`problemPatterns.${problemPattern.name || problemPattern.regexp}`,\n                    () => this.problemPatternRegistry.register(problemPattern)\n                );\n            }\n        }\n\n        if (contributions.problemMatchers) {\n            for (const problemMatcher of contributions.problemMatchers) {\n                pushContribution(`problemMatchers.${problemMatcher.label}`,\n                    () => this.problemMatcherRegistry.register(problemMatcher)\n                );\n            }\n        }\n\n        if (contributions.debuggers && contributions.debuggers.length) {\n            toDispose.push(Disposable.create(() => this.debugSchema.update()));\n            for (const contribution of contributions.debuggers) {\n                pushContribution(`debuggers.${contribution.type}`,\n                    () => this.debugService.registerDebugger(contribution)\n                );\n            }\n            this.debugSchema.update();\n        }\n\n        if (contributions.resourceLabelFormatters) {\n            for (const formatter of contributions.resourceLabelFormatters) {\n                for (const contribution of this.contributionProvider.getContributions()) {\n                    if (contribution instanceof DefaultUriLabelProviderContribution) {\n                        pushContribution(`resourceLabelFormatters.${formatter.scheme}`,\n                            () => contribution.registerFormatter(formatter)\n                        );\n                    }\n                }\n            }\n        }\n\n        return toDispose;\n    }\n\n    protected registerCommands(contribution: PluginContribution): Disposable {\n        if (!contribution.commands) {\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n        for (const { iconUrl, themeIcon, command, category, title } of contribution.commands) {\n            const reference = iconUrl && this.style.toIconClass(iconUrl);\n            const icon = themeIcon && monaco.theme.ThemeIcon.fromString(themeIcon);\n            let iconClass;\n            if (reference) {\n                toDispose.push(reference);\n                iconClass = reference.object.iconClass;\n            } else if (icon) {\n                iconClass = monaco.theme.ThemeIcon.asClassName(icon);\n            }\n            toDispose.push(this.registerCommand({ id: command, category, label: title, iconClass }));\n        }\n        return toDispose;\n    }\n\n    registerCommand(command: Command): Disposable {\n        if (this.hasCommand(command.id)) {\n            console.warn(`command '${command.id}' already registered`);\n            return Disposable.NULL;\n        }\n\n        const commandHandler: CommandHandler = {\n            execute: async (...args) => {\n                const handler = this.commandHandlers.get(command.id);\n                if (!handler) {\n                    throw new Error(`command '${command.id}' not found`);\n                }\n                return handler(...args);\n            },\n            // Always enabled - a command can be executed programmatically or via the commands palette.\n            isEnabled(): boolean { return true; },\n            // Visibility rules are defined via the `menus` contribution point.\n            isVisible(): boolean { return true; }\n        };\n\n        const toDispose = new DisposableCollection();\n        if (this.commands.getCommand(command.id)) {\n            // overriding built-in command, i.e. `type` by the VSCodeVim extension\n            toDispose.push(this.commands.registerHandler(command.id, commandHandler));\n        } else {\n            toDispose.push(this.commands.registerCommand(command, commandHandler));\n        }\n        this.commandHandlers.set(command.id, undefined);\n        toDispose.push(Disposable.create(() => this.commandHandlers.delete(command.id)));\n        return toDispose;\n    }\n\n    registerCommandHandler(id: string, execute: CommandHandler['execute']): Disposable {\n        if (this.hasCommandHandler(id)) {\n            console.warn(`command handler '${id}' already registered`);\n            return Disposable.NULL;\n        }\n\n        this.commandHandlers.set(id, execute);\n        this.onDidRegisterCommandHandlerEmitter.fire(id);\n        return Disposable.create(() => this.commandHandlers.set(id, undefined));\n    }\n\n    hasCommand(id: string): boolean {\n        return this.commandHandlers.has(id);\n    }\n\n    hasCommandHandler(id: string): boolean {\n        return !!this.commandHandlers.get(id);\n    }\n\n    protected updateDefaultOverridesSchema(configurationDefaults: PreferenceSchemaProperties): Disposable {\n        const defaultOverrides: PreferenceSchema = {\n            id: 'defaultOverrides',\n            title: 'Default Configuration Overrides',\n            properties: {}\n        };\n        // eslint-disable-next-line guard-for-in\n        for (const key in configurationDefaults) {\n            const defaultValue = configurationDefaults[key];\n            if (this.preferenceOverrideService.testOverrideValue(key, defaultValue)) {\n                defaultOverrides.properties[key] = {\n                    type: 'object',\n                    default: defaultValue,\n                    description: `Configure editor settings to be overridden for ${key} language.`\n                };\n            }\n        }\n        if (Object.keys(defaultOverrides.properties).length) {\n            return this.preferenceSchemaProvider.setSchema(defaultOverrides);\n        }\n        return Disposable.NULL;\n    }\n\n    private createRegex(value: string | undefined): RegExp | undefined {\n        if (typeof value === 'string') {\n            return new RegExp(value, '');\n        }\n        return undefined;\n    }\n\n    private convertIndentationRules(rules?: IndentationRules): monaco.languages.IndentationRule | undefined {\n        if (!rules) {\n            return undefined;\n        }\n        return {\n            decreaseIndentPattern: this.createRegex(rules.decreaseIndentPattern)!,\n            increaseIndentPattern: this.createRegex(rules.increaseIndentPattern)!,\n            indentNextLinePattern: this.createRegex(rules.indentNextLinePattern),\n            unIndentedLinePattern: this.createRegex(rules.unIndentedLinePattern)\n        };\n    }\n\n    private convertFolding(folding?: FoldingRules): monaco.languages.FoldingRules | undefined {\n        if (!folding) {\n            return undefined;\n        }\n        const result: monaco.languages.FoldingRules = {\n            offSide: folding.offSide\n        };\n\n        if (folding.markers) {\n            result.markers = {\n                end: this.createRegex(folding.markers.end)!,\n                start: this.createRegex(folding.markers.start)!\n            };\n        }\n\n        return result;\n\n    }\n\n    private convertTokenTypes(tokenTypes?: ScopeMap): ITokenTypeMap | undefined {\n        if (typeof tokenTypes === 'undefined' || tokenTypes === null) {\n            return undefined;\n        }\n        const result = Object.create(null);\n        const scopes = Object.keys(tokenTypes);\n        const len = scopes.length;\n        for (let i = 0; i < len; i++) {\n            const scope = scopes[i];\n            const tokenType = tokenTypes[scope];\n            switch (tokenType) {\n                case 'string':\n                    result[scope] = StandardTokenType.String;\n                    break;\n                case 'other':\n                    result[scope] = StandardTokenType.Other;\n                    break;\n                case 'comment':\n                    result[scope] = StandardTokenType.Comment;\n                    break;\n            }\n        }\n        return result;\n    }\n\n    private convertEmbeddedLanguages(languages: ScopeMap | undefined, logWarning: (warning: string) => void): IEmbeddedLanguagesMap | undefined {\n        if (typeof languages === 'undefined' || languages === null) {\n            return undefined;\n        }\n        const result = Object.create(null);\n        const scopes = Object.keys(languages);\n        const len = scopes.length;\n        for (let i = 0; i < len; i++) {\n            const scope = scopes[i];\n            const langId = languages[scope];\n            result[scope] = getEncodedLanguageId(langId);\n            if (!result[scope]) {\n                logWarning(`Language for '${scope}' not found.`);\n            }\n        }\n        return result;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { QuickOpenService, QuickOpenItem, QuickOpenModel, QuickOpenMode } from '@theia/core/lib/browser';\nimport { PluginServer } from '../../common';\nimport { Command } from '@theia/core/lib/common/command';\n\n@injectable()\nexport class PluginExtDeployCommandService implements QuickOpenModel {\n\n    private items: QuickOpenItem[];\n\n    public static COMMAND: Command = {\n        id: 'plugin-ext:deploy-plugin-id',\n        category: 'Plugin',\n        label: 'Deploy Plugin by Id',\n\n    };\n\n    @inject(QuickOpenService)\n    protected readonly quickOpenService: QuickOpenService;\n\n    @inject(PluginServer)\n    protected readonly pluginServer: PluginServer;\n\n    constructor() {\n        this.items = [];\n    }\n\n    /**\n     * Whether the dialog is currently open.\n     */\n    protected isOpen: boolean = false;\n\n    deploy(): void {\n        const placeholderText = \"Plugin's id to deploy.\";\n\n        this.isOpen = true;\n\n        this.quickOpenService.open(this, {\n            placeholder: placeholderText,\n            fuzzyMatchLabel: true,\n            fuzzyMatchDescription: true,\n            fuzzySort: true,\n            onClose: () => {\n                this.isOpen = false;\n            },\n        });\n    }\n\n    public async onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): Promise<void> {\n        this.items = [];\n        if (lookFor || lookFor.length > 0) {\n            this.items.push(this.createDeployQuickOpenItem(lookFor, 'Deploy this plugin'));\n        }\n        acceptor(this.items);\n    }\n\n    protected createDeployQuickOpenItem(name: string, description: string): DeployQuickOpenItem {\n        return new DeployQuickOpenItem(name, this.pluginServer, description);\n    }\n\n}\n\nexport class DeployQuickOpenItem extends QuickOpenItem {\n\n    constructor(\n        protected readonly name: string,\n        protected readonly pluginServer: PluginServer,\n        protected readonly description?: string\n    ) {\n        super();\n    }\n\n    getLabel(): string {\n        return this.name;\n    }\n\n    getDetail(): string {\n        return this.description || '';\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        this.pluginServer.deploy(this.name);\n        return true;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport '../../../src/main/style/status-bar.css';\nimport '../../../src/main/browser/style/index.css';\nimport '../../../src/main/browser/style/comments.css';\n\nimport { ContainerModule } from '@theia/core/shared/inversify';\nimport {\n    FrontendApplicationContribution, WidgetFactory, bindViewContribution,\n    ViewContainerIdentifier, ViewContainer, createTreeContainer, TreeImpl, TreeWidget, TreeModelImpl, LabelProviderContribution\n} from '@theia/core/lib/browser';\nimport { MaybePromise, CommandContribution, ResourceResolver, bindContributionProvider } from '@theia/core/lib/common';\nimport { WebSocketConnectionProvider } from '@theia/core/lib/browser/messaging';\nimport { HostedPluginSupport } from '../../hosted/browser/hosted-plugin';\nimport { HostedPluginWatcher } from '../../hosted/browser/hosted-plugin-watcher';\nimport { OpenUriCommandHandler } from './commands';\nimport { PluginApiFrontendContribution } from './plugin-frontend-contribution';\nimport { HostedPluginServer, hostedServicePath, PluginServer, pluginServerJsonRpcPath } from '../../common/plugin-protocol';\nimport { ModalNotification } from './dialogs/modal-notification';\nimport { PluginWidget } from './plugin-ext-widget';\nimport { PluginFrontendViewContribution } from './plugin-frontend-view-contribution';\nimport { PluginExtDeployCommandService } from './plugin-ext-deploy-command';\nimport { EditorModelService } from './text-editor-model-service';\nimport { UntitledResourceResolver } from './editor/untitled-resource';\nimport { CodeEditorWidgetUtil, MenusContributionPointHandler } from './menus/menus-contribution-handler';\nimport { PluginContributionHandler } from './plugin-contribution-handler';\nimport { PluginViewRegistry, PLUGIN_VIEW_CONTAINER_FACTORY_ID, PLUGIN_VIEW_FACTORY_ID, PLUGIN_VIEW_DATA_FACTORY_ID } from './view/plugin-view-registry';\nimport { TextContentResourceResolver } from './workspace-main';\nimport { MainPluginApiProvider } from '../../common/plugin-ext-api-contribution';\nimport { PluginPathsService, pluginPathsServicePath } from '../common/plugin-paths-protocol';\nimport { KeybindingsContributionPointHandler } from './keybindings/keybindings-contribution-handler';\nimport { DebugSessionContributionRegistry } from '@theia/debug/lib/browser/debug-session-contribution';\nimport { PluginDebugSessionContributionRegistry } from './debug/plugin-debug-session-contribution-registry';\nimport { PluginDebugService } from './debug/plugin-debug-service';\nimport { DebugService } from '@theia/debug/lib/common/debug-service';\nimport { PluginSharedStyle } from './plugin-shared-style';\nimport { SelectionProviderCommandContribution } from './selection-provider-command';\nimport { ViewColumnService } from './view-column-service';\nimport { ViewContextKeyService } from './view/view-context-key-service';\nimport { PluginViewWidget, PluginViewWidgetIdentifier } from './view/plugin-view-widget';\nimport { TreeViewWidgetIdentifier, VIEW_ITEM_CONTEXT_MENU, PluginTree, TreeViewWidget, PluginTreeModel } from './view/tree-view-widget';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { LanguagesMainFactory, OutputChannelRegistryFactory } from '../../common';\nimport { LanguagesMainImpl } from './languages-main';\nimport { OutputChannelRegistryMainImpl } from './output-channel-registry-main';\nimport { WebviewWidget } from './webview/webview';\nimport { WebviewEnvironment } from './webview/webview-environment';\nimport { WebviewThemeDataProvider } from './webview/webview-theme-data-provider';\nimport { bindWebviewPreferences } from './webview/webview-preferences';\nimport { WebviewResourceCache } from './webview/webview-resource-cache';\nimport { PluginIconThemeService, PluginIconThemeFactory, PluginIconThemeDefinition, PluginIconTheme } from './plugin-icon-theme-service';\nimport { PluginTreeViewNodeLabelProvider } from './view/plugin-tree-view-node-label-provider';\nimport { WebviewWidgetFactory } from './webview/webview-widget-factory';\nimport { CommentsService, PluginCommentService } from './comments/comments-service';\nimport { CommentingRangeDecorator } from './comments/comments-decorator';\nimport { CommentsContribution } from './comments/comments-contribution';\nimport { CommentsContextKeyService } from './comments/comments-context-key-service';\nimport { CustomEditorContribution } from './custom-editors/custom-editor-contribution';\nimport { PluginCustomEditorRegistry } from './custom-editors/plugin-custom-editor-registry';\nimport { CustomEditorWidgetFactory } from '../browser/custom-editors/custom-editor-widget-factory';\nimport { CustomEditorWidget } from './custom-editors/custom-editor-widget';\nimport { CustomEditorService } from './custom-editors/custom-editor-service';\nimport { UndoRedoService } from './custom-editors/undo-redo-service';\nimport { WebviewFrontendSecurityWarnings } from './webview/webview-frontend-security-warnings';\n\nexport default new ContainerModule((bind, unbind, isBound, rebind) => {\n\n    bind(LanguagesMainImpl).toSelf().inTransientScope();\n    bind(LanguagesMainFactory).toFactory(context => (rpc: RPCProtocol) => {\n        const child = context.container.createChild();\n        child.bind(RPCProtocol).toConstantValue(rpc);\n        return child.get(LanguagesMainImpl);\n    });\n\n    bind(OutputChannelRegistryMainImpl).toSelf().inTransientScope();\n    bind(OutputChannelRegistryFactory).toFactory(context => () => {\n        const child = context.container.createChild();\n        return child.get(OutputChannelRegistryMainImpl);\n    });\n\n    bind(ModalNotification).toSelf().inSingletonScope();\n\n    bind(HostedPluginSupport).toSelf().inSingletonScope();\n    bind(HostedPluginWatcher).toSelf().inSingletonScope();\n    bind(SelectionProviderCommandContribution).toSelf().inSingletonScope();\n    bind(CommandContribution).toService(SelectionProviderCommandContribution);\n\n    bind(OpenUriCommandHandler).toSelf().inSingletonScope();\n    bind(PluginApiFrontendContribution).toSelf().inSingletonScope();\n    bind(CommandContribution).toService(PluginApiFrontendContribution);\n\n    bind(EditorModelService).toSelf().inSingletonScope();\n\n    bind(UntitledResourceResolver).toSelf().inSingletonScope();\n    bind(ResourceResolver).toService(UntitledResourceResolver);\n\n    bind(FrontendApplicationContribution).toDynamicValue(ctx => ({\n        onStart(): MaybePromise<void> {\n            ctx.container.get(HostedPluginSupport).onStart(ctx.container);\n        }\n    }));\n    bind(HostedPluginServer).toDynamicValue(ctx => {\n        const connection = ctx.container.get(WebSocketConnectionProvider);\n        const hostedWatcher = ctx.container.get(HostedPluginWatcher);\n        return connection.createProxy<HostedPluginServer>(hostedServicePath, hostedWatcher.getHostedPluginClient());\n    }).inSingletonScope();\n\n    bind(PluginPathsService).toDynamicValue(ctx => {\n        const connection = ctx.container.get(WebSocketConnectionProvider);\n        return connection.createProxy<PluginPathsService>(pluginPathsServicePath);\n    }).inSingletonScope();\n\n    bindViewContribution(bind, PluginFrontendViewContribution);\n\n    bind(PluginWidget).toSelf();\n    bind(WidgetFactory).toDynamicValue(ctx => ({\n        id: PluginFrontendViewContribution.PLUGINS_WIDGET_FACTORY_ID,\n        createWidget: () => ctx.container.get(PluginWidget)\n    }));\n\n    bind(PluginExtDeployCommandService).toSelf().inSingletonScope();\n    bind(PluginServer).toDynamicValue(ctx => {\n        const provider = ctx.container.get(WebSocketConnectionProvider);\n        return provider.createProxy<PluginServer>(pluginServerJsonRpcPath);\n    }).inSingletonScope();\n\n    bind(ViewContextKeyService).toSelf().inSingletonScope();\n\n    bind(PluginTreeViewNodeLabelProvider).toSelf().inSingletonScope();\n    bind(LabelProviderContribution).toService(PluginTreeViewNodeLabelProvider);\n    bind(WidgetFactory).toDynamicValue(({ container }) => ({\n        id: PLUGIN_VIEW_DATA_FACTORY_ID,\n        createWidget: (identifier: TreeViewWidgetIdentifier) => {\n            const child = createTreeContainer(container, {\n                contextMenuPath: VIEW_ITEM_CONTEXT_MENU,\n                globalSelection: true\n            });\n            child.bind(TreeViewWidgetIdentifier).toConstantValue(identifier);\n            child.bind(PluginTree).toSelf();\n            child.rebind(TreeImpl).toService(PluginTree);\n            child.bind(PluginTreeModel).toSelf();\n            child.rebind(TreeModelImpl).toService(PluginTreeModel);\n            child.bind(TreeViewWidget).toSelf();\n            child.rebind(TreeWidget).toService(TreeViewWidget);\n            return child.get(TreeWidget);\n        }\n    })).inSingletonScope();\n\n    bindWebviewPreferences(bind);\n    bind(WebviewEnvironment).toSelf().inSingletonScope();\n    bind(WebviewThemeDataProvider).toSelf().inSingletonScope();\n    bind(WebviewResourceCache).toSelf().inSingletonScope();\n    bind(WebviewWidget).toSelf();\n    bind(WebviewWidgetFactory).toDynamicValue(ctx => new WebviewWidgetFactory(ctx.container)).inSingletonScope();\n    bind(WidgetFactory).toService(WebviewWidgetFactory);\n\n    bind(CustomEditorContribution).toSelf().inSingletonScope();\n    bind(CommandContribution).toService(CustomEditorContribution);\n\n    bind(PluginCustomEditorRegistry).toSelf().inSingletonScope();\n    bind(CustomEditorService).toSelf().inSingletonScope();\n    bind(CustomEditorWidget).toSelf();\n    bind(CustomEditorWidgetFactory).toDynamicValue(ctx => new CustomEditorWidgetFactory(ctx.container)).inSingletonScope();\n    bind(WidgetFactory).toService(CustomEditorWidgetFactory);\n\n    bind(UndoRedoService).toSelf().inSingletonScope();\n\n    bind(PluginViewWidget).toSelf();\n    bind(WidgetFactory).toDynamicValue(({ container }) => ({\n        id: PLUGIN_VIEW_FACTORY_ID,\n        createWidget: (identifier: PluginViewWidgetIdentifier) => {\n            const child = container.createChild();\n            child.bind(PluginViewWidgetIdentifier).toConstantValue(identifier);\n            return child.get(PluginViewWidget);\n        }\n    })).inSingletonScope();\n\n    bind(WidgetFactory).toDynamicValue(({ container }) => ({\n        id: PLUGIN_VIEW_CONTAINER_FACTORY_ID,\n        createWidget: (identifier: ViewContainerIdentifier) =>\n            container.get<ViewContainer.Factory>(ViewContainer.Factory)(identifier)\n    })).inSingletonScope();\n    bind(PluginSharedStyle).toSelf().inSingletonScope();\n    bind(PluginViewRegistry).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(PluginViewRegistry);\n\n    bind(PluginIconThemeFactory).toFactory<PluginIconTheme>(({ container }) => (definition: PluginIconThemeDefinition) => {\n        const child = container.createChild();\n        child.bind(PluginIconThemeDefinition).toConstantValue(definition);\n        child.bind(PluginIconTheme).toSelf().inSingletonScope();\n        return child.get(PluginIconTheme);\n    });\n    bind(PluginIconThemeService).toSelf().inSingletonScope();\n    bind(LabelProviderContribution).toService(PluginIconThemeService);\n\n    bind(MenusContributionPointHandler).toSelf().inSingletonScope();\n    bind(CodeEditorWidgetUtil).toSelf().inSingletonScope();\n    bind(KeybindingsContributionPointHandler).toSelf().inSingletonScope();\n    bind(PluginContributionHandler).toSelf().inSingletonScope();\n\n    bind(TextContentResourceResolver).toSelf().inSingletonScope();\n    bind(ResourceResolver).toService(TextContentResourceResolver);\n    bindContributionProvider(bind, MainPluginApiProvider);\n\n    bind(PluginDebugService).toSelf().inSingletonScope();\n    rebind(DebugService).toService(PluginDebugService);\n    bind(PluginDebugSessionContributionRegistry).toSelf().inSingletonScope();\n    rebind(DebugSessionContributionRegistry).toService(PluginDebugSessionContributionRegistry);\n\n    bind(ViewColumnService).toSelf().inSingletonScope();\n\n    bind(CommentsService).to(PluginCommentService).inSingletonScope();\n    bind(CommentingRangeDecorator).toSelf().inSingletonScope();\n    bind(CommentsContribution).toSelf().inSingletonScope();\n    bind(CommentsContextKeyService).toSelf().inSingletonScope();\n\n    bind(WebviewFrontendSecurityWarnings).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(WebviewFrontendSecurityWarnings);\n});\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as React from '@theia/core/shared/react';\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { Message } from '@theia/core/shared/@phosphor/messaging';\nimport { PluginMetadata } from '../../common/plugin-protocol';\nimport { ReactWidget } from '@theia/core/lib/browser/widgets/react-widget';\nimport { AlertMessage } from '@theia/core/lib/browser/widgets/alert-message';\nimport { HostedPluginSupport, PluginProgressLocation } from '../../hosted/browser/hosted-plugin';\nimport { ProgressBarFactory } from '@theia/core/lib/browser/progress-bar-factory';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\n@injectable()\nexport class PluginWidget extends ReactWidget {\n\n    @inject(HostedPluginSupport)\n    protected readonly pluginService: HostedPluginSupport;\n\n    @inject(ProgressBarFactory)\n    protected readonly progressBarFactory: ProgressBarFactory;\n\n    constructor() {\n        super();\n        this.id = 'plugins';\n        this.title.label = 'Plugins';\n        this.title.caption = 'Plugins';\n        this.title.iconClass = 'fa plugins-tab-icon';\n        this.title.closable = true;\n        this.node.tabIndex = 0;\n        this.addClass('theia-plugins');\n\n        this.update();\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.toDispose.push(this.pluginService.onDidChangePlugins(() => this.update()));\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.node.focus();\n    }\n\n    protected readonly toDisposeProgress = new DisposableCollection();\n\n    protected render(): React.ReactNode {\n        return <div ref={ref => {\n            this.toDisposeProgress.dispose();\n            this.toDispose.push(this.toDisposeProgress);\n            if (ref) {\n                this.toDispose.push(this.progressBarFactory({ container: this.node, insertMode: 'prepend', locationId: PluginProgressLocation }));\n            }\n        }}>{this.doRender()}</div>;\n    }\n\n    protected doRender(): React.ReactNode {\n        const plugins = this.pluginService.plugins;\n        if (!plugins.length) {\n            return <AlertMessage type='INFO' header='No plugins currently available.' />;\n        }\n        return <React.Fragment>{this.renderPlugins(plugins)}</React.Fragment>;\n    }\n\n    protected renderPlugins(plugins: PluginMetadata[]): React.ReactNode {\n        return <div id='pluginListContainer'>\n            {plugins.sort((a, b) => this.compareMetadata(a, b)).map(plugin => this.renderPlugin(plugin))}\n        </div>;\n    }\n\n    private renderPlugin(plugin: PluginMetadata): JSX.Element {\n        return <div key={plugin.model.name} className={this.createPluginClassName(plugin)}>\n            <div className='column flexcontainer pluginInformationContainer'>\n                <div className='row flexcontainer'>\n                    <div className='fa fa-puzzle-piece fa-2x fa-fw'></div>\n                    <div title={plugin.model.name} className='pluginName noWrapInfo'>{plugin.model.name}</div>\n                </div>\n                <div className='row flexcontainer'>\n                    <div className='pluginVersion'>{plugin.model.version}</div>\n                </div>\n                <div className='row flexcontainer'>\n                    <div className='pluginDescription noWrapInfo'>{plugin.model.description}</div>\n                </div>\n                <div className='row flexcontainer'>\n                    <div className='pluginPublisher noWrapInfo flexcontainer'>{plugin.model.publisher}</div>\n                </div>\n            </div>\n        </div>;\n    }\n\n    protected createPluginClassName(plugin: PluginMetadata): string {\n        const classNames = ['pluginHeaderContainer'];\n        return classNames.join(' ');\n    }\n\n    /**\n     * Compare two plugins based on their names, and publishers.\n     * @param a the first plugin metadata.\n     * @param b the second plugin metadata.\n     */\n    protected compareMetadata(a: PluginMetadata, b: PluginMetadata): number {\n        // Determine the name of the plugins.\n        const nameA = a.model.name.toLowerCase();\n        const nameB = b.model.name.toLowerCase();\n\n        // Determine the publisher of the plugin (when names are equal).\n        const publisherA = a.model.publisher.toLowerCase();\n        const publisherB = b.model.publisher.toLowerCase();\n\n        return (nameA === nameA)\n            ? nameA.localeCompare(nameB)\n            : publisherA.localeCompare(publisherB);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { CommandRegistry, CommandContribution } from '@theia/core/lib/common';\nimport { PluginExtDeployCommandService } from './plugin-ext-deploy-command';\nimport { OpenUriCommandHandler } from './commands';\nimport URI from '@theia/core/lib/common/uri';\n\n@injectable()\nexport class PluginApiFrontendContribution implements CommandContribution {\n\n    @inject(PluginExtDeployCommandService)\n    protected readonly pluginExtDeployCommandService: PluginExtDeployCommandService;\n\n    @inject(OpenUriCommandHandler)\n    protected readonly openUriCommandHandler: OpenUriCommandHandler;\n\n    registerCommands(commands: CommandRegistry): void {\n\n        commands.registerCommand(PluginExtDeployCommandService.COMMAND, {\n            execute: () => this.pluginExtDeployCommandService.deploy()\n        });\n\n        commands.registerCommand(OpenUriCommandHandler.COMMAND_METADATA, {\n            execute: (arg: URI) => this.openUriCommandHandler.execute(arg),\n            isVisible: () => false\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { AbstractViewContribution } from '@theia/core/lib/browser/shell/view-contribution';\nimport { PluginWidget } from './plugin-ext-widget';\n\n@injectable()\nexport class PluginFrontendViewContribution extends AbstractViewContribution<PluginWidget> {\n\n    public static PLUGINS_WIDGET_FACTORY_ID = 'plugins';\n\n    constructor() {\n        super({\n            widgetId: PluginFrontendViewContribution.PLUGINS_WIDGET_FACTORY_ID,\n            widgetName: 'Plugins',\n            defaultWidgetOptions: {\n                area: 'left',\n                rank: 400\n            },\n            toggleCommandId: 'pluginsView:toggle',\n            toggleKeybinding: 'ctrlcmd+shift+l'\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code is copied and modified from:\n// https://github.com/microsoft/vscode/blob/7cf4cca47aa025a590fc939af54932042302be63/src/vs/workbench/services/themes/browser/fileIconThemeData.ts\n\nimport debounce = require('@theia/core/shared/lodash.debounce');\nimport * as jsoncparser from 'jsonc-parser';\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { IconThemeService, IconTheme, IconThemeDefinition } from '@theia/core/lib/browser/icon-theme-service';\nimport { IconThemeContribution, DeployedPlugin, UiTheme, getPluginId } from '../../common/plugin-protocol';\nimport URI from '@theia/core/lib/common/uri';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { RecursivePartial } from '@theia/core/lib/common/types';\nimport { LabelProviderContribution, DidChangeLabelEvent, LabelProvider, URIIconReference } from '@theia/core/lib/browser/label-provider';\nimport { ThemeType } from '@theia/core/lib/browser/theming';\nimport { FileStatNode, DirNode } from '@theia/filesystem/lib/browser';\nimport { WorkspaceRootNode } from '@theia/navigator/lib/browser/navigator-tree';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport { FileService } from '@theia/filesystem/lib/browser/file-service';\nimport { FileStat, FileChangeType } from '@theia/filesystem/lib/common/files';\n\nexport interface PluginIconDefinition {\n    iconPath: string;\n    fontColor: string;\n    fontCharacter: string;\n    fontSize: string;\n    fontId: string;\n}\n\nexport interface PluginFontDefinition {\n    id: string;\n    weight: string;\n    style: string;\n    size: string;\n    src: { path: string; format: string; }[];\n}\n\nexport interface PluginIconsAssociation {\n    folder?: string;\n    file?: string;\n    folderExpanded?: string;\n    rootFolder?: string;\n    rootFolderExpanded?: string;\n    folderNames?: { [folderName: string]: string; };\n    folderNamesExpanded?: { [folderName: string]: string; };\n    fileExtensions?: { [extension: string]: string; };\n    fileNames?: { [fileName: string]: string; };\n    languageIds?: { [languageId: string]: string; };\n}\n\nexport interface PluginIconDefinitions {\n    [key: string]: PluginIconDefinition\n}\n\nexport interface PluginIconThemeDocument extends PluginIconsAssociation {\n    iconDefinitions: PluginIconDefinitions;\n    fonts: PluginFontDefinition[];\n    light?: PluginIconsAssociation;\n    highContrast?: PluginIconsAssociation;\n    hidesExplorerArrows?: boolean;\n}\n\nexport const PluginIconThemeFactory = Symbol('PluginIconThemeFactory');\nexport type PluginIconThemeFactory = (definition: PluginIconThemeDefinition) => PluginIconTheme;\n\n@injectable()\nexport class PluginIconThemeDefinition implements IconThemeDefinition, IconThemeContribution {\n    id: string;\n    label: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n    pluginId: string;\n    packageUri: string;\n    hasFileIcons?: boolean;\n    hasFolderIcons?: boolean;\n    hidesExplorerArrows?: boolean;\n}\n\n@injectable()\nexport class PluginIconTheme extends PluginIconThemeDefinition implements IconTheme, Disposable {\n\n    @inject(FileService)\n    protected readonly fileService: FileService;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(PluginIconThemeDefinition)\n    protected readonly definition: PluginIconThemeDefinition;\n\n    protected readonly onDidChangeEmitter = new Emitter<DidChangeLabelEvent>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n\n    protected readonly toDeactivate = new DisposableCollection();\n    protected readonly toUnload = new DisposableCollection();\n    protected readonly toDisposeStyleElement = new DisposableCollection();\n    protected readonly toDispose = new DisposableCollection(\n        this.toDeactivate, this.toDisposeStyleElement, this.toUnload, this.onDidChangeEmitter\n    );\n\n    protected packageRootUri: URI;\n    protected locationUri: URI;\n\n    protected styleSheetContent: string | undefined;\n    protected readonly icons = new Set<string>();\n\n    @postConstruct()\n    protected init(): void {\n        Object.assign(this, this.definition);\n        this.packageRootUri = new URI(this.packageUri);\n        this.locationUri = new URI(this.uri).parent;\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected fireDidChange(): void {\n        this.onDidChangeEmitter.fire({ affects: () => true });\n    }\n\n    activate(): Disposable {\n        if (!this.toDeactivate.disposed) {\n            return this.toDeactivate;\n        }\n        this.toDeactivate.push(Disposable.create(() => this.fireDidChange()));\n        this.doActivate();\n        return this.toDeactivate;\n    }\n\n    protected async doActivate(): Promise<void> {\n        await this.load();\n        this.updateStyleElement();\n    }\n\n    protected updateStyleElement(): void {\n        this.toDisposeStyleElement.dispose();\n        if (this.toDeactivate.disposed || !this.styleSheetContent) {\n            return;\n        }\n        const styleElement = document.createElement('style');\n        styleElement.type = 'text/css';\n        styleElement.className = 'theia-icon-theme';\n        styleElement.innerText = this.styleSheetContent;\n        document.head.appendChild(styleElement);\n        const toRemoveStyleElement = Disposable.create(() => styleElement.remove());\n        this.toDisposeStyleElement.push(toRemoveStyleElement);\n        this.toDeactivate.push(toRemoveStyleElement);\n        this.fireDidChange();\n    }\n\n    protected reload = debounce(() => {\n        this.toUnload.dispose();\n        this.doActivate();\n    }, 50);\n\n    /**\n     * This should be aligned with\n     * https://github.com/microsoft/vscode/blob/7cf4cca47aa025a590fc939af54932042302be63/src/vs/workbench/services/themes/browser/fileIconThemeData.ts#L201\n     */\n    protected async load(): Promise<void> {\n        if (this.styleSheetContent !== undefined) {\n            return;\n        }\n        this.styleSheetContent = '';\n        this.toUnload.push(Disposable.create(() => {\n            this.styleSheetContent = undefined;\n            this.hasFileIcons = undefined;\n            this.hasFolderIcons = undefined;\n            this.hidesExplorerArrows = undefined;\n            this.icons.clear();\n        }));\n\n        const uri = new URI(this.uri);\n        const result = await this.fileService.read(uri);\n        const content = result.value;\n        const json: RecursivePartial<PluginIconThemeDocument> = jsoncparser.parse(content, undefined, { disallowComments: false });\n        this.hidesExplorerArrows = !!json.hidesExplorerArrows;\n\n        const toUnwatch = this.fileService.watch(uri);\n        if (this.toUnload.disposed) {\n            toUnwatch.dispose();\n        } else {\n            this.toUnload.push(toUnwatch);\n            this.toUnload.push(this.fileService.onDidFilesChange(e => {\n                if (e.contains(uri, FileChangeType.ADDED) || e.contains(uri, FileChangeType.UPDATED)) {\n                    this.reload();\n                }\n            }));\n        }\n\n        const iconDefinitions = json.iconDefinitions;\n        if (!iconDefinitions) {\n            return;\n        }\n        const definitionSelectors = new Map<string, string[]>();\n        const acceptSelector = (themeType: ThemeType, definitionId: string, ...icons: string[]) => {\n            if (!iconDefinitions[definitionId]) {\n                return;\n            }\n            let selector = '';\n            for (const icon of icons) {\n                if (icon) {\n                    selector += '.' + icon;\n                    this.icons.add(icon);\n                }\n            }\n            if (!selector) {\n                return;\n            }\n            const selectors = definitionSelectors.get(definitionId) || [];\n            if (themeType !== 'dark') {\n                selector = '.theia-' + themeType + ' ' + selector;\n            }\n            selectors.push(selector);\n            selectors.push(selector + '::before');\n            definitionSelectors.set(definitionId, selectors);\n        };\n        this.collectSelectors(json, acceptSelector.bind(undefined, 'dark'));\n        if (json.light) {\n            this.collectSelectors(json.light, acceptSelector.bind(undefined, 'light'));\n        }\n        if (json.highContrast) {\n            this.collectSelectors(json.highContrast, acceptSelector.bind(undefined, 'hc'));\n        }\n\n        if (!this.icons.size) {\n            return;\n        }\n\n        const fonts = json.fonts;\n        if (Array.isArray(fonts)) {\n            for (const font of fonts) {\n                if (font) {\n                    let src = '';\n                    if (Array.isArray(font.src)) {\n                        for (const srcLocation of font.src) {\n                            if (srcLocation && srcLocation.path) {\n                                const cssUrl = this.toCSSUrl(srcLocation.path);\n                                if (cssUrl) {\n                                    if (src) {\n                                        src += ', ';\n                                    }\n                                    src += `${cssUrl} format('${srcLocation.format}')`;\n                                }\n                            }\n                        }\n                    }\n                    if (src) {\n                        this.styleSheetContent += `@font-face {\n    src: ${src};\n    font-family: '${font.id}';\n    font-weight: ${font.weight};\n    font-style: ${font.style};\n}\n`;\n                    }\n                }\n            }\n            const firstFont = fonts[0];\n            if (firstFont && firstFont.id) {\n                this.styleSheetContent += `.${this.fileIcon}::before, .${this.folderIcon}::before, .${this.rootFolderIcon}::before {\n    font-family: '${firstFont.id}';\n    font-size: ${firstFont.size || '150%'};\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    vertical-align: top;\n}\n`;\n            }\n        }\n\n        for (const definitionId of definitionSelectors.keys()) {\n            const iconDefinition = iconDefinitions[definitionId];\n            const selectors = definitionSelectors.get(definitionId);\n            if (selectors && iconDefinition) {\n                const cssUrl = this.toCSSUrl(iconDefinition.iconPath);\n                if (cssUrl) {\n                    this.styleSheetContent += `${selectors.join(', ')} {\n    content: ' ';\n    background-image: ${cssUrl};\n    background-size: 16px;\n    background-position: left center;\n    background-repeat: no-repeat;\n}\n`;\n                }\n                if (iconDefinition.fontCharacter || iconDefinition.fontColor) {\n                    let body = '';\n                    if (iconDefinition.fontColor) {\n                        body += ` color: ${iconDefinition.fontColor};`;\n                    }\n                    if (iconDefinition.fontCharacter) {\n                        body += ` content: '${iconDefinition.fontCharacter}';`;\n                    }\n                    if (iconDefinition.fontSize) {\n                        body += ` font-size: ${iconDefinition.fontSize};`;\n                    }\n                    if (iconDefinition.fontId) {\n                        body += ` font-family: ${iconDefinition.fontId};`;\n                    }\n                    this.styleSheetContent += `${selectors.join(', ')} {${body} }\\n`;\n                }\n            }\n        }\n    }\n\n    protected toCSSUrl(iconPath: string | undefined): string | undefined {\n        if (!iconPath) {\n            return undefined;\n        }\n        const iconUri = this.locationUri.resolve(iconPath);\n        const relativePath = this.packageRootUri.path.relative(iconUri.path.normalize());\n        return relativePath && `url('${new Endpoint({\n            path: `hostedPlugin/${this.pluginId}/${encodeURIComponent(relativePath.normalize().toString())}`\n        }).getRestUrl().toString()}')`;\n    }\n\n    protected escapeCSS(value: string): string {\n        value = value.replace(/[^\\-a-zA-Z0-9]/g, '-');\n        if (value.charAt(0).match(/[0-9\\-]/)) {\n            value = '-' + value;\n        }\n        return value;\n    }\n\n    protected readonly fileIcon = 'theia-plugin-file-icon';\n    protected readonly folderIcon = 'theia-plugin-folder-icon';\n    protected readonly folderExpandedIcon = 'theia-plugin-folder-expanded-icon';\n    protected readonly rootFolderIcon = 'theia-plugin-root-folder-icon';\n    protected readonly rootFolderExpandedIcon = 'theia-plugin-root-folder-expanded-icon';\n    protected folderNameIcon(folderName: string): string {\n        return 'theia-plugin-' + this.escapeCSS(folderName.toLowerCase()) + '-folder-name-icon';\n    }\n    protected expandedFolderNameIcon(folderName: string): string {\n        return 'theia-plugin-' + this.escapeCSS(folderName.toLowerCase()) + '-expanded-folder-name-icon';\n    }\n    protected fileNameIcon(fileName: string): string[] {\n        fileName = fileName.toLowerCase();\n        const extIndex = fileName.indexOf('.');\n        const icons = extIndex !== -1 ? this.fileExtensionIcon(fileName.substr(extIndex + 1)) : [];\n        icons.unshift('theia-plugin-' + this.escapeCSS(fileName) + '-file-name-icon');\n        return icons;\n    }\n    protected fileExtensionIcon(fileExtension: string): string[] {\n        fileExtension = fileExtension.toString();\n        const icons = [];\n        const segments = fileExtension.split('.');\n        if (segments.length) {\n            if (segments.length) {\n                for (let i = 0; i < segments.length; i++) {\n                    icons.push('theia-plugin-' + this.escapeCSS(segments.slice(i).join('.')) + '-ext-file-icon');\n                }\n                icons.push('theia-plugin-ext-file-icon'); // extra segment to increase file-ext score\n            }\n        }\n        return icons;\n    }\n    protected languageIcon(languageId: string): string {\n        return 'theia-plugin-' + this.escapeCSS(languageId) + '-lang-file-icon';\n    }\n\n    protected collectSelectors(\n        associations: RecursivePartial<PluginIconsAssociation>,\n        accept: (definitionId: string, ...icons: string[]) => void\n    ): void {\n        if (associations.folder) {\n            accept(associations.folder, this.folderIcon);\n            this.hasFolderIcons = true;\n        }\n        if (associations.folderExpanded) {\n            accept(associations.folderExpanded, this.folderExpandedIcon);\n            this.hasFolderIcons = true;\n        }\n        const rootFolder = associations.rootFolder || associations.folder;\n        if (rootFolder) {\n            accept(rootFolder, this.rootFolderIcon);\n            this.hasFolderIcons = true;\n        }\n        const rootFolderExpanded = associations.rootFolderExpanded || associations.folderExpanded;\n        if (rootFolderExpanded) {\n            accept(rootFolderExpanded, this.rootFolderExpandedIcon);\n            this.hasFolderIcons = true;\n        }\n        if (associations.file) {\n            accept(associations.file, this.fileIcon);\n            this.hasFileIcons = true;\n        }\n        const folderNames = associations.folderNames;\n        if (folderNames) {\n            // eslint-disable-next-line guard-for-in\n            for (const folderName in folderNames) {\n                accept(folderNames[folderName]!, this.folderNameIcon(folderName), this.folderIcon);\n                this.hasFolderIcons = true;\n            }\n        }\n        const folderNamesExpanded = associations.folderNamesExpanded;\n        if (folderNamesExpanded) {\n            // eslint-disable-next-line guard-for-in\n            for (const folderName in folderNamesExpanded) {\n                accept(folderNamesExpanded[folderName]!, this.expandedFolderNameIcon(folderName), this.folderExpandedIcon);\n                this.hasFolderIcons = true;\n            }\n        }\n        const languageIds = associations.languageIds;\n        if (languageIds) {\n            if (!languageIds.jsonc && languageIds.json) {\n                languageIds.jsonc = languageIds.json;\n            }\n            // eslint-disable-next-line guard-for-in\n            for (const languageId in languageIds) {\n                accept(languageIds[languageId]!, this.languageIcon(languageId), this.fileIcon);\n                this.hasFileIcons = true;\n            }\n        }\n        const fileExtensions = associations.fileExtensions;\n        if (fileExtensions) {\n            // eslint-disable-next-line guard-for-in\n            for (const fileExtension in fileExtensions) {\n                accept(fileExtensions[fileExtension]!, ...this.fileExtensionIcon(fileExtension), this.fileIcon);\n                this.hasFileIcons = true;\n            }\n        }\n        const fileNames = associations.fileNames;\n        if (fileNames) {\n            // eslint-disable-next-line guard-for-in\n            for (const fileName in fileNames) {\n                accept(fileNames[fileName]!, ...this.fileNameIcon(fileName), this.fileIcon);\n                this.hasFileIcons = true;\n            }\n        }\n    }\n\n    /**\n     * This should be aligned with\n     * https://github.com/microsoft/vscode/blob/7cf4cca47aa025a590fc939af54932042302be63/src/vs/editor/common/services/getIconClasses.ts#L5\n     */\n    getIcon(element: URI | URIIconReference | FileStat | FileStatNode | WorkspaceRootNode): string {\n        let icon = '';\n        for (const className of this.getClassNames(element)) {\n            if (this.icons.has(className)) {\n                if (icon) {\n                    icon += ' ';\n                }\n                icon += className;\n            }\n        }\n        return icon;\n    }\n\n    protected getClassNames(element: URI | URIIconReference | FileStat | FileStatNode | WorkspaceRootNode): string[] {\n        if (WorkspaceRootNode.is(element)) {\n            const name = this.labelProvider.getName(element);\n            if (element.expanded) {\n                return [this.rootFolderExpandedIcon, this.expandedFolderNameIcon(name)];\n            }\n            return [this.rootFolderIcon, this.folderNameIcon(name)];\n        }\n        if (DirNode.is(element)) {\n            if (element.expanded) {\n                const name = this.labelProvider.getName(element);\n                return [this.folderExpandedIcon, this.expandedFolderNameIcon(name)];\n            }\n            return this.getFolderClassNames(element);\n        }\n        if (FileStatNode.is(element)) {\n            return this.getFileClassNames(element, element.fileStat.resource.toString());\n        }\n        if (FileStat.is(element)) {\n            if (element.isDirectory) {\n                return this.getFolderClassNames(element);\n            }\n            return this.getFileClassNames(element, element.resource.toString());\n        }\n        if (URIIconReference.is(element)) {\n            if (element.id === 'folder') {\n                return this.getFolderClassNames(element);\n            }\n            return this.getFileClassNames(element, element.uri && element.uri.toString());\n        }\n        return this.getFileClassNames(element, element.toString());\n    }\n\n    protected getFolderClassNames(element: object): string[] {\n        const name = this.labelProvider.getName(element);\n        return [this.folderIcon, this.folderNameIcon(name)];\n    }\n\n    protected getFileClassNames(element: object, uri?: string): string[] {\n        const name = this.labelProvider.getName(element);\n        const classNames = this.fileNameIcon(name);\n        if (uri) {\n            const language = monaco.services.StaticServices.modeService.get().createByFilepathOrFirstLine(monaco.Uri.parse(uri));\n            classNames.push(this.languageIcon(language.languageIdentifier.language));\n            classNames.unshift(this.fileIcon);\n        }\n        return classNames;\n    }\n\n}\n\n@injectable()\nexport class PluginIconThemeService implements LabelProviderContribution {\n\n    @inject(IconThemeService)\n    protected readonly iconThemeService: IconThemeService;\n\n    @inject(PluginIconThemeFactory)\n    protected readonly iconThemeFactory: PluginIconThemeFactory;\n\n    protected readonly onDidChangeEmitter = new Emitter<DidChangeLabelEvent>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n\n    protected fireDidChange(): void {\n        this.onDidChangeEmitter.fire({ affects: () => true });\n    }\n\n    register(contribution: IconThemeContribution, plugin: DeployedPlugin): Disposable {\n        const pluginId = getPluginId(plugin.metadata.model);\n        const packageUri = plugin.metadata.model.packageUri;\n        const iconTheme = this.iconThemeFactory({\n            id: contribution.id,\n            label: contribution.label || new URI(contribution.uri).path.base,\n            description: contribution.description,\n            uri: contribution.uri,\n            uiTheme: contribution.uiTheme,\n            pluginId,\n            packageUri\n        });\n        return new DisposableCollection(\n            iconTheme,\n            iconTheme.onDidChange(() => this.fireDidChange()),\n            this.iconThemeService.register(iconTheme)\n        );\n    }\n\n    canHandle(element: object): number {\n        const current = this.iconThemeService.getDefinition(this.iconThemeService.current);\n        if (current instanceof PluginIconTheme && (\n            (element instanceof URI && element.scheme === 'file') || URIIconReference.is(element) || FileStat.is(element) || FileStatNode.is(element)\n        )) {\n            return Number.MAX_SAFE_INTEGER;\n        }\n        return 0;\n    }\n\n    getIcon(element: URI | URIIconReference | FileStat | FileStatNode | WorkspaceRootNode): string | undefined {\n        const current = this.iconThemeService.getDefinition(this.iconThemeService.current);\n        if (current instanceof PluginIconTheme) {\n            return current.getIcon(element);\n        }\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { ThemeService, Theme } from '@theia/core/lib/browser/theming';\nimport { IconUrl } from '../../common/plugin-protocol';\nimport { Reference, SyncReferenceCollection } from '@theia/core/lib/common/reference';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\n\nexport interface PluginIconKey {\n    url: IconUrl\n    size: number\n}\n\nexport interface PluginIcon extends Disposable {\n    readonly iconClass: string\n}\n\n@injectable()\nexport class PluginSharedStyle {\n\n    protected style: HTMLStyleElement;\n    protected readonly rules: {\n        selector: string;\n        body: (theme: Theme) => string\n    }[] = [];\n\n    constructor() {\n        this.update();\n        ThemeService.get().onThemeChange(() => this.update());\n    }\n\n    protected readonly toUpdate = new DisposableCollection();\n    protected update(): void {\n        this.toUpdate.dispose();\n\n        const style = this.style = document.createElement('style');\n        style.type = 'text/css';\n        style.media = 'screen';\n        document.getElementsByTagName('head')[0].appendChild(style);\n        this.toUpdate.push(Disposable.create(() =>\n            document.getElementsByTagName('head')[0].removeChild(style)\n        ));\n\n        for (const rule of this.rules) {\n            this.doInsertRule(rule);\n        }\n    }\n\n    insertRule(selector: string, body: (theme: Theme) => string): Disposable {\n        const rule = { selector, body };\n        this.rules.push(rule);\n        this.doInsertRule(rule);\n        return Disposable.create(() => {\n            const index = this.rules.indexOf(rule);\n            if (index !== -1) {\n                this.rules.splice(index, 1);\n                this.deleteRule(selector);\n            }\n        });\n    }\n    protected doInsertRule({ selector, body }: {\n        selector: string;\n        body: (theme: Theme) => string\n    }): void {\n        const sheet = (<CSSStyleSheet>this.style.sheet);\n        const cssBody = body(ThemeService.get().getCurrentTheme());\n        sheet.insertRule(selector + ' {\\n' + cssBody + '\\n}', 0);\n    }\n    deleteRule(selector: string): void {\n        const sheet = (<CSSStyleSheet>this.style.sheet);\n        const rules = sheet.rules || sheet.cssRules || [];\n        for (let i = rules.length - 1; i >= 0; i--) {\n            const rule = rules[i];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if ((<any>rule).selectorText.indexOf(selector) !== -1) {\n                sheet.deleteRule(i);\n            }\n        }\n    }\n\n    private readonly icons = new SyncReferenceCollection<PluginIconKey, PluginIcon>(key => this.createPluginIcon(key));\n    toIconClass(url: IconUrl, { size }: { size: number } = { size: 16 }): Reference<PluginIcon> {\n        return this.icons.acquire({ url, size });\n    }\n\n    private iconSequence = 0;\n    protected createPluginIcon(key: PluginIconKey): PluginIcon {\n        const iconUrl = key.url;\n        const size = key.size;\n        const darkIconUrl = PluginSharedStyle.toExternalIconUrl(`${typeof iconUrl === 'object' ? iconUrl.dark : iconUrl}`);\n        const lightIconUrl = PluginSharedStyle.toExternalIconUrl(`${typeof iconUrl === 'object' ? iconUrl.light : iconUrl}`);\n        const iconClass = 'plugin-icon-' + this.iconSequence++;\n        const toDispose = new DisposableCollection();\n        toDispose.push(this.insertRule('.' + iconClass, theme => `\n                display: inline-block;\n                background-position: 2px;\n                width: ${size}px;\n                height: ${size}px;\n                background: no-repeat url(\"${theme.type === 'light' ? lightIconUrl : darkIconUrl}\");\n                background-size: ${size}px;\n            `));\n        return {\n            iconClass,\n            dispose: () => toDispose.dispose()\n        };\n    }\n\n    static toExternalIconUrl(iconUrl: string): string {\n        if (iconUrl.startsWith('hostedPlugin/')) {\n            return new Endpoint({ path: iconUrl }).getRestUrl().toString();\n        }\n        return iconUrl;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { StorageMain } from '../../common/plugin-api-rpc';\nimport { PluginServer, PluginStorageKind } from '../../common/plugin-protocol';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from '../../common/types';\nimport { WorkspaceService } from '@theia/workspace/lib/browser/workspace-service';\n\nexport class StorageMainImpl implements StorageMain {\n\n    private readonly pluginServer: PluginServer;\n    private readonly workspaceService: WorkspaceService;\n\n    constructor(container: interfaces.Container) {\n        this.pluginServer = container.get(PluginServer);\n        this.workspaceService = container.get(WorkspaceService);\n    }\n\n    $set(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean> {\n        return this.pluginServer.setStorageValue(key, value, this.toKind(isGlobal));\n    }\n\n    $get(key: string, isGlobal: boolean): Promise<KeysToAnyValues> {\n        return this.pluginServer.getStorageValue(key, this.toKind(isGlobal));\n    }\n\n    $getAll(isGlobal: boolean): Promise<KeysToKeysToAnyValue> {\n        return this.pluginServer.getAllStorageValues(this.toKind(isGlobal));\n    }\n\n    protected toKind(isGlobal: boolean): PluginStorageKind {\n        if (isGlobal) {\n            return undefined;\n        }\n        return {\n            workspace: this.workspaceService.workspace?.resource.toString(),\n            roots: this.workspaceService.tryGetRoots().map(root => root.resource.toString())\n        };\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from '@theia/core/shared/inversify';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocol, RPCProtocolImpl } from '../../common/rpc-protocol';\n\n@injectable()\nexport class PluginWorker {\n\n    private worker: Worker;\n    public readonly rpc: RPCProtocol;\n    constructor() {\n        const emitter = new Emitter<string>();\n        this.worker = new (require('../../hosted/browser/worker/worker-main'));\n        this.worker.onmessage = message => {\n            emitter.fire(message.data);\n        };\n        this.worker.onerror = e => console.error(e);\n\n        this.rpc = new RPCProtocolImpl({\n            onMessage: emitter.event,\n            send: (m: string) => {\n                this.worker.postMessage(m);\n            }\n        });\n\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PreferenceService,\n    PreferenceServiceImpl,\n    PreferenceScope,\n    PreferenceProviderProvider\n} from '@theia/core/lib/browser/preferences';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport {\n    MAIN_RPC_CONTEXT,\n    PreferenceRegistryExt,\n    PreferenceRegistryMain,\n    PreferenceData,\n    PreferenceChangeExt,\n} from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { ConfigurationTarget } from '../../plugin/types-impl';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { FileStat } from '@theia/filesystem/lib/common/files';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport function getPreferences(preferenceProviderProvider: PreferenceProviderProvider, rootFolders: FileStat[]): PreferenceData {\n    const folders = rootFolders.map(root => root.resource.toString());\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return PreferenceScope.getScopes().reduce((result: { [key: number]: any }, scope: PreferenceScope) => {\n        result[scope] = {};\n        const provider = preferenceProviderProvider(scope);\n        if (scope === PreferenceScope.Folder) {\n            for (const f of folders) {\n                const folderPrefs = provider.getPreferences(f);\n                result[scope][f] = folderPrefs;\n            }\n        } else {\n            result[scope] = provider.getPreferences();\n        }\n        return result;\n    }, {} as PreferenceData);\n}\n\nexport class PreferenceRegistryMainImpl implements PreferenceRegistryMain, Disposable {\n    private readonly proxy: PreferenceRegistryExt;\n    private readonly preferenceService: PreferenceService;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(prc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = prc.getProxy(MAIN_RPC_CONTEXT.PREFERENCE_REGISTRY_EXT);\n        this.preferenceService = container.get(PreferenceService);\n        const preferenceProviderProvider = container.get<PreferenceProviderProvider>(PreferenceProviderProvider);\n        const preferenceServiceImpl = container.get(PreferenceServiceImpl);\n        const workspaceService = container.get(WorkspaceService);\n\n        this.toDispose.push(preferenceServiceImpl.onPreferencesChanged(changes => {\n            // it HAS to be synchronous to propagate changes before update/remove response\n\n            const roots = workspaceService.tryGetRoots();\n            const data = getPreferences(preferenceProviderProvider, roots);\n            const eventData: PreferenceChangeExt[] = [];\n            for (const preferenceName of Object.keys(changes)) {\n                const { newValue } = changes[preferenceName];\n                eventData.push({ preferenceName, newValue });\n            }\n            this.proxy.$acceptConfigurationChanged(data, eventData);\n        }));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async $updateConfigurationOption(target: boolean | ConfigurationTarget | undefined, key: string, value: any, resource?: string): Promise<void> {\n        const scope = this.parseConfigurationTarget(target);\n        await this.preferenceService.set(key, value, scope, resource);\n    }\n\n    async $removeConfigurationOption(target: boolean | ConfigurationTarget | undefined, key: string, resource?: string): Promise<void> {\n        const scope = this.parseConfigurationTarget(target);\n        await this.preferenceService.set(key, undefined, scope, resource);\n    }\n\n    private parseConfigurationTarget(target?: boolean | ConfigurationTarget): PreferenceScope | undefined {\n        if (typeof target === 'boolean') {\n            return target ? PreferenceScope.User : PreferenceScope.Workspace;\n        }\n        switch (target) {\n            case ConfigurationTarget.Global:\n                return PreferenceScope.User;\n            case ConfigurationTarget.Workspace:\n                return PreferenceScope.Workspace;\n            case ConfigurationTarget.WorkspaceFolder:\n                return PreferenceScope.Folder;\n            default:\n                // PreferenceService knows how to deal with undefined in VS Code compatible way\n                return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { InputBoxOptions, QuickPickItem as QuickPickItemExt } from '@theia/plugin';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport {\n    QuickOpenModel,\n    QuickOpenItem,\n    QuickOpenMode\n} from '@theia/core/lib/browser/quick-open/quick-open-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport {\n    QuickOpenExt,\n    QuickOpenMain,\n    MAIN_RPC_CONTEXT,\n    PickOptions,\n    PickOpenItem,\n    TransferInputBox,\n    QuickInputTitleButtonHandle,\n    TransferQuickPick\n} from '../../common/plugin-api-rpc';\nimport { MonacoQuickOpenService } from '@theia/monaco/lib/browser/monaco-quick-open-service';\nimport { QuickInputService, LabelProvider } from '@theia/core/lib/browser';\nimport { PluginSharedStyle } from './plugin-shared-style';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { ThemeIcon, QuickInputButton } from '../../plugin/types-impl';\nimport { QuickPickService, QuickPickItem, QuickPickValue } from '@theia/core/lib/common/quick-pick-service';\nimport { QuickTitleBar } from '@theia/core/lib/browser/quick-open/quick-title-bar';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { QuickTitleButtonSide, QuickOpenGroupItem } from '@theia/core/lib/common/quick-open-model';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\n\nexport class QuickOpenMainImpl implements QuickOpenMain, QuickOpenModel, Disposable {\n\n    private quickInput: QuickInputService;\n    private quickPick: QuickPickService;\n    private quickTitleBar: QuickTitleBar;\n    private doResolve: (value?: number | number[] | PromiseLike<number | number[]> | undefined) => void;\n    private proxy: QuickOpenExt;\n    private delegate: MonacoQuickOpenService;\n    private acceptor: ((items: QuickOpenItem[]) => void) | undefined;\n    private items: QuickOpenItem[] | undefined;\n\n    private readonly sharedStyle: PluginSharedStyle;\n    private readonly labelProvider: LabelProvider;\n\n    private activeElement: HTMLElement | undefined;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.QUICK_OPEN_EXT);\n        this.delegate = container.get(MonacoQuickOpenService);\n        this.quickInput = container.get(QuickInputService);\n        this.quickTitleBar = container.get(QuickTitleBar);\n        this.quickPick = container.get(QuickPickService);\n        this.sharedStyle = container.get(PluginSharedStyle);\n        this.labelProvider = container.get(LabelProvider);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private cleanUp(): void {\n        this.items = undefined;\n        this.acceptor = undefined;\n        if (this.activeElement) {\n            this.activeElement.focus({ preventScroll: true });\n        }\n        this.activeElement = undefined;\n    }\n\n    $show(options: PickOptions, token: CancellationToken): Promise<number | number[]> {\n        return new Promise((resolve, reject) => {\n            if (token.isCancellationRequested) {\n                resolve(undefined);\n                return;\n            }\n            this.doResolve = resolve;\n            this.activeElement = window.document.activeElement as HTMLElement;\n            const toDispose = token.onCancellationRequested(() =>\n                this.delegate.hide()\n            );\n            this.delegate.open(this, {\n                fuzzyMatchDescription: options.matchOnDescription,\n                fuzzyMatchLabel: true,\n                fuzzyMatchDetail: options.matchOnDetail,\n                placeholder: options.placeHolder,\n                ignoreFocusOut: options.ignoreFocusLost,\n                onClose: () => {\n                    this.doResolve(undefined);\n                    toDispose.dispose();\n                    this.cleanUp();\n                }\n            });\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $setItems(items: PickOpenItem[]): Promise<any> {\n        this.items = [];\n        for (const i of items) {\n            let item: QuickOpenItem | QuickOpenGroupItem;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const options: any = {\n                label: i.label,\n                description: i.description,\n                detail: i.detail,\n                run: (mode: QuickOpenMode) => {\n                    if (mode === QuickOpenMode.OPEN) {\n                        this.proxy.$onItemSelected(i.handle);\n                        this.doResolve(i.handle);\n                        this.cleanUp();\n                        return true;\n                    }\n                    return false;\n                }\n            };\n\n            if (i.groupLabel !== undefined || i.showBorder !== undefined) {\n                options.groupLabel = i.groupLabel;\n                options.showBorder = i.showBorder;\n                item = new QuickOpenGroupItem(options);\n            } else {\n                item = new QuickOpenItem(options);\n            }\n\n            this.items.push(item);\n        }\n        if (this.acceptor) {\n            this.acceptor(this.items);\n        }\n        return Promise.resolve();\n    }\n\n    private convertPickOpenItemToQuickOpenItem(items: PickOpenItem[]): QuickPickItem<number>[] {\n        const convertedItems: QuickPickValue<number>[] = [];\n        for (const i of items) {\n            convertedItems.push({\n                label: i.label,\n                description: i.description,\n                detail: i.detail,\n                value: i.handle\n            });\n        }\n        return convertedItems;\n    }\n\n    $input(options: InputBoxOptions, validateInput: boolean, token: CancellationToken): Promise<string | undefined> {\n        if (validateInput) {\n            options.validateInput = val => this.proxy.$validateInput(val);\n        }\n\n        return this.quickInput.open(options, token);\n    }\n\n    protected convertQuickInputButton(quickInputButton: QuickInputButton, index: number, toDispose: DisposableCollection): QuickInputTitleButtonHandle {\n        const currentIconPath = quickInputButton.iconPath;\n        let newIcon = '';\n        let newIconClass: string | undefined;\n        if ('id' in currentIconPath || currentIconPath instanceof ThemeIcon) {\n            newIconClass = this.resolveIconClassFromThemeIcon(currentIconPath);\n        } else if (currentIconPath instanceof URI) {\n            newIcon = currentIconPath.toString();\n        } else {\n            const { light, dark } = currentIconPath as { light: string | URI, dark: string | URI };\n            const themedIconClasses = {\n                light: light.toString(),\n                dark: dark.toString()\n            };\n            const reference = this.sharedStyle.toIconClass(themedIconClasses);\n            toDispose.push(reference);\n            newIconClass = reference.object.iconClass;\n        }\n\n        const isDefaultQuickInputButton = 'id' in quickInputButton.iconPath && quickInputButton.iconPath.id === 'Back' ? true : false;\n        return {\n            icon: newIcon,\n            iconClass: newIconClass,\n            tooltip: quickInputButton.tooltip,\n            side: isDefaultQuickInputButton ? QuickTitleButtonSide.LEFT : QuickTitleButtonSide.RIGHT,\n            index: isDefaultQuickInputButton ? -1 : index\n        };\n    }\n\n    private resolveIconClassFromThemeIcon(themeIcon: ThemeIcon): string | undefined {\n        switch (themeIcon.id) {\n            case 'folder': {\n                return this.labelProvider.folderIcon;\n            }\n            case 'file': {\n                return this.labelProvider.fileIcon;\n            }\n            case 'Back': {\n                return 'fa fa-arrow-left';\n            }\n            default: {\n                return monaco.theme.ThemeIcon.asClassName(themeIcon);\n            }\n        }\n    }\n\n    async $showInputBox(inputBox: TransferInputBox, validateInput: boolean): Promise<void> {\n        if (validateInput) {\n            inputBox.validateInput = val => this.proxy.$validateInput(val);\n        }\n\n        const toDispose = new DisposableCollection();\n        const quickInput = this.quickInput.open({\n            busy: inputBox.busy,\n            enabled: inputBox.enabled,\n            ignoreFocusOut: inputBox.ignoreFocusOut,\n            password: inputBox.password,\n            step: inputBox.step,\n            title: inputBox.title,\n            totalSteps: inputBox.totalSteps,\n            buttons: inputBox.buttons.map((btn, i) => this.convertQuickInputButton(btn, i, toDispose)),\n            validationMessage: inputBox.validationMessage,\n            placeHolder: inputBox.placeholder,\n            value: inputBox.value,\n            prompt: inputBox.prompt,\n            validateInput: inputBox.validateInput\n        });\n\n        toDispose.push(this.quickInput.onDidAccept(() => this.proxy.$acceptOnDidAccept(inputBox.id)));\n        toDispose.push(this.quickInput.onDidChangeValue(changedText => this.proxy.$acceptDidChangeValue(inputBox.id, changedText)));\n        toDispose.push(this.quickTitleBar.onDidTriggerButton(button => {\n            this.proxy.$acceptOnDidTriggerButton(inputBox.id, button);\n        }));\n        this.toDispose.push(toDispose);\n        quickInput.then(() => {\n            if (toDispose.disposed) {\n                return;\n            }\n            this.proxy.$acceptOnDidHide(inputBox.id);\n            toDispose.dispose();\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private findChangedKey(key: string, value: any): void {\n        switch (key) {\n            case 'title': {\n                this.quickTitleBar.title = value;\n                break;\n            }\n            case 'step': {\n                this.quickTitleBar.step = value;\n                break;\n            }\n            case 'totalSteps': {\n                this.quickTitleBar.totalSteps = value;\n                break;\n            }\n            case 'buttons': {\n                this.quickTitleBar.buttons = value;\n                break;\n            }\n            case 'value': {\n                this.delegate.setValue(value);\n                break;\n            }\n            case 'enabled': {\n                this.delegate.setEnabled(value);\n                break;\n            }\n            case 'password': {\n                this.delegate.setPassword(value);\n                break;\n            }\n            case 'placeholder': {\n                this.delegate.setPlaceHolder(value);\n                break;\n            }\n            case 'items': {\n                this.quickPick.setItems(this.convertPickOpenItemToQuickOpenItem(value));\n                break;\n            }\n            // TODO selectedItems, activeItems and other properties\n            // TODO we need better type checking here\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $setQuickInputChanged(changed: any): void {\n        for (const key in changed) {\n            if (changed.hasOwnProperty(key)) {\n                const value = changed[key];\n                this.findChangedKey(key, value);\n            }\n        }\n    }\n    $refreshQuickInput(): void {\n        this.quickInput.refresh();\n    }\n\n    async $showCustomQuickPick<T extends QuickPickItemExt>(options: TransferQuickPick<T>): Promise<void> {\n        const toDispose = new DisposableCollection();\n        const quickPick = this.quickPick.show(this.convertPickOpenItemToQuickOpenItem(options.items), {\n            buttons: options.buttons.map((btn, i) => this.convertQuickInputButton(btn, i, toDispose)),\n            placeholder: options.placeholder,\n            fuzzyMatchDescription: options.matchOnDescription,\n            fuzzyMatchLabel: true,\n            step: options.step,\n            title: options.title,\n            totalSteps: options.totalSteps,\n            ignoreFocusOut: options.ignoreFocusOut,\n            value: options.value,\n            runIfSingle: false,\n        });\n\n        toDispose.push(this.quickPick.onDidAccept(() => this.proxy.$acceptOnDidAccept(options.id)));\n        toDispose.push(this.quickPick.onDidChangeActive((elements: QuickPickValue<number>[]) => {\n            this.proxy.$onDidChangeActive(options.id, elements.map(e => e.value));\n        }));\n        toDispose.push(this.quickPick.onDidChangeSelection((elements: QuickPickValue<number>[]) => {\n            this.proxy.$onDidChangeSelection(options.id, elements.map(e => e.value));\n        }));\n        toDispose.push(this.quickPick.onDidChangeValue(value => this.proxy.$acceptDidChangeValue(options.id, value)));\n        toDispose.push(this.quickTitleBar.onDidTriggerButton(button => {\n            this.proxy.$acceptOnDidTriggerButton(options.id, button);\n        }));\n        this.toDispose.push(toDispose);\n        quickPick.then(() => {\n            if (toDispose.disposed) {\n                return;\n            }\n            this.proxy.$acceptOnDidHide(options.id);\n            toDispose.dispose();\n        });\n    }\n\n    onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        this.acceptor = acceptor;\n        if (this.items) {\n            acceptor(this.items);\n        }\n    }\n\n    $hide(): void {\n        this.delegate.hide();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019-2021 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/browser/mainThreadSCM.ts\n\nimport {\n    MAIN_RPC_CONTEXT,\n    ScmExt,\n    SourceControlGroupFeatures,\n    ScmMain,\n    SourceControlProviderFeatures,\n    ScmRawResourceSplices, ScmRawResourceGroup\n} from '../../common/plugin-api-rpc';\nimport { ScmProvider, ScmResource, ScmResourceDecorations, ScmResourceGroup, ScmCommand } from '@theia/scm/lib/browser/scm-provider';\nimport { ScmRepository } from '@theia/scm/lib/browser/scm-repository';\nimport { ScmService } from '@theia/scm/lib/browser/scm-service';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport URI from '@theia/core/lib/common/uri';\nimport { URI as vscodeURI } from '@theia/core/shared/vscode-uri';\nimport { Splice } from '../../common/arrays';\nimport { UriComponents } from '../../common/uri-components';\nimport { ColorRegistry } from '@theia/core/lib/browser/color-registry';\n\nexport class PluginScmResourceGroup implements ScmResourceGroup {\n\n    readonly resources: ScmResource[] = [];\n\n    private readonly onDidSpliceEmitter = new Emitter<Splice<ScmResource>>();\n    readonly onDidSplice = this.onDidSpliceEmitter.event;\n\n    get hideWhenEmpty(): boolean { return !!this.features.hideWhenEmpty; }\n\n    private readonly onDidChangeEmitter = new Emitter<void>();\n    readonly onDidChange: Event<void> = this.onDidChangeEmitter.event;\n\n    constructor(\n        readonly handle: number,\n        public provider: PluginScmProvider,\n        public features: SourceControlGroupFeatures,\n        public label: string,\n        public id: string\n    ) { }\n\n    splice(start: number, deleteCount: number, toInsert: ScmResource[]): void {\n        this.resources.splice(start, deleteCount, ...toInsert);\n        this.onDidSpliceEmitter.fire({ start, deleteCount, toInsert });\n    }\n\n    updateGroup(features: SourceControlGroupFeatures): void {\n        this.features = { ...this.features, ...features };\n        this.onDidChangeEmitter.fire();\n    }\n\n    updateGroupLabel(label: string): void {\n        this.label = label;\n        this.onDidChangeEmitter.fire();\n    }\n\n    dispose(): void { }\n}\n\nexport class PluginScmResource implements ScmResource {\n\n    constructor(\n        private readonly proxy: ScmExt,\n        private readonly sourceControlHandle: number,\n        private readonly groupHandle: number,\n        readonly handle: number,\n        readonly sourceUri: URI,\n        readonly group: PluginScmResourceGroup,\n        readonly decorations: ScmResourceDecorations,\n        readonly contextValue: string | undefined,\n        readonly command: ScmCommand | undefined\n    ) { }\n\n    open(): Promise<void> {\n        return this.proxy.$executeResourceCommand(this.sourceControlHandle, this.groupHandle, this.handle);\n    }\n}\n\nexport class PluginScmProvider implements ScmProvider {\n\n    private _id = this.contextValue;\n    get id(): string { return this._id; }\n\n    readonly groups: PluginScmResourceGroup[] = [];\n    private readonly groupsByHandle: { [handle: number]: PluginScmResourceGroup; } = Object.create(null);\n\n    private readonly onDidChangeResourcesEmitter = new Emitter<void>();\n    readonly onDidChangeResources: Event<void> = this.onDidChangeResourcesEmitter.event;\n\n    private features: SourceControlProviderFeatures = {};\n\n    get handle(): number { return this._handle; }\n    get label(): string { return this._label; }\n    get rootUri(): string { return this._rootUri ? this._rootUri.toString() : ''; }\n    get contextValue(): string { return this._contextValue; }\n\n    get commitTemplate(): string { return this.features.commitTemplate || ''; }\n    get acceptInputCommand(): ScmCommand | undefined {\n        const command = this.features.acceptInputCommand;\n        if (command) {\n            const scmCommand: ScmCommand = command;\n            scmCommand.command = command.id;\n            return scmCommand;\n        }\n    }\n    get statusBarCommands(): ScmCommand[] | undefined {\n        const commands = this.features.statusBarCommands;\n        return commands?.map(command => {\n            const scmCommand: ScmCommand = command;\n            scmCommand.command = command.id;\n            return scmCommand;\n        });\n    }\n    get count(): number | undefined { return this.features.count; }\n\n    private readonly onDidChangeCommitTemplateEmitter = new Emitter<string>();\n    readonly onDidChangeCommitTemplate: Event<string> = this.onDidChangeCommitTemplateEmitter.event;\n\n    private readonly onDidChangeStatusBarCommandsEmitter = new Emitter<ScmCommand[]>();\n    get onDidChangeStatusBarCommands(): Event<ScmCommand[]> { return this.onDidChangeStatusBarCommandsEmitter.event; }\n\n    private readonly onDidChangeEmitter = new Emitter<void>();\n    readonly onDidChange: Event<void> = this.onDidChangeEmitter.event;\n\n    constructor(\n        private readonly proxy: ScmExt,\n        private readonly colors: ColorRegistry,\n        private readonly _handle: number,\n        private readonly _contextValue: string,\n        private readonly _label: string,\n        private readonly _rootUri: vscodeURI | undefined\n    ) { }\n\n    updateSourceControl(features: SourceControlProviderFeatures): void {\n        this.features = { ...this.features, ...features };\n        this.onDidChangeEmitter.fire();\n\n        if (typeof features.commitTemplate !== 'undefined') {\n            this.onDidChangeCommitTemplateEmitter.fire(this.commitTemplate!);\n        }\n\n        if (typeof features.statusBarCommands !== 'undefined') {\n            this.onDidChangeStatusBarCommandsEmitter.fire(this.statusBarCommands!);\n        }\n    }\n\n    registerGroups(resourceGroups: ScmRawResourceGroup[]): void {\n        const groups = resourceGroups.map(resourceGroup => {\n            const { handle, id, label, features } = resourceGroup;\n            const group = new PluginScmResourceGroup(\n                handle,\n                this,\n                features,\n                label,\n                id\n            );\n\n            this.groupsByHandle[handle] = group;\n            return group;\n        });\n\n        this.groups.splice(this.groups.length, 0, ...groups);\n    }\n\n    updateGroup(handle: number, features: SourceControlGroupFeatures): void {\n        const group = this.groupsByHandle[handle];\n\n        if (!group) {\n            return;\n        }\n\n        group.updateGroup(features);\n    }\n\n    updateGroupLabel(handle: number, label: string): void {\n        const group = this.groupsByHandle[handle];\n\n        if (!group) {\n            return;\n        }\n\n        group.updateGroupLabel(label);\n    }\n\n    spliceGroupResourceStates(splices: ScmRawResourceSplices[]): void {\n        for (const splice of splices) {\n            const groupHandle = splice.handle;\n            const groupSlices = splice.splices;\n            const group = this.groupsByHandle[groupHandle];\n\n            if (!group) {\n                console.warn(`SCM group ${groupHandle} not found in provider ${this.label}`);\n                continue;\n            }\n\n            // reverse the splices sequence in order to apply them correctly\n            groupSlices.reverse();\n\n            for (const groupSlice of groupSlices) {\n                const { start, deleteCount, rawResources } = groupSlice;\n                const resources = rawResources.map(rawResource => {\n                    const { handle, sourceUri, icons, tooltip, strikeThrough, faded, contextValue, command } = rawResource;\n                    const icon = icons[0];\n                    const iconDark = icons[1] || icon;\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const colorVariable = (rawResource as any).colorId && this.colors.toCssVariableName((rawResource as any).colorId);\n                    const decorations = {\n                        icon: icon ? vscodeURI.revive(icon) : undefined,\n                        iconDark: iconDark ? vscodeURI.revive(iconDark) : undefined,\n                        tooltip,\n                        strikeThrough,\n                        // TODO remove the letter and colorId fields when the FileDecorationProvider is applied, see https://github.com/eclipse-theia/theia/pull/8911\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        letter: (rawResource as any).letter || '',\n                        color: colorVariable && `var(${colorVariable})`,\n                        faded\n                    } as ScmResourceDecorations;\n\n                    return new PluginScmResource(\n                        this.proxy,\n                        this.handle,\n                        groupHandle,\n                        handle,\n                        new URI(vscodeURI.revive(sourceUri)),\n                        group,\n                        decorations,\n                        contextValue || undefined,\n                        command\n                    );\n                });\n\n                group.splice(start, deleteCount, resources);\n            }\n        }\n\n        this.onDidChangeResourcesEmitter.fire();\n    }\n\n    unregisterGroup(handle: number): void {\n        const group = this.groupsByHandle[handle];\n\n        if (!group) {\n            return;\n        }\n\n        delete this.groupsByHandle[handle];\n        this.groups.splice(this.groups.indexOf(group), 1);\n    }\n\n    dispose(): void { }\n}\n\nexport class ScmMainImpl implements ScmMain {\n\n    private readonly proxy: ScmExt;\n    private readonly scmService: ScmService;\n    private repositories = new Map<number, ScmRepository>();\n    private repositoryDisposables = new Map<number, DisposableCollection>();\n    private readonly disposables = new DisposableCollection();\n    private readonly colors: ColorRegistry;\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.SCM_EXT);\n        this.scmService = container.get(ScmService);\n        this.colors = container.get(ColorRegistry);\n    }\n\n    dispose(): void {\n        this.repositories.forEach(r => r.dispose());\n        this.repositories.clear();\n\n        this.repositoryDisposables.forEach(d => d.dispose());\n        this.repositoryDisposables.clear();\n\n        this.disposables.dispose();\n    }\n\n    async $registerSourceControl(handle: number, id: string, label: string, rootUri: UriComponents | undefined): Promise<void> {\n        const provider = new PluginScmProvider(this.proxy, this.colors, handle, id, label, rootUri ? vscodeURI.revive(rootUri) : undefined);\n        const repository = this.scmService.registerScmProvider(provider, {\n            input: {\n                validator: async value => {\n                    const result = await this.proxy.$validateInput(handle, value, value.length);\n                    return result && { message: result[0], type: result[1] };\n                }\n            }\n        }\n        );\n        this.repositories.set(handle, repository);\n\n        const disposables = new DisposableCollection(\n            this.scmService.onDidChangeSelectedRepository(r => {\n                if (r === repository) {\n                    this.proxy.$setSelectedSourceControl(handle);\n                }\n            }),\n            repository.input.onDidChange(() => this.proxy.$onInputBoxValueChange(handle, repository.input.value))\n        );\n\n        if (this.scmService.selectedRepository === repository) {\n            setTimeout(() => this.proxy.$setSelectedSourceControl(handle), 0);\n        }\n\n        if (repository.input.value) {\n            setTimeout(() => this.proxy.$onInputBoxValueChange(handle, repository.input.value), 0);\n        }\n\n        this.repositoryDisposables.set(handle, disposables);\n    }\n\n    async $updateSourceControl(handle: number, features: SourceControlProviderFeatures): Promise<void> {\n        const repository = this.repositories.get(handle);\n\n        if (!repository) {\n            return;\n        }\n\n        const provider = repository.provider as PluginScmProvider;\n        provider.updateSourceControl(features);\n    }\n\n    async $unregisterSourceControl(handle: number): Promise<void> {\n        const repository = this.repositories.get(handle);\n\n        if (!repository) {\n            return;\n        }\n\n        this.repositoryDisposables.get(handle)!.dispose();\n        this.repositoryDisposables.delete(handle);\n\n        repository.dispose();\n        this.repositories.delete(handle);\n    }\n\n    $registerGroups(sourceControlHandle: number, groups: ScmRawResourceGroup[], splices: ScmRawResourceSplices[]): void {\n        const repository = this.repositories.get(sourceControlHandle);\n\n        if (!repository) {\n            return;\n        }\n\n        const provider = repository.provider as PluginScmProvider;\n        provider.registerGroups(groups);\n        provider.spliceGroupResourceStates(splices);\n    }\n\n    $updateGroup(sourceControlHandle: number, groupHandle: number, features: SourceControlGroupFeatures): void {\n        const repository = this.repositories.get(sourceControlHandle);\n\n        if (!repository) {\n            return;\n        }\n\n        const provider = repository.provider as PluginScmProvider;\n        provider.updateGroup(groupHandle, features);\n    }\n\n    $updateGroupLabel(sourceControlHandle: number, groupHandle: number, label: string): void {\n        const repository = this.repositories.get(sourceControlHandle);\n\n        if (!repository) {\n            return;\n        }\n\n        const provider = repository.provider as PluginScmProvider;\n        provider.updateGroupLabel(groupHandle, label);\n    }\n\n    $spliceResourceStates(sourceControlHandle: number, splices: ScmRawResourceSplices[]): void {\n        const repository = this.repositories.get(sourceControlHandle);\n\n        if (!repository) {\n            return;\n        }\n\n        const provider = repository.provider as PluginScmProvider;\n        provider.spliceGroupResourceStates(splices);\n    }\n\n    $unregisterGroup(sourceControlHandle: number, handle: number): void {\n        const repository = this.repositories.get(sourceControlHandle);\n\n        if (!repository) {\n            return;\n        }\n\n        const provider = repository.provider as PluginScmProvider;\n        provider.unregisterGroup(handle);\n    }\n\n    $setInputBoxValue(sourceControlHandle: number, value: string): void {\n        const repository = this.repositories.get(sourceControlHandle);\n\n        if (!repository) {\n            return;\n        }\n\n        repository.input.value = value;\n    }\n\n    $setInputBoxPlaceholder(sourceControlHandle: number, placeholder: string): void {\n        const repository = this.repositories.get(sourceControlHandle);\n\n        if (!repository) {\n            return;\n        }\n\n        repository.input.placeholder = placeholder;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2021 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.55.2/src/vs/workbench/api/browser/mainThreadSecretState.ts\n\nimport { SecretsExt, SecretsMain } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { MAIN_RPC_CONTEXT } from '../../common';\nimport { CredentialsService } from '@theia/core/lib/browser/credentials-service';\n\nexport class SecretsMainImpl implements SecretsMain {\n\n    private readonly proxy: SecretsExt;\n    private readonly credentialsService: CredentialsService;\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.SECRETS_EXT);\n        this.credentialsService = container.get(CredentialsService);\n        this.credentialsService.onDidChangePassword(e => {\n            const extensionId = e.service.substring(window.location.hostname.length + 1);\n            this.proxy.$onDidChangePassword({ extensionId, key: e.account });\n        });\n    }\n\n    private static getFullKey(extensionId: string): string {\n        return `${window.location.hostname}-${extensionId}`;\n    }\n\n    async $getPassword(extensionId: string, key: string): Promise<string | undefined> {\n        const fullKey = SecretsMainImpl.getFullKey(extensionId);\n        const passwordData = await this.credentialsService.getPassword(fullKey, key);\n\n        if (passwordData) {\n            try {\n                const data = JSON.parse(passwordData);\n                if (data.extensionId === extensionId) {\n                    return data.content;\n                }\n            } catch (e) {\n                throw new Error('Cannot get password');\n            }\n        }\n\n        return undefined;\n    }\n\n    async $setPassword(extensionId: string, key: string, value: string): Promise<void> {\n        const fullKey = SecretsMainImpl.getFullKey(extensionId);\n        const passwordData = JSON.stringify({\n            extensionId,\n            content: value\n        });\n        return this.credentialsService.setPassword(fullKey, key, passwordData);\n    }\n\n    async $deletePassword(extensionId: string, key: string): Promise<void> {\n        try {\n            const fullKey = SecretsMainImpl.getFullKey(extensionId);\n            await this.credentialsService.deletePassword(fullKey, key);\n        } catch (e) {\n            throw new Error('Cannot delete password');\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Command, CommandContribution, CommandRegistry } from '@theia/core/lib/common/command';\nimport { inject, injectable } from '@theia/core/shared/inversify';\nimport { UriAwareCommandHandler, UriCommandHandler } from '@theia/core/lib/common/uri-command-handler';\nimport URI from '@theia/core/lib/common/uri';\nimport { SelectionService } from '@theia/core';\nimport { theiaUritoUriComponents } from '../../common/uri-components';\n\nexport namespace SelectionProviderCommands {\n    export const GET_SELECTED_CONTEXT: Command = {\n        id: 'theia.plugin.workspace.selectedContext'\n    };\n}\n\n@injectable()\nexport class SelectionProviderCommandContribution implements CommandContribution {\n\n    @inject(SelectionService) protected readonly selectionService: SelectionService;\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(SelectionProviderCommands.GET_SELECTED_CONTEXT, this.newMultiUriAwareCommandHandler({\n            isEnabled: () => true,\n            isVisible: () => false,\n            execute: (selectedUris: URI[]) => selectedUris.map(uri => theiaUritoUriComponents(uri))\n        }));\n    }\n\n    protected newMultiUriAwareCommandHandler(handler: UriCommandHandler<URI[]>): UriAwareCommandHandler<URI[]> {\n        return UriAwareCommandHandler.MultiSelect(this.selectionService, handler);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport * as types from '../../plugin/types-impl';\nimport { StatusBarMessageRegistryMain } from '../../common/plugin-api-rpc';\nimport { StatusBar, StatusBarAlignment, StatusBarEntry } from '@theia/core/lib/browser/status-bar/status-bar';\nimport { ColorRegistry } from '@theia/core/lib/browser/color-registry';\n\nexport class StatusBarMessageRegistryMainImpl implements StatusBarMessageRegistryMain, Disposable {\n    private readonly delegate: StatusBar;\n    private readonly entries = new Map<string, StatusBarEntry>();\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as not disposed */ })\n    );\n\n    protected readonly colorRegistry: ColorRegistry;\n\n    constructor(container: interfaces.Container) {\n        this.delegate = container.get(StatusBar);\n        this.colorRegistry = container.get(ColorRegistry);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $setMessage(id: string,\n        text: string | undefined,\n        priority: number,\n        alignment: number,\n        color: string | undefined,\n        tooltip: string | undefined,\n        command: string | undefined,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        args: any[] | undefined): Promise<void> {\n        const entry = {\n            text: text || '',\n            priority,\n            alignment: alignment === types.StatusBarAlignment.Left ? StatusBarAlignment.LEFT : StatusBarAlignment.RIGHT,\n            color: color && (this.colorRegistry.getCurrentColor(color) || color),\n            tooltip,\n            command,\n            args\n        };\n\n        this.entries.set(id, entry);\n        await this.delegate.setElement(id, entry);\n        if (this.toDispose.disposed) {\n            this.$dispose(id);\n        } else {\n            this.toDispose.push(Disposable.create(() => this.$dispose(id)));\n        }\n    }\n\n    $dispose(id: string): void {\n        const entry = this.entries.get(id);\n        if (entry) {\n            this.entries.delete(id);\n            this.delegate.removeElement(id);\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    TasksMain,\n    MAIN_RPC_CONTEXT,\n    TaskExecutionDto,\n    TasksExt,\n    TaskDto,\n    TaskPresentationOptionsDTO\n} from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common';\nimport { TaskProviderRegistry, TaskResolverRegistry, TaskProvider, TaskResolver } from '@theia/task/lib/browser/task-contribution';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { TaskInfo, TaskExitedEvent, TaskConfiguration, TaskCustomization, TaskOutputPresentation, RevealKind, PanelKind } from '@theia/task/lib/common/task-protocol';\nimport { TaskWatcher } from '@theia/task/lib/common/task-watcher';\nimport { TaskService } from '@theia/task/lib/browser/task-service';\nimport { TaskDefinitionRegistry } from '@theia/task/lib/browser';\n\nconst revealKindMap = new Map<number | RevealKind, RevealKind | number>(\n    [\n        [1, RevealKind.Always],\n        [2, RevealKind.Silent],\n        [3, RevealKind.Never],\n        [RevealKind.Always, 1],\n        [RevealKind.Silent, 2],\n        [RevealKind.Never, 3]\n    ]\n);\n\nconst panelKindMap = new Map<number | PanelKind, PanelKind | number>(\n    [\n        [1, PanelKind.Shared],\n        [2, PanelKind.Dedicated],\n        [3, PanelKind.New],\n        [PanelKind.Shared, 1],\n        [PanelKind.Dedicated, 2],\n        [PanelKind.New, 3]\n    ]\n);\n\nexport class TasksMainImpl implements TasksMain, Disposable {\n    private readonly proxy: TasksExt;\n    private readonly taskProviderRegistry: TaskProviderRegistry;\n    private readonly taskResolverRegistry: TaskResolverRegistry;\n    private readonly taskWatcher: TaskWatcher;\n    private readonly taskService: TaskService;\n    private readonly taskDefinitionRegistry: TaskDefinitionRegistry;\n\n    private readonly taskProviders = new Map<number, Disposable>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.TASKS_EXT);\n        this.taskProviderRegistry = container.get(TaskProviderRegistry);\n        this.taskResolverRegistry = container.get(TaskResolverRegistry);\n        this.taskWatcher = container.get(TaskWatcher);\n        this.taskService = container.get(TaskService);\n        this.taskDefinitionRegistry = container.get(TaskDefinitionRegistry);\n\n        this.toDispose.push(this.taskWatcher.onTaskCreated((event: TaskInfo) => {\n            this.proxy.$onDidStartTask({\n                id: event.taskId,\n                task: this.fromTaskConfiguration(event.config)\n            }, event.terminalId!);\n        }));\n\n        this.toDispose.push(this.taskWatcher.onTaskExit((event: TaskExitedEvent) => {\n            this.proxy.$onDidEndTask(event.taskId);\n        }));\n\n        this.toDispose.push(this.taskWatcher.onDidStartTaskProcess((event: TaskInfo) => {\n            if (event.processId !== undefined) {\n                this.proxy.$onDidStartTaskProcess(event.processId, {\n                    id: event.taskId,\n                    task: this.fromTaskConfiguration(event.config)\n                });\n            }\n        }));\n\n        this.toDispose.push(this.taskWatcher.onDidEndTaskProcess((event: TaskExitedEvent) => {\n            if (event.code !== undefined) {\n                this.proxy.$onDidEndTaskProcess(event.code, event.taskId);\n            }\n        }));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    $registerTaskProvider(handle: number, type: string): void {\n        const taskProvider = this.createTaskProvider(handle);\n        const taskResolver = this.createTaskResolver(handle);\n\n        const toDispose = new DisposableCollection(\n            this.taskProviderRegistry.register(type, taskProvider, handle),\n            this.taskResolverRegistry.registerTaskResolver(type, taskResolver),\n            Disposable.create(() => this.taskProviders.delete(handle))\n        );\n        this.taskProviders.set(handle, toDispose);\n        this.toDispose.push(toDispose);\n    }\n\n    $unregister(handle: number): void {\n        const disposable = this.taskProviders.get(handle);\n        if (disposable) {\n            disposable.dispose();\n        }\n    }\n\n    async $fetchTasks(taskVersion: string | undefined, taskType: string | undefined): Promise<TaskDto[]> {\n        if (taskVersion && !taskVersion.startsWith('2.')) { // Theia does not support 1.x or earlier task versions\n            return [];\n        }\n\n        const token: number = this.taskService.startUserAction();\n        const [configured, provided] = await Promise.all([\n            this.taskService.getConfiguredTasks(token),\n            this.taskService.getProvidedTasks(token)\n        ]);\n        const result: TaskDto[] = [];\n        for (const tasks of [configured, provided]) {\n            for (const task of tasks) {\n                if (!taskType || (!!this.taskDefinitionRegistry.getDefinition(task) ? task._source === taskType : task.type === taskType)) {\n                    const { type, label, _scope, _source, ...properties } = task;\n                    const dto: TaskDto = { type, label, scope: _scope, source: _source };\n                    for (const key in properties) {\n                        if (properties.hasOwnProperty(key)) {\n                            dto[key] = properties[key];\n                        }\n                    }\n                    result.push(dto);\n                }\n            }\n        }\n        return result;\n    }\n\n    async $executeTask(taskDto: TaskDto): Promise<TaskExecutionDto | undefined> {\n        const taskConfig = this.toTaskConfiguration(taskDto);\n        const taskInfo = await this.taskService.runTask(taskConfig);\n        if (taskInfo) {\n            return {\n                id: taskInfo.taskId,\n                task: this.fromTaskConfiguration(taskInfo.config)\n            };\n        }\n    }\n\n    async $taskExecutions(): Promise<{\n        id: number;\n        task: TaskDto;\n    }[]> {\n        const runningTasks = await this.taskService.getRunningTasks();\n        return runningTasks.map(taskInfo => ({\n            id: taskInfo.taskId,\n            task: this.fromTaskConfiguration(taskInfo.config)\n        }));\n    }\n\n    $terminateTask(id: number): void {\n        this.taskService.kill(id);\n    }\n\n    async $customExecutionComplete(id: number, exitCode: number | undefined): Promise<void> {\n        this.taskService.customExecutionComplete(id, exitCode);\n    }\n\n    protected createTaskProvider(handle: number): TaskProvider {\n        return {\n            provideTasks: () =>\n                this.proxy.$provideTasks(handle).then(v =>\n                    v!.map(taskDto =>\n                        this.toTaskConfiguration(taskDto)\n                    )\n                )\n        };\n    }\n\n    protected createTaskResolver(handle: number): TaskResolver {\n        return {\n            resolveTask: taskConfig =>\n                this.proxy.$resolveTask(handle, this.fromTaskConfiguration(taskConfig)).then(v =>\n                    this.toTaskConfiguration(v!)\n                )\n        };\n    }\n\n    protected toTaskConfiguration(taskDto: TaskDto): TaskConfiguration {\n        const { group, presentation, scope, source, ...common } = taskDto;\n        const partialConfig: Partial<TaskConfiguration> = {};\n        if (presentation) {\n            partialConfig.presentation = this.convertTaskPresentation(presentation);\n        }\n        if (group === 'build' || group === 'test') {\n            partialConfig.group = group;\n        }\n        return {\n            ...common,\n            ...partialConfig,\n            _scope: scope,\n            _source: source,\n        };\n    }\n\n    protected fromTaskConfiguration(task: TaskConfiguration): TaskDto {\n        const { group, presentation, _scope, _source, ...common } = task;\n        const partialDto: Partial<TaskDto> = {};\n        if (presentation) {\n            partialDto.presentation = this.convertTaskPresentation(presentation);\n        }\n        if (group) {\n            if (TaskCustomization.isBuildTask(task)) {\n                partialDto.group = 'build';\n            } else if (TaskCustomization.isTestTask(task)) {\n                partialDto.group = 'test';\n            }\n        }\n        return {\n            ...common,\n            ...partialDto,\n            scope: _scope,\n            source: _source,\n        };\n    }\n\n    private convertTaskPresentation(presentationFrom: undefined): undefined;\n    private convertTaskPresentation(presentationFrom: TaskOutputPresentation): TaskPresentationOptionsDTO;\n    private convertTaskPresentation(presentationFrom: TaskPresentationOptionsDTO): TaskOutputPresentation;\n    private convertTaskPresentation(\n        presentationFrom: TaskOutputPresentation | TaskPresentationOptionsDTO | undefined\n    ): TaskOutputPresentation | TaskPresentationOptionsDTO | undefined {\n        if (presentationFrom) {\n            const { reveal, panel, ...common } = presentationFrom;\n            const presentationTo: Partial<TaskOutputPresentation | TaskPresentationOptionsDTO> = {};\n            if (reveal) {\n                presentationTo.reveal = revealKindMap.get(reveal);\n            }\n            if (panel) {\n                presentationTo.panel = panelKindMap.get(panel)!;\n            }\n            return {\n                ...common,\n                ...presentationTo,\n            };\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { ApplicationShell, WidgetOpenerOptions } from '@theia/core/lib/browser';\nimport { TerminalOptions } from '@theia/plugin';\nimport { TerminalWidget } from '@theia/terminal/lib/browser/base/terminal-widget';\nimport { TerminalService } from '@theia/terminal/lib/browser/base/terminal-service';\nimport { TerminalServiceMain, TerminalServiceExt, MAIN_RPC_CONTEXT } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { SerializableEnvironmentVariableCollection } from '@theia/terminal/lib/common/base-terminal-protocol';\nimport { ShellTerminalServerProxy } from '@theia/terminal/lib/common/shell-terminal-protocol';\n\n/**\n * Plugin api service allows working with terminal emulator.\n */\nexport class TerminalServiceMainImpl implements TerminalServiceMain, Disposable {\n\n    private readonly terminals: TerminalService;\n    private readonly shell: ApplicationShell;\n    private readonly extProxy: TerminalServiceExt;\n    private readonly shellTerminalServer: ShellTerminalServerProxy;\n\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.terminals = container.get(TerminalService);\n        this.shell = container.get(ApplicationShell);\n        this.shellTerminalServer = container.get(ShellTerminalServerProxy);\n        this.extProxy = rpc.getProxy(MAIN_RPC_CONTEXT.TERMINAL_EXT);\n        this.toDispose.push(this.terminals.onDidCreateTerminal(terminal => this.trackTerminal(terminal)));\n        for (const terminal of this.terminals.all) {\n            this.trackTerminal(terminal);\n        }\n        this.toDispose.push(this.terminals.onDidChangeCurrentTerminal(() => this.updateCurrentTerminal()));\n        this.updateCurrentTerminal();\n        if (this.shellTerminalServer.collections.size > 0) {\n            const collectionAsArray = [...this.shellTerminalServer.collections.entries()];\n            const serializedCollections: [string, SerializableEnvironmentVariableCollection][] = collectionAsArray.map(e => [e[0], [...e[1].map.entries()]]);\n            this.extProxy.$initEnvironmentVariableCollections(serializedCollections);\n        }\n    }\n\n    $setEnvironmentVariableCollection(extensionIdentifier: string, persistent: boolean, collection: SerializableEnvironmentVariableCollection | undefined): void {\n        if (collection) {\n            this.shellTerminalServer.setCollection(extensionIdentifier, persistent, collection);\n        } else {\n            this.shellTerminalServer.deleteCollection(extensionIdentifier);\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected updateCurrentTerminal(): void {\n        const { currentTerminal } = this.terminals;\n        this.extProxy.$currentTerminalChanged(currentTerminal && currentTerminal.id);\n    }\n\n    protected async trackTerminal(terminal: TerminalWidget): Promise<void> {\n        let name = terminal.title.label;\n        this.extProxy.$terminalCreated(terminal.id, name);\n        const updateTitle = () => {\n            if (name !== terminal.title.label) {\n                name = terminal.title.label;\n                this.extProxy.$terminalNameChanged(terminal.id, name);\n            }\n        };\n        terminal.title.changed.connect(updateTitle);\n        this.toDispose.push(Disposable.create(() => terminal.title.changed.disconnect(updateTitle)));\n\n        const updateProcessId = () => terminal.processId.then(\n            processId => this.extProxy.$terminalOpened(terminal.id, processId, terminal.terminalId, terminal.dimensions.cols, terminal.dimensions.rows),\n            () => {/* no-op */ }\n        );\n        updateProcessId();\n        this.toDispose.push(terminal.onDidOpen(() => updateProcessId()));\n        this.toDispose.push(terminal.onTerminalDidClose(() => this.extProxy.$terminalClosed(terminal.id)));\n        this.toDispose.push(terminal.onSizeChanged(({ cols, rows }) => {\n            this.extProxy.$terminalSizeChanged(terminal.id, cols, rows);\n        }));\n        this.toDispose.push(terminal.onData(data => {\n            this.extProxy.$terminalOnInput(terminal.id, data);\n        }));\n    }\n\n    $write(id: string, data: string): void {\n        const terminal = this.terminals.getById(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.write(data);\n    }\n\n    $resize(id: string, cols: number, rows: number): void {\n        const terminal = this.terminals.getById(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.resize(cols, rows);\n    }\n\n    async $createTerminal(id: string, options: TerminalOptions, isPseudoTerminal?: boolean): Promise<string> {\n        try {\n            const terminal = await this.terminals.newTerminal({\n                id,\n                title: options.name,\n                shellPath: options.shellPath,\n                shellArgs: options.shellArgs,\n                cwd: options.cwd,\n                env: options.env,\n                destroyTermOnClose: true,\n                useServerTitle: false,\n                attributes: options.attributes,\n                isPseudoTerminal,\n            });\n            terminal.start();\n            return terminal.id;\n        } catch (error) {\n            throw new Error('Failed to create terminal. Cause: ' + error);\n        }\n    }\n\n    $sendText(id: string, text: string, addNewLine?: boolean): void {\n        const terminal = this.terminals.getById(id);\n        if (terminal) {\n            text = text.replace(/\\r?\\n/g, '\\r');\n            if (addNewLine && text.charAt(text.length - 1) !== '\\r') {\n                text += '\\r';\n            }\n            terminal.sendText(text);\n        }\n    }\n\n    $show(id: string, preserveFocus?: boolean): void {\n        const terminal = this.terminals.getById(id);\n        if (terminal) {\n            const options: WidgetOpenerOptions = {};\n            if (preserveFocus) {\n                options.mode = 'reveal';\n            }\n            this.terminals.open(terminal, options);\n        }\n    }\n\n    $hide(id: string): void {\n        const terminal = this.terminals.getById(id);\n        if (terminal && terminal.isVisible) {\n            const area = this.shell.getAreaFor(terminal);\n            if (area) {\n                this.shell.collapsePanel(area);\n            }\n        }\n    }\n\n    $dispose(id: string): void {\n        const terminal = this.terminals.getById(id);\n        if (terminal) {\n            terminal.dispose();\n        }\n    }\n\n    $sendTextByTerminalId(id: number, text: string, addNewLine?: boolean): void {\n        const terminal = this.terminals.getByTerminalId(id);\n        if (terminal) {\n            text = text.replace(/\\r?\\n/g, '\\r');\n            if (addNewLine && text.charAt(text.length - 1) !== '\\r') {\n                text += '\\r';\n            }\n            terminal.sendText(text);\n        }\n    }\n    $writeByTerminalId(id: number, data: string): void {\n        const terminal = this.terminals.getByTerminalId(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.write(data);\n    }\n    $resizeByTerminalId(id: number, cols: number, rows: number): void {\n        const terminal = this.terminals.getByTerminalId(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.resize(cols, rows);\n    }\n    $showByTerminalId(id: number, preserveFocus?: boolean): void {\n        const terminal = this.terminals.getByTerminalId(id);\n        if (terminal) {\n            const options: WidgetOpenerOptions = {};\n            if (preserveFocus) {\n                options.mode = 'reveal';\n            }\n            this.terminals.open(terminal, options);\n        }\n    }\n    $hideByTerminalId(id: number): void {\n        const terminal = this.terminals.getByTerminalId(id);\n        if (terminal && terminal.isVisible) {\n            const area = this.shell.getAreaFor(terminal);\n            if (area) {\n                this.shell.collapsePanel(area);\n            }\n        }\n    }\n    $disposeByTerminalId(id: number, waitOnExit?: boolean | string): void {\n        const terminal = this.terminals.getByTerminalId(id);\n        if (terminal) {\n            if (waitOnExit) {\n                terminal.waitOnExit(waitOnExit);\n                return;\n            }\n            terminal.dispose();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport {\n    TextEditorConfiguration,\n    EditorChangedPropertiesData,\n    Selection,\n    TextEditorConfigurationUpdate,\n    TextEditorRevealType,\n    SingleEditOperation,\n    ApplyEditsOptions,\n    UndoStopOptions,\n    DecorationOptions\n} from '../../common/plugin-api-rpc';\nimport { Range } from '../../common/plugin-api-rpc-model';\nimport { Emitter, Event } from '@theia/core';\nimport { TextEditorCursorStyle, cursorStyleToString } from '../../common/editor-options';\nimport { TextEditorLineNumbersStyle, EndOfLine } from '../../plugin/types-impl';\n\nexport class TextEditorMain implements Disposable {\n\n    private properties: TextEditorPropertiesMain | undefined;\n    private editor: MonacoEditor | undefined;\n\n    private readonly onPropertiesChangedEmitter = new Emitter<EditorChangedPropertiesData>();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.properties = undefined),\n        this.onPropertiesChangedEmitter\n    );\n\n    constructor(\n        private id: string,\n        private model: monaco.editor.IModel,\n        editor: MonacoEditor\n    ) {\n        this.toDispose.push(this.model.onDidChangeOptions(() =>\n            this.updateProperties(undefined)\n        ));\n        this.setEditor(editor);\n        this.updateProperties(undefined);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private updateProperties(source?: string): void {\n        this.setProperties(TextEditorPropertiesMain.readFromEditor(this.properties, this.model, this.editor!), source);\n    }\n\n    private setProperties(newProperties: TextEditorPropertiesMain, source: string | undefined): void {\n        const result = newProperties.generateDelta(this.properties, source);\n        this.properties = newProperties;\n        if (result) {\n            this.onPropertiesChangedEmitter.fire(result);\n        }\n    }\n\n    protected readonly toDisposeOnEditor = new DisposableCollection();\n\n    private setEditor(editor?: MonacoEditor): void {\n        if (this.editor === editor) {\n            return;\n        }\n        this.toDisposeOnEditor.dispose();\n        this.toDispose.push(this.toDisposeOnEditor);\n        this.editor = editor;\n        this.toDisposeOnEditor.push(Disposable.create(() => this.editor = undefined));\n\n        if (this.editor) {\n            const monaco = this.editor.getControl();\n            this.toDisposeOnEditor.push(this.editor.onSelectionChanged(_ => {\n                this.updateProperties();\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidChangeModel(() => {\n                this.setEditor(undefined);\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidChangeCursorSelection(e => {\n                this.updateProperties(e.source);\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidChangeConfiguration(() => {\n                this.updateProperties();\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidLayoutChange(() => {\n                this.updateProperties();\n            }));\n            this.toDisposeOnEditor.push(monaco.onDidScrollChange(() => {\n                this.updateProperties();\n            }));\n\n            this.updateProperties();\n\n        }\n    }\n\n    getId(): string {\n        return this.id;\n    }\n\n    getModel(): monaco.editor.IModel {\n        return this.model;\n    }\n\n    getProperties(): TextEditorPropertiesMain | undefined {\n        return this.properties;\n    }\n\n    get onPropertiesChangedEvent(): Event<EditorChangedPropertiesData> {\n        return this.onPropertiesChangedEmitter.event;\n    }\n\n    setSelections(selections: Selection[]): void {\n        if (this.editor) {\n            this.editor.getControl().setSelections(selections);\n            return;\n        }\n        const monacoSelections = selections.map(TextEditorMain.toMonacoSelections);\n        this.setProperties(new TextEditorPropertiesMain(monacoSelections, this.properties!.options, this.properties!.visibleRanges), undefined);\n    }\n\n    setConfiguration(newConfiguration: TextEditorConfigurationUpdate): void {\n        this.setIndentConfiguration(newConfiguration);\n\n        if (!this.editor) {\n            return;\n        }\n\n        if (newConfiguration.cursorStyle) {\n            const newCursorStyle = cursorStyleToString(newConfiguration.cursorStyle);\n            this.editor.getControl().updateOptions({\n                cursorStyle: newCursorStyle\n            });\n        }\n\n        if (typeof newConfiguration.lineNumbers !== 'undefined') {\n            let lineNumbers: 'on' | 'off' | 'relative';\n            switch (newConfiguration.lineNumbers) {\n                case TextEditorLineNumbersStyle.On:\n                    lineNumbers = 'on';\n                    break;\n                case TextEditorLineNumbersStyle.Relative:\n                    lineNumbers = 'relative';\n                    break;\n                default:\n                    lineNumbers = 'off';\n            }\n            this.editor.getControl().updateOptions({\n                lineNumbers: lineNumbers\n            });\n        }\n    }\n\n    private setIndentConfiguration(newConfiguration: TextEditorConfigurationUpdate): void {\n        if (newConfiguration.tabSize === 'auto' || newConfiguration.insertSpaces === 'auto') {\n\n            const creationOpts = this.model.getOptions();\n            let insertSpaces = creationOpts.insertSpaces;\n            let tabSize = creationOpts.tabSize;\n\n            if (newConfiguration.insertSpaces !== 'auto' && typeof newConfiguration.insertSpaces !== 'undefined') {\n                insertSpaces = newConfiguration.insertSpaces;\n            }\n\n            if (newConfiguration.tabSize !== 'auto' && typeof newConfiguration.tabSize !== 'undefined') {\n                tabSize = newConfiguration.tabSize;\n            }\n\n            this.model.detectIndentation(insertSpaces, tabSize);\n            return;\n        }\n\n        const newOpts: monaco.editor.ITextModelUpdateOptions = {};\n        if (typeof newConfiguration.insertSpaces !== 'undefined') {\n            newOpts.insertSpaces = newConfiguration.insertSpaces;\n        }\n        if (typeof newConfiguration.tabSize !== 'undefined') {\n            newOpts.tabSize = newConfiguration.tabSize;\n        }\n        this.model.updateOptions(newOpts);\n    }\n\n    revealRange(range: monaco.Range, revealType: TextEditorRevealType): void {\n        if (!this.editor) {\n            return;\n        }\n        switch (revealType) {\n            case TextEditorRevealType.Default:\n                this.editor.getControl().revealRange(range, monaco.editor.ScrollType.Smooth);\n                break;\n            case TextEditorRevealType.InCenter:\n                this.editor.getControl().revealRangeInCenter(range, monaco.editor.ScrollType.Smooth);\n                break;\n            case TextEditorRevealType.InCenterIfOutsideViewport:\n                this.editor.getControl().revealRangeInCenterIfOutsideViewport(range, monaco.editor.ScrollType.Smooth);\n                break;\n            case TextEditorRevealType.AtTop:\n                this.editor.getControl().revealRangeAtTop(range, monaco.editor.ScrollType.Smooth);\n                break;\n            default:\n                console.warn(`Unknown revealType: ${revealType}`);\n                break;\n        }\n    }\n\n    applyEdits(versionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): boolean {\n        if (this.model.getVersionId() !== versionId) {\n            // model changed in the meantime\n            return false;\n        }\n\n        if (!this.editor) {\n            return false;\n        }\n\n        if (opts.setEndOfLine === EndOfLine.CRLF) {\n            this.model.setEOL(monaco.editor.EndOfLineSequence.CRLF);\n        } else if (opts.setEndOfLine === EndOfLine.LF) {\n            this.model.setEOL(monaco.editor.EndOfLineSequence.LF);\n        }\n\n        const editOperations: monaco.editor.IIdentifiedSingleEditOperation[] = [];\n        for (const edit of edits) {\n            const { range, text } = edit;\n            if (!range && !text) {\n                continue;\n            }\n            if (range && range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn && !edit.text) {\n                continue;\n            }\n\n            editOperations.push({\n                range: range ? monaco.Range.lift(range) : this.editor.getControl().getModel()!.getFullModelRange(),\n                /* eslint-disable-next-line no-null/no-null */\n                text: text || null,\n                forceMoveMarkers: edit.forceMoveMarkers\n            });\n        }\n\n        if (opts.undoStopBefore) {\n            this.editor.getControl().pushUndoStop();\n        }\n        this.editor.getControl().executeEdits('MainThreadTextEditor', editOperations);\n        if (opts.undoStopAfter) {\n            this.editor.getControl().pushUndoStop();\n        }\n        return true;\n    }\n\n    insertSnippet(template: string, ranges: Range[], opts: UndoStopOptions): boolean {\n\n        if (!this.editor) {\n            return false;\n        }\n\n        const snippetController: SnippetController2 = this.editor!.getControl().getContribution('snippetController2');\n\n        const selections = ranges.map(r => new monaco.Selection(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn));\n        this.editor.getControl().setSelections(selections);\n        this.editor.focus();\n\n        snippetController.insert(template, 0, 0, opts.undoStopBefore, opts.undoStopAfter);\n\n        return true;\n    }\n\n    setDecorations(key: string, ranges: DecorationOptions[]): void {\n        if (!this.editor) {\n            return;\n        }\n        this.editor.getControl().setDecorations(key, ranges.map(option => Object.assign(option, { color: undefined })));\n    }\n\n    setDecorationsFast(key: string, _ranges: number[]): void {\n        if (!this.editor) {\n            return;\n        }\n        const ranges: Range[] = [];\n        const len = Math.floor(_ranges.length / 4);\n        for (let i = 0; i < len; i++) {\n            ranges[i] = new monaco.Range(_ranges[4 * i], _ranges[4 * i + 1], _ranges[4 * i + 2], _ranges[4 * i + 3]);\n        }\n\n        this.editor.getControl().setDecorationsFast(key, ranges);\n    }\n\n    private static toMonacoSelections(selection: Selection): monaco.Selection {\n        return new monaco.Selection(selection.selectionStartLineNumber, selection.selectionStartColumn, selection.positionLineNumber, selection.positionColumn);\n    }\n}\n\n// TODO move to monaco typings!\ninterface SnippetController2 extends monaco.editor.IEditorContribution {\n    insert(template: string,\n        overwriteBefore: number, overwriteAfter: number,\n        undoStopBefore: boolean, undoStopAfter: boolean): void;\n    finish(): void;\n    cancel(): void;\n    dispose(): void;\n    prev(): void;\n    next(): void;\n}\n\nexport class TextEditorPropertiesMain {\n    constructor(\n        readonly selections: monaco.Selection[],\n        readonly options: TextEditorConfiguration,\n        readonly visibleRanges: monaco.Range[]\n    ) {\n    }\n\n    generateDelta(old: TextEditorPropertiesMain | undefined, source: string | undefined): EditorChangedPropertiesData | undefined {\n        const result: EditorChangedPropertiesData = {\n            options: undefined,\n            selections: undefined,\n            visibleRanges: undefined\n        };\n\n        if (!old || !TextEditorPropertiesMain.selectionsEqual(old.selections, this.selections)) {\n            result.selections = {\n                selections: this.selections,\n                source: source\n            };\n        }\n\n        if (!old || !TextEditorPropertiesMain.optionsEqual(old.options, this.options)) {\n            result.options = this.options;\n        }\n\n        if (!old || !TextEditorPropertiesMain.rangesEqual(old.visibleRanges, this.visibleRanges)) {\n            result.visibleRanges = this.visibleRanges;\n        }\n\n        if (result.selections || result.visibleRanges || result.options) {\n            return result;\n        }\n\n        return undefined;\n    }\n\n    static readFromEditor(prevProperties: TextEditorPropertiesMain | undefined, model: monaco.editor.IModel, editor: MonacoEditor): TextEditorPropertiesMain {\n        const selections = TextEditorPropertiesMain.getSelectionsFromEditor(prevProperties, editor);\n        const options = TextEditorPropertiesMain.getOptionsFromEditor(prevProperties, model, editor);\n        const visibleRanges = TextEditorPropertiesMain.getVisibleRangesFromEditor(prevProperties, editor);\n        return new TextEditorPropertiesMain(selections, options, visibleRanges);\n    }\n\n    private static getSelectionsFromEditor(prevProperties: TextEditorPropertiesMain | undefined, editor: MonacoEditor): monaco.Selection[] {\n        let result: monaco.Selection[] | undefined = undefined;\n        if (editor) {\n            result = editor.getControl().getSelections() || undefined;\n        }\n\n        if (!result && prevProperties) {\n            result = prevProperties.selections;\n        }\n\n        if (!result) {\n            result = [new monaco.Selection(1, 1, 1, 1)];\n        }\n        return result;\n    }\n\n    private static getOptionsFromEditor(prevProperties: TextEditorPropertiesMain | undefined, model: monaco.editor.IModel, editor: MonacoEditor): TextEditorConfiguration {\n        if (model.isDisposed()) {\n            return prevProperties!.options;\n        }\n\n        let cursorStyle: TextEditorCursorStyle;\n        let lineNumbers: TextEditorLineNumbersStyle;\n        if (editor) {\n            const editorOptions = editor.getControl().getOptions();\n            const lineNumbersOpts = editorOptions.get(monaco.editor.EditorOption.lineNumbers);\n            cursorStyle = editorOptions.get(monaco.editor.EditorOption.cursorStyle);\n            switch (lineNumbersOpts.renderType) {\n                case monaco.editor.RenderLineNumbersType.Off:\n                    lineNumbers = TextEditorLineNumbersStyle.Off;\n                    break;\n                case monaco.editor.RenderLineNumbersType.Relative:\n                    lineNumbers = TextEditorLineNumbersStyle.Relative;\n                    break;\n                default:\n                    lineNumbers = TextEditorLineNumbersStyle.On;\n                    break;\n            }\n        } else if (prevProperties) {\n            cursorStyle = prevProperties.options.cursorStyle;\n            lineNumbers = prevProperties.options.lineNumbers;\n        } else {\n            cursorStyle = TextEditorCursorStyle.Line;\n            lineNumbers = TextEditorLineNumbersStyle.On;\n        }\n\n        const modelOptions = model.getOptions();\n        return {\n            insertSpaces: modelOptions.insertSpaces,\n            tabSize: modelOptions.tabSize,\n            cursorStyle,\n            lineNumbers,\n        };\n    }\n\n    private static getVisibleRangesFromEditor(prevProperties: TextEditorPropertiesMain | undefined, editor: MonacoEditor): monaco.Range[] {\n        if (editor) {\n            return editor.getControl().getVisibleRanges();\n        }\n        return [];\n    }\n\n    private static selectionsEqual(a: monaco.Selection[], b: monaco.Selection[]): boolean {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n            if (!a[i].equalsSelection(b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private static optionsEqual(a: TextEditorConfiguration, b: TextEditorConfiguration): boolean {\n        if (a && !b || !a && b) {\n            return false;\n        }\n        if (!a && !b) {\n            return true;\n        }\n        return (\n            a.tabSize === b.tabSize\n            && a.insertSpaces === b.insertSpaces\n            && a.cursorStyle === b.cursorStyle\n            && a.lineNumbers === b.lineNumbers\n        );\n    }\n\n    private static rangesEqual(a: monaco.Range[], b: monaco.Range[]): boolean {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n            if (!a[i].equalsRange(b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Event, Emitter } from '@theia/core';\nimport { MonacoEditorModel, WillSaveMonacoModelEvent } from '@theia/monaco/lib/browser/monaco-editor-model';\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { MonacoTextModelService } from '@theia/monaco/lib/browser/monaco-text-model-service';\nimport { MonacoWorkspace } from '@theia/monaco/lib/browser/monaco-workspace';\nimport { Schemes } from '../../common/uri-components';\nimport URI from '@theia/core/lib/common/uri';\nimport { Reference } from '@theia/core/lib/common/reference';\n\n@injectable()\nexport class EditorModelService {\n\n    private monacoModelService: MonacoTextModelService;\n    private modelModeChangedEmitter = new Emitter<{ model: MonacoEditorModel, oldModeId: string }>();\n    private onModelRemovedEmitter = new Emitter<MonacoEditorModel>();\n    private modelDirtyEmitter = new Emitter<MonacoEditorModel>();\n    private modelSavedEmitter = new Emitter<MonacoEditorModel>();\n    private onModelWillSavedEmitter = new Emitter<WillSaveMonacoModelEvent>();\n\n    readonly onModelDirtyChanged = this.modelDirtyEmitter.event;\n    readonly onModelSaved = this.modelSavedEmitter.event;\n    readonly onModelModeChanged = this.modelModeChangedEmitter.event;\n    readonly onModelRemoved = this.onModelRemovedEmitter.event;\n    readonly onModelWillSave = this.onModelWillSavedEmitter.event;\n\n    constructor(@inject(MonacoTextModelService) monacoModelService: MonacoTextModelService,\n        @inject(MonacoWorkspace) monacoWorkspace: MonacoWorkspace) {\n\n        this.monacoModelService = monacoModelService;\n        monacoModelService.models.forEach(model => this.modelCreated(model));\n        monacoModelService.onDidCreate(this.modelCreated, this);\n        monacoWorkspace.onDidCloseTextDocument(model => {\n            setTimeout(() => {\n                this.onModelRemovedEmitter.fire(model);\n            }, 1);\n        });\n    }\n\n    private modelCreated(model: MonacoEditorModel): void {\n        model.textEditorModel.onDidChangeLanguage(e => {\n            this.modelModeChangedEmitter.fire({ model, oldModeId: e.oldLanguage });\n        });\n\n        model.onDidSaveModel(_ => {\n            this.modelSavedEmitter.fire(model);\n        });\n\n        model.onDirtyChanged(_ => {\n            this.modelDirtyEmitter.fire(model);\n        });\n        model.onWillSaveModel(willSaveModelEvent => {\n            this.onModelWillSavedEmitter.fire(willSaveModelEvent);\n        });\n    }\n\n    get onModelAdded(): Event<MonacoEditorModel> {\n        return this.monacoModelService.onDidCreate;\n    }\n\n    getModels(): MonacoEditorModel[] {\n        return this.monacoModelService.models;\n    }\n\n    async saveAll(includeUntitled?: boolean): Promise<boolean> {\n        const saves = [];\n        for (const model of this.monacoModelService.models) {\n            const { uri } = model.textEditorModel;\n            if (model.dirty && (includeUntitled || uri.scheme !== Schemes.untitled)) {\n                saves.push((async () => {\n                    try {\n                        await model.save();\n                        return true;\n                    } catch (e) {\n                        console.error('Failed to save ', uri.toString(), e);\n                        return false;\n                    }\n                })());\n            }\n        }\n        const results = await Promise.all(saves);\n        return results.reduce((a, b) => a && b, true);\n    }\n\n    async createModelReference(uri: URI): Promise<Reference<MonacoEditorModel>> {\n        return this.monacoModelService.createModelReference(uri);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport {\n    TextEditorsMain,\n    MAIN_RPC_CONTEXT,\n    TextEditorsExt,\n    TextEditorConfigurationUpdate,\n    Selection,\n    TextEditorRevealType,\n    SingleEditOperation,\n    ApplyEditsOptions,\n    UndoStopOptions,\n    DecorationRenderOptions,\n    ThemeDecorationInstanceRenderOptions,\n    DecorationOptions,\n    WorkspaceEditDto\n} from '../../common/plugin-api-rpc';\nimport { Range } from '../../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsMain } from './editors-and-documents-main';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { TextEditorMain } from './text-editor-main';\nimport { disposed } from '../../common/errors';\nimport { toMonacoWorkspaceEdit } from './languages-main';\nimport { MonacoBulkEditService } from '@theia/monaco/lib/browser/monaco-bulk-edit-service';\nimport { MonacoEditorService } from '@theia/monaco/lib/browser/monaco-editor-service';\nimport { theiaUritoUriComponents, UriComponents } from '../../common/uri-components';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\n\nexport class TextEditorsMainImpl implements TextEditorsMain, Disposable {\n\n    private readonly proxy: TextEditorsExt;\n    private readonly toDispose = new DisposableCollection();\n    private readonly editorsToDispose = new Map<string, DisposableCollection>();\n    private readonly fileEndpoint = new Endpoint({ path: 'file' }).getRestUrl();\n\n    constructor(\n        private readonly editorsAndDocuments: EditorsAndDocumentsMain,\n        rpc: RPCProtocol,\n        private readonly bulkEditService: MonacoBulkEditService,\n        private readonly monacoEditorService: MonacoEditorService,\n    ) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.TEXT_EDITORS_EXT);\n        this.toDispose.push(editorsAndDocuments);\n        this.toDispose.push(editorsAndDocuments.onTextEditorAdd(editors => editors.forEach(this.onTextEditorAdd, this)));\n        this.toDispose.push(editorsAndDocuments.onTextEditorRemove(editors => editors.forEach(this.onTextEditorRemove, this)));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private onTextEditorAdd(editor: TextEditorMain): void {\n        const id = editor.getId();\n        const toDispose = new DisposableCollection(\n            editor.onPropertiesChangedEvent(e => {\n                this.proxy.$acceptEditorPropertiesChanged(id, e);\n            }),\n            Disposable.create(() => this.editorsToDispose.delete(id))\n        );\n        this.editorsToDispose.set(id, toDispose);\n        this.toDispose.push(toDispose);\n    }\n\n    private onTextEditorRemove(id: string): void {\n        const disposables = this.editorsToDispose.get(id);\n        if (disposables) {\n            disposables.dispose();\n        }\n    }\n\n    $trySetOptions(id: string, options: TextEditorConfigurationUpdate): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor: ${id}`));\n        }\n        this.editorsAndDocuments.getEditor(id)!.setConfiguration(options);\n        return Promise.resolve();\n    }\n\n    $trySetSelections(id: string, selections: Selection[]): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor: ${id}`));\n        }\n        this.editorsAndDocuments.getEditor(id)!.setSelections(selections);\n        return Promise.resolve();\n    }\n\n    $tryRevealRange(id: string, range: Range, revealType: TextEditorRevealType): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n\n        this.editorsAndDocuments.getEditor(id)!.revealRange(new monaco.Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn), revealType);\n        return Promise.resolve();\n    }\n\n    $tryApplyEdits(id: string, modelVersionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): Promise<boolean> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n\n        return Promise.resolve(this.editorsAndDocuments.getEditor(id)!.applyEdits(modelVersionId, edits, opts));\n    }\n\n    async $tryApplyWorkspaceEdit(dto: WorkspaceEditDto): Promise<boolean> {\n        const edits = toMonacoWorkspaceEdit(dto);\n        try {\n            const { success } = await this.bulkEditService.apply(edits);\n            return success;\n        } catch {\n            return false;\n        }\n    }\n\n    $tryInsertSnippet(id: string, template: string, ranges: Range[], opts: UndoStopOptions): Promise<boolean> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n        return Promise.resolve(this.editorsAndDocuments.getEditor(id)!.insertSnippet(template, ranges, opts));\n    }\n\n    $registerTextEditorDecorationType(key: string, options: DecorationRenderOptions): void {\n        this.injectRemoteUris(options);\n        this.monacoEditorService.registerDecorationType(key, options);\n        this.toDispose.push(Disposable.create(() => this.$removeTextEditorDecorationType(key)));\n    }\n\n    protected injectRemoteUris(options: DecorationRenderOptions | ThemeDecorationInstanceRenderOptions): void {\n        if (options.before) {\n            options.before.contentIconPath = this.toRemoteUri(options.before.contentIconPath);\n        }\n        if (options.after) {\n            options.after.contentIconPath = this.toRemoteUri(options.after.contentIconPath);\n        }\n        if ('gutterIconPath' in options) {\n            options.gutterIconPath = this.toRemoteUri(options.gutterIconPath);\n        }\n        if ('dark' in options && options.dark) {\n            this.injectRemoteUris(options.dark);\n        }\n        if ('light' in options && options.light) {\n            this.injectRemoteUris(options.light);\n        }\n    }\n\n    protected toRemoteUri(uri?: UriComponents): UriComponents | undefined {\n        if (uri && uri.scheme === 'file') {\n            return theiaUritoUriComponents(this.fileEndpoint.withQuery(URI.revive(uri).toString()));\n        }\n        return uri;\n    }\n\n    $removeTextEditorDecorationType(key: string): void {\n        this.monacoEditorService.removeDecorationType(key);\n    }\n\n    $trySetDecorations(id: string, key: string, ranges: DecorationOptions[]): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n        this.editorsAndDocuments.getEditor(id)!.setDecorations(key, ranges);\n        return Promise.resolve();\n    }\n\n    $trySetDecorationsFast(id: string, key: string, ranges: number[]): Promise<void> {\n        if (!this.editorsAndDocuments.getEditor(id)) {\n            return Promise.reject(disposed(`TextEditor(${id})`));\n        }\n        this.editorsAndDocuments.getEditor(id)!.setDecorationsFast(key, ranges);\n        return Promise.resolve();\n    }\n\n    $saveAll(includeUntitled?: boolean): Promise<boolean> {\n        return this.editorsAndDocuments.saveAll(includeUntitled);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2020 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { MAIN_RPC_CONTEXT, ThemingMain, ThemingExt } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { ThemeService } from '@theia/core/lib/browser/theming';\nimport { Disposable } from '@theia/core/lib/common/disposable';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/bafca191f55a234fad20ab67bb689aacc80e7a1a/src/vs/workbench/api/browser/mainThreadTheming.ts\n\nexport class ThemingMainImpl implements ThemingMain {\n\n    private readonly proxy: ThemingExt;\n    private readonly themeChangeListener: Disposable;\n\n    constructor(\n        rpc: RPCProtocol\n    ) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.THEMING_EXT);\n        this.themeChangeListener = ThemeService.get().onThemeChange(e => {\n            this.proxy.$onColorThemeChange(e.newTheme.type);\n        });\n        this.proxy.$onColorThemeChange(ThemeService.get().getCurrentTheme().type);\n    }\n\n    dispose(): void {\n        this.themeChangeListener.dispose();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { TimelineMain } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { TimelineService } from '@theia/timeline/lib/browser/timeline-service';\nimport { Emitter } from '@theia/core/lib/common';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { MAIN_RPC_CONTEXT, TimelineExt } from '../../common/plugin-api-rpc';\nimport {\n    InternalTimelineOptions,\n    Timeline,\n    TimelineOptions,\n    TimelineProviderDescriptor,\n    TimelineChangeEvent\n} from '@theia/timeline/lib/common/timeline-model';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/afacd2bdfe7060f09df9b9139521718915949757/src/vs/workbench/api/browser/mainThreadTimeline.ts\n\nexport class TimelineMainImpl implements TimelineMain {\n    private readonly proxy: TimelineExt;\n    private readonly timelineService: TimelineService;\n    private readonly providerEmitters = new Map<string, Emitter<TimelineChangeEvent>>();\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.TIMELINE_EXT);\n        this.timelineService = container.get<TimelineService>(TimelineService);\n    }\n\n    async $registerTimelineProvider(provider: TimelineProviderDescriptor): Promise<void> {\n        const proxy = this.proxy;\n\n        const emitters = this.providerEmitters;\n        let onDidChange = emitters.get(provider.id);\n        if (onDidChange === undefined) {\n            onDidChange = new Emitter<TimelineChangeEvent>();\n            emitters.set(provider.id, onDidChange);\n        }\n\n        this.timelineService.registerTimelineProvider({\n            ...provider,\n            onDidChange: onDidChange.event,\n            provideTimeline(uri: URI, options: TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n                return proxy.$getTimeline(provider.id, uri, options, internalOptions);\n            },\n            dispose(): void {\n                emitters.delete(provider.id);\n                if (onDidChange) {\n                    onDidChange.dispose();\n                }\n            }\n        });\n    }\n\n    async $unregisterTimelineProvider(id: string): Promise<void> {\n        this.timelineService.unregisterTimelineProvider(id);\n    }\n\n    async $fireTimelineChanged(e: TimelineChangeEvent): Promise<void> {\n        const emitter = this.providerEmitters.get(e.id);\n        if (emitter) {\n            emitter.fire(e);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ApplicationShell } from '@theia/core/lib/browser/shell/application-shell';\nimport { toArray } from '@theia/core/shared/@phosphor/algorithm';\nimport { TabBar, Widget } from '@theia/core/shared/@phosphor/widgets';\n\n@injectable()\nexport class ViewColumnService {\n    private readonly columnValues = new Map<string, number>();\n    private readonly viewColumnIds = new Map<number, string[]>();\n\n    protected readonly onViewColumnChangedEmitter = new Emitter<{ id: string, viewColumn: number }>();\n\n    constructor(\n        @inject(ApplicationShell) private readonly shell: ApplicationShell,\n    ) {\n        let oldColumnValues = new Map<string, number>();\n        const update = async () => {\n            await new Promise((resolve => setTimeout(() => resolve())));\n            this.updateViewColumns();\n            this.viewColumnIds.forEach((ids: string[], viewColumn: number) => {\n                ids.forEach((id: string) => {\n                    if (!oldColumnValues.has(id) || oldColumnValues.get(id) !== viewColumn) {\n                        this.onViewColumnChangedEmitter.fire({ id, viewColumn });\n                    }\n                });\n            });\n            oldColumnValues = new Map(this.columnValues.entries());\n        };\n        this.shell.mainPanel.widgetAdded.connect(() => update());\n        this.shell.mainPanel.widgetRemoved.connect(() => update());\n    }\n\n    get onViewColumnChanged(): Event<{ id: string, viewColumn: number }> {\n        return this.onViewColumnChangedEmitter.event;\n    }\n\n    updateViewColumns(): void {\n        this.columnValues.clear();\n        this.viewColumnIds.clear();\n\n        const rows = new Map<number, Set<number>>();\n        const columns = new Map<number, Map<number, TabBar<Widget>>>();\n        for (const tabBar of toArray(this.shell.mainPanel.tabBars())) {\n            if (!tabBar.node.style.top || !tabBar.node.style.left) {\n                continue;\n            }\n            const top = parseInt(tabBar.node.style.top);\n            const left = parseInt(tabBar.node.style.left);\n\n            const row = rows.get(top) || new Set<number>();\n            row.add(left);\n            rows.set(top, row);\n\n            const column = columns.get(left) || new Map<number, TabBar<Widget>>();\n            column.set(top, tabBar);\n            columns.set(left, column);\n        }\n        const firstRow = rows.get([...rows.keys()].sort()[0]);\n        if (!firstRow) {\n            return;\n        }\n        const lefts = [...firstRow.keys()].sort();\n        for (let i = 0; i < lefts.length; i++) {\n            const column = columns.get(lefts[i]);\n            if (!column) {\n                break;\n            }\n            const cellIndexes = [...column.keys()].sort();\n            let viewColumn = Math.min(i, 2);\n            for (let j = 0; j < cellIndexes.length; j++) {\n                const cell = column.get(cellIndexes[j]);\n                if (!cell) {\n                    break;\n                }\n                this.setViewColumn(cell, viewColumn);\n                if (viewColumn < 7) {\n                    viewColumn += 3;\n                }\n            }\n        }\n    }\n\n    protected setViewColumn(tabBar: TabBar<Widget>, viewColumn: number): void {\n        const ids = [];\n        for (const title of tabBar.titles) {\n            const id = title.owner.id;\n            ids.push(id);\n            this.columnValues.set(id, viewColumn);\n        }\n        this.viewColumnIds.set(viewColumn, ids);\n    }\n\n    getViewColumnIds(viewColumn: number): string[] {\n        return this.viewColumnIds.get(viewColumn) || [];\n    }\n\n    getViewColumn(id: string): number | undefined {\n        return this.columnValues.get(id);\n    }\n\n    hasViewColumn(id: string): boolean {\n        return this.columnValues.has(id);\n    }\n\n    viewColumnsSize(): number {\n        return this.viewColumnIds.size;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { LabelProviderContribution, LabelProvider, URIIconReference } from '@theia/core/lib/browser/label-provider';\nimport { TreeLabelProvider } from '@theia/core/lib/browser/tree/tree-label-provider';\nimport { TreeViewNode } from './tree-view-widget';\nimport { TreeNode } from '@theia/core/lib/browser/tree/tree';\n\n@injectable()\nexport class PluginTreeViewNodeLabelProvider implements LabelProviderContribution {\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(TreeLabelProvider)\n    protected readonly treeLabelProvider: TreeLabelProvider;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    canHandle(element: TreeViewNode | any): number {\n        if (TreeNode.is(element) && ('resourceUri' in element || 'themeIconId' in element)) {\n            return this.treeLabelProvider.canHandle(element) + 1;\n        }\n        return 0;\n    }\n\n    getIcon(node: TreeViewNode): string | undefined {\n        if (node.icon) {\n            return node.icon;\n        }\n        if (node.themeIconId) {\n            if (node.themeIconId === 'file' || node.themeIconId === 'folder') {\n                const uri = node.resourceUri && new URI(node.resourceUri) || undefined;\n                return this.labelProvider.getIcon(URIIconReference.create(node.themeIconId, uri));\n            }\n            return monaco.theme.ThemeIcon.asClassName({ id: node.themeIconId });\n        }\n        if (node.resourceUri) {\n            return this.labelProvider.getIcon(new URI(node.resourceUri));\n        }\n        return undefined;\n    }\n\n    getName(node: TreeViewNode): string | undefined {\n        if (node.name) {\n            return node.name;\n        }\n        if (node.resourceUri) {\n            return this.labelProvider.getName(new URI(node.resourceUri));\n        }\n        return undefined;\n    }\n\n    getLongName(node: TreeViewNode): string | undefined {\n        if (typeof node.description === 'string') {\n            return node.description;\n        }\n        if (node.description === true && node.resourceUri) {\n            return this.labelProvider.getLongName(new URI(node.resourceUri));\n        }\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport {\n    ApplicationShell, ViewContainer as ViewContainerWidget, WidgetManager,\n    ViewContainerIdentifier, ViewContainerTitleOptions, Widget, FrontendApplicationContribution,\n    StatefulWidget, CommonMenus, BaseWidget, TreeViewWelcomeWidget\n} from '@theia/core/lib/browser';\nimport { ViewContainer, View, ViewWelcome } from '../../../common';\nimport { PluginSharedStyle } from '../plugin-shared-style';\nimport { DebugWidget } from '@theia/debug/lib/browser/view/debug-widget';\nimport { PluginViewWidget, PluginViewWidgetIdentifier } from './plugin-view-widget';\nimport { SCM_VIEW_CONTAINER_ID, ScmContribution } from '@theia/scm/lib/browser/scm-contribution';\nimport { EXPLORER_VIEW_CONTAINER_ID, FileNavigatorWidget, FILE_NAVIGATOR_ID } from '@theia/navigator/lib/browser';\nimport { FileNavigatorContribution } from '@theia/navigator/lib/browser/navigator-contribution';\nimport { DebugFrontendApplicationContribution } from '@theia/debug/lib/browser/debug-frontend-application-contribution';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistry } from '@theia/core/lib/common/command';\nimport { MenuModelRegistry } from '@theia/core/lib/common/menu';\nimport { QuickViewService } from '@theia/core/lib/browser/quick-view-service';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { ContextKeyService } from '@theia/core/lib/browser/context-key-service';\nimport { SearchInWorkspaceWidget } from '@theia/search-in-workspace/lib/browser/search-in-workspace-widget';\nimport { ViewContextKeyService } from './view-context-key-service';\nimport { PROBLEMS_WIDGET_ID } from '@theia/markers/lib/browser/problem/problem-widget';\nimport { OUTPUT_WIDGET_KIND } from '@theia/output/lib/browser/output-widget';\nimport { DebugConsoleContribution } from '@theia/debug/lib/browser/console/debug-console-contribution';\nimport { TERMINAL_WIDGET_FACTORY_ID } from '@theia/terminal/lib/browser/terminal-widget-impl';\nimport { TreeViewWidget } from './tree-view-widget';\n\nexport const PLUGIN_VIEW_FACTORY_ID = 'plugin-view';\nexport const PLUGIN_VIEW_CONTAINER_FACTORY_ID = 'plugin-view-container';\nexport const PLUGIN_VIEW_DATA_FACTORY_ID = 'plugin-view-data';\n\nexport type ViewDataProvider = (params: { state?: object, viewInfo: View }) => Promise<TreeViewWidget>;\n\n@injectable()\nexport class PluginViewRegistry implements FrontendApplicationContribution {\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @inject(PluginSharedStyle)\n    protected readonly style: PluginSharedStyle;\n\n    @inject(WidgetManager)\n    protected readonly widgetManager: WidgetManager;\n\n    @inject(ScmContribution)\n    protected readonly scm: ScmContribution;\n\n    @inject(FileNavigatorContribution)\n    protected readonly explorer: FileNavigatorContribution;\n\n    @inject(DebugFrontendApplicationContribution)\n    protected readonly debug: DebugFrontendApplicationContribution;\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(MenuModelRegistry)\n    protected readonly menus: MenuModelRegistry;\n\n    @inject(QuickViewService)\n    protected readonly quickView: QuickViewService;\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @inject(ViewContextKeyService)\n    protected readonly viewContextKeys: ViewContextKeyService;\n\n    protected readonly onDidExpandViewEmitter = new Emitter<string>();\n    readonly onDidExpandView = this.onDidExpandViewEmitter.event;\n\n    private readonly views = new Map<string, [string, View]>();\n    private readonly viewsWelcome = new Map<string, ViewWelcome[]>();\n    private readonly viewContainers = new Map<string, [string, ViewContainerTitleOptions]>();\n    private readonly containerViews = new Map<string, string[]>();\n    private readonly viewClauseContexts = new Map<string, Set<string>>();\n\n    private readonly viewDataProviders = new Map<string, ViewDataProvider>();\n    private readonly viewDataState = new Map<string, object>();\n\n    @postConstruct()\n    protected init(): void {\n        // VS Code Viewlets\n        this.trackVisibleWidget(EXPLORER_VIEW_CONTAINER_ID, { viewletId: 'workbench.view.explorer' });\n        this.trackVisibleWidget(SearchInWorkspaceWidget.ID, { viewletId: 'workbench.view.search', sideArea: true });\n        this.trackVisibleWidget(SCM_VIEW_CONTAINER_ID, { viewletId: 'workbench.view.scm' });\n        this.trackVisibleWidget(DebugWidget.ID, { viewletId: 'workbench.view.debug' });\n        // TODO workbench.view.extensions - Theia does not have a proper extension view yet\n\n        // VS Code Panels\n        this.trackVisibleWidget(PROBLEMS_WIDGET_ID, { panelId: 'workbench.panel.markers' });\n        this.trackVisibleWidget(OUTPUT_WIDGET_KIND, { panelId: 'workbench.panel.output' });\n        this.trackVisibleWidget(DebugConsoleContribution.options.id, { panelId: 'workbench.panel.repl' });\n        this.trackVisibleWidget(TERMINAL_WIDGET_FACTORY_ID, { panelId: 'workbench.panel.terminal' });\n        // TODO workbench.panel.comments - Theia does not have a proper comments view yet\n        this.trackVisibleWidget(SearchInWorkspaceWidget.ID, { panelId: 'workbench.view.search', sideArea: false });\n\n        this.updateFocusedView();\n        this.shell.onDidChangeActiveWidget(() => this.updateFocusedView());\n\n        this.widgetManager.onWillCreateWidget(({ factoryId, widget, waitUntil }) => {\n            if (factoryId === EXPLORER_VIEW_CONTAINER_ID && widget instanceof ViewContainerWidget) {\n                waitUntil(this.prepareViewContainer('explorer', widget));\n            }\n            if (factoryId === SCM_VIEW_CONTAINER_ID && widget instanceof ViewContainerWidget) {\n                waitUntil(this.prepareViewContainer('scm', widget));\n            }\n            if (factoryId === DebugWidget.ID && widget instanceof DebugWidget) {\n                const viewContainer = widget['sessionWidget']['viewContainer'];\n                waitUntil(this.prepareViewContainer('debug', viewContainer));\n            }\n            if (factoryId === PLUGIN_VIEW_CONTAINER_FACTORY_ID && widget instanceof ViewContainerWidget) {\n                waitUntil(this.prepareViewContainer(this.toViewContainerId(widget.options), widget));\n            }\n            if (factoryId === PLUGIN_VIEW_FACTORY_ID && widget instanceof PluginViewWidget) {\n                waitUntil(this.prepareView(widget));\n            }\n        });\n        this.widgetManager.onDidCreateWidget(event => {\n            if (event.widget instanceof FileNavigatorWidget) {\n                this.registerViewWelcome({\n                    view: 'explorer',\n                    // eslint-disable-next-line max-len\n                    content: 'You have not yet opened a folder.\\n[Open Folder](command:workbench.action.files.openFolder)',\n                    order: 0\n                });\n            }\n        });\n        this.doRegisterViewContainer('test', 'left', {\n            label: 'Test',\n            iconClass: 'theia-plugin-test-tab-icon',\n            closeable: true\n        });\n        this.contextKeyService.onDidChange(e => {\n            for (const [, view] of this.views.values()) {\n                const clauseContext = this.viewClauseContexts.get(view.id);\n                if (clauseContext && e.affects(clauseContext)) {\n                    this.updateViewVisibility(view.id);\n                }\n            }\n            for (const [viewId, viewWelcomes] of this.viewsWelcome) {\n                for (const [index] of viewWelcomes.entries()) {\n                    const viewWelcomeId = this.toViewWelcomeId(index, viewId);\n                    const clauseContext = this.viewClauseContexts.get(viewWelcomeId);\n                    if (clauseContext && e.affects(clauseContext)) {\n                        this.updateViewWelcomeVisibility(viewId);\n                    }\n                }\n            }\n        });\n    }\n\n    protected async updateViewWelcomeVisibility(viewId: string): Promise<void> {\n        const widget = await this.getTreeViewWelcomeWidget(viewId);\n        if (widget) {\n            widget.handleWelcomeContextChange();\n        }\n    }\n\n    protected async updateViewVisibility(viewId: string): Promise<void> {\n        const widget = await this.getView(viewId);\n        if (!widget) {\n            if (this.isViewVisible(viewId)) {\n                await this.openView(viewId);\n            }\n            return;\n        }\n        const viewInfo = this.views.get(viewId);\n        if (!viewInfo) {\n            return;\n        }\n        const [viewContainerId] = viewInfo;\n        const viewContainer = await this.getPluginViewContainer(viewContainerId);\n        if (!viewContainer) {\n            return;\n        }\n        const part = viewContainer.getPartFor(widget);\n        if (!part) {\n            return;\n        }\n        widget.updateViewVisibility(() =>\n            part.setHidden(!this.isViewVisible(viewId))\n        );\n    }\n\n    protected isViewVisible(viewId: string): boolean {\n        const viewInfo = this.views.get(viewId);\n        if (!viewInfo) {\n            return false;\n        }\n        const [, view] = viewInfo;\n        return view.when === undefined || view.when === 'true' || this.contextKeyService.match(view.when);\n    }\n\n    registerViewContainer(location: string, viewContainer: ViewContainer): Disposable {\n        if (this.viewContainers.has(viewContainer.id)) {\n            console.warn('view container such id already registered: ', JSON.stringify(viewContainer));\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n        const containerClass = 'theia-plugin-view-container';\n        const iconClass = 'plugin-view-container-icon-' + viewContainer.id;\n        const iconUrl = PluginSharedStyle.toExternalIconUrl(viewContainer.iconUrl);\n        toDispose.push(this.style.insertRule('.' + containerClass + '.' + iconClass, () => `\n                mask: url('${iconUrl}') no-repeat 50% 50%;\n                -webkit-mask: url('${iconUrl}') no-repeat 50% 50%;\n            `));\n        toDispose.push(this.doRegisterViewContainer(viewContainer.id, location, {\n            label: viewContainer.title,\n            iconClass: containerClass + ' ' + iconClass,\n            closeable: true\n        }));\n        return toDispose;\n    }\n\n    protected doRegisterViewContainer(id: string, location: string, options: ViewContainerTitleOptions): Disposable {\n        const toDispose = new DisposableCollection();\n        this.viewContainers.set(id, [location, options]);\n        toDispose.push(Disposable.create(() => this.viewContainers.delete(id)));\n        const toggleCommandId = `plugin.view-container.${id}.toggle`;\n        toDispose.push(this.commands.registerCommand({\n            id: toggleCommandId,\n            label: 'Toggle ' + options.label + ' View'\n        }, {\n            execute: async () => {\n                let widget = await this.getPluginViewContainer(id);\n                if (widget) {\n                    widget.dispose();\n                } else {\n                    widget = await this.openViewContainer(id);\n                    if (widget) {\n                        this.shell.activateWidget(widget.id);\n                    }\n                }\n            }\n        }));\n        toDispose.push(this.menus.registerMenuAction(CommonMenus.VIEW_VIEWS, {\n            commandId: toggleCommandId,\n            label: options.label\n        }));\n        toDispose.push(this.quickView.registerItem({\n            label: options.label,\n            open: async () => {\n                const widget = await this.openViewContainer(id);\n                if (widget) {\n                    this.shell.activateWidget(widget.id);\n                }\n            }\n        }));\n        toDispose.push(Disposable.create(async () => {\n            const widget = await this.getPluginViewContainer(id);\n            if (widget) {\n                widget.dispose();\n            }\n        }));\n        return toDispose;\n    }\n\n    getContainerViews(viewContainerId: string): string[] {\n        return this.containerViews.get(viewContainerId) || [];\n    }\n\n    registerView(viewContainerId: string, view: View): Disposable {\n        if (this.views.has(view.id)) {\n            console.warn('view with such id already registered: ', JSON.stringify(view));\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection();\n\n        view.when = view.when?.trim();\n        this.views.set(view.id, [viewContainerId, view]);\n        toDispose.push(Disposable.create(() => this.views.delete(view.id)));\n\n        const containerViews = this.getContainerViews(viewContainerId);\n        containerViews.push(view.id);\n        this.containerViews.set(viewContainerId, containerViews);\n        toDispose.push(Disposable.create(() => {\n            const index = containerViews.indexOf(view.id);\n            if (index !== -1) {\n                containerViews.splice(index, 1);\n            }\n        }));\n\n        if (view.when && view.when !== 'false' && view.when !== 'true') {\n            this.viewClauseContexts.set(view.id, this.contextKeyService.parseKeys(view.when));\n            toDispose.push(Disposable.create(() => this.viewClauseContexts.delete(view.id)));\n        }\n        toDispose.push(this.quickView.registerItem({\n            label: view.name,\n            when: view.when,\n            open: () => this.openView(view.id, { activate: true })\n        }));\n        toDispose.push(this.commands.registerCommand({ id: `${view.id}.focus` }, {\n            execute: async () => { await this.openView(view.id, { activate: true }); }\n        }));\n        return toDispose;\n    }\n\n    registerViewWelcome(viewWelcome: ViewWelcome): Disposable {\n        const toDispose = new DisposableCollection();\n\n        const viewsWelcome = this.viewsWelcome.get(viewWelcome.view) || [];\n        viewsWelcome.push(viewWelcome);\n        this.viewsWelcome.set(viewWelcome.view, viewsWelcome);\n        this.handleViewWelcomeChange(viewWelcome.view);\n        toDispose.push(Disposable.create(() => {\n            const index = viewsWelcome.indexOf(viewWelcome);\n            if (index !== -1) {\n                viewsWelcome.splice(index, 1);\n            }\n            this.handleViewWelcomeChange(viewWelcome.view);\n        }));\n\n        if (viewWelcome.when) {\n            const index = viewsWelcome.indexOf(viewWelcome);\n            const viewWelcomeId = this.toViewWelcomeId(index, viewWelcome.view);\n            this.viewClauseContexts.set(viewWelcomeId, this.contextKeyService.parseKeys(viewWelcome.when));\n            toDispose.push(Disposable.create(() => this.viewClauseContexts.delete(viewWelcomeId)));\n        }\n        return toDispose;\n    }\n\n    async handleViewWelcomeChange(viewId: string): Promise<void> {\n        const widget = await this.getTreeViewWelcomeWidget(viewId);\n        if (widget) {\n            widget.handleViewWelcomeContentChange(this.getViewWelcomes(viewId));\n        }\n    }\n\n    protected async getTreeViewWelcomeWidget(viewId: string): Promise<TreeViewWelcomeWidget | undefined> {\n        switch (viewId) {\n            case 'explorer':\n                return this.widgetManager.getWidget<TreeViewWelcomeWidget>(FILE_NAVIGATOR_ID);\n            default:\n                return this.widgetManager.getWidget<TreeViewWelcomeWidget>(PLUGIN_VIEW_DATA_FACTORY_ID, { id: viewId });\n        }\n    }\n\n    getViewWelcomes(viewId: string): ViewWelcome[] {\n        return this.viewsWelcome.get(viewId) || [];\n    }\n\n    async getView(viewId: string): Promise<PluginViewWidget | undefined> {\n        if (!this.views.has(viewId)) {\n            return undefined;\n        }\n        return this.widgetManager.getWidget<PluginViewWidget>(PLUGIN_VIEW_FACTORY_ID, this.toPluginViewWidgetIdentifier(viewId));\n    }\n\n    async openView(viewId: string, options?: { activate?: boolean, reveal?: boolean }): Promise<PluginViewWidget | undefined> {\n        const view = await this.doOpenView(viewId);\n        if (view && options) {\n            if (options.activate === true) {\n                await this.shell.activateWidget(view.id);\n            } else if (options.reveal === true) {\n                await this.shell.revealWidget(view.id);\n            }\n        }\n        return view;\n    }\n    protected async doOpenView(viewId: string): Promise<PluginViewWidget | undefined> {\n        const widget = await this.getView(viewId);\n        if (widget) {\n            return widget;\n        }\n        const data = this.views.get(viewId);\n        if (!data) {\n            return undefined;\n        }\n        const [containerId] = data;\n        await this.openViewContainer(containerId);\n        return this.getView(viewId);\n    }\n\n    protected async prepareView(widget: PluginViewWidget): Promise<void> {\n        const data = this.views.get(widget.options.viewId);\n        if (!data) {\n            return;\n        }\n        const [, view] = data;\n        widget.title.label = view.name;\n        const currentDataWidget = widget.widgets[0];\n        const viewDataWidget = await this.createViewDataWidget(view.id);\n        if (widget.isDisposed) {\n            // eslint-disable-next-line no-unused-expressions\n            viewDataWidget?.dispose();\n            return;\n        }\n        if (currentDataWidget !== viewDataWidget) {\n            if (currentDataWidget) {\n                currentDataWidget.dispose();\n            }\n            if (viewDataWidget) {\n                widget.addWidget(viewDataWidget);\n            }\n        }\n    }\n\n    async openViewContainer(containerId: string): Promise<ViewContainerWidget | undefined> {\n        if (containerId === 'explorer') {\n            const widget = await this.explorer.openView();\n            if (widget.parent instanceof ViewContainerWidget) {\n                return widget.parent;\n            }\n            return undefined;\n        }\n        if (containerId === 'scm') {\n            const widget = await this.scm.openView();\n            if (widget.parent instanceof ViewContainerWidget) {\n                return widget.parent;\n            }\n            return undefined;\n        }\n        if (containerId === 'debug') {\n            const widget = await this.debug.openView();\n            return widget['sessionWidget']['viewContainer'];\n        }\n        const data = this.viewContainers.get(containerId);\n        if (!data) {\n            return undefined;\n        }\n        const [location] = data;\n        const identifier = this.toViewContainerIdentifier(containerId);\n        const containerWidget = await this.widgetManager.getOrCreateWidget<ViewContainerWidget>(PLUGIN_VIEW_CONTAINER_FACTORY_ID, identifier);\n        if (!containerWidget.isAttached) {\n            await this.shell.addWidget(containerWidget, {\n                area: ApplicationShell.isSideArea(location) ? location : 'left',\n                rank: Number.MAX_SAFE_INTEGER\n            });\n        }\n        return containerWidget;\n    }\n\n    protected async prepareViewContainer(viewContainerId: string, containerWidget: ViewContainerWidget): Promise<void> {\n        const data = this.viewContainers.get(viewContainerId);\n        if (data) {\n            const [, options] = data;\n            containerWidget.setTitleOptions(options);\n        }\n        for (const viewId of this.getContainerViews(viewContainerId)) {\n            const identifier = this.toPluginViewWidgetIdentifier(viewId);\n            const widget = await this.widgetManager.getOrCreateWidget<PluginViewWidget>(PLUGIN_VIEW_FACTORY_ID, identifier);\n            if (containerWidget.getTrackableWidgets().indexOf(widget) === -1) {\n                containerWidget.addWidget(widget, {\n                    initiallyCollapsed: !!containerWidget.getParts().length,\n                    initiallyHidden: !this.isViewVisible(viewId)\n                });\n            }\n            const part = containerWidget.getPartFor(widget);\n            if (part) {\n                // if a view is explicitly hidden then suppress updating visibility based on `when` closure\n                part.onDidChangeVisibility(() => widget.suppressUpdateViewVisibility = part.isHidden);\n\n                const tryFireOnDidExpandView = () => {\n                    if (widget.widgets.length === 0) {\n                        if (!part.collapsed && part.isVisible) {\n                            this.onDidExpandViewEmitter.fire(viewId);\n                        }\n                    } else {\n                        toFire.dispose();\n                    }\n                };\n                const toFire = new DisposableCollection(\n                    part.onCollapsed(tryFireOnDidExpandView),\n                    part.onDidChangeVisibility(tryFireOnDidExpandView)\n                );\n\n                tryFireOnDidExpandView();\n            }\n        }\n    }\n\n    protected async getPluginViewContainer(viewContainerId: string): Promise<ViewContainerWidget | undefined> {\n        if (viewContainerId === 'explorer') {\n            return this.widgetManager.getWidget<ViewContainerWidget>(EXPLORER_VIEW_CONTAINER_ID);\n        }\n        if (viewContainerId === 'scm') {\n            return this.widgetManager.getWidget<ViewContainerWidget>(SCM_VIEW_CONTAINER_ID);\n        }\n        if (viewContainerId === 'debug') {\n            const debug = await this.widgetManager.getWidget(DebugWidget.ID);\n            if (debug instanceof DebugWidget) {\n                return debug['sessionWidget']['viewContainer'];\n            }\n        }\n        const identifier = this.toViewContainerIdentifier(viewContainerId);\n        return this.widgetManager.getWidget<ViewContainerWidget>(PLUGIN_VIEW_CONTAINER_FACTORY_ID, identifier);\n    }\n\n    async initWidgets(): Promise<void> {\n        const promises: Promise<void>[] = [];\n        for (const id of this.viewContainers.keys()) {\n            promises.push((async () => {\n                let viewContainer = await this.getPluginViewContainer(id);\n                if (!viewContainer) {\n                    viewContainer = await this.openViewContainer(id);\n                    if (viewContainer && !viewContainer.getParts().filter(part => !part.isHidden).length) {\n                        // close view containers without any visible view parts\n                        viewContainer.dispose();\n                    }\n                } else {\n                    await this.prepareViewContainer(this.toViewContainerId(viewContainer.options), viewContainer);\n                }\n            })().catch(console.error));\n        }\n        promises.push((async () => {\n            const explorer = await this.widgetManager.getWidget(EXPLORER_VIEW_CONTAINER_ID);\n            if (explorer instanceof ViewContainerWidget) {\n                await this.prepareViewContainer('explorer', explorer);\n            }\n        })().catch(console.error));\n        promises.push((async () => {\n            const scm = await this.widgetManager.getWidget(SCM_VIEW_CONTAINER_ID);\n            if (scm instanceof ViewContainerWidget) {\n                await this.prepareViewContainer('scm', scm);\n            }\n        })().catch(console.error));\n        promises.push((async () => {\n            const debug = await this.widgetManager.getWidget(DebugWidget.ID);\n            if (debug instanceof DebugWidget) {\n                const viewContainer = debug['sessionWidget']['viewContainer'];\n                await this.prepareViewContainer('debug', viewContainer);\n            }\n        })().catch(console.error));\n        await Promise.all(promises);\n    }\n\n    async removeStaleWidgets(): Promise<void> {\n        const views = this.widgetManager.getWidgets(PLUGIN_VIEW_FACTORY_ID);\n        for (const view of views) {\n            if (view instanceof PluginViewWidget) {\n                const id = this.toViewId(view.options);\n                if (!this.views.has(id)) {\n                    view.dispose();\n                }\n            }\n        }\n        const viewContainers = this.widgetManager.getWidgets(PLUGIN_VIEW_CONTAINER_FACTORY_ID);\n        for (const viewContainer of viewContainers) {\n            if (viewContainer instanceof ViewContainerWidget) {\n                const id = this.toViewContainerId(viewContainer.options);\n                if (!this.viewContainers.has(id)) {\n                    viewContainer.dispose();\n                }\n            }\n        }\n    }\n\n    protected toViewContainerIdentifier(viewContainerId: string): ViewContainerIdentifier {\n        return { id: PLUGIN_VIEW_CONTAINER_FACTORY_ID + ':' + viewContainerId, progressLocationId: viewContainerId };\n    }\n    protected toViewContainerId(identifier: ViewContainerIdentifier): string {\n        return identifier.id.substr(PLUGIN_VIEW_CONTAINER_FACTORY_ID.length + 1);\n    }\n\n    protected toPluginViewWidgetIdentifier(viewId: string): PluginViewWidgetIdentifier {\n        return { id: PLUGIN_VIEW_FACTORY_ID + ':' + viewId, viewId };\n    }\n    protected toViewId(identifier: PluginViewWidgetIdentifier): string {\n        return identifier.viewId;\n    }\n\n    protected toViewWelcomeId(index: number, viewId: string): string {\n        return `view-welcome.${viewId}.${index}`;\n    }\n\n    /**\n     * retrieve restored layout state from previous user session but close widgets\n     * widgets should be opened only when view data providers are registered\n     */\n    onDidInitializeLayout(): void {\n        const widgets = this.widgetManager.getWidgets(PLUGIN_VIEW_DATA_FACTORY_ID);\n        for (const widget of widgets) {\n            if (StatefulWidget.is(widget)) {\n                const state = widget.storeState();\n                if (state) {\n                    this.viewDataState.set(widget.id, state);\n                }\n            }\n            widget.dispose();\n        }\n    }\n\n    registerViewDataProvider(viewId: string, provider: ViewDataProvider): Disposable {\n        if (this.viewDataProviders.has(viewId)) {\n            console.error(`data provider for '${viewId}' view is already registered`);\n            return Disposable.NULL;\n        }\n        this.viewDataProviders.set(viewId, provider);\n        const toDispose = new DisposableCollection(Disposable.create(() => {\n            this.viewDataProviders.delete(viewId);\n            this.viewDataState.delete(viewId);\n        }));\n        this.getView(viewId).then(async view => {\n            if (toDispose.disposed) {\n                return;\n            }\n            if (view) {\n                if (view.isVisible) {\n                    await this.prepareView(view);\n                } else {\n                    const toDisposeOnDidExpandView = new DisposableCollection(this.onDidExpandView(async id => {\n                        if (id === viewId) {\n                            unsubscribe();\n                            await this.prepareView(view);\n                        }\n                    }));\n                    const unsubscribe = () => toDisposeOnDidExpandView.dispose();\n                    view.disposed.connect(unsubscribe);\n                    toDisposeOnDidExpandView.push(Disposable.create(() => view.disposed.disconnect(unsubscribe)));\n                    toDispose.push(toDisposeOnDidExpandView);\n                }\n            }\n        });\n        return toDispose;\n    }\n\n    protected async createViewDataWidget(viewId: string): Promise<Widget | undefined> {\n        const view = this.views.get(viewId);\n        const provider = this.viewDataProviders.get(viewId);\n        if (!view || !provider) {\n            return undefined;\n        }\n        const [, viewInfo] = view;\n        const state = this.viewDataState.get(viewId);\n        const widget = await provider({ state, viewInfo });\n        widget.handleViewWelcomeContentChange(this.getViewWelcomes(viewId));\n        if (StatefulWidget.is(widget)) {\n            this.storeViewDataStateOnDispose(viewId, widget);\n        } else {\n            this.viewDataState.delete(viewId);\n        }\n        return widget;\n    }\n\n    protected storeViewDataStateOnDispose(viewId: string, widget: Widget & StatefulWidget): void {\n        const dispose = widget.dispose.bind(widget);\n        widget.dispose = () => {\n            const state = widget.storeState();\n            if (state) {\n                this.viewDataState.set(viewId, state);\n            }\n            dispose();\n        };\n    }\n\n    protected trackVisibleWidget(factoryId: string, view: PluginViewRegistry.VisibleView): void {\n        this.doTrackVisibleWidget(this.widgetManager.tryGetWidget(factoryId), view);\n        this.widgetManager.onDidCreateWidget(event => {\n            if (factoryId === event.factoryId) {\n                const { widget } = event;\n                this.doTrackVisibleWidget(widget, view);\n            }\n        });\n    }\n\n    protected doTrackVisibleWidget(widget: Widget | undefined, view: PluginViewRegistry.VisibleView): void {\n        if (widget instanceof BaseWidget) {\n            widget.onDidChangeVisibility(() => this.updateVisibleWidget(widget, view));\n            const toDispose = new DisposableCollection(\n                Disposable.create(() => this.updateVisibleWidget(widget, view)),\n                this.shell.onDidChangeActiveWidget(() => {\n                    if (this.shell.activeWidget === widget) {\n                        this.updateVisibleWidget(widget, view);\n                    }\n                })\n            );\n            if (view.sideArea !== undefined) {\n                toDispose.pushAll([\n                    this.shell.onDidAddWidget(w => {\n                        if (w === widget) {\n                            this.updateVisibleWidget(widget, view);\n                        }\n                    })\n                ]);\n            }\n            widget.disposed.connect(() => toDispose.dispose());\n        }\n    }\n\n    protected readonly visiblePanels = new Set<string>();\n    protected readonly visibleViewlets = new Set<string>();\n\n    protected updateVisibleWidget(widget: BaseWidget, view: PluginViewRegistry.VisibleView): void {\n        const visibleViews = 'viewletId' in view ? this.visibleViewlets : this.visiblePanels;\n        const viewId = 'viewletId' in view ? view.viewletId : view.panelId;\n        const visibleView = 'viewletId' in view ? this.viewContextKeys.activeViewlet : this.viewContextKeys.activePanel;\n        visibleViews.delete(viewId);\n        if (this.isVisibleWidget(widget, view)) {\n            visibleView.set(viewId);\n            visibleViews.add(viewId);\n        } else {\n            const lastVisibleView = [...visibleViews.values()][visibleViews.size - 1];\n            visibleView.set(lastVisibleView);\n        }\n    }\n\n    protected isVisibleWidget(widget: BaseWidget, view: PluginViewRegistry.VisibleView): boolean {\n        if (widget.isDisposed || !widget.isVisible) {\n            return false;\n        }\n        if (view.sideArea === undefined) {\n            return true;\n        }\n        const area = this.shell.getAreaFor(widget);\n        return view.sideArea === (area === 'left' || area === 'right');\n    }\n\n    protected updateFocusedView(): void {\n        const widget = this.shell.activeWidget;\n        if (widget instanceof PluginViewWidget) {\n            this.viewContextKeys.focusedView.set(widget.options.viewId);\n        } else {\n            this.viewContextKeys.focusedView.reset();\n        }\n    }\n\n}\nexport namespace PluginViewRegistry {\n    export type VisibleView = ({ viewletId: string } | { panelId: string }) & {\n        /** `undefined` means any area */\n        sideArea?: boolean\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { Panel, Widget } from '@theia/core/shared/@phosphor/widgets';\nimport { MenuModelRegistry } from '@theia/core/lib/common/menu';\nimport { CommandRegistry } from '@theia/core/lib/common/command';\nimport { ViewContextKeyService } from './view-context-key-service';\nimport { StatefulWidget } from '@theia/core/lib/browser/shell/shell-layout-restorer';\nimport { Message } from '@theia/core/shared/@phosphor/messaging';\nimport { TreeViewWidget } from './tree-view-widget';\n\n@injectable()\nexport class PluginViewWidgetIdentifier {\n    id: string;\n    viewId: string;\n}\n\n@injectable()\nexport class PluginViewWidget extends Panel implements StatefulWidget {\n\n    @inject(MenuModelRegistry)\n    protected readonly menus: MenuModelRegistry;\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(ViewContextKeyService)\n    protected readonly contextKeys: ViewContextKeyService;\n\n    @inject(PluginViewWidgetIdentifier)\n    readonly options: PluginViewWidgetIdentifier;\n\n    constructor() {\n        super();\n        this.node.tabIndex = -1;\n        this.node.style.height = '100%';\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.id = this.options.id;\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        const widget = this.widgets[0];\n        if (widget) {\n            widget.activate();\n            this.updateWidgetMessage();\n        } else {\n            this.node.focus();\n        }\n    }\n\n    storeState(): PluginViewWidget.State {\n        return {\n            label: this.title.label,\n            message: this.message,\n            widgets: this.widgets,\n            suppressUpdateViewVisibility: this._suppressUpdateViewVisibility\n        };\n    }\n\n    restoreState(state: PluginViewWidget.State): void {\n        this.title.label = state.label;\n        this.message = state.message;\n        this.suppressUpdateViewVisibility = state.suppressUpdateViewVisibility;\n        for (const widget of state.widgets) {\n            this.addWidget(widget);\n        }\n    }\n\n    protected _suppressUpdateViewVisibility = false;\n    set suppressUpdateViewVisibility(suppressUpdateViewVisibility: boolean) {\n        this._suppressUpdateViewVisibility = !this.updatingViewVisibility && suppressUpdateViewVisibility;\n    }\n\n    protected updatingViewVisibility = false;\n    updateViewVisibility(cb: () => void): void {\n        if (this._suppressUpdateViewVisibility) {\n            return;\n        }\n        try {\n            this.updatingViewVisibility = true;\n            cb();\n        } finally {\n            this.updatingViewVisibility = false;\n        }\n    }\n\n    private _message: string | undefined;\n    get message(): string | undefined {\n        return this._message;\n    }\n\n    set message(message: string | undefined) {\n        this._message = message;\n        this.updateWidgetMessage();\n    }\n\n    private updateWidgetMessage(): void {\n        const widget = this.widgets[0];\n        if (widget) {\n            if (widget instanceof TreeViewWidget) {\n                widget.message = this._message;\n            }\n        }\n    }\n\n    addWidget(widget: Widget): void {\n        super.addWidget(widget);\n        this.updateWidgetMessage();\n    }\n\n    insertWidget(index: number, widget: Widget): void {\n        super.insertWidget(index, widget);\n        this.updateWidgetMessage();\n    }\n}\nexport namespace PluginViewWidget {\n    export interface State {\n        label: string,\n        message?: string,\n        widgets: ReadonlyArray<Widget>,\n        suppressUpdateViewVisibility: boolean\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018-2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { TreeViewsExt, TreeViewSelection } from '../../../common/plugin-api-rpc';\nimport { Command } from '../../../common/plugin-api-rpc-model';\nimport {\n    TreeNode,\n    NodeProps,\n    SelectableTreeNode,\n    ExpandableTreeNode,\n    CompositeTreeNode,\n    TreeImpl,\n    TREE_NODE_SEGMENT_CLASS,\n    TREE_NODE_SEGMENT_GROW_CLASS,\n    TREE_NODE_TAIL_CLASS,\n    TreeModelImpl,\n    TreeViewWelcomeWidget\n} from '@theia/core/lib/browser';\nimport { TreeViewItem, TreeViewItemCollapsibleState } from '../../../common/plugin-api-rpc';\nimport { MenuPath, MenuModelRegistry, ActionMenuNode } from '@theia/core/lib/common/menu';\nimport * as React from '@theia/core/shared/react';\nimport { PluginSharedStyle } from '../plugin-shared-style';\nimport { ViewContextKeyService } from './view-context-key-service';\nimport { Widget } from '@theia/core/lib/browser/widgets/widget';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { View } from '../../../common/plugin-protocol';\nimport CoreURI from '@theia/core/lib/common/uri';\nimport { ContextKeyService } from '@theia/core/lib/browser/context-key-service';\n\nexport const TREE_NODE_HYPERLINK = 'theia-TreeNodeHyperlink';\nexport const VIEW_ITEM_CONTEXT_MENU: MenuPath = ['view-item-context-menu'];\nexport const VIEW_ITEM_INLINE_MENU: MenuPath = ['view-item-inline-menu'];\n\nexport interface SelectionEventHandler {\n    readonly node: SelectableTreeNode;\n    readonly contextSelection: boolean;\n}\n\nexport interface TreeViewNode extends SelectableTreeNode {\n    contextValue?: string;\n    command?: Command;\n    resourceUri?: string;\n    themeIconId?: string | 'folder' | 'file';\n    tooltip?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    description?: string | boolean | any;\n}\nexport namespace TreeViewNode {\n    export function is(arg: TreeNode | undefined): arg is TreeViewNode {\n        return !!arg && SelectableTreeNode.is(arg) && !ExpandableTreeNode.is(arg) && !CompositeTreeNode.is(arg);\n    }\n}\n\nexport interface CompositeTreeViewNode extends TreeViewNode, ExpandableTreeNode, CompositeTreeNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    description?: string | boolean | any;\n}\nexport namespace CompositeTreeViewNode {\n    export function is(arg: TreeNode | undefined): arg is CompositeTreeViewNode {\n        return !!arg && SelectableTreeNode.is(arg) && ExpandableTreeNode.is(arg) && CompositeTreeNode.is(arg);\n    }\n}\n\n@injectable()\nexport class TreeViewWidgetIdentifier {\n    id: string;\n}\n\n@injectable()\nexport class PluginTree extends TreeImpl {\n\n    @inject(PluginSharedStyle)\n    protected readonly sharedStyle: PluginSharedStyle;\n\n    @inject(TreeViewWidgetIdentifier)\n    protected readonly identifier: TreeViewWidgetIdentifier;\n\n    @inject(MessageService)\n    protected readonly notification: MessageService;\n\n    protected readonly onDidChangeWelcomeStateEmitter: Emitter<void> = new Emitter<void>();\n    readonly onDidChangeWelcomeState = this.onDidChangeWelcomeStateEmitter.event;\n\n    private _proxy: TreeViewsExt | undefined;\n    private _viewInfo: View | undefined;\n    private _isEmpty: boolean;\n\n    set proxy(proxy: TreeViewsExt | undefined) {\n        this._proxy = proxy;\n    }\n    get proxy(): TreeViewsExt | undefined {\n        return this._proxy;\n    }\n\n    set viewInfo(viewInfo: View) {\n        this._viewInfo = viewInfo;\n    }\n\n    get isEmpty(): boolean {\n        return this._isEmpty;\n    }\n\n    protected async resolveChildren(parent: CompositeTreeNode): Promise<TreeNode[]> {\n        if (!this._proxy) {\n            return super.resolveChildren(parent);\n        }\n        const children = await this.fetchChildren(this._proxy, parent);\n        return children.map(value => this.createTreeNode(value, parent));\n    }\n\n    protected async fetchChildren(proxy: TreeViewsExt, parent: CompositeTreeNode): Promise<TreeViewItem[]> {\n        try {\n            const children = await proxy.$getChildren(this.identifier.id, parent.id);\n            const oldEmpty = this._isEmpty;\n            this._isEmpty = !parent.id && (!children || children.length === 0);\n            if (oldEmpty !== this._isEmpty) {\n                this.onDidChangeWelcomeStateEmitter.fire();\n            }\n            return children || [];\n        } catch (e) {\n            if (e) {\n                console.error(`Failed to fetch children for '${this.identifier.id}'`, e);\n                const label = this._viewInfo ? this._viewInfo.name : this.identifier.id;\n                this.notification.error(`${label}: ${e.message}`);\n            }\n            return [];\n        }\n    }\n\n    protected createTreeNode(item: TreeViewItem, parent: CompositeTreeNode): TreeNode {\n        const icon = this.toIconClass(item);\n        const resourceUri = item.resourceUri && URI.revive(item.resourceUri).toString();\n        const themeIconId = item.themeIconId ? item.themeIconId : item.collapsibleState !== TreeViewItemCollapsibleState.None ? 'folder' : 'file';\n        const update: Partial<TreeViewNode> = {\n            name: item.label,\n            icon,\n            description: item.description,\n            themeIconId,\n            resourceUri,\n            tooltip: item.tooltip,\n            contextValue: item.contextValue\n        };\n        const node = this.getNode(item.id);\n        if (item.collapsibleState !== undefined && item.collapsibleState !== TreeViewItemCollapsibleState.None) {\n            if (CompositeTreeViewNode.is(node)) {\n                return Object.assign(node, update);\n            }\n            return Object.assign({\n                id: item.id,\n                parent,\n                visible: true,\n                selected: false,\n                expanded: TreeViewItemCollapsibleState.Expanded === item.collapsibleState,\n                children: []\n            }, update);\n        }\n        if (TreeViewNode.is(node)) {\n            return Object.assign(node, update, { command: item.command });\n        }\n        return Object.assign({\n            id: item.id,\n            parent,\n            visible: true,\n            selected: false,\n            command: item.command\n        }, update);\n    }\n\n    protected toIconClass(item: TreeViewItem): string | undefined {\n        if (item.icon) {\n            return 'fa ' + item.icon;\n        }\n        if (item.iconUrl) {\n            const reference = this.sharedStyle.toIconClass(item.iconUrl);\n            this.toDispose.push(reference);\n            return reference.object.iconClass;\n        }\n        return undefined;\n    }\n\n}\n\n@injectable()\nexport class PluginTreeModel extends TreeModelImpl {\n\n    @inject(PluginTree)\n    protected readonly tree: PluginTree;\n\n    set proxy(proxy: TreeViewsExt | undefined) {\n        this.tree.proxy = proxy;\n    }\n    get proxy(): TreeViewsExt | undefined {\n        return this.tree.proxy;\n    }\n\n    set viewInfo(viewInfo: View) {\n        this.tree.viewInfo = viewInfo;\n    }\n\n    get isTreeEmpty(): boolean {\n        return this.tree.isEmpty;\n    }\n\n    get onDidChangeWelcomeState(): Event<void> {\n        return this.tree.onDidChangeWelcomeState;\n    }\n\n}\n\n@injectable()\nexport class TreeViewWidget extends TreeViewWelcomeWidget {\n\n    protected _contextSelection = false;\n\n    @inject(MenuModelRegistry)\n    protected readonly menus: MenuModelRegistry;\n\n    @inject(ViewContextKeyService)\n    protected readonly contextKeys: ViewContextKeyService;\n\n    @inject(TreeViewWidgetIdentifier)\n    readonly identifier: TreeViewWidgetIdentifier;\n\n    @inject(PluginTreeModel)\n    readonly model: PluginTreeModel;\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    protected readonly onDidChangeVisibilityEmitter = new Emitter<boolean>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    @postConstruct()\n    protected init(): void {\n        super.init();\n        this.id = this.identifier.id;\n        this.addClass('theia-tree-view');\n        this.node.style.height = '100%';\n\n        this.model.onDidChangeWelcomeState(this.update, this);\n        this.toDispose.push(this.model.onDidChangeWelcomeState(this.update, this));\n        this.toDispose.push(this.onDidChangeVisibilityEmitter);\n    }\n\n    protected renderIcon(node: TreeNode, props: NodeProps): React.ReactNode {\n        const icon = this.toNodeIcon(node);\n        if (icon) {\n            return <div className={icon + ' theia-tree-view-icon'}></div>;\n        }\n        return undefined;\n    }\n\n    protected renderCaption(node: TreeViewNode, props: NodeProps): React.ReactNode {\n        const classes = [TREE_NODE_SEGMENT_CLASS];\n        if (!this.hasTrailingSuffixes(node)) {\n            classes.push(TREE_NODE_SEGMENT_GROW_CLASS);\n        }\n        const className = classes.join(' ');\n        const title = node.tooltip ||\n            (node.resourceUri && this.labelProvider.getLongName(new CoreURI(node.resourceUri)))\n            || this.toNodeName(node);\n        const attrs = this.decorateCaption(node, {\n            className, id: node.id,\n            title\n        });\n\n        const children = this.getCaption(node);\n        return React.createElement('div', attrs, ...children);\n    }\n\n    protected getCaption(node: TreeNode): React.ReactNode {\n        const nodes: React.ReactNode[] = [];\n\n        const name = this.toNodeName(node) || '';\n        const description = this.toNodeDescription(node);\n\n        let work = name;\n\n        const regex = /\\[([^\\[]+)\\]\\(([^\\)]+)\\)/g;\n        const matchResult = work.match(regex);\n\n        if (matchResult) {\n            matchResult.forEach((match, index) => {\n                nodes.push(<span key={`m${index}`}>{work.substring(0, work.indexOf(match))}</span>);\n\n                const execResult = regex.exec(name);\n                nodes.push(<a key={`l${index}`}\n                    href={execResult![2]}\n                    target='_blank'\n                    className={TREE_NODE_HYPERLINK}\n                    onClick={e => e.stopPropagation()}>{execResult![1]}</a>\n                );\n\n                work = work.substring(work.indexOf(match) + match.length);\n            });\n        }\n\n        return <div className='noWrapInfoTree'>\n            {...nodes}\n            {work && <span>{work}</span>}\n            {description && <span className='theia-tree-view-description'>\n                {description}\n            </span>}\n        </div>;\n    }\n\n    protected renderTailDecorations(node: TreeViewNode, props: NodeProps): React.ReactNode {\n        if (this.model.selectedNodes.every(selected => selected.id !== node.id) && node.id !== this.hoverNodeId) {\n            return false;\n        }\n        return this.contextKeys.with({ view: this.id, viewItem: node.contextValue }, () => {\n            const menu = this.menus.getMenu(VIEW_ITEM_INLINE_MENU);\n            const arg = this.toTreeViewSelection(node);\n            return <React.Fragment>\n                {menu.children.map((item, index) => item instanceof ActionMenuNode && this.renderInlineCommand(item, index, arg))}\n            </React.Fragment>;\n        });\n    }\n\n    toTreeViewSelection(node: TreeNode): TreeViewSelection {\n        return { treeViewId: this.id, treeItemId: node.id };\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected renderInlineCommand(node: ActionMenuNode, index: number, arg: any): React.ReactNode {\n        const { icon } = node;\n        if (!icon || !this.commands.isVisible(node.action.commandId, arg) || !this.contextKeys.match(node.action.when)) {\n            return false;\n        }\n        const className = [TREE_NODE_SEGMENT_CLASS, TREE_NODE_TAIL_CLASS, icon, 'theia-tree-view-inline-action'].join(' ');\n        return <div key={index} className={className} title={node.label} onClick={e => {\n            e.stopPropagation();\n            this.commands.executeCommand(node.action.commandId, arg);\n        }} />;\n    }\n\n    protected hoverNodeId: string | undefined;\n    protected setHoverNodeId(hoverNodeId: string | undefined): void {\n        this.hoverNodeId = hoverNodeId;\n        this.update();\n    }\n\n    protected createNodeAttributes(node: TreeNode, props: NodeProps): React.Attributes & React.HTMLAttributes<HTMLElement> {\n        return {\n            ...super.createNodeAttributes(node, props),\n            onMouseOver: () => this.setHoverNodeId(node.id),\n            onMouseOut: () => this.setHoverNodeId(undefined)\n        };\n    }\n\n    protected toContextMenuArgs(node: SelectableTreeNode): [TreeViewSelection] {\n        return [this.toTreeViewSelection(node)];\n    }\n\n    setFlag(flag: Widget.Flag): void {\n        super.setFlag(flag);\n        if (flag === Widget.Flag.IsVisible) {\n            this.onDidChangeVisibilityEmitter.fire(this.isVisible);\n        }\n    }\n\n    clearFlag(flag: Widget.Flag): void {\n        super.clearFlag(flag);\n        if (flag === Widget.Flag.IsVisible) {\n            this.onDidChangeVisibilityEmitter.fire(this.isVisible);\n        }\n    }\n\n    handleEnter(event: KeyboardEvent): void {\n        super.handleEnter(event);\n        this.tryExecuteCommand();\n    }\n\n    handleClickEvent(node: TreeNode, event: React.MouseEvent<HTMLElement>): void {\n        super.handleClickEvent(node, event);\n        this.tryExecuteCommand(node);\n    }\n\n    // execute TreeItem.command if present\n    protected tryExecuteCommand(node?: TreeNode): void {\n        const treeNodes = (node ? [node] : this.model.selectedNodes) as TreeViewNode[];\n        for (const treeNode of treeNodes) {\n            if (treeNode && treeNode.command) {\n                this.commands.executeCommand(treeNode.command.id, ...(treeNode.command.arguments || []));\n            }\n        }\n    }\n\n    private _message: string | undefined;\n    get message(): string | undefined {\n        return this._message;\n    }\n\n    set message(message: string | undefined) {\n        this._message = message;\n        this.update();\n    }\n\n    protected render(): React.ReactNode {\n        return React.createElement('div', this.createContainerAttributes(), this.renderSearchInfo(), this.renderTree(this.model));\n    }\n\n    protected renderSearchInfo(): React.ReactNode {\n        if (this._message) {\n            return <div className='theia-TreeViewInfo'>{this._message}</div>;\n        }\n        return undefined;\n    }\n\n    shouldShowWelcomeView(): boolean {\n        return (this.model.proxy === undefined || this.model.isTreeEmpty) && this.message === undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { MAIN_RPC_CONTEXT, TreeViewsMain, TreeViewsExt, TreeViewRevealOptions } from '../../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport { PluginViewRegistry, PLUGIN_VIEW_DATA_FACTORY_ID } from './plugin-view-registry';\nimport {\n    SelectableTreeNode,\n    ExpandableTreeNode,\n    CompositeTreeNode,\n    WidgetManager\n} from '@theia/core/lib/browser';\nimport { ViewContextKeyService } from './view-context-key-service';\nimport { Disposable, DisposableCollection } from '@theia/core';\nimport { TreeViewWidget, TreeViewNode, PluginTreeModel } from './tree-view-widget';\nimport { PluginViewWidget } from './plugin-view-widget';\n\nexport class TreeViewsMainImpl implements TreeViewsMain, Disposable {\n\n    private readonly proxy: TreeViewsExt;\n    private readonly viewRegistry: PluginViewRegistry;\n    private readonly contextKeys: ViewContextKeyService;\n    private readonly widgetManager: WidgetManager;\n\n    private readonly treeViewProviders = new Map<string, Disposable>();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as not disposed */ })\n    );\n\n    constructor(rpc: RPCProtocol, private container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.TREE_VIEWS_EXT);\n        this.viewRegistry = container.get(PluginViewRegistry);\n\n        this.contextKeys = this.container.get(ViewContextKeyService);\n        this.widgetManager = this.container.get(WidgetManager);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $registerTreeDataProvider(treeViewId: string): Promise<void> {\n        this.treeViewProviders.set(treeViewId, this.viewRegistry.registerViewDataProvider(treeViewId, async ({ state, viewInfo }) => {\n            const widget = await this.widgetManager.getOrCreateWidget<TreeViewWidget>(PLUGIN_VIEW_DATA_FACTORY_ID, { id: treeViewId });\n            widget.model.viewInfo = viewInfo;\n            if (state) {\n                widget.restoreState(state);\n                // ensure that state is completely restored\n                await widget.model.refresh();\n            } else if (!widget.model.root) {\n                const root: CompositeTreeNode & ExpandableTreeNode = {\n                    id: '',\n                    parent: undefined,\n                    name: '',\n                    visible: false,\n                    expanded: true,\n                    children: []\n                };\n                widget.model.root = root;\n            }\n            if (this.toDispose.disposed) {\n                widget.model.proxy = undefined;\n            } else {\n                widget.model.proxy = this.proxy;\n                this.toDispose.push(Disposable.create(() => widget.model.proxy = undefined));\n                this.handleTreeEvents(widget.id, widget);\n            }\n            await widget.model.refresh();\n            return widget;\n        }));\n        this.toDispose.push(Disposable.create(() => this.$unregisterTreeDataProvider(treeViewId)));\n    }\n\n    async $unregisterTreeDataProvider(treeViewId: string): Promise<void> {\n        const treeDataProvider = this.treeViewProviders.get(treeViewId);\n        if (treeDataProvider) {\n            this.treeViewProviders.delete(treeViewId);\n            treeDataProvider.dispose();\n        }\n    }\n\n    async $refresh(treeViewId: string): Promise<void> {\n        const viewPanel = await this.viewRegistry.getView(treeViewId);\n        const widget = viewPanel && viewPanel.widgets[0];\n        if (widget instanceof TreeViewWidget) {\n            await widget.model.refresh();\n        }\n    }\n\n    // elementParentChain parameter contain a list of tree ids from root to the revealed node\n    // all parents of the revealed node should be fetched and expanded in order for it to reveal\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async $reveal(treeViewId: string, elementParentChain: string[], options: TreeViewRevealOptions): Promise<any> {\n        const viewPanel = await this.viewRegistry.openView(treeViewId, { activate: options.focus, reveal: true });\n        const widget = viewPanel && viewPanel.widgets[0];\n        if (widget instanceof TreeViewWidget) {\n            // pop last element which is the node to reveal\n            const elementId = elementParentChain.pop();\n            await this.expandParentChain(widget.model, elementParentChain);\n            const treeNode = widget.model.getNode(elementId);\n            if (treeNode) {\n                if (options.expand && ExpandableTreeNode.is(treeNode)) {\n                    await widget.model.expandNode(treeNode);\n                }\n                if (options.select && SelectableTreeNode.is(treeNode)) {\n                    widget.model.selectNode(treeNode);\n                }\n            }\n        }\n    }\n\n    /**\n     * Expand all parents of the node to reveal from root. This should also fetch missing nodes to the frontend.\n     */\n    private async expandParentChain(model: PluginTreeModel, elementParentChain: string[]): Promise<void> {\n        for (const elementId of elementParentChain) {\n            const treeNode = model.getNode(elementId);\n            if (ExpandableTreeNode.is(treeNode)) {\n                await model.expandNode(treeNode);\n            }\n        }\n    }\n\n    async $setMessage(treeViewId: string, message: string): Promise<void> {\n        const viewPanel = await this.viewRegistry.getView(treeViewId);\n        if (viewPanel instanceof PluginViewWidget) {\n            viewPanel.message = message;\n        }\n    }\n\n    async $setTitle(treeViewId: string, title: string): Promise<void> {\n        const viewPanel = await this.viewRegistry.getView(treeViewId);\n        if (viewPanel) {\n            viewPanel.title.label = title;\n        }\n    }\n\n    protected handleTreeEvents(treeViewId: string, treeViewWidget: TreeViewWidget): void {\n        this.toDispose.push(treeViewWidget.model.onExpansionChanged(event => {\n            this.proxy.$setExpanded(treeViewId, event.id, event.expanded);\n        }));\n\n        this.toDispose.push(treeViewWidget.model.onSelectionChanged(event => {\n            if (event.length === 1) {\n                const { contextValue } = event[0] as TreeViewNode;\n                this.contextKeys.viewItem.set(contextValue);\n            } else {\n                this.contextKeys.viewItem.set('');\n            }\n            this.contextKeys.view.set(treeViewId);\n\n            this.proxy.$setSelection(treeViewId, event.map((node: TreeViewNode) => node.id));\n        }));\n\n        const updateVisible = () => this.proxy.$setVisible(treeViewId, treeViewWidget.isVisible);\n        updateVisible();\n        this.toDispose.push(treeViewWidget.onDidChangeVisibility(() => updateVisible()));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, postConstruct, inject } from '@theia/core/shared/inversify';\nimport { ContextKey, ContextKeyService } from '@theia/core/lib/browser/context-key-service';\n\n@injectable()\nexport class ViewContextKeyService {\n\n    protected _view: ContextKey<string>;\n    get view(): ContextKey<string> {\n        return this._view;\n    }\n\n    protected _viewItem: ContextKey<string>;\n    get viewItem(): ContextKey<string> {\n        return this._viewItem;\n    }\n\n    protected _activeViewlet: ContextKey<string>;\n    /**\n     * Viewlet is a tab in the left area in VS Code. Active means visible in this context.\n     *\n     * In VS Code there can be only one visible viewlet at any time.\n     * It is not true for Theia, since views can be layed-out again to different areas.\n     * So only last visible view will be an active viewlet.\n     */\n    get activeViewlet(): ContextKey<string> {\n        return this._activeViewlet;\n    }\n\n    protected _activePanel: ContextKey<string>;\n    /**\n     * Panel is a tab in the bottom area in VS Code. Active means visible in this context.\n     *\n     * In VS Code there can be only one visible panel at any time.\n     * It is not true for Theia, since views can be layed-out again to different areas.\n     * So only last visible view will be an active panel.\n     */\n    get activePanel(): ContextKey<string> {\n        return this._activePanel;\n    }\n\n    protected _focusedView: ContextKey<string>;\n    get focusedView(): ContextKey<string> {\n        return this._focusedView;\n    }\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @postConstruct()\n    protected init(): void {\n        this._view = this.contextKeyService.createKey('view', '');\n        this._viewItem = this.contextKeyService.createKey('viewItem', '');\n        this._activeViewlet = this.contextKeyService.createKey('activeViewlet', '');\n        this._activePanel = this.contextKeyService.createKey('activePanel', '');\n        this._focusedView = this.contextKeyService.createKey('focusedView', '');\n    }\n\n    match(expression: string | undefined): boolean {\n        return !expression || this.contextKeyService.match(expression);\n    }\n\n    with<T>(input: { view?: string, viewItem?: string }, cb: () => T): T {\n        const view = this.view.get();\n        const viewItem = this.viewItem.get();\n        this.view.set(input.view);\n        this.viewItem.set(input.viewItem);\n        try {\n            return cb();\n        } finally {\n            this.view.set(view);\n            this.viewItem.set(viewItem);\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport URI from '@theia/core/lib/common/uri';\nimport { WebviewExternalEndpoint } from '../../common/webview-protocol';\nimport { environment } from '@theia/core/shared/@theia/application-package/lib/environment';\n\n@injectable()\nexport class WebviewEnvironment {\n\n    protected _hostPatternPromise: Promise<string>;\n\n    protected readonly externalEndpointHost = new Deferred<string>();\n\n    @inject(EnvVariablesServer)\n    protected readonly environments: EnvVariablesServer;\n\n    @postConstruct()\n    protected async init(): Promise<void> {\n        this._hostPatternPromise = this.getHostPattern();\n        try {\n            const endpointPattern = await this.hostPatternPromise;\n            const { host } = new Endpoint();\n            this.externalEndpointHost.resolve(endpointPattern.replace('{{hostname}}', host));\n        } catch (e) {\n            this.externalEndpointHost.reject(e);\n        }\n    }\n\n    get hostPatternPromise(): Promise<string> {\n        return this._hostPatternPromise;\n    }\n\n    async externalEndpointUrl(): Promise<URI> {\n        const host = await this.externalEndpointHost.promise;\n        return new Endpoint({\n            host,\n            path: '/webview'\n        }).getRestUrl();\n    }\n\n    async externalEndpoint(): Promise<string> {\n        return (await this.externalEndpointUrl()).toString(true);\n    }\n\n    async resourceRoot(): Promise<string> {\n        return (await this.externalEndpointUrl()).resolve('theia-resource/{{resource}}').toString(true);\n    }\n\n    async cspSource(): Promise<string> {\n        return (await this.externalEndpointUrl()).withPath('').withQuery('').withFragment('').toString(true).replace('{{uuid}}', '*');\n    }\n\n    protected async getHostPattern(): Promise<string> {\n        return environment.electron.is()\n            ? WebviewExternalEndpoint.defaultPattern\n            : this.environments.getValue(WebviewExternalEndpoint.pattern)\n                .then(variable => variable?.value || WebviewExternalEndpoint.defaultPattern);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2021 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { MessageService } from '@theia/core';\nimport { FrontendApplicationContribution } from '@theia/core/lib/browser';\nimport { FrontendApplicationConfigProvider } from '@theia/core/lib/browser/frontend-application-config-provider';\nimport { WindowService } from '@theia/core/lib/browser/window/window-service';\nimport { inject, injectable } from '@theia/core/shared/inversify';\nimport { WebviewExternalEndpoint } from '../../common/webview-protocol';\nimport { WebviewEnvironment } from './webview-environment';\n\n@injectable()\nexport class WebviewFrontendSecurityWarnings implements FrontendApplicationContribution {\n\n    @inject(WindowService)\n    protected windowService: WindowService;\n\n    @inject(MessageService)\n    protected messageService: MessageService;\n\n    @inject(WebviewEnvironment)\n    protected webviewEnvironment: WebviewEnvironment;\n\n    initialize(): void {\n        this.checkHostPattern();\n    }\n\n    protected async checkHostPattern(): Promise<void> {\n        if (FrontendApplicationConfigProvider.get()['warnOnPotentiallyInsecureHostPattern'] === false) {\n            return;\n        }\n        const hostPattern = await this.webviewEnvironment.hostPatternPromise;\n        if (hostPattern !== WebviewExternalEndpoint.defaultPattern) {\n            this.messageService.warn(`\\\nThe webview endpoint's host pattern has been changed to \\`${hostPattern}\\`; changing the pattern can lead to security vulnerabilities. \\\nSee \\`@theia/plugin-ext/README.md\\` for more information.`,\n            /* actions: */ 'Ok', 'Go To README',\n            ).then(action => {\n                if (action === 'Go To README') {\n                    this.windowService.openNewWindow('https://www.npmjs.com/package/@theia/plugin-ext', { external: true });\n                }\n            });\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { FrontendApplicationConfigProvider } from '@theia/core/lib/browser/frontend-application-config-provider';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceContribution,\n    PreferenceSchema\n} from '@theia/core/lib/browser/preferences';\n\nconst frontendConfig = FrontendApplicationConfigProvider.get();\n\nexport const WebviewConfigSchema: PreferenceSchema = {\n    type: 'object',\n    properties: {\n        'webview.trace': {\n            type: 'string',\n            enum: ['off', 'on', 'verbose'],\n            description: 'Controls communication tracing with webviews.',\n            default: 'off'\n        }\n    }\n};\n\nif (frontendConfig.securityWarnings) {\n    WebviewConfigSchema.properties['webview.warnIfUnsecure'] = {\n        scope: 'application',\n        type: 'boolean',\n        description: 'Warns users that webviews are currently deployed unsecurely.',\n        default: true,\n    };\n}\n\nexport interface WebviewConfiguration {\n    'webview.trace': 'off' | 'on' | 'verbose'\n    'webview.warnIfUnsecure'?: boolean\n}\n\nexport const WebviewPreferences = Symbol('WebviewPreferences');\nexport type WebviewPreferences = PreferenceProxy<WebviewConfiguration>;\n\nexport function createWebviewPreferences(preferences: PreferenceService): WebviewPreferences {\n    return createPreferenceProxy(preferences, WebviewConfigSchema);\n}\n\nexport function bindWebviewPreferences(bind: interfaces.Bind): void {\n    bind(WebviewPreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        return createWebviewPreferences(preferences);\n    });\n    bind(PreferenceContribution).toConstantValue({ schema: WebviewConfigSchema });\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { MaybePromise } from '@theia/core/lib/common/types';\n\nexport interface WebviewResourceResponse {\n    eTag: string | undefined,\n    body(): MaybePromise<Uint8Array>\n}\n\n/**\n * Browser based cache of webview resources across all instances.\n */\n@injectable()\nexport class WebviewResourceCache {\n\n    protected readonly cache = new Deferred<Cache | undefined>();\n\n    constructor() {\n        this.resolveCache();\n    }\n\n    protected async resolveCache(): Promise<void> {\n        try {\n            this.cache.resolve(await caches.open('webview:v1'));\n        } catch (e) {\n            console.error('Failed to enable webview caching: ', e);\n            this.cache.resolve(undefined);\n        }\n    }\n\n    async match(url: string): Promise<WebviewResourceResponse | undefined> {\n        const cache = await this.cache.promise;\n        if (!cache) {\n            return undefined;\n        }\n        const response = await cache.match(url);\n        if (!response) {\n            return undefined;\n        }\n        return {\n            eTag: response.headers.get('ETag') || undefined,\n            body: async () => {\n                const buffer = await response.arrayBuffer();\n                return new Uint8Array(buffer);\n            }\n        };\n    }\n\n    async delete(url: string): Promise<boolean> {\n        const cache = await this.cache.promise;\n        if (!cache) {\n            return false;\n        }\n        return cache.delete(url);\n    }\n\n    async put(url: string, response: WebviewResourceResponse): Promise<void> {\n        if (!response.eTag) {\n            return;\n        }\n        const cache = await this.cache.promise;\n        if (!cache) {\n            return;\n        }\n        const body = await response.body();\n        await cache.put(url, new Response(body, {\n            status: 200,\n            headers: { 'ETag': response.eTag }\n        }));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/ba40bd16433d5a817bfae15f3b4350e18f144af4/src/vs/workbench/contrib/webview/common/themeing.ts\n\nimport { inject, postConstruct, injectable } from '@theia/core/shared/inversify';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { EditorPreferences, EditorConfiguration } from '@theia/editor/lib/browser/editor-preferences';\nimport { ThemeService } from '@theia/core/lib/browser/theming';\nimport { ColorRegistry } from '@theia/core/lib/browser/color-registry';\nimport { ColorApplicationContribution } from '@theia/core/lib/browser/color-application-contribution';\n\nexport type WebviewThemeType = 'vscode-light' | 'vscode-dark' | 'vscode-high-contrast';\nexport interface WebviewThemeData {\n    readonly activeTheme: WebviewThemeType;\n    readonly styles: { readonly [key: string]: string | number; };\n}\n\n@injectable()\nexport class WebviewThemeDataProvider {\n\n    protected readonly onDidChangeThemeDataEmitter = new Emitter<void>();\n    readonly onDidChangeThemeData = this.onDidChangeThemeDataEmitter.event;\n\n    @inject(EditorPreferences)\n    protected readonly editorPreferences: EditorPreferences;\n\n    @inject(ColorRegistry)\n    protected readonly colors: ColorRegistry;\n\n    @inject(ColorApplicationContribution)\n    protected readonly colorContribution: ColorApplicationContribution;\n\n    protected themeData: WebviewThemeData | undefined;\n\n    protected readonly editorStyles = new Map<keyof EditorConfiguration, string>([\n        ['editor.fontFamily', 'editor-font-family'],\n        ['editor.fontWeight', 'editor-font-weight'],\n        ['editor.fontSize', 'editor-font-size']\n    ]);\n\n    @postConstruct()\n    protected init(): void {\n        this.colorContribution.onDidChange(() => this.reset());\n\n        this.editorPreferences.onPreferenceChanged(e => {\n            if (this.editorStyles.has(e.preferenceName)) {\n                this.reset();\n            }\n        });\n    }\n\n    protected reset(): void {\n        if (this.themeData) {\n            this.themeData = undefined;\n            this.onDidChangeThemeDataEmitter.fire(undefined);\n        }\n    }\n\n    getThemeData(): WebviewThemeData {\n        if (!this.themeData) {\n            this.themeData = this.computeThemeData();\n        }\n        return this.themeData;\n    }\n\n    protected computeThemeData(): WebviewThemeData {\n        const styles: { [key: string]: string | number; } = {};\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const addStyle = (id: string, rawValue: any) => {\n            if (rawValue) {\n                const value = typeof rawValue === 'number' || typeof rawValue === 'string' ? rawValue : String(rawValue);\n                styles[this.colors.toCssVariableName(id).substr(2)] = value;\n                styles[this.colors.toCssVariableName(id, 'vscode').substr(2)] = value;\n            }\n        };\n\n        addStyle('font-family', '-apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"Ubuntu\", \"Droid Sans\", sans-serif');\n        addStyle('font-weight', 'normal');\n        addStyle('font-size', '13px');\n        this.editorStyles.forEach((value, key) => addStyle(value, this.editorPreferences[key]));\n\n        for (const id of this.colors.getColors()) {\n            const color = this.colors.getCurrentColor(id);\n            if (color) {\n                addStyle(id, color.toString());\n            }\n        }\n\n        const activeTheme = this.getActiveTheme();\n        return { styles, activeTheme };\n    }\n\n    protected getActiveTheme(): WebviewThemeType {\n        const theme = ThemeService.get().getCurrentTheme();\n        switch (theme.type) {\n            case 'light': return 'vscode-light';\n            case 'dark': return 'vscode-dark';\n            default: return 'vscode-high-contrast';\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2020 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { WebviewWidget, WebviewWidgetIdentifier, WebviewWidgetExternalEndpoint } from './webview';\nimport { WebviewEnvironment } from './webview-environment';\n\nexport class WebviewWidgetFactory {\n\n    readonly id = WebviewWidget.FACTORY_ID;\n\n    protected readonly container: interfaces.Container;\n\n    constructor(container: interfaces.Container) {\n        this.container = container;\n    }\n\n    async createWidget(identifier: WebviewWidgetIdentifier): Promise<WebviewWidget> {\n        const externalEndpoint = await this.container.get(WebviewEnvironment).externalEndpoint();\n        let endpoint = externalEndpoint.replace('{{uuid}}', identifier.id);\n        if (endpoint[endpoint.length - 1] === '/') {\n            endpoint = endpoint.slice(0, endpoint.length - 1);\n        }\n        const child = this.container.createChild();\n        child.bind(WebviewWidgetIdentifier).toConstantValue(identifier);\n        child.bind(WebviewWidgetExternalEndpoint).toConstantValue(endpoint);\n        return child.get(WebviewWidget);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/ba40bd16433d5a817bfae15f3b4350e18f144af4/src/vs/workbench/contrib/webview/browser/baseWebviewElement.ts\n// copied and modified from https://github.com/microsoft/vscode/blob/ba40bd16433d5a817bfae15f3b4350e18f144af4/src/vs/workbench/contrib/webview/browser/webviewElement.ts#\n\nimport * as mime from 'mime';\nimport { JSONExt } from '@theia/core/shared/@phosphor/coreutils';\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { WebviewPanelOptions, WebviewPortMapping } from '@theia/plugin';\nimport { BaseWidget, Message } from '@theia/core/lib/browser/widgets/widget';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { ApplicationShellMouseTracker } from '@theia/core/lib/browser/shell/application-shell-mouse-tracker';\nimport { StatefulWidget } from '@theia/core/lib/browser/shell/shell-layout-restorer';\nimport { WebviewPanelViewState } from '../../../common/plugin-api-rpc';\nimport { IconUrl } from '../../../common/plugin-protocol';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { WebviewEnvironment } from './webview-environment';\nimport URI from '@theia/core/lib/common/uri';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { open, OpenerService } from '@theia/core/lib/browser/opener-service';\nimport { KeybindingRegistry } from '@theia/core/lib/browser/keybinding';\nimport { Schemes } from '../../../common/uri-components';\nimport { PluginSharedStyle } from '../plugin-shared-style';\nimport { WebviewThemeDataProvider } from './webview-theme-data-provider';\nimport { ExternalUriService } from '@theia/core/lib/browser/external-uri-service';\nimport { OutputChannelManager } from '@theia/output/lib/common/output-channel';\nimport { WebviewPreferences } from './webview-preferences';\nimport { WebviewResourceCache } from './webview-resource-cache';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport { FileService } from '@theia/filesystem/lib/browser/file-service';\nimport { FileOperationError, FileOperationResult } from '@theia/filesystem/lib/common/files';\nimport { BinaryBufferReadableStream } from '@theia/core/lib/common/buffer';\nimport { ViewColumn } from '../../../plugin/types-impl';\n\n// Style from core\nconst TRANSPARENT_OVERLAY_STYLE = 'theia-transparent-overlay';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport const enum WebviewMessageChannels {\n    onmessage = 'onmessage',\n    didClickLink = 'did-click-link',\n    didFocus = 'did-focus',\n    didBlur = 'did-blur',\n    doUpdateState = 'do-update-state',\n    doReload = 'do-reload',\n    loadResource = 'load-resource',\n    loadLocalhost = 'load-localhost',\n    webviewReady = 'webview-ready',\n    didKeydown = 'did-keydown',\n    didMouseDown = 'did-mousedown',\n    didMouseUp = 'did-mouseup'\n}\n\nexport interface WebviewContentOptions {\n    readonly allowScripts?: boolean;\n    readonly localResourceRoots?: ReadonlyArray<string>;\n    readonly portMapping?: ReadonlyArray<WebviewPortMapping>;\n    readonly enableCommandUris?: boolean;\n}\n\n@injectable()\nexport class WebviewWidgetIdentifier {\n    id: string;\n}\n\nexport const WebviewWidgetExternalEndpoint = Symbol('WebviewWidgetExternalEndpoint');\n\n@injectable()\nexport class WebviewWidget extends BaseWidget implements StatefulWidget {\n\n    private static readonly standardSupportedLinkSchemes = new Set([\n        Schemes.http,\n        Schemes.https,\n        Schemes.mailto,\n        Schemes.vscode\n    ]);\n\n    static FACTORY_ID = 'plugin-webview';\n\n    protected element: HTMLIFrameElement | undefined;\n\n    // eslint-disable-next-line max-len\n    // XXX This is a hack to be able to tack the mouse events when drag and dropping the widgets.\n    // On `mousedown` we put a transparent div over the `iframe` to avoid losing the mouse tacking.\n    protected transparentOverlay: HTMLElement;\n\n    @inject(WebviewWidgetIdentifier)\n    readonly identifier: WebviewWidgetIdentifier;\n\n    @inject(WebviewWidgetExternalEndpoint)\n    readonly externalEndpoint: string;\n\n    @inject(ApplicationShellMouseTracker)\n    protected readonly mouseTracker: ApplicationShellMouseTracker;\n\n    @inject(WebviewEnvironment)\n    protected readonly environment: WebviewEnvironment;\n\n    @inject(OpenerService)\n    protected readonly openerService: OpenerService;\n\n    @inject(KeybindingRegistry)\n    protected readonly keybindings: KeybindingRegistry;\n\n    @inject(PluginSharedStyle)\n    protected readonly sharedStyle: PluginSharedStyle;\n\n    @inject(WebviewThemeDataProvider)\n    protected readonly themeDataProvider: WebviewThemeDataProvider;\n\n    @inject(ExternalUriService)\n    protected readonly externalUriService: ExternalUriService;\n\n    @inject(OutputChannelManager)\n    protected readonly outputManager: OutputChannelManager;\n\n    @inject(WebviewPreferences)\n    protected readonly preferences: WebviewPreferences;\n\n    @inject(FileService)\n    protected readonly fileService: FileService;\n\n    @inject(WebviewResourceCache)\n    protected readonly resourceCache: WebviewResourceCache;\n\n    viewState: WebviewPanelViewState = {\n        visible: false,\n        active: false,\n        position: 0\n    };\n\n    protected html = '';\n\n    protected _contentOptions: WebviewContentOptions = {};\n    get contentOptions(): WebviewContentOptions {\n        return this._contentOptions;\n    }\n\n    protected _state: string | undefined;\n    get state(): string | undefined {\n        return this._state;\n    }\n\n    viewType: string;\n    viewColumn: ViewColumn;\n    options: WebviewPanelOptions = {};\n\n    protected ready = new Deferred<void>();\n\n    protected readonly onMessageEmitter = new Emitter<any>();\n    readonly onMessage = this.onMessageEmitter.event;\n    protected readonly pendingMessages: any[] = [];\n\n    protected readonly toHide = new DisposableCollection();\n    protected hideTimeout: any | number | undefined;\n\n    @postConstruct()\n    protected init(): void {\n        this.node.tabIndex = 0;\n        this.id = WebviewWidget.FACTORY_ID + ':' + this.identifier.id;\n        this.title.closable = true;\n        this.addClass(WebviewWidget.Styles.WEBVIEW);\n\n        this.toDispose.push(this.onMessageEmitter);\n\n        this.transparentOverlay = document.createElement('div');\n        this.transparentOverlay.classList.add(TRANSPARENT_OVERLAY_STYLE);\n        this.transparentOverlay.style.display = 'none';\n        this.node.appendChild(this.transparentOverlay);\n\n        this.toDispose.push(this.mouseTracker.onMousedown(() => {\n            if (this.element && this.element.style.display !== 'none') {\n                this.transparentOverlay.style.display = 'block';\n            }\n        }));\n        this.toDispose.push(this.mouseTracker.onMouseup(() => {\n            if (this.element && this.element.style.display !== 'none') {\n                this.transparentOverlay.style.display = 'none';\n            }\n        }));\n    }\n\n    protected onBeforeAttach(msg: Message): void {\n        super.onBeforeAttach(msg);\n        this.doShow();\n        // iframe has to be reloaded when moved to another DOM element\n        this.toDisposeOnDetach.push(Disposable.create(() => this.forceHide()));\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        this.addEventListener(this.node, 'focus', () => {\n            if (this.element) {\n                this.doSend('focus');\n            }\n        });\n    }\n\n    protected onBeforeShow(msg: Message): void {\n        super.onBeforeShow(msg);\n        this.doShow();\n    }\n\n    protected onAfterHide(msg: Message): void {\n        super.onAfterHide(msg);\n        this.doHide();\n    }\n\n    protected doHide(): void {\n        if (this.options.retainContextWhenHidden !== true) {\n            if (this.hideTimeout === undefined) {\n                // avoid removing iframe if a widget moved quickly\n                this.hideTimeout = setTimeout(() => this.forceHide(), 50);\n            }\n        }\n    }\n\n    protected forceHide(): void {\n        clearTimeout(this.hideTimeout);\n        this.hideTimeout = undefined;\n        this.toHide.dispose();\n    }\n\n    protected doShow(): void {\n        clearTimeout(this.hideTimeout);\n        this.hideTimeout = undefined;\n        if (!this.toHide.disposed) {\n            return;\n        }\n        this.toDispose.push(this.toHide);\n\n        const element = document.createElement('iframe');\n        element.className = 'webview';\n        element.sandbox.add('allow-scripts', 'allow-forms', 'allow-same-origin');\n        element.setAttribute('src', `${this.externalEndpoint}/index.html?id=${this.identifier.id}`);\n        element.style.border = 'none';\n        element.style.width = '100%';\n        element.style.height = '100%';\n        this.element = element;\n        this.node.appendChild(this.element);\n        this.toHide.push(Disposable.create(() => {\n            if (this.element) {\n                this.element.remove();\n                this.element = undefined;\n            }\n        }));\n\n        const oldReady = this.ready;\n        const ready = new Deferred<void>();\n        ready.promise.then(() => oldReady.resolve());\n        this.ready = ready;\n        this.toHide.push(Disposable.create(() => this.ready = new Deferred<void>()));\n        const subscription = this.on(WebviewMessageChannels.webviewReady, () => {\n            subscription.dispose();\n            ready.resolve();\n        });\n        this.toHide.push(subscription);\n\n        this.toHide.push(this.on(WebviewMessageChannels.onmessage, (data: any) => this.onMessageEmitter.fire(data)));\n        this.toHide.push(this.on(WebviewMessageChannels.didClickLink, (uri: string) => this.openLink(new URI(uri))));\n        this.toHide.push(this.on(WebviewMessageChannels.doUpdateState, (state: any) => {\n            this._state = state;\n        }));\n        this.toHide.push(this.on(WebviewMessageChannels.didFocus, () =>\n            // emulate the webview focus without actually changing focus\n            this.node.dispatchEvent(new FocusEvent('focus'))\n        ));\n        this.toHide.push(this.on(WebviewMessageChannels.didBlur, () => {\n            /* no-op: webview loses focus only if another element gains focus in the main window */\n        }));\n        this.toHide.push(this.on(WebviewMessageChannels.doReload, () => this.reload()));\n        this.toHide.push(this.on(WebviewMessageChannels.loadResource, (entry: any) => this.loadResource(entry.path)));\n        this.toHide.push(this.on(WebviewMessageChannels.loadLocalhost, (entry: any) =>\n            this.loadLocalhost(entry.origin)\n        ));\n        this.toHide.push(this.on(WebviewMessageChannels.didKeydown, (data: KeyboardEvent) => {\n            // Electron: workaround for https://github.com/electron/electron/issues/14258\n            // We have to detect keyboard events in the <webview> and dispatch them to our\n            // keybinding service because these events do not bubble to the parent window anymore.\n            this.keybindings.dispatchKeyDown(data, this.element);\n        }));\n        this.toHide.push(this.on(WebviewMessageChannels.didMouseDown, (data: MouseEvent) => {\n            // We have to dispatch mousedown events so menus will be closed when clicking inside webviews.\n            // See: https://github.com/eclipse-theia/theia/issues/7752\n            this.dispatchMouseEvent('mousedown', data);\n        }));\n        this.toHide.push(this.on(WebviewMessageChannels.didMouseUp, (data: MouseEvent) => {\n            this.dispatchMouseEvent('mouseup', data);\n        }));\n\n        this.style();\n        this.toHide.push(this.themeDataProvider.onDidChangeThemeData(() => this.style()));\n\n        this.doUpdateContent();\n        while (this.pendingMessages.length) {\n            this.sendMessage(this.pendingMessages.shift());\n        }\n    }\n\n    protected async loadLocalhost(origin: string): Promise<void> {\n        const redirect = await this.getRedirect(origin);\n        return this.doSend('did-load-localhost', { origin, location: redirect });\n    }\n\n    protected dispatchMouseEvent(type: string, data: MouseEvent): void {\n        const domRect = this.node.getBoundingClientRect();\n        document.dispatchEvent(new MouseEvent(type, {\n            ...data,\n            clientX: domRect.x + data.clientX,\n            clientY: domRect.y + data.clientY\n        }));\n    }\n\n    protected async getRedirect(url: string): Promise<string | undefined> {\n        const uri = new URI(url);\n        const localhost = this.externalUriService.parseLocalhost(uri);\n        if (!localhost) {\n            return undefined;\n        }\n\n        if (this._contentOptions.portMapping) {\n            for (const mapping of this._contentOptions.portMapping) {\n                if (mapping.webviewPort === localhost.port) {\n                    if (mapping.webviewPort !== mapping.extensionHostPort) {\n                        return this.toRemoteUrl(\n                            uri.withAuthority(`${localhost.address}:${mapping.extensionHostPort}`)\n                        );\n                    }\n                }\n            }\n        }\n\n        return this.toRemoteUrl(uri);\n    }\n\n    protected async toRemoteUrl(localUri: URI): Promise<string> {\n        const remoteUri = await this.externalUriService.resolve(localUri);\n        const remoteUrl = remoteUri.toString();\n        if (remoteUrl[remoteUrl.length - 1] === '/') {\n            return remoteUrl.slice(0, remoteUrl.length - 1);\n        }\n        return remoteUrl;\n    }\n\n    setContentOptions(contentOptions: WebviewContentOptions): void {\n        if (JSONExt.deepEqual(<any>this.contentOptions, <any>contentOptions)) {\n            return;\n        }\n        this._contentOptions = contentOptions;\n        this.doUpdateContent();\n    }\n\n    protected iconUrl: IconUrl | undefined;\n    protected readonly toDisposeOnIcon = new DisposableCollection();\n    setIconUrl(iconUrl: IconUrl | undefined): void {\n        if ((this.iconUrl && iconUrl && JSONExt.deepEqual(this.iconUrl, iconUrl)) || (this.iconUrl === iconUrl)) {\n            return;\n        }\n        this.toDisposeOnIcon.dispose();\n        this.toDispose.push(this.toDisposeOnIcon);\n        this.iconUrl = iconUrl;\n        if (iconUrl) {\n            const darkIconUrl = typeof iconUrl === 'object' ? iconUrl.dark : iconUrl;\n            const lightIconUrl = typeof iconUrl === 'object' ? iconUrl.light : iconUrl;\n            const iconClass = `webview-${this.identifier.id}-file-icon`;\n            this.toDisposeOnIcon.push(this.sharedStyle.insertRule(\n                `.theia-webview-icon.${iconClass}::before`,\n                theme => `background-image: url(${this.toEndpoint(theme.type === 'light' ? lightIconUrl : darkIconUrl)});`\n            ));\n            this.title.iconClass = `theia-webview-icon ${iconClass}`;\n        } else {\n            this.title.iconClass = '';\n        }\n    }\n\n    protected toEndpoint(pathname: string): string {\n        return new Endpoint({ path: pathname }).getRestUrl().toString();\n    }\n\n    setHTML(value: string): void {\n        this.html = this.preprocessHtml(value);\n        this.doUpdateContent();\n    }\n\n    protected preprocessHtml(value: string): string {\n        return value\n            .replace(/([\"'])(?:vscode|theia)-resource:(\\/\\/([^\\s\\/'\"]+?)(?=\\/))?([^\\s'\"]+?)([\"'])/gi, (_, startQuote, _1, scheme, path, endQuote) => {\n                if (scheme) {\n                    return `${startQuote}${this.externalEndpoint}/theia-resource/${scheme}${path}${endQuote}`;\n                }\n                return `${startQuote}${this.externalEndpoint}/theia-resource/file${path}${endQuote}`;\n            });\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.node.focus();\n    }\n\n    reload(): void {\n        this.doUpdateContent();\n    }\n\n    protected style(): void {\n        const { styles, activeTheme } = this.themeDataProvider.getThemeData();\n        this.doSend('styles', { styles, activeTheme });\n    }\n\n    protected openLink(link: URI): void {\n        const supported = this.toSupportedLink(link);\n        if (supported) {\n            open(this.openerService, supported);\n        }\n    }\n\n    protected toSupportedLink(link: URI): URI | undefined {\n        if (WebviewWidget.standardSupportedLinkSchemes.has(link.scheme)) {\n            const linkAsString = link.toString();\n            for (const resourceRoot of [this.externalEndpoint + '/theia-resource', this.externalEndpoint + '/vscode-resource']) {\n                if (linkAsString.startsWith(resourceRoot + '/')) {\n                    return this.normalizeRequestUri(linkAsString.substr(resourceRoot.length));\n                }\n            }\n            return link;\n        }\n        if (!!this.contentOptions.enableCommandUris && link.scheme === Schemes.command) {\n            return link;\n        }\n        return undefined;\n    }\n\n    protected async loadResource(requestPath: string): Promise<void> {\n        const normalizedUri = this.normalizeRequestUri(requestPath);\n        // browser cache does not support file scheme, normalize to current endpoint scheme and host\n        const cacheUrl = new Endpoint({ path: normalizedUri.path.toString() }).getRestUrl().toString();\n\n        try {\n            if (this.contentOptions.localResourceRoots) {\n                for (const root of this.contentOptions.localResourceRoots) {\n                    if (!new URI(root).path.isEqualOrParent(normalizedUri.path)) {\n                        continue;\n                    }\n                    let cached = await this.resourceCache.match(cacheUrl);\n                    try {\n                        const result = await this.fileService.readFileStream(normalizedUri, { etag: cached?.eTag });\n                        const { buffer } = await BinaryBufferReadableStream.toBuffer(result.value);\n                        cached = { body: () => buffer, eTag: result.etag };\n                        this.resourceCache.put(cacheUrl, cached);\n                    } catch (e) {\n                        if (!(e instanceof FileOperationError && e.fileOperationResult === FileOperationResult.FILE_NOT_MODIFIED_SINCE)) {\n                            throw e;\n                        }\n                    }\n                    if (cached) {\n                        const data = await cached.body();\n                        return this.doSend('did-load-resource', {\n                            status: 200,\n                            path: requestPath,\n                            mime: mime.getType(normalizedUri.path.toString()) || 'application/octet-stream',\n                            data\n                        });\n                    }\n                }\n            }\n        } catch {\n            // no-op\n        }\n\n        this.resourceCache.delete(cacheUrl);\n        return this.doSend('did-load-resource', {\n            status: 404,\n            path: requestPath\n        });\n    }\n\n    protected normalizeRequestUri(requestPath: string): URI {\n        const normalizedPath = decodeURIComponent(requestPath);\n        const requestUri = new URI(normalizedPath.replace(/^\\/([a-zA-Z0-9.\\-+]+)\\/(.+)$/, (_, scheme, path) => scheme + ':/' + path));\n        if (requestUri.scheme !== 'theia-resource' && requestUri.scheme !== 'vscode-resource') {\n            return requestUri;\n        }\n\n        // Modern vscode-resources uris put the scheme of the requested resource as the authority\n        if (requestUri.authority) {\n            return new URI(requestUri.authority + ':' + requestUri.path);\n        }\n\n        // Old style vscode-resource uris lose the scheme of the resource which means they are unable to\n        // load a mix of local and remote content properly.\n        return requestUri.withScheme('file');\n    }\n\n    sendMessage(data: any): void {\n        if (this.element) {\n            this.doSend('message', data);\n        } else {\n            this.pendingMessages.push(data);\n        }\n    }\n\n    protected doUpdateContent(): void {\n        this.doSend('content', {\n            contents: this.html,\n            options: this.contentOptions,\n            state: this.state\n        });\n    }\n\n    storeState(): WebviewWidget.State {\n        return {\n            viewType: this.viewType,\n            title: this.title.label,\n            iconUrl: this.iconUrl,\n            options: this.options,\n            contentOptions: this.contentOptions,\n            state: this.state\n        };\n    }\n\n    restoreState(oldState: WebviewWidget.State): void {\n        const { viewType, title, iconUrl, options, contentOptions, state } = oldState;\n        this.viewType = viewType;\n        this.title.label = title;\n        this.setIconUrl(iconUrl);\n        this.options = options;\n        this._contentOptions = contentOptions;\n        this._state = state;\n    }\n\n    protected async doSend(channel: string, data?: any): Promise<void> {\n        if (!this.element) {\n            return;\n        }\n        try {\n            await this.ready.promise;\n            this.postMessage(channel, data);\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    protected postMessage(channel: string, data?: any): void {\n        if (this.element) {\n            this.trace('out', channel, data);\n            this.element.contentWindow!.postMessage({ channel, args: data }, '*');\n        }\n    }\n\n    protected on<T = unknown>(channel: WebviewMessageChannels, handler: (data: T) => void): Disposable {\n        const listener = (e: any) => {\n            if (!e || !e.data || e.data.target !== this.identifier.id) {\n                return;\n            }\n            if (e.data.channel === channel) {\n                this.trace('in', e.data.channel, e.data.data);\n                handler(e.data.data);\n            }\n        };\n        window.addEventListener('message', listener);\n        return Disposable.create(() =>\n            window.removeEventListener('message', listener)\n        );\n    }\n\n    protected trace(kind: 'in' | 'out', channel: string, data?: any): void {\n        const value = this.preferences['webview.trace'];\n        if (value === 'off') {\n            return;\n        }\n        const output = this.outputManager.getChannel('webviews');\n        output.append('\\n' + this.identifier.id);\n        output.append(kind === 'out' ? ' => ' : ' <= ');\n        output.append(channel);\n        if (value === 'verbose') {\n            if (data) {\n                output.append('\\n' + JSON.stringify(data, undefined, 2));\n            }\n        }\n    }\n\n}\nexport namespace WebviewWidget {\n    export namespace Styles {\n        export const WEBVIEW = 'theia-webview';\n    }\n    export interface State {\n        viewType: string\n        title: string\n        iconUrl?: IconUrl\n        options: WebviewPanelOptions\n        contentOptions: WebviewContentOptions\n        state?: string\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport debounce = require('@theia/core/shared/lodash.debounce');\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { WebviewsMain, MAIN_RPC_CONTEXT, WebviewsExt, WebviewPanelViewState } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { WebviewOptions, WebviewPanelOptions, WebviewPanelShowOptions } from '@theia/plugin';\nimport { ApplicationShell } from '@theia/core/lib/browser/shell/application-shell';\nimport { WebviewWidget, WebviewWidgetIdentifier } from './webview/webview';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { ViewColumnService } from './view-column-service';\nimport { WidgetManager } from '@theia/core/lib/browser/widget-manager';\nimport { JSONExt } from '@theia/core/shared/@phosphor/coreutils';\nimport { Mutable } from '@theia/core/lib/common/types';\nimport { HostedPluginSupport } from '../../hosted/browser/hosted-plugin';\nimport { IconUrl } from '../../common/plugin-protocol';\nimport { CustomEditorWidget } from './custom-editors/custom-editor-widget';\nimport { ViewColumn, WebviewPanelTargetArea } from '../../plugin/types-impl';\n\nexport class WebviewsMainImpl implements WebviewsMain, Disposable {\n\n    private readonly proxy: WebviewsExt;\n    protected readonly shell: ApplicationShell;\n    protected readonly widgetManager: WidgetManager;\n    protected readonly pluginService: HostedPluginSupport;\n    protected readonly viewColumnService: ViewColumnService;\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.WEBVIEWS_EXT);\n        this.shell = container.get(ApplicationShell);\n        this.viewColumnService = container.get(ViewColumnService);\n        this.widgetManager = container.get(WidgetManager);\n        this.pluginService = container.get(HostedPluginSupport);\n        this.toDispose.push(this.shell.onDidChangeActiveWidget(() => this.updateViewStates()));\n        this.toDispose.push(this.shell.onDidChangeCurrentWidget(() => this.updateViewStates()));\n        this.toDispose.push(this.viewColumnService.onViewColumnChanged(() => this.updateViewStates()));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async $createWebviewPanel(\n        panelId: string,\n        viewType: string,\n        title: string,\n        showOptions: WebviewPanelShowOptions,\n        options: WebviewPanelOptions & WebviewOptions\n    ): Promise<void> {\n        const view = await this.widgetManager.getOrCreateWidget<WebviewWidget>(WebviewWidget.FACTORY_ID, <WebviewWidgetIdentifier>{ id: panelId });\n        this.hookWebview(view);\n        view.viewType = viewType;\n        view.title.label = title;\n        const { enableFindWidget, retainContextWhenHidden, enableScripts, localResourceRoots, ...contentOptions } = options;\n        view.options = { enableFindWidget, retainContextWhenHidden };\n        view.setContentOptions({\n            allowScripts: enableScripts,\n            localResourceRoots: localResourceRoots && localResourceRoots.map(root => root.toString()),\n            ...contentOptions\n        });\n        this.addOrReattachWidget(view, showOptions);\n    }\n\n    hookWebview(view: WebviewWidget): void {\n        const handle = view.identifier.id;\n        this.toDispose.push(view.onDidChangeVisibility(() => this.updateViewState(view)));\n        this.toDispose.push(view.onMessage(data => this.proxy.$onMessage(handle, data)));\n        view.disposed.connect(() => {\n            if (this.toDispose.disposed) {\n                return;\n            }\n            this.proxy.$onDidDisposeWebviewPanel(handle);\n        });\n    }\n\n    addOrReattachWidget(widget: WebviewWidget, showOptions: WebviewPanelShowOptions): void {\n        const area = showOptions.area ? showOptions.area : WebviewPanelTargetArea.Main;\n        const widgetOptions: ApplicationShell.WidgetOptions = { area };\n        let mode = 'open-to-right';\n        const canOpenBeside = showOptions.viewColumn === ViewColumn.Beside && (area === WebviewPanelTargetArea.Main || area === WebviewPanelTargetArea.Bottom);\n        if (canOpenBeside) {\n            const activeOrRightmostTabbar = this.shell.getTabBarFor(area);\n            const ref = activeOrRightmostTabbar?.currentTitle?.owner;\n            if (ref) {\n                Object.assign(widgetOptions, { ref, mode });\n            }\n        } else if (widgetOptions.area === 'main' && showOptions.viewColumn !== undefined) {\n            this.viewColumnService.updateViewColumns();\n            let widgetIds = this.viewColumnService.getViewColumnIds(showOptions.viewColumn);\n            if (widgetIds.length > 0) {\n                mode = 'tab-after';\n            } else if (showOptions.viewColumn >= 0) {\n                const columnsSize = this.viewColumnService.viewColumnsSize();\n                if (columnsSize) {\n                    showOptions.viewColumn = columnsSize - 1;\n                    widgetIds = this.viewColumnService.getViewColumnIds(showOptions.viewColumn);\n                }\n            }\n            const ref = this.shell.getWidgets(widgetOptions.area).find(w => !w.isHidden && widgetIds.indexOf(w.id) !== -1);\n            if (ref) {\n                Object.assign(widgetOptions, { ref, mode });\n            }\n        }\n\n        this.shell.addWidget(widget, widgetOptions);\n        if (showOptions.preserveFocus) {\n            this.shell.revealWidget(widget.id);\n        } else {\n            this.shell.activateWidget(widget.id);\n        }\n    }\n\n    async $disposeWebview(handle: string): Promise<void> {\n        const view = await this.tryGetWebview(handle);\n        if (view) {\n            view.dispose();\n        }\n    }\n\n    async $reveal(handle: string, showOptions: WebviewPanelShowOptions): Promise<void> {\n        const widget = await this.getWebview(handle);\n        if (widget.isDisposed) {\n            return;\n        }\n        if ((showOptions.viewColumn !== undefined && showOptions.viewColumn !== widget.viewState.position) || showOptions.area !== undefined) {\n            this.viewColumnService.updateViewColumns();\n            const columnIds = showOptions.viewColumn ? this.viewColumnService.getViewColumnIds(showOptions.viewColumn) : [];\n            const area = this.shell.getAreaFor(widget);\n            if (columnIds.indexOf(widget.id) === -1 || area !== showOptions.area) {\n                this.addOrReattachWidget(widget, showOptions);\n                return;\n            }\n        }\n        if (showOptions.preserveFocus) {\n            this.shell.revealWidget(widget.id);\n        } else {\n            this.shell.activateWidget(widget.id);\n        }\n    }\n\n    async $setTitle(handle: string, value: string): Promise<void> {\n        const webview = await this.getWebview(handle);\n        webview.title.label = value;\n    }\n\n    async $setIconPath(handle: string, iconUrl: IconUrl | undefined): Promise<void> {\n        const webview = await this.getWebview(handle);\n        webview.setIconUrl(iconUrl);\n    }\n\n    async $setHtml(handle: string, value: string): Promise<void> {\n        const webview = await this.getWebview(handle);\n        webview.setHTML(value);\n    }\n\n    async $setOptions(handle: string, options: WebviewOptions): Promise<void> {\n        const webview = await this.getWebview(handle);\n        const { enableScripts, localResourceRoots, ...contentOptions } = options;\n        webview.setContentOptions({\n            allowScripts: enableScripts,\n            localResourceRoots: localResourceRoots && localResourceRoots.map(root => root.toString()),\n            ...contentOptions\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async $postMessage(handle: string, value: any): Promise<boolean> {\n        const webview = await this.getWebview(handle);\n        webview.sendMessage(value);\n        return true;\n    }\n\n    $registerSerializer(viewType: string): void {\n        this.pluginService.registerWebviewReviver(viewType, widget => this.restoreWidget(widget));\n        this.toDispose.push(Disposable.create(() => this.$unregisterSerializer(viewType)));\n    }\n\n    $unregisterSerializer(viewType: string): void {\n        this.pluginService.unregisterWebviewReviver(viewType);\n    }\n\n    protected async restoreWidget(widget: WebviewWidget): Promise<void> {\n        this.hookWebview(widget);\n        const handle = widget.identifier.id;\n        const title = widget.title.label;\n\n        let state = undefined;\n        if (widget.state) {\n            try {\n                state = JSON.parse(widget.state);\n            } catch {\n                // noop\n            }\n        }\n\n        const options = widget.options;\n        const { allowScripts, localResourceRoots, ...contentOptions } = widget.contentOptions;\n        this.updateViewState(widget);\n        await this.proxy.$deserializeWebviewPanel(handle, widget.viewType, title, state, widget.viewState, {\n            enableScripts: allowScripts,\n            localResourceRoots: localResourceRoots && localResourceRoots.map(root => URI.parse(root)),\n            ...contentOptions,\n            ...options\n        });\n    }\n\n    protected readonly updateViewStates = debounce(() => {\n        const widgets = this.widgetManager.getWidgets(WebviewWidget.FACTORY_ID);\n        const customEditors = this.widgetManager.getWidgets(CustomEditorWidget.FACTORY_ID);\n\n        for (const widget of widgets.concat(customEditors)) {\n            if (widget instanceof WebviewWidget) {\n                this.updateViewState(widget);\n            }\n        }\n    }, 100);\n\n    private updateViewState(widget: WebviewWidget, viewColumn?: number | undefined): void {\n        const viewState: Mutable<WebviewPanelViewState> = {\n            active: this.shell.activeWidget === widget,\n            visible: !widget.isHidden,\n            position: viewColumn || 0\n        };\n        if (typeof viewColumn !== 'number') {\n            this.viewColumnService.updateViewColumns();\n            viewState.position = this.viewColumnService.getViewColumn(widget.id) || 0;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (JSONExt.deepEqual(<any>viewState, <any>widget.viewState)) {\n            return;\n        }\n        widget.viewState = viewState;\n        this.proxy.$onDidChangeWebviewPanelViewState(widget.identifier.id, widget.viewState);\n    }\n\n    private async getWebview(viewId: string): Promise<WebviewWidget> {\n        const webview = await this.tryGetWebview(viewId);\n        if (!webview) {\n            throw new Error(`Unknown Webview: ${viewId}`);\n        }\n        return webview;\n    }\n\n    private async tryGetWebview(id: string): Promise<WebviewWidget | undefined> {\n        const webview = await this.widgetManager.getWidget<WebviewWidget>(WebviewWidget.FACTORY_ID, <WebviewWidgetIdentifier>{ id })\n            || await this.widgetManager.getWidget<CustomEditorWidget>(CustomEditorWidget.FACTORY_ID, <WebviewWidgetIdentifier>{ id });\n        return webview;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport CoreURI from '@theia/core/lib/common/uri';\nimport { interfaces } from '@theia/core/shared/inversify';\nimport { WindowStateExt, MAIN_RPC_CONTEXT, WindowMain } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { UriComponents } from '../../common/uri-components';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { open, OpenerService } from '@theia/core/lib/browser/opener-service';\nimport { ExternalUriService } from '@theia/core/lib/browser/external-uri-service';\n\nexport class WindowStateMain implements WindowMain, Disposable {\n\n    private readonly proxy: WindowStateExt;\n\n    private readonly openerService: OpenerService;\n\n    private readonly externalUriService: ExternalUriService;\n\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.WINDOW_STATE_EXT);\n        this.openerService = container.get(OpenerService);\n        this.externalUriService = container.get(ExternalUriService);\n\n        const fireDidFocus = () => this.onFocusChanged(true);\n        window.addEventListener('focus', fireDidFocus);\n        this.toDispose.push(Disposable.create(() => window.removeEventListener('focus', fireDidFocus)));\n\n        const fireDidBlur = () => this.onFocusChanged(false);\n        window.addEventListener('blur', fireDidBlur);\n        this.toDispose.push(Disposable.create(() => window.removeEventListener('blur', fireDidBlur)));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private onFocusChanged(focused: boolean): void {\n        this.proxy.$onWindowStateChanged(focused);\n    }\n\n    async $openUri(uriComponent: UriComponents): Promise<boolean> {\n        const uri = URI.revive(uriComponent);\n        const url = new CoreURI(encodeURI(uri.toString(true)));\n        try {\n            await open(this.openerService, url);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    async $asExternalUri(uriComponents: UriComponents): Promise<UriComponents> {\n        const uri = URI.revive(uriComponents);\n        const resolved = await this.externalUriService.resolve(new CoreURI(uri));\n        return URI.parse(resolved.toString());\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { interfaces, injectable } from '@theia/core/shared/inversify';\nimport { WorkspaceExt, StorageExt, MAIN_RPC_CONTEXT, WorkspaceMain, WorkspaceFolderPickOptionsMain } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { URI as Uri } from '@theia/core/shared/vscode-uri';\nimport { UriComponents } from '../../common/uri-components';\nimport { QuickOpenModel, QuickOpenItem, QuickOpenMode } from '@theia/core/lib/browser/quick-open/quick-open-model';\nimport { MonacoQuickOpenService } from '@theia/monaco/lib/browser/monaco-quick-open-service';\nimport { FileSearchService } from '@theia/file-search/lib/common/file-search-service';\nimport URI from '@theia/core/lib/common/uri';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { Resource } from '@theia/core/lib/common/resource';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter, Event, ResourceResolver, CancellationToken } from '@theia/core';\nimport { PluginServer } from '../../common/plugin-protocol';\nimport { FileSystemPreferences } from '@theia/filesystem/lib/browser';\nimport { SearchInWorkspaceService } from '@theia/search-in-workspace/lib/browser/search-in-workspace-service';\nimport { FileStat } from '@theia/filesystem/lib/common/files';\n\nexport class WorkspaceMainImpl implements WorkspaceMain, Disposable {\n\n    private readonly proxy: WorkspaceExt;\n\n    private storageProxy: StorageExt;\n\n    private quickOpenService: MonacoQuickOpenService;\n\n    private fileSearchService: FileSearchService;\n\n    private searchInWorkspaceService: SearchInWorkspaceService;\n\n    private roots: string[];\n\n    private resourceResolver: TextContentResourceResolver;\n\n    private pluginServer: PluginServer;\n\n    private workspaceService: WorkspaceService;\n\n    private fsPreferences: FileSystemPreferences;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    protected workspaceSearch: Set<number> = new Set<number>();\n\n    constructor(rpc: RPCProtocol, container: interfaces.Container) {\n        this.proxy = rpc.getProxy(MAIN_RPC_CONTEXT.WORKSPACE_EXT);\n        this.storageProxy = rpc.getProxy(MAIN_RPC_CONTEXT.STORAGE_EXT);\n        this.quickOpenService = container.get(MonacoQuickOpenService);\n        this.fileSearchService = container.get(FileSearchService);\n        this.searchInWorkspaceService = container.get(SearchInWorkspaceService);\n        this.resourceResolver = container.get(TextContentResourceResolver);\n        this.pluginServer = container.get(PluginServer);\n        this.workspaceService = container.get(WorkspaceService);\n        this.fsPreferences = container.get(FileSystemPreferences);\n\n        this.processWorkspaceFoldersChanged(this.workspaceService.tryGetRoots().map(root => root.resource.toString()));\n        this.toDispose.push(this.workspaceService.onWorkspaceChanged(roots => {\n            this.processWorkspaceFoldersChanged(roots.map(root => root.resource.toString()));\n        }));\n        this.toDispose.push(this.workspaceService.onWorkspaceLocationChanged(stat => {\n            this.proxy.$onWorkspaceLocationChanged(stat);\n        }));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected async processWorkspaceFoldersChanged(roots: string[]): Promise<void> {\n        if (this.isAnyRootChanged(roots) === false) {\n            return;\n        }\n        this.roots = roots;\n        this.proxy.$onWorkspaceFoldersChanged({ roots });\n\n        const keyValueStorageWorkspacesData = await this.pluginServer.getAllStorageValues({\n            workspace: this.workspaceService.workspace?.resource.toString(),\n            roots: this.workspaceService.tryGetRoots().map(root => root.resource.toString())\n        });\n        this.storageProxy.$updatePluginsWorkspaceData(keyValueStorageWorkspacesData);\n\n    }\n\n    private isAnyRootChanged(roots: string[]): boolean {\n        if (!this.roots || this.roots.length !== roots.length) {\n            return true;\n        }\n\n        return this.roots.some((root, index) => root !== roots[index]);\n    }\n\n    async $getWorkspace(): Promise<FileStat | undefined> {\n        return this.workspaceService.workspace;\n    }\n\n    $pickWorkspaceFolder(options: WorkspaceFolderPickOptionsMain): Promise<theia.WorkspaceFolder | undefined> {\n        return new Promise((resolve, reject) => {\n            // Return undefined if workspace root is not set\n            if (!this.roots || !this.roots.length) {\n                resolve(undefined);\n                return;\n            }\n\n            // Active before appearing the pick menu\n            const activeElement: HTMLElement | undefined = window.document.activeElement as HTMLElement;\n\n            // WorkspaceFolder to be returned\n            let returnValue: theia.WorkspaceFolder | undefined;\n\n            const items = this.roots.map(root => {\n                const rootUri = Uri.parse(root);\n                const rootPathName = rootUri.path.substring(rootUri.path.lastIndexOf('/') + 1);\n                return new QuickOpenItem({\n                    label: rootPathName,\n                    detail: rootUri.path,\n                    run: mode => {\n                        if (mode === QuickOpenMode.OPEN) {\n                            returnValue = {\n                                uri: rootUri,\n                                name: rootPathName,\n                                index: 0\n                            } as theia.WorkspaceFolder;\n                        }\n                        return true;\n                    }\n                });\n            });\n\n            // Create quick open model\n            const model = {\n                onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n                    acceptor(items);\n                }\n            } as QuickOpenModel;\n\n            // Show pick menu\n            this.quickOpenService.open(model, {\n                fuzzyMatchLabel: true,\n                fuzzyMatchDetail: true,\n                fuzzyMatchDescription: true,\n                placeholder: options.placeHolder,\n                onClose: () => {\n                    if (activeElement) {\n                        activeElement.focus({ preventScroll: true });\n                    }\n\n                    resolve(returnValue);\n                }\n            });\n        });\n    }\n\n    async $startFileSearch(includePattern: string, includeFolderUri: string | undefined, excludePatternOrDisregardExcludes?: string | false,\n        maxResults?: number): Promise<UriComponents[]> {\n        const roots: FileSearchService.RootOptions = {};\n        const rootUris = includeFolderUri ? [includeFolderUri] : this.roots;\n        for (const rootUri of rootUris) {\n            roots[rootUri] = {};\n        }\n        const opts: FileSearchService.Options = {\n            rootOptions: roots,\n            useGitIgnore: excludePatternOrDisregardExcludes !== false\n        };\n        if (includePattern) {\n            opts.includePatterns = [includePattern];\n        }\n        if (typeof excludePatternOrDisregardExcludes === 'string') {\n            opts.excludePatterns = [excludePatternOrDisregardExcludes];\n        }\n        if (excludePatternOrDisregardExcludes !== false) {\n            for (const rootUri of rootUris) {\n                const filesExclude = this.fsPreferences.get('files.exclude', undefined, rootUri);\n                if (filesExclude) {\n                    for (const excludePattern in filesExclude) {\n                        if (filesExclude[excludePattern]) {\n                            const rootOptions = roots[rootUri];\n                            const rootExcludePatterns = rootOptions.excludePatterns || [];\n                            rootExcludePatterns.push(excludePattern);\n                            rootOptions.excludePatterns = rootExcludePatterns;\n                        }\n                    }\n                }\n            }\n        }\n        if (typeof maxResults === 'number') {\n            opts.limit = maxResults;\n        }\n        const uriStrs = await this.fileSearchService.find('', opts);\n        return uriStrs.map(uriStr => Uri.parse(uriStr));\n    }\n\n    async $findTextInFiles(query: theia.TextSearchQuery, options: theia.FindTextInFilesOptions, searchRequestId: number,\n        token: theia.CancellationToken = CancellationToken.None): Promise<theia.TextSearchComplete> {\n        const maxHits = options.maxResults ? options.maxResults : 150;\n        const excludes = options.exclude ? (typeof options.exclude === 'string' ? options.exclude : (<theia.RelativePattern>options.exclude).pattern) : undefined;\n        const includes = options.include ? (typeof options.include === 'string' ? options.include : (<theia.RelativePattern>options.include).pattern) : undefined;\n        let canceledRequest = false;\n        return new Promise(resolve => {\n            let matches = 0;\n            const what: string = query.pattern;\n            this.searchInWorkspaceService.searchWithCallback(what, this.roots, {\n                onResult: (searchId, result) => {\n                    if (canceledRequest) {\n                        return;\n                    }\n                    const hasSearch = this.workspaceSearch.has(searchId);\n                    if (!hasSearch) {\n                        this.workspaceSearch.add(searchId);\n                        token.onCancellationRequested(() => {\n                            this.searchInWorkspaceService.cancel(searchId);\n                            canceledRequest = true;\n                        });\n                    }\n                    if (token.isCancellationRequested) {\n                        this.searchInWorkspaceService.cancel(searchId);\n                        canceledRequest = true;\n                        return;\n                    }\n                    if (result && result.matches && result.matches.length) {\n                        while ((matches + result.matches.length) > maxHits) {\n                            result.matches.splice(result.matches.length - 1, 1);\n                        }\n                        this.proxy.$onTextSearchResult(searchRequestId, false, result);\n                        matches += result.matches.length;\n                        if (maxHits <= matches) {\n                            this.searchInWorkspaceService.cancel(searchId);\n                        }\n                    }\n                },\n                onDone: (searchId, _error) => {\n                    const hasSearch = this.workspaceSearch.has(searchId);\n                    if (hasSearch) {\n                        this.searchInWorkspaceService.cancel(searchId);\n                        this.workspaceSearch.delete(searchId);\n                    }\n                    this.proxy.$onTextSearchResult(searchRequestId, true);\n                    if (maxHits <= matches) {\n                        resolve({ limitHit: true });\n                    } else {\n                        resolve({ limitHit: false });\n                    }\n                }\n            }, {\n                useRegExp: query.isRegExp,\n                matchCase: query.isCaseSensitive,\n                matchWholeWord: query.isWordMatch,\n                exclude: excludes ? [excludes] : undefined,\n                include: includes ? [includes] : undefined,\n                maxResults: maxHits\n            });\n        });\n    }\n\n    async $registerTextDocumentContentProvider(scheme: string): Promise<void> {\n        this.resourceResolver.registerContentProvider(scheme, this.proxy);\n        this.toDispose.push(Disposable.create(() => this.resourceResolver.unregisterContentProvider(scheme)));\n    }\n\n    $unregisterTextDocumentContentProvider(scheme: string): void {\n        this.resourceResolver.unregisterContentProvider(scheme);\n    }\n\n    $onTextDocumentContentChange(uri: string, content: string): void {\n        this.resourceResolver.onContentChange(uri, content);\n    }\n\n    async $updateWorkspaceFolders(start: number, deleteCount?: number, ...rootsToAdd: string[]): Promise<void> {\n        await this.workspaceService.spliceRoots(start, deleteCount, ...rootsToAdd.map(root => new URI(root)));\n    }\n\n}\n\n/**\n * Text content provider for resources with custom scheme.\n */\nexport interface TextContentResourceProvider {\n\n    /**\n     * Provides resource for given URI\n     */\n    provideResource(uri: URI): Resource;\n\n}\n\n@injectable()\nexport class TextContentResourceResolver implements ResourceResolver {\n\n    // Resource providers for different schemes\n    private providers = new Map<string, TextContentResourceProvider>();\n\n    // Opened resources\n    private resources = new Map<string, TextContentResource>();\n\n    async resolve(uri: URI): Promise<Resource> {\n        const provider = this.providers.get(uri.scheme);\n        if (provider) {\n            return provider.provideResource(uri);\n        }\n\n        throw new Error(`Unable to find Text Content Resource Provider for scheme '${uri.scheme}'`);\n    }\n\n    registerContentProvider(scheme: string, proxy: WorkspaceExt): void {\n        if (this.providers.has(scheme)) {\n            throw new Error(`Text Content Resource Provider for scheme '${scheme}' is already registered`);\n        }\n\n        const instance = this;\n        this.providers.set(scheme, {\n            provideResource: (uri: URI): Resource => {\n                let resource = instance.resources.get(uri.toString());\n                if (resource) {\n                    return resource;\n                }\n\n                resource = new TextContentResource(uri, proxy, {\n                    dispose(): void {\n                        instance.resources.delete(uri.toString());\n                    }\n                });\n\n                instance.resources.set(uri.toString(), resource);\n                return resource;\n            }\n        });\n    }\n\n    unregisterContentProvider(scheme: string): void {\n        if (!this.providers.delete(scheme)) {\n            throw new Error(`Text Content Resource Provider for scheme '${scheme}' has not been registered`);\n        }\n    }\n\n    onContentChange(uri: string, content: string): void {\n        const resource = this.resources.get(uri);\n        if (resource) {\n            resource.setContent(content);\n        }\n    }\n\n}\n\nexport class TextContentResource implements Resource {\n\n    private onDidChangeContentsEmitter: Emitter<void> = new Emitter<void>();\n    readonly onDidChangeContents: Event<void> = this.onDidChangeContentsEmitter.event;\n\n    // cached content\n    cache: string | undefined;\n\n    constructor(public uri: URI, private proxy: WorkspaceExt, protected disposable: Disposable) {\n    }\n\n    async readContents(options?: { encoding?: string }): Promise<string> {\n        if (this.cache) {\n            const content = this.cache;\n            this.cache = undefined;\n            return content;\n        } else {\n            const content = await this.proxy.$provideTextDocumentContent(this.uri.toString());\n            if (content) {\n                return content;\n            }\n        }\n\n        return Promise.reject(new Error(`Unable to get content for '${this.uri.toString()}'`));\n    }\n\n    dispose(): void {\n        this.disposable.dispose();\n    }\n\n    setContent(content: string): void {\n        this.cache = content;\n        this.onDidChangeContentsEmitter.fire(undefined);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport const pluginPathsServicePath = '/services/plugin-paths';\n\n// Service to create plugin configuration folders for different purpose.\nexport const PluginPathsService = Symbol('PluginPathsService');\nexport interface PluginPathsService {\n    /** Returns hosted log path. Create directory by this path if it is not exist on the file system. */\n    getHostLogPath(): Promise<string>;\n    /** Returns storage path for given workspace */\n    getHostStoragePath(workspaceUri: string | undefined, rootUris: string[]): Promise<string | undefined>;\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Each webview should be deployed on a unique origin (https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy)\n * to ensure isolation from browser shared state as cookies, local storage and so on.\n *\n * Default hostname pattern of a origin is `{{uuid}}.webview.{{hostname}}`. Where `{{uuid}}` is a placeholder for a webview global id.\n * For electron target the default pattern is always used.\n * For the browser target use `THEIA_WEBVIEW_EXTERNAL_ENDPOINT` env variable to customize it.\n */\nexport namespace WebviewExternalEndpoint {\n    export const pattern = 'THEIA_WEBVIEW_EXTERNAL_ENDPOINT';\n    export const defaultPattern = '{{uuid}}.webview.{{hostname}}';\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport mainModule from './main/browser/plugin-ext-frontend-module';\n\nexport default mainModule;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { MarkdownString as IMarkdownString } from '../common/plugin-api-rpc-model';\n\nexport class MarkdownString {\n\n    value: string;\n    isTrusted?: boolean;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(value: string): MarkdownString {\n        // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n        this.value += value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&');\n        return this;\n    }\n\n    appendMarkdown(value: string): MarkdownString {\n        this.value += value;\n        return this;\n    }\n\n    appendCodeblock(code: string, language: string = ''): MarkdownString {\n        this.value += '\\n```';\n        this.value += language;\n        this.value += '\\n';\n        this.value += code;\n        this.value += '\\n```\\n';\n        return this;\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isMarkdownString(thing: any): thing is IMarkdownString {\n    if (thing instanceof MarkdownString) {\n        return true;\n    } else if (thing && typeof thing === 'object') {\n        return typeof (<MarkdownString>thing).value === 'string'\n            && (typeof (<MarkdownString>thing).isTrusted === 'boolean' || (<MarkdownString>thing).isTrusted === undefined);\n    }\n    return false;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/workbench/api/common/extHostTypes.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable no-null/no-null */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { illegalArgument } from '../common/errors';\nimport * as theia from '@theia/plugin';\nimport { URI as CodeURI, UriComponents } from '@theia/core/shared/vscode-uri';\nimport { relative } from '../common/paths-util';\nimport { startsWithIgnoreCase } from '@theia/core/lib/common/strings';\nimport { MarkdownString, isMarkdownString } from './markdown-string';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\nimport { FileSystemProviderErrorCode, markAsFileSystemProviderError } from '@theia/filesystem/lib/common/files';\nimport * as paths from 'path';\nimport { ObjectsTransferrer } from '../common/rpc-protocol';\n\n/**\n * A reviver that takes URI's transferred via JSON.stringify() and makes\n * instances of our local plugin API URI class (below)\n */\nexport function reviver(key: string | undefined, value: any): any {\n    const revived = ObjectsTransferrer.reviver(key, value);\n    if (CodeURI.isUri(revived)) {\n        return URI.revive(revived);\n    }\n    return revived;\n}\n\n/**\n * This is an implementation of #theia.Uri based on vscode-uri.\n * This is supposed to fix https://github.com/eclipse-theia/theia/issues/8752\n * We cannot simply upgrade the dependency, because the curent version 3.x\n * is not compatible with our current codebase\n */\nexport class URI extends CodeURI implements theia.Uri {\n    protected constructor(scheme: string, authority?: string, path?: string, query?: string, fragment?: string, _strict?: boolean);\n    protected constructor(components: UriComponents);\n    protected constructor(schemeOrData: string | UriComponents, authority?: string, path?: string, query?: string, fragment?: string, _strict: boolean = false) {\n        if (typeof schemeOrData === 'string') {\n            super(schemeOrData, authority, path, query, fragment, _strict);\n        } else {\n            super(schemeOrData);\n        }\n    }\n\n    /**\n     * Override to create the correct class.\n     */\n    with(change: {\n        scheme?: string;\n        authority?: string | null;\n        path?: string | null;\n        query?: string | null;\n        fragment?: string | null;\n    }): URI {\n        return new URI(super.with(change));\n    }\n\n    static joinPath(uri: URI, ...pathSegments: string[]): URI {\n        if (!uri.path) {\n            throw new Error('\\'joinPath\\' called on URI without path');\n        }\n        const newPath = paths.resolve(uri.path, ...pathSegments);\n        return new URI(uri.scheme, uri.authority, newPath, uri.query, uri.fragment);\n    }\n\n    /**\n     * Overrride to create the correct class.\n     * @param data\n     */\n    static revive(data: UriComponents | CodeURI): URI;\n    static revive(data: UriComponents | CodeURI | null): URI | null;\n    static revive(data: UriComponents | CodeURI | undefined): URI | undefined\n    static revive(data: UriComponents | CodeURI | undefined | null): URI | undefined | null {\n        const uri = CodeURI.revive(data);\n        return uri ? new URI(uri) : undefined;\n    }\n\n    static parse(value: string, _strict?: boolean): URI {\n        return new URI(CodeURI.parse(value, _strict));\n    }\n\n    static file(path: string): URI {\n        return new URI(CodeURI.file(path));\n    }\n\n    /**\n     * There is quite some magic in to vscode URI class related to\n     * transferring via JSON.stringify(). Making the CodeURI instance\n     * makes sure we transfer this object as a vscode-uri URI.\n     */\n    toJSON(): UriComponents {\n        return CodeURI.from(this).toJSON();\n    }\n}\n\nexport class Disposable {\n    private disposable: undefined | (() => void);\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from(...disposables: { dispose(): any }[]): Disposable {\n        return new Disposable(() => {\n            if (disposables) {\n                for (const disposable of disposables) {\n                    if (disposable && typeof disposable.dispose === 'function') {\n                        disposable.dispose();\n                    }\n                }\n            }\n        });\n    }\n\n    constructor(func: () => void) {\n        this.disposable = func;\n    }\n    /**\n     * Dispose this object.\n     */\n    dispose(): void {\n        if (this.disposable) {\n            this.disposable();\n            this.disposable = undefined;\n        }\n    }\n\n    static create(func: () => void): Disposable {\n        return new Disposable(func);\n    }\n}\n\nexport enum StatusBarAlignment {\n    Left = 1,\n    Right = 2\n}\n\nexport enum TextEditorLineNumbersStyle {\n    Off = 0,\n    On = 1,\n    Relative = 2\n}\n\n/**\n * Denotes a column in the editor window.\n * Columns are used to show editors side by side.\n */\nexport enum ViewColumn {\n    Active = -1,\n    Beside = -2,\n    One = 1,\n    Two = 2,\n    Three = 3,\n    Four = 4,\n    Five = 5,\n    Six = 6,\n    Seven = 7,\n    Eight = 8,\n    Nine = 9\n}\n\n/**\n * Represents a color theme kind.\n */\nexport enum ColorThemeKind {\n    Light = 1,\n    Dark = 2,\n    HighContrast = 3\n}\n\n/**\n * Represents the validation type of the Source Control input.\n */\nexport enum SourceControlInputBoxValidationType {\n\n    /**\n     * Something not allowed by the rules of a language or other means.\n     */\n    Error = 0,\n\n    /**\n     * Something suspicious but allowed.\n     */\n    Warning = 1,\n\n    /**\n     * Something to inform about but not a problem.\n     */\n    Information = 2\n}\n\nexport class ColorTheme implements theia.ColorTheme {\n    constructor(public readonly kind: ColorThemeKind) { }\n}\n\n/**\n * Represents sources that can cause `window.onDidChangeEditorSelection`\n */\nexport enum TextEditorSelectionChangeKind {\n    Keyboard = 1,\n\n    Mouse = 2,\n\n    Command = 3\n}\n\nexport namespace TextEditorSelectionChangeKind {\n    export function fromValue(s: string | undefined): TextEditorSelectionChangeKind | undefined {\n        switch (s) {\n            case 'keyboard': return TextEditorSelectionChangeKind.Keyboard;\n            case 'mouse': return TextEditorSelectionChangeKind.Mouse;\n            case 'api': return TextEditorSelectionChangeKind.Command;\n        }\n        return undefined;\n    }\n}\n\nexport class Position {\n    private _line: number;\n    private _character: number;\n    constructor(line: number, char: number) {\n        if (line < 0) {\n            throw new Error('line number cannot be negative');\n        }\n        if (char < 0) {\n            throw new Error('char number cannot be negative');\n        }\n        this._line = line;\n        this._character = char;\n    }\n\n    get line(): number {\n        return this._line;\n    }\n\n    get character(): number {\n        return this._character;\n    }\n\n    isBefore(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character < other._character;\n    }\n\n    isBeforeOrEqual(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character <= other._character;\n    }\n\n    isAfter(other: Position): boolean {\n        return !this.isBeforeOrEqual(other);\n    }\n\n    isAfterOrEqual(other: Position): boolean {\n        return !this.isBefore(other);\n    }\n\n    isEqual(other: Position): boolean {\n        return this._line === other._line && this._character === other._character;\n    }\n\n    compareTo(other: Position): number {\n        if (this._line < other._line) {\n            return -1;\n        } else if (this._line > other.line) {\n            return 1;\n        } else {\n            // equal line\n            if (this._character < other._character) {\n                return -1;\n            } else if (this._character > other._character) {\n                return 1;\n            } else {\n                // equal line and character\n                return 0;\n            }\n        }\n    }\n\n    translate(change: { lineDelta?: number; characterDelta?: number; }): Position;\n    translate(lineDelta?: number, characterDelta?: number): Position;\n    translate(lineDeltaOrChange: number | { lineDelta?: number; characterDelta?: number; } | undefined, characterDelta: number = 0): Position {\n\n        if (lineDeltaOrChange === null || characterDelta === null) {\n            throw illegalArgument();\n        }\n\n        let lineDelta: number;\n        if (typeof lineDeltaOrChange === 'undefined') {\n            lineDelta = 0;\n        } else if (typeof lineDeltaOrChange === 'number') {\n            lineDelta = lineDeltaOrChange;\n        } else {\n            lineDelta = typeof lineDeltaOrChange.lineDelta === 'number' ? lineDeltaOrChange.lineDelta : 0;\n            characterDelta = typeof lineDeltaOrChange.characterDelta === 'number' ? lineDeltaOrChange.characterDelta : 0;\n        }\n\n        if (lineDelta === 0 && characterDelta === 0) {\n            return this;\n        }\n        return new Position(this.line + lineDelta, this.character + characterDelta);\n    }\n\n    with(change: { line?: number; character?: number; }): Position;\n    with(line?: number, character?: number): Position;\n    with(lineOrChange: number | { line?: number; character?: number; } | undefined, character: number = this.character): Position {\n\n        if (lineOrChange === null || character === null) {\n            throw illegalArgument();\n        }\n\n        let line: number;\n        if (typeof lineOrChange === 'undefined') {\n            line = this.line;\n\n        } else if (typeof lineOrChange === 'number') {\n            line = lineOrChange;\n\n        } else {\n            line = typeof lineOrChange.line === 'number' ? lineOrChange.line : this.line;\n            character = typeof lineOrChange.character === 'number' ? lineOrChange.character : this.character;\n        }\n\n        if (line === this.line && character === this.character) {\n            return this;\n        }\n        return new Position(line, character);\n    }\n\n    static Min(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isBefore(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static Max(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isAfter(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static isPosition(other: {}): other is Position {\n        if (!other) {\n            return false;\n        }\n        if (other instanceof Position) {\n            return true;\n        }\n        const { line, character } = <Position>other;\n        if (typeof line === 'number' && typeof character === 'number') {\n            return true;\n        }\n        return false;\n    }\n\n    toJSON(): any {\n        return { line: this.line, character: this.character };\n    }\n}\n\nexport class Range {\n    protected _start: Position;\n    protected _end: Position;\n\n    constructor(start: Position, end: Position);\n    constructor(startLine: number, startColumn: number, endLine: number, endColumn: number);\n    constructor(startLineOrStart: number | Position, startColumnOrEnd: number | Position, endLine?: number, endColumn?: number) {\n        let start: Position | undefined = undefined;\n        let end: Position | undefined = undefined;\n\n        if (typeof startLineOrStart === 'number' && typeof startColumnOrEnd === 'number' && typeof endLine === 'number' && typeof endColumn === 'number') {\n            start = new Position(startLineOrStart, startColumnOrEnd);\n            end = new Position(endLine, endColumn);\n        } else if (startLineOrStart instanceof Position && startColumnOrEnd instanceof Position) {\n            start = startLineOrStart;\n            end = startColumnOrEnd;\n        }\n\n        if (!start || !end) {\n            throw new Error('Invalid arguments');\n        }\n\n        if (start.isBefore(end)) {\n            this._start = start;\n            this._end = end;\n        } else {\n            this._start = end;\n            this._end = start;\n        }\n    }\n\n    get start(): Position {\n        return this._start;\n    }\n\n    get end(): Position {\n        return this._end;\n    }\n\n    contains(positionOrRange: Position | Range): boolean {\n        if (positionOrRange instanceof Range) {\n            return this.contains(positionOrRange._start)\n                && this.contains(positionOrRange._end);\n\n        } else if (positionOrRange instanceof Position) {\n            if (positionOrRange.isBefore(this._start)) {\n                return false;\n            }\n            if (this._end.isBefore(positionOrRange)) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    isEqual(other: Range): boolean {\n        return this._start.isEqual(other._start) && this._end.isEqual(other._end);\n    }\n\n    intersection(other: Range): Range | undefined {\n        const start = Position.Max(other.start, this._start);\n        const end = Position.Min(other.end, this._end);\n        if (start.isAfter(end)) {\n            // this happens when there is no overlap:\n            // |-----|\n            //          |----|\n            return undefined;\n        }\n        return new Range(start, end);\n    }\n\n    union(other: Range): Range {\n        if (this.contains(other)) {\n            return this;\n        } else if (other.contains(this)) {\n            return other;\n        }\n        const start = Position.Min(other.start, this._start);\n        const end = Position.Max(other.end, this.end);\n        return new Range(start, end);\n    }\n\n    get isEmpty(): boolean {\n        return this._start.isEqual(this._end);\n    }\n\n    get isSingleLine(): boolean {\n        return this._start.line === this._end.line;\n    }\n\n    with(change: { start?: Position, end?: Position }): Range;\n    with(start?: Position, end?: Position): Range;\n    with(startOrChange: Position | { start?: Position, end?: Position } | undefined, end: Position = this.end): Range {\n\n        if (startOrChange === null || end === null) {\n            throw illegalArgument();\n        }\n\n        let start: Position;\n        if (!startOrChange) {\n            start = this.start;\n\n        } else if (Position.isPosition(startOrChange)) {\n            start = startOrChange;\n\n        } else {\n            start = startOrChange.start || this.start;\n            end = startOrChange.end || this.end;\n        }\n\n        if (start.isEqual(this._start) && end.isEqual(this.end)) {\n            return this;\n        }\n        return new Range(start, end);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRange(thing: any): thing is theia.Range {\n        if (thing instanceof Range) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Position.isPosition((<Range>thing).start)\n            && Position.isPosition((<Range>thing).end);\n    }\n\n    toJSON(): any {\n        return [this.start, this.end];\n    }\n}\n\nexport class Selection extends Range {\n    private _anchor: Position;\n    private _active: Position;\n    constructor(anchor: Position, active: Position);\n    constructor(anchorLine: number, anchorColumn: number, activeLine: number, activeColumn: number);\n    constructor(anchorLineOrAnchor: number | Position, anchorColumnOrActive: number | Position, activeLine?: number, activeColumn?: number) {\n        let anchor: Position | undefined = undefined;\n        let active: Position | undefined = undefined;\n\n        if (typeof anchorLineOrAnchor === 'number' && typeof anchorColumnOrActive === 'number' && typeof activeLine === 'number' && typeof activeColumn === 'number') {\n            anchor = new Position(anchorLineOrAnchor, anchorColumnOrActive);\n            active = new Position(activeLine, activeColumn);\n        } else if (anchorLineOrAnchor instanceof Position && anchorColumnOrActive instanceof Position) {\n            anchor = anchorLineOrAnchor;\n            active = anchorColumnOrActive;\n        }\n\n        if (!anchor || !active) {\n            throw new Error('Invalid arguments');\n        }\n\n        super(anchor, active);\n\n        this._anchor = anchor;\n        this._active = active;\n    }\n\n    get active(): Position {\n        return this._active;\n    }\n\n    get anchor(): Position {\n        return this._anchor;\n    }\n\n    get isReversed(): boolean {\n        return this._anchor === this._end;\n    }\n}\n\nexport enum EndOfLine {\n    LF = 1,\n    CRLF = 2\n}\n\nexport enum EnvironmentVariableMutatorType {\n    Replace = 1,\n    Append = 2,\n    Prepend = 3\n}\n\nexport class SnippetString {\n\n    static isSnippetString(thing: {}): thing is SnippetString {\n        if (thing instanceof SnippetString) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<SnippetString>thing).value === 'string';\n    }\n\n    private static _escape(value: string): string {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n\n    private _tabstop: number = 1;\n\n    value: string;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(string: string): SnippetString {\n        this.value += SnippetString._escape(string);\n        return this;\n    }\n\n    appendTabstop(number: number = this._tabstop++): SnippetString {\n        this.value += '$';\n        this.value += number;\n        return this;\n    }\n\n    appendPlaceholder(value: string | ((snippet: SnippetString) => void), number: number = this._tabstop++): SnippetString {\n\n        if (typeof value === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            value(nested);\n            this._tabstop = nested._tabstop;\n            value = nested.value;\n        } else {\n            value = SnippetString._escape(value);\n        }\n\n        this.value += '${';\n        this.value += number;\n        this.value += ':';\n        this.value += value;\n        this.value += '}';\n\n        return this;\n    }\n\n    appendVariable(name: string, defaultValue?: string | ((snippet: SnippetString) => void)): SnippetString {\n\n        if (typeof defaultValue === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            defaultValue(nested);\n            this._tabstop = nested._tabstop;\n            defaultValue = nested.value;\n\n        } else if (typeof defaultValue === 'string') {\n            defaultValue = defaultValue.replace(/\\$|}/g, '\\\\$&');\n        }\n\n        this.value += '${';\n        this.value += name;\n        if (defaultValue) {\n            this.value += ':';\n            this.value += defaultValue;\n        }\n        this.value += '}';\n\n        return this;\n    }\n}\n\nexport class ThemeColor {\n    constructor(public id: string) {\n    }\n}\n\nexport class ThemeIcon {\n\n    static readonly File: ThemeIcon = new ThemeIcon('file');\n\n    static readonly Folder: ThemeIcon = new ThemeIcon('folder');\n\n    private constructor(public id: string) {\n    }\n\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\n/**\n * These values match very carefully the values of `TrackedRangeStickiness`\n */\nexport enum DecorationRangeBehavior {\n    /**\n     * TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges\n     */\n    OpenOpen = 0,\n    /**\n     * TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n     */\n    ClosedClosed = 1,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingBefore\n     */\n    OpenClosed = 2,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingAfter\n     */\n    ClosedOpen = 3\n}\n\n/**\n * Vertical Lane in the overview ruler of the editor.\n */\nexport enum OverviewRulerLane {\n    Left = 1,\n    Center = 2,\n    Right = 4,\n    Full = 7\n}\n\nexport enum ConfigurationTarget {\n    Global = 1,\n    Workspace,\n    WorkspaceFolder,\n    Default,\n    Memory\n}\n\nexport class RelativePattern {\n\n    base: string;\n\n    constructor(base: theia.WorkspaceFolder | string, public pattern: string) {\n        if (typeof base !== 'string') {\n            if (!base || !URI.isUri(base.uri)) {\n                throw illegalArgument('base');\n            }\n        }\n\n        if (typeof pattern !== 'string') {\n            throw illegalArgument('pattern');\n        }\n\n        this.base = typeof base === 'string' ? base : base.uri.fsPath;\n    }\n\n    pathToRelative(from: string, to: string): string {\n        return relative(from, to);\n    }\n}\n\nexport enum IndentAction {\n    None = 0,\n    Indent = 1,\n    IndentOutdent = 2,\n    Outdent = 3\n}\n\nexport class TextEdit {\n\n    protected _range: Range;\n    protected _newText: string;\n    protected _newEol: EndOfLine;\n\n    get range(): Range {\n        return this._range;\n    }\n\n    set range(value: Range) {\n        if (value && !Range.isRange(value)) {\n            throw illegalArgument('range');\n        }\n        this._range = value;\n    }\n\n    get newText(): string {\n        return this._newText || '';\n    }\n\n    set newText(value: string) {\n        if (value && typeof value !== 'string') {\n            throw illegalArgument('newText');\n        }\n        this._newText = value;\n    }\n\n    get newEol(): EndOfLine {\n        return this._newEol;\n    }\n\n    set newEol(value: EndOfLine) {\n        if (value && typeof value !== 'number') {\n            throw illegalArgument('newEol');\n        }\n        this._newEol = value;\n    }\n\n    constructor(range: Range | undefined, newText: string | undefined) {\n        this.range = range!;\n        this.newText = newText!;\n    }\n\n    static isTextEdit(thing: {}): thing is TextEdit {\n        if (thing instanceof TextEdit) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<TextEdit>thing).range)\n            && typeof (<TextEdit>thing).newText === 'string';\n    }\n\n    static replace(range: Range, newText: string): TextEdit {\n        return new TextEdit(range, newText);\n    }\n\n    static insert(position: Position, newText: string): TextEdit {\n        return TextEdit.replace(new Range(position, position), newText);\n    }\n\n    static delete(range: Range): TextEdit {\n        return TextEdit.replace(range, '');\n    }\n\n    static setEndOfLine(eol: EndOfLine): TextEdit {\n        const ret = new TextEdit(undefined, undefined);\n        ret.newEol = eol;\n        return ret;\n    }\n}\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport enum CompletionItemKind {\n    Text = 0,\n    Method = 1,\n    Function = 2,\n    Constructor = 3,\n    Field = 4,\n    Variable = 5,\n    Class = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Unit = 10,\n    Value = 11,\n    Enum = 12,\n    Keyword = 13,\n    Snippet = 14,\n    Color = 15, // eslint-disable-line @typescript-eslint/no-shadow\n    File = 16,\n    Reference = 17,\n    Folder = 18,\n    EnumMember = 19,\n    Constant = 20,\n    Struct = 21,\n    Event = 22,\n    Operator = 23,\n    TypeParameter = 24\n}\n\nexport class CompletionItem implements theia.CompletionItem {\n\n    label: string;\n    kind?: CompletionItemKind;\n    tags?: CompletionItemTag[];\n    detail: string;\n    documentation: string | MarkdownString;\n    sortText: string;\n    filterText: string;\n    preselect: boolean;\n    insertText: string | SnippetString;\n    range: Range;\n    textEdit: TextEdit;\n    additionalTextEdits: TextEdit[];\n    command: theia.Command;\n\n    constructor(label: string, kind?: CompletionItemKind) {\n        this.label = label;\n        this.kind = kind;\n    }\n}\n\nexport class CompletionList {\n\n    isIncomplete?: boolean;\n\n    items: theia.CompletionItem[];\n\n    constructor(items: theia.CompletionItem[] = [], isIncomplete: boolean = false) {\n        this.items = items;\n        this.isIncomplete = isIncomplete;\n    }\n}\n\nexport enum DiagnosticSeverity {\n    Error = 0,\n    Warning = 1,\n    Information = 2,\n    Hint = 3\n}\n\nexport enum DebugConsoleMode {\n    Separate = 0,\n    MergeWithParent = 1\n}\n\nexport class DiagnosticRelatedInformation {\n    location: Location;\n    message: string;\n\n    constructor(location: Location, message: string) {\n        this.location = location;\n        this.message = message;\n    }\n}\n\nexport class Location {\n    uri: URI;\n    range: Range;\n\n    constructor(uri: URI, rangeOrPosition: Range | Position | undefined) {\n        this.uri = uri;\n        if (rangeOrPosition instanceof Range) {\n            this.range = rangeOrPosition;\n        } else if (rangeOrPosition instanceof Position) {\n            this.range = new Range(rangeOrPosition, rangeOrPosition);\n        }\n    }\n\n    static isLocation(thing: {}): thing is theia.Location {\n        if (thing instanceof Location) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<Location>thing).range)\n            && URI.isUri((<Location>thing).uri);\n    }\n}\n\nexport enum DiagnosticTag {\n    Unnecessary = 1,\n}\n\nexport enum CompletionItemTag {\n    Deprecated = 1,\n}\n\nexport class Diagnostic {\n    range: Range;\n    message: string;\n    severity: DiagnosticSeverity;\n    source?: string;\n    code?: string | number;\n    relatedInformation?: DiagnosticRelatedInformation[];\n    tags?: DiagnosticTag[];\n\n    constructor(range: Range, message: string, severity: DiagnosticSeverity = DiagnosticSeverity.Error) {\n        this.range = range;\n        this.message = message;\n        this.severity = severity;\n    }\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n}\n\nexport class ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | MarkdownString;\n\n    constructor(label: string | [number, number], documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n    }\n}\n\nexport class SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n    parameters: ParameterInformation[];\n\n    constructor(label: string, documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n        this.parameters = [];\n    }\n}\n\nexport enum SignatureHelpTriggerKind {\n    Invoke = 1,\n    TriggerCharacter = 2,\n    ContentChange = 3,\n}\n\nexport class SignatureHelp {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n\n    constructor() {\n        this.signatures = [];\n    }\n}\n\nexport class Hover {\n\n    public contents: MarkdownString[] | theia.MarkedString[];\n    public range?: Range;\n\n    constructor(\n        contents: MarkdownString | theia.MarkedString | MarkdownString[] | theia.MarkedString[],\n        range?: Range\n    ) {\n        if (!contents) {\n            illegalArgument('contents must be defined');\n        }\n        if (Array.isArray(contents)) {\n            this.contents = <MarkdownString[] | theia.MarkedString[]>contents;\n        } else if (isMarkdownString(contents)) {\n            this.contents = [contents];\n        } else {\n            this.contents = [contents];\n        }\n        this.range = range;\n    }\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\nexport class DocumentHighlight {\n\n    public range: Range;\n    public kind?: DocumentHighlightKind;\n\n    constructor(\n        range: Range,\n        kind?: DocumentHighlightKind\n    ) {\n        this.range = range;\n        this.kind = kind;\n    }\n}\n\nexport type Definition = Location | Location[];\n\nexport class DocumentLink {\n\n    range: Range;\n\n    target?: URI;\n\n    tooltip?: string;\n\n    constructor(range: Range, target: URI | undefined) {\n        if (target && !(URI.isUri(target))) {\n            throw illegalArgument('target');\n        }\n        if (!Range.isRange(range) || range.isEmpty) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.target = target;\n    }\n}\n\nexport class CodeLens {\n\n    range: Range;\n\n    command?: theia.Command;\n\n    get isResolved(): boolean {\n        return !!this.command;\n    }\n\n    constructor(range: Range, command?: theia.Command) {\n        this.range = range;\n        this.command = command;\n    }\n}\n\nexport enum CodeActionTrigger {\n    Automatic = 1,\n    Manual = 2,\n}\n\n/**\n * The reason why code actions were requested.\n */\nexport enum CodeActionTriggerKind {\n    /**\n     * Code actions were explicitly requested by the user or by an extension.\n     */\n    Invoke = 1,\n\n    /**\n     * Code actions were requested automatically.\n     *\n     * This typically happens when current selection in a file changes, but can\n     * also be triggered when file content changes.\n     */\n    Automatic = 2,\n}\n\nexport class CodeActionKind {\n    private static readonly sep = '.';\n\n    public static readonly Empty = new CodeActionKind('');\n    public static readonly QuickFix = CodeActionKind.Empty.append('quickfix');\n    public static readonly Refactor = CodeActionKind.Empty.append('refactor');\n    public static readonly RefactorExtract = CodeActionKind.Refactor.append('extract');\n    public static readonly RefactorInline = CodeActionKind.Refactor.append('inline');\n    public static readonly RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\n    public static readonly Source = CodeActionKind.Empty.append('source');\n    public static readonly SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\n    public static readonly SourceFixAll = CodeActionKind.Source.append('fixAll');\n\n    constructor(\n        public readonly value: string\n    ) { }\n\n    public append(parts: string): CodeActionKind {\n        return new CodeActionKind(this.value ? this.value + CodeActionKind.sep + parts : parts);\n    }\n\n    public contains(other: CodeActionKind): boolean {\n        return this.value === other.value || startsWithIgnoreCase(other.value, this.value + CodeActionKind.sep);\n    }\n\n    public intersects(other: CodeActionKind): boolean {\n        return this.contains(other) || other.contains(this);\n    }\n}\n\nexport enum TextDocumentSaveReason {\n    Manual = 1,\n    AfterDelay = 2,\n    FocusOut = 3\n}\n\nexport class CodeAction {\n    title: string;\n\n    command?: theia.Command;\n\n    edit?: WorkspaceEdit;\n\n    diagnostics?: Diagnostic[];\n\n    kind?: CodeActionKind;\n\n    constructor(title: string, kind?: CodeActionKind) {\n        this.title = title;\n        this.kind = kind;\n    }\n}\n\nexport interface FileOperationOptions {\n    overwrite?: boolean;\n    ignoreIfExists?: boolean;\n    ignoreIfNotExists?: boolean;\n    recursive?: boolean;\n}\n\n// copied from https://github.com/microsoft/vscode/blob/b165e20587dd0797f37251515bc9e4dbe513ede8/src/vs/editor/common/modes.ts\nexport interface WorkspaceEditMetadata {\n    needsConfirmation: boolean;\n    label: string;\n    description?: string;\n    iconPath?: {\n        id: string;\n    } | {\n        light: URI;\n        dark: URI;\n    };\n}\n\nexport interface FileOperation {\n    _type: 1;\n    from: URI | undefined;\n    to: URI | undefined;\n    options?: FileOperationOptions;\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport interface FileTextEdit {\n    _type: 2;\n    uri: URI;\n    edit: TextEdit;\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport class WorkspaceEdit implements theia.WorkspaceEdit {\n\n    private _edits = new Array<FileOperation | FileTextEdit | undefined>();\n\n    renameFile(from: theia.Uri, to: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 1, from, to, options, metadata });\n    }\n\n    createFile(uri: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 1, from: undefined, to: uri, options, metadata });\n    }\n\n    deleteFile(uri: theia.Uri, options?: { recursive?: boolean, ignoreIfNotExists?: boolean }, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 1, from: uri, to: undefined, options, metadata });\n    }\n\n    replace(uri: URI, range: Range, newText: string, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 2, uri, edit: new TextEdit(range, newText), metadata });\n    }\n\n    insert(resource: URI, position: Position, newText: string, metadata?: WorkspaceEditMetadata): void {\n        this.replace(resource, new Range(position, position), newText, metadata);\n    }\n\n    delete(resource: URI, range: Range, metadata?: WorkspaceEditMetadata): void {\n        this.replace(resource, range, '', metadata);\n    }\n\n    has(uri: URI): boolean {\n        for (const edit of this._edits) {\n            if (edit && edit._type === 2 && edit.uri.toString() === uri.toString()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    set(uri: URI, edits: TextEdit[]): void {\n        if (!edits) {\n            // remove all text edits for `uri`\n            for (let i = 0; i < this._edits.length; i++) {\n                const element = this._edits[i];\n                if (element && element._type === 2 && element.uri.toString() === uri.toString()) {\n                    this._edits[i] = undefined;\n                }\n            }\n            this._edits = this._edits.filter(e => !!e);\n        } else {\n            // append edit to the end\n            for (const edit of edits) {\n                if (edit) {\n                    this._edits.push({ _type: 2, uri, edit });\n                }\n            }\n        }\n    }\n\n    get(uri: URI): TextEdit[] {\n        const res: TextEdit[] = [];\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2 && candidate.uri.toString() === uri.toString()) {\n                res.push(candidate.edit);\n            }\n        }\n        if (res.length === 0) {\n            return undefined!;\n        }\n        return res;\n    }\n\n    entries(): [URI, TextEdit[]][] {\n        const textEdits = new Map<string, [URI, TextEdit[]]>();\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2) {\n                let textEdit = textEdits.get(candidate.uri.toString());\n                if (!textEdit) {\n                    textEdit = [candidate.uri, []];\n                    textEdits.set(candidate.uri.toString(), textEdit);\n                }\n                textEdit[1].push(candidate.edit);\n            }\n        }\n        const result: [URI, TextEdit[]][] = [];\n        textEdits.forEach(v => result.push(v));\n        return result;\n    }\n\n    _allEntries(): ([URI, TextEdit[], WorkspaceEditMetadata] | [URI, URI, FileOperationOptions, WorkspaceEditMetadata])[] {\n        const res: ([URI, TextEdit[], WorkspaceEditMetadata] | [URI, URI, FileOperationOptions, WorkspaceEditMetadata])[] = [];\n        for (const edit of this._edits) {\n            if (!edit) {\n                continue;\n            }\n            if (edit._type === 1) {\n                res.push([edit.from!, edit.to!, edit.options!, edit.metadata!]);\n            } else {\n                res.push([edit.uri, [edit.edit], edit.metadata!]);\n            }\n        }\n        return res;\n    }\n\n    get size(): number {\n        return this.entries().length;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON(): any {\n        return this.entries();\n    }\n}\n\nexport class TreeItem {\n\n    label?: string | theia.TreeItemLabel;\n\n    id?: string;\n\n    iconPath?: string | URI | { light: string | URI; dark: string | URI } | ThemeIcon;\n\n    resourceUri?: URI;\n\n    tooltip?: string | undefined;\n\n    command?: theia.Command;\n\n    contextValue?: string;\n\n    constructor(label: string | theia.TreeItemLabel, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(resourceUri: URI, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(arg1: string | theia.TreeItemLabel | URI, public collapsibleState: theia.TreeItemCollapsibleState = TreeItemCollapsibleState.None) {\n        if (arg1 instanceof URI) {\n            this.resourceUri = arg1;\n        } else {\n            this.label = arg1;\n        }\n    }\n}\n\nexport enum TreeItemCollapsibleState {\n    None = 0,\n    Collapsed = 1,\n    Expanded = 2\n}\n\nexport enum SymbolTag {\n    Deprecated = 1\n}\n\nexport class SymbolInformation {\n\n    static validate(candidate: SymbolInformation): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n    }\n\n    name: string;\n    location: Location;\n    kind: SymbolKind;\n    tags?: SymbolTag[];\n    containerName: undefined | string;\n    constructor(name: string, kind: SymbolKind, containerName: string, location: Location);\n    constructor(name: string, kind: SymbolKind, range: Range, uri?: URI, containerName?: string);\n    constructor(name: string, kind: SymbolKind, rangeOrContainer: string | Range, locationOrUri?: Location | URI, containerName?: string) {\n        this.name = name;\n        this.kind = kind;\n        this.containerName = containerName;\n\n        if (typeof rangeOrContainer === 'string') {\n            this.containerName = rangeOrContainer;\n        }\n\n        if (locationOrUri instanceof Location) {\n            this.location = locationOrUri;\n        } else if (rangeOrContainer instanceof Range) {\n            this.location = new Location(locationOrUri!, rangeOrContainer);\n        }\n\n        SymbolInformation.validate(this);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON(): any {\n        return {\n            name: this.name,\n            kind: SymbolKind[this.kind],\n            location: this.location,\n            containerName: this.containerName\n        };\n    }\n}\n\nexport class DocumentSymbol {\n\n    static validate(candidate: DocumentSymbol): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n        if (!candidate.range.contains(candidate.selectionRange)) {\n            throw new Error('selectionRange must be contained in fullRange');\n        }\n        if (candidate.children) {\n            candidate.children.forEach(DocumentSymbol.validate);\n        }\n    }\n\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    tags?: SymbolTag[];\n    range: Range;\n    selectionRange: Range;\n    children: DocumentSymbol[];\n\n    constructor(name: string, detail: string, kind: SymbolKind, range: Range, selectionRange: Range) {\n        this.name = name;\n        this.detail = detail;\n        this.kind = kind;\n        this.range = range;\n        this.selectionRange = selectionRange;\n        this.children = [];\n\n        DocumentSymbol.validate(this);\n    }\n}\n\nexport enum CommentThreadCollapsibleState {\n    Collapsed = 0,\n    Expanded = 1\n}\n\nexport interface QuickInputButton {\n    readonly iconPath: URI | { light: string | URI; dark: string | URI } | ThemeIcon;\n    readonly tooltip?: string | undefined;\n}\n\nexport class QuickInputButtons {\n    static readonly Back: QuickInputButton = {\n        iconPath: {\n            id: 'Back'\n        },\n        tooltip: 'Back'\n    };\n}\n\nexport class FileDecoration {\n\n    static validate(d: FileDecoration): void {\n        if (d.badge && d.badge.length !== 1 && d.badge.length !== 2) {\n            throw new Error('The \\'badge\\'-property must be undefined or a short character');\n        }\n        if (!d.color && !d.badge && !d.tooltip) {\n            throw new Error('The decoration is empty');\n        }\n    }\n\n    badge?: string;\n    tooltip?: string;\n    color?: theia.ThemeColor;\n    priority?: number;\n    propagate?: boolean;\n\n    constructor(badge?: string, tooltip?: string, color?: ThemeColor) {\n        this.badge = badge;\n        this.tooltip = tooltip;\n        this.color = color;\n    }\n}\n\nexport enum CommentMode {\n    Editing = 0,\n    Preview = 1\n}\n\n// #region file api\n\nexport enum FileChangeType {\n    Changed = 1,\n    Created = 2,\n    Deleted = 3,\n}\n\nexport class FileSystemError extends Error {\n\n    static FileExists(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileExists, FileSystemError.FileExists);\n    }\n    static FileNotFound(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileNotFound, FileSystemError.FileNotFound);\n    }\n    static FileNotADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileNotADirectory, FileSystemError.FileNotADirectory);\n    }\n    static FileIsADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileIsADirectory, FileSystemError.FileIsADirectory);\n    }\n    static NoPermissions(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.NoPermissions, FileSystemError.NoPermissions);\n    }\n    static Unavailable(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.Unavailable, FileSystemError.Unavailable);\n    }\n\n    readonly code: string;\n\n    constructor(uriOrMessage?: string | URI, code: FileSystemProviderErrorCode = FileSystemProviderErrorCode.Unknown, terminator?: Function) {\n        super(URI.isUri(uriOrMessage) ? uriOrMessage.toString(true) : uriOrMessage);\n\n        this.code = terminator?.name ?? 'Unknown';\n\n        // mark the error as file system provider error so that\n        // we can extract the error code on the receiving side\n        markAsFileSystemProviderError(this, code);\n\n        // workaround when extending builtin objects and when compiling to ES5, see:\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        if (typeof (<any>Object).setPrototypeOf === 'function') {\n            (<any>Object).setPrototypeOf(this, FileSystemError.prototype);\n        }\n\n        if (typeof Error.captureStackTrace === 'function' && typeof terminator === 'function') {\n            // nice stack traces\n            Error.captureStackTrace(this, terminator);\n        }\n    }\n}\n\n// #endregion\n\nexport enum FileType {\n    Unknown = 0,\n    File = 1,\n    Directory = 2,\n    SymbolicLink = 64\n}\n\nexport interface FileStat {\n    readonly type: FileType;\n    readonly ctime: number;\n    readonly mtime: number;\n    readonly size: number;\n}\n\nexport class ProgressOptions {\n    /**\n     * The location at which progress should show.\n     */\n    location: ProgressLocation;\n    /**\n     * A human-readable string which will be used to describe the\n     * operation.\n     */\n    title?: string;\n    /**\n     * Controls if a cancel button should show to allow the user to\n     * cancel the long running operation.  Note that currently only\n     * `ProgressLocation.Notification` is supporting to show a cancel\n     * button.\n     */\n    cancellable?: boolean;\n    constructor(location: ProgressLocation, title?: string, cancellable?: boolean) {\n        this.location = location;\n    }\n}\nexport class Progress<T> {\n    /**\n     * Report a progress update.\n     * @param value A progress item, like a message and/or an\n     * report on how much work finished\n     */\n    report(value: T): void {\n    }\n}\nexport enum ProgressLocation {\n    /**\n     * Show progress for the source control viewlet, as overlay for the icon and as progress bar\n     * inside the viewlet (when visible). Neither supports cancellation nor discrete progress.\n     */\n    SourceControl = 1,\n    /**\n     * Show progress in the status bar of the editor. Neither supports cancellation nor discrete progress.\n     */\n    Window = 10,\n    /**\n     * Show progress as notification with an optional cancel button. Supports to show infinite and discrete progress.\n     */\n    Notification = 15\n}\n\nexport class ProcessExecution {\n    private executionProcess: string;\n    private arguments: string[];\n    private executionOptions: theia.ProcessExecutionOptions | undefined;\n\n    constructor(process: string, options?: theia.ProcessExecutionOptions);\n    constructor(process: string, args: string[], options?: theia.ProcessExecutionOptions);\n    constructor(process: string, varg1?: string[] | theia.ProcessExecutionOptions, varg2?: theia.ProcessExecutionOptions) {\n        if (typeof process !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = process;\n        if (varg1 !== undefined) {\n            if (Array.isArray(varg1)) {\n                this.arguments = varg1;\n                this.executionOptions = varg2;\n            } else {\n                this.executionOptions = varg1;\n            }\n        }\n        if (this.arguments === undefined) {\n            this.arguments = [];\n        }\n    }\n\n    get process(): string {\n        return this.executionProcess;\n    }\n\n    set process(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = value;\n    }\n\n    get args(): string[] {\n        return this.arguments;\n    }\n\n    set args(value: string[]) {\n        if (!Array.isArray(value)) {\n            value = [];\n        }\n        this.arguments = value;\n    }\n\n    get options(): theia.ProcessExecutionOptions | undefined {\n        return this.executionOptions;\n    }\n\n    set options(value: theia.ProcessExecutionOptions | undefined) {\n        this.executionOptions = value;\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution | theia.CustomExecution): value is ProcessExecution {\n        const candidate = value as ProcessExecution;\n        return candidate && !!candidate.process;\n    }\n}\n\nexport enum ShellQuoting {\n    Escape = 1,\n    Strong = 2,\n    Weak = 3\n}\n\nexport enum TaskPanelKind {\n    Shared = 1,\n    Dedicated = 2,\n    New = 3\n}\n\nexport enum TaskRevealKind {\n    Always = 1,\n    Silent = 2,\n    Never = 3\n}\n\nexport class ShellExecution {\n    private shellCommandLine: string;\n    private shellCommand: string | theia.ShellQuotedString;\n    private arguments: (string | theia.ShellQuotedString)[];\n    private shellOptions: theia.ShellExecutionOptions | undefined;\n\n    constructor(commandLine: string, options?: theia.ShellExecutionOptions);\n    constructor(command: string | theia.ShellQuotedString, args: (string | theia.ShellQuotedString)[], options?: theia.ShellExecutionOptions);\n\n    constructor(arg0: string | theia.ShellQuotedString, arg1?: theia.ShellExecutionOptions | (string | theia.ShellQuotedString)[], arg2?: theia.ShellExecutionOptions) {\n        if (Array.isArray(arg1) || typeof arg1 === 'string') {\n            if (!arg0) {\n                throw illegalArgument('command can\\'t be undefined or null');\n            }\n            if (typeof arg0 !== 'string' && typeof arg0.value !== 'string') {\n                throw illegalArgument('command');\n            }\n            this.shellCommand = arg0;\n            this.arguments = arg1 as (string | theia.ShellQuotedString)[];\n            this.shellOptions = arg2;\n        } else {\n            if (typeof arg0 !== 'string') {\n                throw illegalArgument('commandLine');\n            }\n            this.shellCommandLine = arg0;\n            this.shellOptions = arg1;\n        }\n    }\n\n    get commandLine(): string {\n        return this.shellCommandLine;\n    }\n\n    set commandLine(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('commandLine');\n        }\n        this.shellCommandLine = value;\n    }\n\n    get command(): string | theia.ShellQuotedString {\n        return this.shellCommand;\n    }\n\n    set command(value: string | theia.ShellQuotedString) {\n        if (typeof value !== 'string' && typeof value.value !== 'string') {\n            throw illegalArgument('command');\n        }\n        this.shellCommand = value;\n    }\n\n    get args(): (string | theia.ShellQuotedString)[] {\n        return this.arguments;\n    }\n\n    set args(value: (string | theia.ShellQuotedString)[]) {\n        this.arguments = value || [];\n    }\n\n    get options(): theia.ShellExecutionOptions | undefined {\n        return this.shellOptions;\n    }\n\n    set options(value: theia.ShellExecutionOptions | undefined) {\n        this.shellOptions = value;\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution | theia.CustomExecution): value is ShellExecution {\n        const candidate = value as ShellExecution;\n        return candidate && (!!candidate.commandLine || !!candidate.command);\n    }\n}\n\nexport class CustomExecution {\n    private _callback: (resolvedDefintion: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>;\n    constructor(callback: (resolvedDefintion: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>) {\n        this._callback = callback;\n    }\n\n    public set callback(value: (resolvedDefintion: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>) {\n        this._callback = value;\n    }\n\n    public get callback(): ((resolvedDefintion: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>) {\n        return this._callback;\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution | theia.CustomExecution): value is CustomExecution {\n        const candidate = value as CustomExecution;\n        return candidate && (!!candidate._callback);\n    }\n}\n\nexport class TaskGroup {\n    private groupId: string;\n\n    public static Clean: TaskGroup = new TaskGroup('clean', 'Clean');\n    public static Build: TaskGroup = new TaskGroup('build', 'Build');\n    public static Rebuild: TaskGroup = new TaskGroup('rebuild', 'Rebuild');\n    public static Test: TaskGroup = new TaskGroup('test', 'Test');\n\n    public static from(value: string): TaskGroup | undefined {\n        switch (value) {\n            case 'clean':\n                return TaskGroup.Clean;\n            case 'build':\n                return TaskGroup.Build;\n            case 'rebuild':\n                return TaskGroup.Rebuild;\n            case 'test':\n                return TaskGroup.Test;\n            default:\n                return undefined;\n        }\n    }\n\n    constructor(id: string, label: string) {\n        if (typeof id !== 'string') {\n            throw illegalArgument('id');\n        }\n        if (typeof label !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.groupId = id;\n    }\n\n    get id(): string {\n        return this.groupId;\n    }\n}\n\nexport enum TaskScope {\n    Global = 1,\n    Workspace = 2\n}\n\nexport class Task {\n    private taskDefinition: theia.TaskDefinition;\n    private taskScope: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined;\n    private taskName: string;\n    private taskExecution: ProcessExecution | ShellExecution | CustomExecution | undefined;\n    private taskProblemMatchers: string[];\n    private hasTaskProblemMatchers: boolean;\n    private isTaskBackground: boolean;\n    private taskSource: string;\n    private taskGroup: TaskGroup | undefined;\n    private taskPresentationOptions: theia.TaskPresentationOptions;\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution | CustomExecution,\n        problemMatchers?: string | string[]\n    );\n\n    // Deprecated constructor used by Jake vscode built-in\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution | CustomExecution,\n        problemMatchers?: string | string[],\n    );\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(...args: any[]) {\n        let taskDefinition: theia.TaskDefinition;\n        let scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace | undefined;\n        let name: string;\n        let source: string;\n        let execution: ProcessExecution | ShellExecution | CustomExecution | undefined;\n        let problemMatchers: string | string[] | undefined;\n\n        if (typeof args[1] === 'string') {\n            [\n                taskDefinition,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        } else {\n            [\n                taskDefinition,\n                scope,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        }\n\n        this.definition = taskDefinition;\n        this.scope = scope;\n        this.name = name;\n        this.source = source;\n        this.execution = execution;\n\n        if (typeof problemMatchers === 'string') {\n            this.taskProblemMatchers = [problemMatchers];\n            this.hasTaskProblemMatchers = true;\n        } else if (Array.isArray(problemMatchers)) {\n            this.taskProblemMatchers = problemMatchers;\n            this.hasTaskProblemMatchers = true;\n        } else {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n        }\n        this.isTaskBackground = false;\n        this.presentationOptions = Object.create(null);\n    }\n\n    get definition(): theia.TaskDefinition {\n        return this.taskDefinition;\n    }\n\n    set definition(value: theia.TaskDefinition) {\n        if (value === undefined || value === null) {\n            throw illegalArgument('Kind can\\'t be undefined or null');\n        }\n        this.taskDefinition = value;\n    }\n\n    get scope(): theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined {\n        return this.taskScope;\n    }\n\n    set scope(value: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskScope = value;\n    }\n\n    get name(): string {\n        return this.taskName;\n    }\n\n    set name(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.taskName = value;\n    }\n\n    get execution(): ProcessExecution | ShellExecution | CustomExecution | undefined {\n        return this.taskExecution;\n    }\n\n    set execution(value: ProcessExecution | ShellExecution | CustomExecution | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskExecution = value;\n    }\n\n    get problemMatchers(): string[] {\n        return this.taskProblemMatchers;\n    }\n\n    set problemMatchers(value: string[]) {\n        if (!Array.isArray(value)) {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n            return;\n        }\n        this.taskProblemMatchers = value;\n        this.hasTaskProblemMatchers = true;\n    }\n\n    get hasProblemMatchers(): boolean {\n        return this.hasTaskProblemMatchers;\n    }\n\n    get isBackground(): boolean {\n        return this.isTaskBackground;\n    }\n\n    set isBackground(value: boolean) {\n        if (value !== true && value !== false) {\n            value = false;\n        }\n        this.isTaskBackground = value;\n    }\n\n    get source(): string {\n        return this.taskSource;\n    }\n\n    set source(value: string) {\n        if (typeof value !== 'string' || value.length === 0) {\n            throw illegalArgument('source must be a string of length > 0');\n        }\n        this.taskSource = value;\n    }\n\n    get group(): TaskGroup | undefined {\n        return this.taskGroup;\n    }\n\n    set group(value: TaskGroup | undefined) {\n        if (value === undefined || value === null) {\n            this.taskGroup = undefined;\n            return;\n        }\n        this.taskGroup = value;\n    }\n\n    get presentationOptions(): theia.TaskPresentationOptions {\n        return this.taskPresentationOptions;\n    }\n\n    set presentationOptions(value: theia.TaskPresentationOptions) {\n        if (value === null || value === undefined) {\n            value = Object.create(null);\n        }\n        this.taskPresentationOptions = value;\n    }\n}\n\nexport class Task2 extends Task {\n    detail?: string;\n}\n\nexport class DebugAdapterExecutable {\n    /**\n     * The command or path of the debug adapter executable.\n     * A command must be either an absolute path of an executable or the name of an command to be looked up via the PATH environment variable.\n     * The special value 'node' will be mapped to VS Code's built-in Node.js runtime.\n     */\n    readonly command: string;\n\n    /**\n     * The arguments passed to the debug adapter executable. Defaults to an empty array.\n     */\n    readonly args?: string[];\n\n    /**\n     * Optional options to be used when the debug adapter is started.\n     * Defaults to undefined.\n     */\n    readonly options?: theia.DebugAdapterExecutableOptions;\n\n    /**\n     * Creates a description for a debug adapter based on an executable program.\n     *\n     * @param command The command or executable path that implements the debug adapter.\n     * @param args Optional arguments to be passed to the command or executable.\n     * @param options Optional options to be used when starting the command or executable.\n     */\n    constructor(command: string, args?: string[], options?: theia.DebugAdapterExecutableOptions) {\n        this.command = command;\n        this.args = args;\n        this.options = options;\n    }\n}\n\n/**\n * Represents a debug adapter running as a socket based server.\n */\nexport class DebugAdapterServer {\n\n    /**\n     * The port.\n     */\n    readonly port: number;\n\n    /**\n     * The host.\n     */\n    readonly host?: string;\n\n    /**\n     * Create a description for a debug adapter running as a socket based server.\n     */\n    constructor(port: number, host?: string) {\n        this.port = port;\n        this.host = host;\n    }\n}\n\nexport enum LogLevel {\n    Trace = 1,\n    Debug = 2,\n    Info = 3,\n    Warning = 4,\n    Error = 5,\n    Critical = 6,\n    Off = 7\n}\n\n/**\n * The base class of all breakpoint types.\n */\nexport class Breakpoint {\n    /**\n     * Is breakpoint enabled.\n     */\n    enabled: boolean;\n    /**\n     * An optional expression for conditional breakpoints.\n     */\n    condition?: string;\n    /**\n     * An optional expression that controls how many hits of the breakpoint are ignored.\n     */\n    hitCondition?: string;\n    /**\n     * An optional message that gets logged when this breakpoint is hit. Embedded expressions within {} are interpolated by the debug adapter.\n     */\n    logMessage?: string;\n\n    protected constructor(enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        this.enabled = enabled || false;\n        this.condition = condition;\n        this.hitCondition = hitCondition;\n        this.logMessage = logMessage;\n    }\n\n    private _id: string | undefined;\n    /**\n     * The unique ID of the breakpoint.\n     */\n    get id(): string {\n        if (!this._id) {\n            this._id = UUID.uuid4();\n        }\n        return this._id;\n    }\n\n}\n\n/**\n * A breakpoint specified by a source location.\n */\nexport class SourceBreakpoint extends Breakpoint {\n    /**\n     * The source and line position of this breakpoint.\n     */\n    location: Location;\n\n    /**\n     * Create a new breakpoint for a source location.\n     */\n    constructor(location: Location, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        super(enabled, condition, hitCondition, logMessage);\n        this.location = location;\n    }\n}\n\n/**\n * A breakpoint specified by a function name.\n */\nexport class FunctionBreakpoint extends Breakpoint {\n    /**\n     * The name of the function to which this breakpoint is attached.\n     */\n    functionName: string;\n\n    /**\n     * Create a new function breakpoint.\n     */\n    constructor(functionName: string, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        super(enabled, condition, hitCondition, logMessage);\n        this.functionName = functionName;\n    }\n}\n\nexport class Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n\n    constructor(red: number, green: number, blue: number, alpha: number) {\n        this.red = red;\n        this.green = green;\n        this.blue = blue;\n        this.alpha = alpha;\n    }\n}\n\nexport class ColorInformation {\n    range: Range;\n    color: Color;\n\n    constructor(range: Range, color: Color) {\n        if (color && !(color instanceof Color)) {\n            throw illegalArgument('color');\n        }\n        if (!Range.isRange(range)) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.color = color;\n    }\n}\n\nexport class ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n\n    constructor(label: string) {\n        if (!label || typeof label !== 'string') {\n            throw illegalArgument('label');\n        }\n        this.label = label;\n    }\n}\n\nexport enum ColorFormat {\n    RGB = 0,\n    HEX = 1,\n    HSL = 2\n}\n\nexport class FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n\n    constructor(start: number, end: number, kind?: FoldingRangeKind) {\n        this.start = start;\n        this.end = end;\n        this.kind = kind;\n    }\n}\n\nexport enum FoldingRangeKind {\n    Comment = 1,\n    Imports = 2,\n    Region = 3\n}\n\nexport class SelectionRange {\n\n    range: Range;\n    parent?: SelectionRange;\n\n    constructor(range: Range, parent?: SelectionRange) {\n        this.range = range;\n        this.parent = parent;\n\n        if (parent && !parent.range.contains(this.range)) {\n            throw new Error('Invalid argument: parent must contain this range');\n        }\n    }\n}\n\n/**\n * Enumeration of the supported operating systems.\n */\nexport enum OperatingSystem {\n    Windows = 'Windows',\n    Linux = 'Linux',\n    OSX = 'OSX'\n}\n\n/** The areas of the application shell where webview panel can reside. */\nexport enum WebviewPanelTargetArea {\n    Main = 'main',\n    Left = 'left',\n    Right = 'right',\n    Bottom = 'bottom'\n}\n\n/**\n * Possible kinds of UI that can use extensions.\n */\nexport enum UIKind {\n\n    /**\n     * Extensions are accessed from a desktop application.\n     */\n    Desktop = 1,\n\n    /**\n     * Extensions are accessed from a web browser.\n     */\n    Web = 2\n}\n\nexport class CallHierarchyItem {\n    _sessionId?: string;\n    _itemId?: string;\n\n    kind: SymbolKind;\n    name: string;\n    detail?: string;\n    uri: URI;\n    range: Range;\n    selectionRange: Range;\n\n    constructor(kind: SymbolKind, name: string, detail: string, uri: URI, range: Range, selectionRange: Range) {\n        this.kind = kind;\n        this.name = name;\n        this.detail = detail;\n        this.uri = uri;\n        this.range = range;\n        this.selectionRange = selectionRange;\n    }\n\n    static isCallHierarchyItem(thing: {}): thing is theia.CallHierarchyItem {\n        if (thing instanceof CallHierarchyItem) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<CallHierarchyItem>thing).kind === 'number' &&\n            typeof (<CallHierarchyItem>thing).name === 'string' &&\n            URI.isUri((<CallHierarchyItem>thing).uri) &&\n            Range.isRange((<CallHierarchyItem>thing).range) &&\n            Range.isRange((<CallHierarchyItem>thing).selectionRange);\n    }\n}\n\nexport class CallHierarchyIncomingCall {\n\n    from: theia.CallHierarchyItem;\n    fromRanges: theia.Range[];\n\n    constructor(item: theia.CallHierarchyItem, fromRanges: theia.Range[]) {\n        this.fromRanges = fromRanges;\n        this.from = item;\n    }\n}\n\nexport class CallHierarchyOutgoingCall {\n\n    to: theia.CallHierarchyItem;\n    fromRanges: theia.Range[];\n\n    constructor(item: theia.CallHierarchyItem, fromRanges: theia.Range[]) {\n        this.fromRanges = fromRanges;\n        this.to = item;\n    }\n}\n\nexport class TimelineItem {\n    timestamp: number;\n    label: string;\n    id?: string;\n    iconPath?: theia.Uri | { light: theia.Uri; dark: theia.Uri } | ThemeIcon;\n    description?: string;\n    detail?: string;\n    command?: theia.Command;\n    contextValue?: string;\n    constructor(label: string, timestamp: number) {\n        this.label = label;\n        this.timestamp = timestamp;\n    }\n}\n\n// #region Semantic Coloring\n\nexport class SemanticTokensLegend {\n    public readonly tokenTypes: string[];\n    public readonly tokenModifiers: string[];\n\n    constructor(tokenTypes: string[], tokenModifiers: string[] = []) {\n        this.tokenTypes = tokenTypes;\n        this.tokenModifiers = tokenModifiers;\n    }\n}\n\nfunction isStrArrayOrUndefined(arg: any): arg is string[] | undefined {\n    return ((typeof arg === 'undefined') || (Array.isArray(arg) && arg.every(e => typeof e === 'string')));\n}\n\nexport class SemanticTokensBuilder {\n\n    private _prevLine: number;\n    private _prevChar: number;\n    private _dataIsSortedAndDeltaEncoded: boolean;\n    private _data: number[];\n    private _dataLen: number;\n    private _tokenTypeStrToInt: Map<string, number>;\n    private _tokenModifierStrToInt: Map<string, number>;\n    private _hasLegend: boolean;\n\n    constructor(legend?: theia.SemanticTokensLegend) {\n        this._prevLine = 0;\n        this._prevChar = 0;\n        this._dataIsSortedAndDeltaEncoded = true;\n        this._data = [];\n        this._dataLen = 0;\n        this._tokenTypeStrToInt = new Map<string, number>();\n        this._tokenModifierStrToInt = new Map<string, number>();\n        this._hasLegend = false;\n        if (legend) {\n            this._hasLegend = true;\n            for (let i = 0, len = legend.tokenTypes.length; i < len; i++) {\n                this._tokenTypeStrToInt.set(legend.tokenTypes[i], i);\n            }\n            for (let i = 0, len = legend.tokenModifiers.length; i < len; i++) {\n                this._tokenModifierStrToInt.set(legend.tokenModifiers[i], i);\n            }\n        }\n    }\n\n    public push(line: number, char: number, length: number, tokenType: number, tokenModifiers?: number): void;\n    public push(range: Range, tokenType: string, tokenModifiers?: string[]): void;\n    public push(arg0: any, arg1: any, arg2: any, arg3?: any, arg4?: any): void {\n        if (typeof arg0 === 'number' && typeof arg1 === 'number' && typeof arg2 === 'number' && typeof arg3 === 'number' &&\n            (typeof arg4 === 'number' || typeof arg4 === 'undefined')) {\n            if (typeof arg4 === 'undefined') {\n                arg4 = 0;\n            }\n            // 1st overload\n            return this._pushEncoded(arg0, arg1, arg2, arg3, arg4);\n        }\n        if (Range.isRange(arg0) && typeof arg1 === 'string' && isStrArrayOrUndefined(arg2)) {\n            // 2nd overload\n            return this._push(arg0, arg1, arg2);\n        }\n        throw illegalArgument();\n    }\n\n    private _push(range: theia.Range, tokenType: string, tokenModifiers?: string[]): void {\n        if (!this._hasLegend) {\n            throw new Error('Legend must be provided in constructor');\n        }\n        if (range.start.line !== range.end.line) {\n            throw new Error('`range` cannot span multiple lines');\n        }\n        if (!this._tokenTypeStrToInt.has(tokenType)) {\n            throw new Error('`tokenType` is not in the provided legend');\n        }\n        const line = range.start.line;\n        const char = range.start.character;\n        const length = range.end.character - range.start.character;\n        const nTokenType = this._tokenTypeStrToInt.get(tokenType)!;\n        let nTokenModifiers = 0;\n        if (tokenModifiers) {\n            for (const tokenModifier of tokenModifiers) {\n                if (!this._tokenModifierStrToInt.has(tokenModifier)) {\n                    throw new Error('`tokenModifier` is not in the provided legend');\n                }\n                const nTokenModifier = this._tokenModifierStrToInt.get(tokenModifier)!;\n                nTokenModifiers |= (1 << nTokenModifier) >>> 0;\n            }\n        }\n        this._pushEncoded(line, char, length, nTokenType, nTokenModifiers);\n    }\n\n    private _pushEncoded(line: number, char: number, length: number, tokenType: number, tokenModifiers: number): void {\n        if (this._dataIsSortedAndDeltaEncoded && (line < this._prevLine || (line === this._prevLine && char < this._prevChar))) {\n            // push calls were ordered and are no longer ordered\n            this._dataIsSortedAndDeltaEncoded = false;\n\n            // Remove delta encoding from data\n            const tokenCount = (this._data.length / 5) | 0;\n            let prevLine = 0;\n            let prevChar = 0;\n            for (let i = 0; i < tokenCount; i++) {\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                let line = this._data[5 * i];\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                let char = this._data[5 * i + 1];\n\n                if (line === 0) {\n                    // on the same line as previous token\n                    line = prevLine;\n                    char += prevChar;\n                } else {\n                    // on a different line than previous token\n                    line += prevLine;\n                }\n\n                this._data[5 * i] = line;\n                this._data[5 * i + 1] = char;\n\n                prevLine = line;\n                prevChar = char;\n            }\n        }\n\n        let pushLine = line;\n        let pushChar = char;\n        if (this._dataIsSortedAndDeltaEncoded && this._dataLen > 0) {\n            pushLine -= this._prevLine;\n            if (pushLine === 0) {\n                pushChar -= this._prevChar;\n            }\n        }\n\n        this._data[this._dataLen++] = pushLine;\n        this._data[this._dataLen++] = pushChar;\n        this._data[this._dataLen++] = length;\n        this._data[this._dataLen++] = tokenType;\n        this._data[this._dataLen++] = tokenModifiers;\n\n        this._prevLine = line;\n        this._prevChar = char;\n    }\n\n    private static _sortAndDeltaEncode(data: number[]): Uint32Array {\n        const pos: number[] = [];\n        const tokenCount = (data.length / 5) | 0;\n        for (let i = 0; i < tokenCount; i++) {\n            pos[i] = i;\n        }\n        pos.sort((a, b) => {\n            const aLine = data[5 * a];\n            const bLine = data[5 * b];\n            if (aLine === bLine) {\n                const aChar = data[5 * a + 1];\n                const bChar = data[5 * b + 1];\n                return aChar - bChar;\n            }\n            return aLine - bLine;\n        });\n        const result = new Uint32Array(data.length);\n        let prevLine = 0;\n        let prevChar = 0;\n        for (let i = 0; i < tokenCount; i++) {\n            const srcOffset = 5 * pos[i];\n            const line = data[srcOffset + 0];\n            const char = data[srcOffset + 1];\n            const length = data[srcOffset + 2];\n            const tokenType = data[srcOffset + 3];\n            const tokenModifiers = data[srcOffset + 4];\n\n            const pushLine = line - prevLine;\n            const pushChar = (pushLine === 0 ? char - prevChar : char);\n\n            const dstOffset = 5 * i;\n            result[dstOffset + 0] = pushLine;\n            result[dstOffset + 1] = pushChar;\n            result[dstOffset + 2] = length;\n            result[dstOffset + 3] = tokenType;\n            result[dstOffset + 4] = tokenModifiers;\n\n            prevLine = line;\n            prevChar = char;\n        }\n\n        return result;\n    }\n\n    public build(resultId?: string): SemanticTokens {\n        if (!this._dataIsSortedAndDeltaEncoded) {\n            return new SemanticTokens(SemanticTokensBuilder._sortAndDeltaEncode(this._data), resultId);\n        }\n        return new SemanticTokens(new Uint32Array(this._data), resultId);\n    }\n}\n\nexport class SemanticTokens {\n    readonly resultId?: string;\n    readonly data: Uint32Array;\n\n    constructor(data: Uint32Array, resultId?: string) {\n        this.resultId = resultId;\n        this.data = data;\n    }\n}\n\nexport class SemanticTokensEdit {\n    readonly start: number;\n    readonly deleteCount: number;\n    readonly data?: Uint32Array;\n\n    constructor(start: number, deleteCount: number, data?: Uint32Array) {\n        this.start = start;\n        this.deleteCount = deleteCount;\n        this.data = data;\n    }\n}\n\nexport class SemanticTokensEdits {\n    readonly resultId?: string;\n    readonly edits: SemanticTokensEdit[];\n\n    constructor(edits: SemanticTokensEdit[], resultId?: string) {\n        this.resultId = resultId;\n        this.edits = edits;\n    }\n}\n\n// #endregion\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { CancellationToken } from '@theia/core';\n\nexport const fileSearchServicePath = '/services/search';\n\n/**\n * The JSON-RPC file search service interface.\n */\nexport interface FileSearchService {\n\n    /**\n     * finds files by a given search pattern.\n     * @return the matching file uris\n     */\n    find(searchPattern: string, options: FileSearchService.Options, cancellationToken?: CancellationToken): Promise<string[]>;\n\n}\n\nexport const FileSearchService = Symbol('FileSearchService');\nexport namespace FileSearchService {\n    export interface BaseOptions {\n        useGitIgnore?: boolean\n        includePatterns?: string[]\n        excludePatterns?: string[]\n    }\n    export interface RootOptions {\n        [rootUri: string]: BaseOptions\n    }\n    export interface Options extends BaseOptions {\n        rootUris?: string[]\n        rootOptions?: RootOptions\n        fuzzyMatch?: boolean\n        limit?: number\n        /**\n         * when `undefined`, no excludes will apply, when empty array, default excludes will apply\n         *\n         * @deprecated since 0.5.0 use `excludePatterns` instead\n         */\n        defaultIgnorePatterns?: string[]\n    }\n}\n\nexport const WHITESPACE_QUERY_SEPARATOR = /\\s+/;\n","/********************************************************************************\n * Copyright (C) 2017 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './task-service';\nexport * from './task-contribution';\nexport * from './task-definition-registry';\nexport * from './task-problem-matcher-registry';\nexport * from './task-problem-pattern-registry';\nexport * from './task-schema-updater';\n","'use strict';\n\n/**\n * @param typeMap [Object] Map of MIME type -> Array[extensions]\n * @param ...\n */\nfunction Mime() {\n  this._types = Object.create(null);\n  this._extensions = Object.create(null);\n\n  for (let i = 0; i < arguments.length; i++) {\n    this.define(arguments[i]);\n  }\n\n  this.define = this.define.bind(this);\n  this.getType = this.getType.bind(this);\n  this.getExtension = this.getExtension.bind(this);\n}\n\n/**\n * Define mimetype -> extension mappings.  Each key is a mime-type that maps\n * to an array of extensions associated with the type.  The first extension is\n * used as the default extension for the type.\n *\n * e.g. mime.define({'audio/ogg', ['oga', 'ogg', 'spx']});\n *\n * If a type declares an extension that has already been defined, an error will\n * be thrown.  To suppress this error and force the extension to be associated\n * with the new type, pass `force`=true.  Alternatively, you may prefix the\n * extension with \"*\" to map the type to extension, without mapping the\n * extension to the type.\n *\n * e.g. mime.define({'audio/wav', ['wav']}, {'audio/x-wav', ['*wav']});\n *\n *\n * @param map (Object) type definitions\n * @param force (Boolean) if true, force overriding of existing definitions\n */\nMime.prototype.define = function(typeMap, force) {\n  for (let type in typeMap) {\n    let extensions = typeMap[type].map(function(t) {\n      return t.toLowerCase();\n    });\n    type = type.toLowerCase();\n\n    for (let i = 0; i < extensions.length; i++) {\n      const ext = extensions[i];\n\n      // '*' prefix = not the preferred type for this extension.  So fixup the\n      // extension, and skip it.\n      if (ext[0] === '*') {\n        continue;\n      }\n\n      if (!force && (ext in this._types)) {\n        throw new Error(\n          'Attempt to change mapping for \"' + ext +\n          '\" extension from \"' + this._types[ext] + '\" to \"' + type +\n          '\". Pass `force=true` to allow this, otherwise remove \"' + ext +\n          '\" from the list of extensions for \"' + type + '\".'\n        );\n      }\n\n      this._types[ext] = type;\n    }\n\n    // Use first extension as default\n    if (force || !this._extensions[type]) {\n      const ext = extensions[0];\n      this._extensions[type] = (ext[0] !== '*') ? ext : ext.substr(1);\n    }\n  }\n};\n\n/**\n * Lookup a mime type based on extension\n */\nMime.prototype.getType = function(path) {\n  path = String(path);\n  let last = path.replace(/^.*[/\\\\]/, '').toLowerCase();\n  let ext = last.replace(/^.*\\./, '').toLowerCase();\n\n  let hasPath = last.length < path.length;\n  let hasDot = ext.length < last.length - 1;\n\n  return (hasDot || !hasPath) && this._types[ext] || null;\n};\n\n/**\n * Return file extension associated with a mime type\n */\nMime.prototype.getExtension = function(type) {\n  type = /^\\s*([^;\\s]*)/.test(type) && RegExp.$1;\n  return type && this._extensions[type.toLowerCase()] || null;\n};\n\nmodule.exports = Mime;\n","'use strict';\n\nlet Mime = require('./Mime');\nmodule.exports = new Mime(require('./types/standard'), require('./types/other'));\n","module.exports = {\"application/prs.cww\":[\"cww\"],\"application/vnd.1000minds.decision-model+xml\":[\"1km\"],\"application/vnd.3gpp.pic-bw-large\":[\"plb\"],\"application/vnd.3gpp.pic-bw-small\":[\"psb\"],\"application/vnd.3gpp.pic-bw-var\":[\"pvb\"],\"application/vnd.3gpp2.tcap\":[\"tcap\"],\"application/vnd.3m.post-it-notes\":[\"pwn\"],\"application/vnd.accpac.simply.aso\":[\"aso\"],\"application/vnd.accpac.simply.imp\":[\"imp\"],\"application/vnd.acucobol\":[\"acu\"],\"application/vnd.acucorp\":[\"atc\",\"acutc\"],\"application/vnd.adobe.air-application-installer-package+zip\":[\"air\"],\"application/vnd.adobe.formscentral.fcdt\":[\"fcdt\"],\"application/vnd.adobe.fxp\":[\"fxp\",\"fxpl\"],\"application/vnd.adobe.xdp+xml\":[\"xdp\"],\"application/vnd.adobe.xfdf\":[\"xfdf\"],\"application/vnd.ahead.space\":[\"ahead\"],\"application/vnd.airzip.filesecure.azf\":[\"azf\"],\"application/vnd.airzip.filesecure.azs\":[\"azs\"],\"application/vnd.amazon.ebook\":[\"azw\"],\"application/vnd.americandynamics.acc\":[\"acc\"],\"application/vnd.amiga.ami\":[\"ami\"],\"application/vnd.android.package-archive\":[\"apk\"],\"application/vnd.anser-web-certificate-issue-initiation\":[\"cii\"],\"application/vnd.anser-web-funds-transfer-initiation\":[\"fti\"],\"application/vnd.antix.game-component\":[\"atx\"],\"application/vnd.apple.installer+xml\":[\"mpkg\"],\"application/vnd.apple.keynote\":[\"key\"],\"application/vnd.apple.mpegurl\":[\"m3u8\"],\"application/vnd.apple.numbers\":[\"numbers\"],\"application/vnd.apple.pages\":[\"pages\"],\"application/vnd.apple.pkpass\":[\"pkpass\"],\"application/vnd.aristanetworks.swi\":[\"swi\"],\"application/vnd.astraea-software.iota\":[\"iota\"],\"application/vnd.audiograph\":[\"aep\"],\"application/vnd.balsamiq.bmml+xml\":[\"bmml\"],\"application/vnd.blueice.multipass\":[\"mpm\"],\"application/vnd.bmi\":[\"bmi\"],\"application/vnd.businessobjects\":[\"rep\"],\"application/vnd.chemdraw+xml\":[\"cdxml\"],\"application/vnd.chipnuts.karaoke-mmd\":[\"mmd\"],\"application/vnd.cinderella\":[\"cdy\"],\"application/vnd.citationstyles.style+xml\":[\"csl\"],\"application/vnd.claymore\":[\"cla\"],\"application/vnd.cloanto.rp9\":[\"rp9\"],\"application/vnd.clonk.c4group\":[\"c4g\",\"c4d\",\"c4f\",\"c4p\",\"c4u\"],\"application/vnd.cluetrust.cartomobile-config\":[\"c11amc\"],\"application/vnd.cluetrust.cartomobile-config-pkg\":[\"c11amz\"],\"application/vnd.commonspace\":[\"csp\"],\"application/vnd.contact.cmsg\":[\"cdbcmsg\"],\"application/vnd.cosmocaller\":[\"cmc\"],\"application/vnd.crick.clicker\":[\"clkx\"],\"application/vnd.crick.clicker.keyboard\":[\"clkk\"],\"application/vnd.crick.clicker.palette\":[\"clkp\"],\"application/vnd.crick.clicker.template\":[\"clkt\"],\"application/vnd.crick.clicker.wordbank\":[\"clkw\"],\"application/vnd.criticaltools.wbs+xml\":[\"wbs\"],\"application/vnd.ctc-posml\":[\"pml\"],\"application/vnd.cups-ppd\":[\"ppd\"],\"application/vnd.curl.car\":[\"car\"],\"application/vnd.curl.pcurl\":[\"pcurl\"],\"application/vnd.dart\":[\"dart\"],\"application/vnd.data-vision.rdz\":[\"rdz\"],\"application/vnd.dbf\":[\"dbf\"],\"application/vnd.dece.data\":[\"uvf\",\"uvvf\",\"uvd\",\"uvvd\"],\"application/vnd.dece.ttml+xml\":[\"uvt\",\"uvvt\"],\"application/vnd.dece.unspecified\":[\"uvx\",\"uvvx\"],\"application/vnd.dece.zip\":[\"uvz\",\"uvvz\"],\"application/vnd.denovo.fcselayout-link\":[\"fe_launch\"],\"application/vnd.dna\":[\"dna\"],\"application/vnd.dolby.mlp\":[\"mlp\"],\"application/vnd.dpgraph\":[\"dpg\"],\"application/vnd.dreamfactory\":[\"dfac\"],\"application/vnd.ds-keypoint\":[\"kpxx\"],\"application/vnd.dvb.ait\":[\"ait\"],\"application/vnd.dvb.service\":[\"svc\"],\"application/vnd.dynageo\":[\"geo\"],\"application/vnd.ecowin.chart\":[\"mag\"],\"application/vnd.enliven\":[\"nml\"],\"application/vnd.epson.esf\":[\"esf\"],\"application/vnd.epson.msf\":[\"msf\"],\"application/vnd.epson.quickanime\":[\"qam\"],\"application/vnd.epson.salt\":[\"slt\"],\"application/vnd.epson.ssf\":[\"ssf\"],\"application/vnd.eszigno3+xml\":[\"es3\",\"et3\"],\"application/vnd.ezpix-album\":[\"ez2\"],\"application/vnd.ezpix-package\":[\"ez3\"],\"application/vnd.fdf\":[\"fdf\"],\"application/vnd.fdsn.mseed\":[\"mseed\"],\"application/vnd.fdsn.seed\":[\"seed\",\"dataless\"],\"application/vnd.flographit\":[\"gph\"],\"application/vnd.fluxtime.clip\":[\"ftc\"],\"application/vnd.framemaker\":[\"fm\",\"frame\",\"maker\",\"book\"],\"application/vnd.frogans.fnc\":[\"fnc\"],\"application/vnd.frogans.ltf\":[\"ltf\"],\"application/vnd.fsc.weblaunch\":[\"fsc\"],\"application/vnd.fujitsu.oasys\":[\"oas\"],\"application/vnd.fujitsu.oasys2\":[\"oa2\"],\"application/vnd.fujitsu.oasys3\":[\"oa3\"],\"application/vnd.fujitsu.oasysgp\":[\"fg5\"],\"application/vnd.fujitsu.oasysprs\":[\"bh2\"],\"application/vnd.fujixerox.ddd\":[\"ddd\"],\"application/vnd.fujixerox.docuworks\":[\"xdw\"],\"application/vnd.fujixerox.docuworks.binder\":[\"xbd\"],\"application/vnd.fuzzysheet\":[\"fzs\"],\"application/vnd.genomatix.tuxedo\":[\"txd\"],\"application/vnd.geogebra.file\":[\"ggb\"],\"application/vnd.geogebra.tool\":[\"ggt\"],\"application/vnd.geometry-explorer\":[\"gex\",\"gre\"],\"application/vnd.geonext\":[\"gxt\"],\"application/vnd.geoplan\":[\"g2w\"],\"application/vnd.geospace\":[\"g3w\"],\"application/vnd.gmx\":[\"gmx\"],\"application/vnd.google-apps.document\":[\"gdoc\"],\"application/vnd.google-apps.presentation\":[\"gslides\"],\"application/vnd.google-apps.spreadsheet\":[\"gsheet\"],\"application/vnd.google-earth.kml+xml\":[\"kml\"],\"application/vnd.google-earth.kmz\":[\"kmz\"],\"application/vnd.grafeq\":[\"gqf\",\"gqs\"],\"application/vnd.groove-account\":[\"gac\"],\"application/vnd.groove-help\":[\"ghf\"],\"application/vnd.groove-identity-message\":[\"gim\"],\"application/vnd.groove-injector\":[\"grv\"],\"application/vnd.groove-tool-message\":[\"gtm\"],\"application/vnd.groove-tool-template\":[\"tpl\"],\"application/vnd.groove-vcard\":[\"vcg\"],\"application/vnd.hal+xml\":[\"hal\"],\"application/vnd.handheld-entertainment+xml\":[\"zmm\"],\"application/vnd.hbci\":[\"hbci\"],\"application/vnd.hhe.lesson-player\":[\"les\"],\"application/vnd.hp-hpgl\":[\"hpgl\"],\"application/vnd.hp-hpid\":[\"hpid\"],\"application/vnd.hp-hps\":[\"hps\"],\"application/vnd.hp-jlyt\":[\"jlt\"],\"application/vnd.hp-pcl\":[\"pcl\"],\"application/vnd.hp-pclxl\":[\"pclxl\"],\"application/vnd.hydrostatix.sof-data\":[\"sfd-hdstx\"],\"application/vnd.ibm.minipay\":[\"mpy\"],\"application/vnd.ibm.modcap\":[\"afp\",\"listafp\",\"list3820\"],\"application/vnd.ibm.rights-management\":[\"irm\"],\"application/vnd.ibm.secure-container\":[\"sc\"],\"application/vnd.iccprofile\":[\"icc\",\"icm\"],\"application/vnd.igloader\":[\"igl\"],\"application/vnd.immervision-ivp\":[\"ivp\"],\"application/vnd.immervision-ivu\":[\"ivu\"],\"application/vnd.insors.igm\":[\"igm\"],\"application/vnd.intercon.formnet\":[\"xpw\",\"xpx\"],\"application/vnd.intergeo\":[\"i2g\"],\"application/vnd.intu.qbo\":[\"qbo\"],\"application/vnd.intu.qfx\":[\"qfx\"],\"application/vnd.ipunplugged.rcprofile\":[\"rcprofile\"],\"application/vnd.irepository.package+xml\":[\"irp\"],\"application/vnd.is-xpr\":[\"xpr\"],\"application/vnd.isac.fcs\":[\"fcs\"],\"application/vnd.jam\":[\"jam\"],\"application/vnd.jcp.javame.midlet-rms\":[\"rms\"],\"application/vnd.jisp\":[\"jisp\"],\"application/vnd.joost.joda-archive\":[\"joda\"],\"application/vnd.kahootz\":[\"ktz\",\"ktr\"],\"application/vnd.kde.karbon\":[\"karbon\"],\"application/vnd.kde.kchart\":[\"chrt\"],\"application/vnd.kde.kformula\":[\"kfo\"],\"application/vnd.kde.kivio\":[\"flw\"],\"application/vnd.kde.kontour\":[\"kon\"],\"application/vnd.kde.kpresenter\":[\"kpr\",\"kpt\"],\"application/vnd.kde.kspread\":[\"ksp\"],\"application/vnd.kde.kword\":[\"kwd\",\"kwt\"],\"application/vnd.kenameaapp\":[\"htke\"],\"application/vnd.kidspiration\":[\"kia\"],\"application/vnd.kinar\":[\"kne\",\"knp\"],\"application/vnd.koan\":[\"skp\",\"skd\",\"skt\",\"skm\"],\"application/vnd.kodak-descriptor\":[\"sse\"],\"application/vnd.las.las+xml\":[\"lasxml\"],\"application/vnd.llamagraphics.life-balance.desktop\":[\"lbd\"],\"application/vnd.llamagraphics.life-balance.exchange+xml\":[\"lbe\"],\"application/vnd.lotus-1-2-3\":[\"123\"],\"application/vnd.lotus-approach\":[\"apr\"],\"application/vnd.lotus-freelance\":[\"pre\"],\"application/vnd.lotus-notes\":[\"nsf\"],\"application/vnd.lotus-organizer\":[\"org\"],\"application/vnd.lotus-screencam\":[\"scm\"],\"application/vnd.lotus-wordpro\":[\"lwp\"],\"application/vnd.macports.portpkg\":[\"portpkg\"],\"application/vnd.mcd\":[\"mcd\"],\"application/vnd.medcalcdata\":[\"mc1\"],\"application/vnd.mediastation.cdkey\":[\"cdkey\"],\"application/vnd.mfer\":[\"mwf\"],\"application/vnd.mfmp\":[\"mfm\"],\"application/vnd.micrografx.flo\":[\"flo\"],\"application/vnd.micrografx.igx\":[\"igx\"],\"application/vnd.mif\":[\"mif\"],\"application/vnd.mobius.daf\":[\"daf\"],\"application/vnd.mobius.dis\":[\"dis\"],\"application/vnd.mobius.mbk\":[\"mbk\"],\"application/vnd.mobius.mqy\":[\"mqy\"],\"application/vnd.mobius.msl\":[\"msl\"],\"application/vnd.mobius.plc\":[\"plc\"],\"application/vnd.mobius.txf\":[\"txf\"],\"application/vnd.mophun.application\":[\"mpn\"],\"application/vnd.mophun.certificate\":[\"mpc\"],\"application/vnd.mozilla.xul+xml\":[\"xul\"],\"application/vnd.ms-artgalry\":[\"cil\"],\"application/vnd.ms-cab-compressed\":[\"cab\"],\"application/vnd.ms-excel\":[\"xls\",\"xlm\",\"xla\",\"xlc\",\"xlt\",\"xlw\"],\"application/vnd.ms-excel.addin.macroenabled.12\":[\"xlam\"],\"application/vnd.ms-excel.sheet.binary.macroenabled.12\":[\"xlsb\"],\"application/vnd.ms-excel.sheet.macroenabled.12\":[\"xlsm\"],\"application/vnd.ms-excel.template.macroenabled.12\":[\"xltm\"],\"application/vnd.ms-fontobject\":[\"eot\"],\"application/vnd.ms-htmlhelp\":[\"chm\"],\"application/vnd.ms-ims\":[\"ims\"],\"application/vnd.ms-lrm\":[\"lrm\"],\"application/vnd.ms-officetheme\":[\"thmx\"],\"application/vnd.ms-outlook\":[\"msg\"],\"application/vnd.ms-pki.seccat\":[\"cat\"],\"application/vnd.ms-pki.stl\":[\"*stl\"],\"application/vnd.ms-powerpoint\":[\"ppt\",\"pps\",\"pot\"],\"application/vnd.ms-powerpoint.addin.macroenabled.12\":[\"ppam\"],\"application/vnd.ms-powerpoint.presentation.macroenabled.12\":[\"pptm\"],\"application/vnd.ms-powerpoint.slide.macroenabled.12\":[\"sldm\"],\"application/vnd.ms-powerpoint.slideshow.macroenabled.12\":[\"ppsm\"],\"application/vnd.ms-powerpoint.template.macroenabled.12\":[\"potm\"],\"application/vnd.ms-project\":[\"mpp\",\"mpt\"],\"application/vnd.ms-word.document.macroenabled.12\":[\"docm\"],\"application/vnd.ms-word.template.macroenabled.12\":[\"dotm\"],\"application/vnd.ms-works\":[\"wps\",\"wks\",\"wcm\",\"wdb\"],\"application/vnd.ms-wpl\":[\"wpl\"],\"application/vnd.ms-xpsdocument\":[\"xps\"],\"application/vnd.mseq\":[\"mseq\"],\"application/vnd.musician\":[\"mus\"],\"application/vnd.muvee.style\":[\"msty\"],\"application/vnd.mynfc\":[\"taglet\"],\"application/vnd.neurolanguage.nlu\":[\"nlu\"],\"application/vnd.nitf\":[\"ntf\",\"nitf\"],\"application/vnd.noblenet-directory\":[\"nnd\"],\"application/vnd.noblenet-sealer\":[\"nns\"],\"application/vnd.noblenet-web\":[\"nnw\"],\"application/vnd.nokia.n-gage.ac+xml\":[\"*ac\"],\"application/vnd.nokia.n-gage.data\":[\"ngdat\"],\"application/vnd.nokia.n-gage.symbian.install\":[\"n-gage\"],\"application/vnd.nokia.radio-preset\":[\"rpst\"],\"application/vnd.nokia.radio-presets\":[\"rpss\"],\"application/vnd.novadigm.edm\":[\"edm\"],\"application/vnd.novadigm.edx\":[\"edx\"],\"application/vnd.novadigm.ext\":[\"ext\"],\"application/vnd.oasis.opendocument.chart\":[\"odc\"],\"application/vnd.oasis.opendocument.chart-template\":[\"otc\"],\"application/vnd.oasis.opendocument.database\":[\"odb\"],\"application/vnd.oasis.opendocument.formula\":[\"odf\"],\"application/vnd.oasis.opendocument.formula-template\":[\"odft\"],\"application/vnd.oasis.opendocument.graphics\":[\"odg\"],\"application/vnd.oasis.opendocument.graphics-template\":[\"otg\"],\"application/vnd.oasis.opendocument.image\":[\"odi\"],\"application/vnd.oasis.opendocument.image-template\":[\"oti\"],\"application/vnd.oasis.opendocument.presentation\":[\"odp\"],\"application/vnd.oasis.opendocument.presentation-template\":[\"otp\"],\"application/vnd.oasis.opendocument.spreadsheet\":[\"ods\"],\"application/vnd.oasis.opendocument.spreadsheet-template\":[\"ots\"],\"application/vnd.oasis.opendocument.text\":[\"odt\"],\"application/vnd.oasis.opendocument.text-master\":[\"odm\"],\"application/vnd.oasis.opendocument.text-template\":[\"ott\"],\"application/vnd.oasis.opendocument.text-web\":[\"oth\"],\"application/vnd.olpc-sugar\":[\"xo\"],\"application/vnd.oma.dd2+xml\":[\"dd2\"],\"application/vnd.openblox.game+xml\":[\"obgx\"],\"application/vnd.openofficeorg.extension\":[\"oxt\"],\"application/vnd.openstreetmap.data+xml\":[\"osm\"],\"application/vnd.openxmlformats-officedocument.presentationml.presentation\":[\"pptx\"],\"application/vnd.openxmlformats-officedocument.presentationml.slide\":[\"sldx\"],\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\":[\"ppsx\"],\"application/vnd.openxmlformats-officedocument.presentationml.template\":[\"potx\"],\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":[\"xlsx\"],\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\":[\"xltx\"],\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":[\"docx\"],\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\":[\"dotx\"],\"application/vnd.osgeo.mapguide.package\":[\"mgp\"],\"application/vnd.osgi.dp\":[\"dp\"],\"application/vnd.osgi.subsystem\":[\"esa\"],\"application/vnd.palm\":[\"pdb\",\"pqa\",\"oprc\"],\"application/vnd.pawaafile\":[\"paw\"],\"application/vnd.pg.format\":[\"str\"],\"application/vnd.pg.osasli\":[\"ei6\"],\"application/vnd.picsel\":[\"efif\"],\"application/vnd.pmi.widget\":[\"wg\"],\"application/vnd.pocketlearn\":[\"plf\"],\"application/vnd.powerbuilder6\":[\"pbd\"],\"application/vnd.previewsystems.box\":[\"box\"],\"application/vnd.proteus.magazine\":[\"mgz\"],\"application/vnd.publishare-delta-tree\":[\"qps\"],\"application/vnd.pvi.ptid1\":[\"ptid\"],\"application/vnd.quark.quarkxpress\":[\"qxd\",\"qxt\",\"qwd\",\"qwt\",\"qxl\",\"qxb\"],\"application/vnd.rar\":[\"rar\"],\"application/vnd.realvnc.bed\":[\"bed\"],\"application/vnd.recordare.musicxml\":[\"mxl\"],\"application/vnd.recordare.musicxml+xml\":[\"musicxml\"],\"application/vnd.rig.cryptonote\":[\"cryptonote\"],\"application/vnd.rim.cod\":[\"cod\"],\"application/vnd.rn-realmedia\":[\"rm\"],\"application/vnd.rn-realmedia-vbr\":[\"rmvb\"],\"application/vnd.route66.link66+xml\":[\"link66\"],\"application/vnd.sailingtracker.track\":[\"st\"],\"application/vnd.seemail\":[\"see\"],\"application/vnd.sema\":[\"sema\"],\"application/vnd.semd\":[\"semd\"],\"application/vnd.semf\":[\"semf\"],\"application/vnd.shana.informed.formdata\":[\"ifm\"],\"application/vnd.shana.informed.formtemplate\":[\"itp\"],\"application/vnd.shana.informed.interchange\":[\"iif\"],\"application/vnd.shana.informed.package\":[\"ipk\"],\"application/vnd.simtech-mindmapper\":[\"twd\",\"twds\"],\"application/vnd.smaf\":[\"mmf\"],\"application/vnd.smart.teacher\":[\"teacher\"],\"application/vnd.software602.filler.form+xml\":[\"fo\"],\"application/vnd.solent.sdkm+xml\":[\"sdkm\",\"sdkd\"],\"application/vnd.spotfire.dxp\":[\"dxp\"],\"application/vnd.spotfire.sfs\":[\"sfs\"],\"application/vnd.stardivision.calc\":[\"sdc\"],\"application/vnd.stardivision.draw\":[\"sda\"],\"application/vnd.stardivision.impress\":[\"sdd\"],\"application/vnd.stardivision.math\":[\"smf\"],\"application/vnd.stardivision.writer\":[\"sdw\",\"vor\"],\"application/vnd.stardivision.writer-global\":[\"sgl\"],\"application/vnd.stepmania.package\":[\"smzip\"],\"application/vnd.stepmania.stepchart\":[\"sm\"],\"application/vnd.sun.wadl+xml\":[\"wadl\"],\"application/vnd.sun.xml.calc\":[\"sxc\"],\"application/vnd.sun.xml.calc.template\":[\"stc\"],\"application/vnd.sun.xml.draw\":[\"sxd\"],\"application/vnd.sun.xml.draw.template\":[\"std\"],\"application/vnd.sun.xml.impress\":[\"sxi\"],\"application/vnd.sun.xml.impress.template\":[\"sti\"],\"application/vnd.sun.xml.math\":[\"sxm\"],\"application/vnd.sun.xml.writer\":[\"sxw\"],\"application/vnd.sun.xml.writer.global\":[\"sxg\"],\"application/vnd.sun.xml.writer.template\":[\"stw\"],\"application/vnd.sus-calendar\":[\"sus\",\"susp\"],\"application/vnd.svd\":[\"svd\"],\"application/vnd.symbian.install\":[\"sis\",\"sisx\"],\"application/vnd.syncml+xml\":[\"xsm\"],\"application/vnd.syncml.dm+wbxml\":[\"bdm\"],\"application/vnd.syncml.dm+xml\":[\"xdm\"],\"application/vnd.syncml.dmddf+xml\":[\"ddf\"],\"application/vnd.tao.intent-module-archive\":[\"tao\"],\"application/vnd.tcpdump.pcap\":[\"pcap\",\"cap\",\"dmp\"],\"application/vnd.tmobile-livetv\":[\"tmo\"],\"application/vnd.trid.tpt\":[\"tpt\"],\"application/vnd.triscape.mxs\":[\"mxs\"],\"application/vnd.trueapp\":[\"tra\"],\"application/vnd.ufdl\":[\"ufd\",\"ufdl\"],\"application/vnd.uiq.theme\":[\"utz\"],\"application/vnd.umajin\":[\"umj\"],\"application/vnd.unity\":[\"unityweb\"],\"application/vnd.uoml+xml\":[\"uoml\"],\"application/vnd.vcx\":[\"vcx\"],\"application/vnd.visio\":[\"vsd\",\"vst\",\"vss\",\"vsw\"],\"application/vnd.visionary\":[\"vis\"],\"application/vnd.vsf\":[\"vsf\"],\"application/vnd.wap.wbxml\":[\"wbxml\"],\"application/vnd.wap.wmlc\":[\"wmlc\"],\"application/vnd.wap.wmlscriptc\":[\"wmlsc\"],\"application/vnd.webturbo\":[\"wtb\"],\"application/vnd.wolfram.player\":[\"nbp\"],\"application/vnd.wordperfect\":[\"wpd\"],\"application/vnd.wqd\":[\"wqd\"],\"application/vnd.wt.stf\":[\"stf\"],\"application/vnd.xara\":[\"xar\"],\"application/vnd.xfdl\":[\"xfdl\"],\"application/vnd.yamaha.hv-dic\":[\"hvd\"],\"application/vnd.yamaha.hv-script\":[\"hvs\"],\"application/vnd.yamaha.hv-voice\":[\"hvp\"],\"application/vnd.yamaha.openscoreformat\":[\"osf\"],\"application/vnd.yamaha.openscoreformat.osfpvg+xml\":[\"osfpvg\"],\"application/vnd.yamaha.smaf-audio\":[\"saf\"],\"application/vnd.yamaha.smaf-phrase\":[\"spf\"],\"application/vnd.yellowriver-custom-menu\":[\"cmp\"],\"application/vnd.zul\":[\"zir\",\"zirz\"],\"application/vnd.zzazz.deck+xml\":[\"zaz\"],\"application/x-7z-compressed\":[\"7z\"],\"application/x-abiword\":[\"abw\"],\"application/x-ace-compressed\":[\"ace\"],\"application/x-apple-diskimage\":[\"*dmg\"],\"application/x-arj\":[\"arj\"],\"application/x-authorware-bin\":[\"aab\",\"x32\",\"u32\",\"vox\"],\"application/x-authorware-map\":[\"aam\"],\"application/x-authorware-seg\":[\"aas\"],\"application/x-bcpio\":[\"bcpio\"],\"application/x-bdoc\":[\"*bdoc\"],\"application/x-bittorrent\":[\"torrent\"],\"application/x-blorb\":[\"blb\",\"blorb\"],\"application/x-bzip\":[\"bz\"],\"application/x-bzip2\":[\"bz2\",\"boz\"],\"application/x-cbr\":[\"cbr\",\"cba\",\"cbt\",\"cbz\",\"cb7\"],\"application/x-cdlink\":[\"vcd\"],\"application/x-cfs-compressed\":[\"cfs\"],\"application/x-chat\":[\"chat\"],\"application/x-chess-pgn\":[\"pgn\"],\"application/x-chrome-extension\":[\"crx\"],\"application/x-cocoa\":[\"cco\"],\"application/x-conference\":[\"nsc\"],\"application/x-cpio\":[\"cpio\"],\"application/x-csh\":[\"csh\"],\"application/x-debian-package\":[\"*deb\",\"udeb\"],\"application/x-dgc-compressed\":[\"dgc\"],\"application/x-director\":[\"dir\",\"dcr\",\"dxr\",\"cst\",\"cct\",\"cxt\",\"w3d\",\"fgd\",\"swa\"],\"application/x-doom\":[\"wad\"],\"application/x-dtbncx+xml\":[\"ncx\"],\"application/x-dtbook+xml\":[\"dtb\"],\"application/x-dtbresource+xml\":[\"res\"],\"application/x-dvi\":[\"dvi\"],\"application/x-envoy\":[\"evy\"],\"application/x-eva\":[\"eva\"],\"application/x-font-bdf\":[\"bdf\"],\"application/x-font-ghostscript\":[\"gsf\"],\"application/x-font-linux-psf\":[\"psf\"],\"application/x-font-pcf\":[\"pcf\"],\"application/x-font-snf\":[\"snf\"],\"application/x-font-type1\":[\"pfa\",\"pfb\",\"pfm\",\"afm\"],\"application/x-freearc\":[\"arc\"],\"application/x-futuresplash\":[\"spl\"],\"application/x-gca-compressed\":[\"gca\"],\"application/x-glulx\":[\"ulx\"],\"application/x-gnumeric\":[\"gnumeric\"],\"application/x-gramps-xml\":[\"gramps\"],\"application/x-gtar\":[\"gtar\"],\"application/x-hdf\":[\"hdf\"],\"application/x-httpd-php\":[\"php\"],\"application/x-install-instructions\":[\"install\"],\"application/x-iso9660-image\":[\"*iso\"],\"application/x-java-archive-diff\":[\"jardiff\"],\"application/x-java-jnlp-file\":[\"jnlp\"],\"application/x-keepass2\":[\"kdbx\"],\"application/x-latex\":[\"latex\"],\"application/x-lua-bytecode\":[\"luac\"],\"application/x-lzh-compressed\":[\"lzh\",\"lha\"],\"application/x-makeself\":[\"run\"],\"application/x-mie\":[\"mie\"],\"application/x-mobipocket-ebook\":[\"prc\",\"mobi\"],\"application/x-ms-application\":[\"application\"],\"application/x-ms-shortcut\":[\"lnk\"],\"application/x-ms-wmd\":[\"wmd\"],\"application/x-ms-wmz\":[\"wmz\"],\"application/x-ms-xbap\":[\"xbap\"],\"application/x-msaccess\":[\"mdb\"],\"application/x-msbinder\":[\"obd\"],\"application/x-mscardfile\":[\"crd\"],\"application/x-msclip\":[\"clp\"],\"application/x-msdos-program\":[\"*exe\"],\"application/x-msdownload\":[\"*exe\",\"*dll\",\"com\",\"bat\",\"*msi\"],\"application/x-msmediaview\":[\"mvb\",\"m13\",\"m14\"],\"application/x-msmetafile\":[\"*wmf\",\"*wmz\",\"*emf\",\"emz\"],\"application/x-msmoney\":[\"mny\"],\"application/x-mspublisher\":[\"pub\"],\"application/x-msschedule\":[\"scd\"],\"application/x-msterminal\":[\"trm\"],\"application/x-mswrite\":[\"wri\"],\"application/x-netcdf\":[\"nc\",\"cdf\"],\"application/x-ns-proxy-autoconfig\":[\"pac\"],\"application/x-nzb\":[\"nzb\"],\"application/x-perl\":[\"pl\",\"pm\"],\"application/x-pilot\":[\"*prc\",\"*pdb\"],\"application/x-pkcs12\":[\"p12\",\"pfx\"],\"application/x-pkcs7-certificates\":[\"p7b\",\"spc\"],\"application/x-pkcs7-certreqresp\":[\"p7r\"],\"application/x-rar-compressed\":[\"*rar\"],\"application/x-redhat-package-manager\":[\"rpm\"],\"application/x-research-info-systems\":[\"ris\"],\"application/x-sea\":[\"sea\"],\"application/x-sh\":[\"sh\"],\"application/x-shar\":[\"shar\"],\"application/x-shockwave-flash\":[\"swf\"],\"application/x-silverlight-app\":[\"xap\"],\"application/x-sql\":[\"sql\"],\"application/x-stuffit\":[\"sit\"],\"application/x-stuffitx\":[\"sitx\"],\"application/x-subrip\":[\"srt\"],\"application/x-sv4cpio\":[\"sv4cpio\"],\"application/x-sv4crc\":[\"sv4crc\"],\"application/x-t3vm-image\":[\"t3\"],\"application/x-tads\":[\"gam\"],\"application/x-tar\":[\"tar\"],\"application/x-tcl\":[\"tcl\",\"tk\"],\"application/x-tex\":[\"tex\"],\"application/x-tex-tfm\":[\"tfm\"],\"application/x-texinfo\":[\"texinfo\",\"texi\"],\"application/x-tgif\":[\"*obj\"],\"application/x-ustar\":[\"ustar\"],\"application/x-virtualbox-hdd\":[\"hdd\"],\"application/x-virtualbox-ova\":[\"ova\"],\"application/x-virtualbox-ovf\":[\"ovf\"],\"application/x-virtualbox-vbox\":[\"vbox\"],\"application/x-virtualbox-vbox-extpack\":[\"vbox-extpack\"],\"application/x-virtualbox-vdi\":[\"vdi\"],\"application/x-virtualbox-vhd\":[\"vhd\"],\"application/x-virtualbox-vmdk\":[\"vmdk\"],\"application/x-wais-source\":[\"src\"],\"application/x-web-app-manifest+json\":[\"webapp\"],\"application/x-x509-ca-cert\":[\"der\",\"crt\",\"pem\"],\"application/x-xfig\":[\"fig\"],\"application/x-xliff+xml\":[\"*xlf\"],\"application/x-xpinstall\":[\"xpi\"],\"application/x-xz\":[\"xz\"],\"application/x-zmachine\":[\"z1\",\"z2\",\"z3\",\"z4\",\"z5\",\"z6\",\"z7\",\"z8\"],\"audio/vnd.dece.audio\":[\"uva\",\"uvva\"],\"audio/vnd.digital-winds\":[\"eol\"],\"audio/vnd.dra\":[\"dra\"],\"audio/vnd.dts\":[\"dts\"],\"audio/vnd.dts.hd\":[\"dtshd\"],\"audio/vnd.lucent.voice\":[\"lvp\"],\"audio/vnd.ms-playready.media.pya\":[\"pya\"],\"audio/vnd.nuera.ecelp4800\":[\"ecelp4800\"],\"audio/vnd.nuera.ecelp7470\":[\"ecelp7470\"],\"audio/vnd.nuera.ecelp9600\":[\"ecelp9600\"],\"audio/vnd.rip\":[\"rip\"],\"audio/x-aac\":[\"aac\"],\"audio/x-aiff\":[\"aif\",\"aiff\",\"aifc\"],\"audio/x-caf\":[\"caf\"],\"audio/x-flac\":[\"flac\"],\"audio/x-m4a\":[\"*m4a\"],\"audio/x-matroska\":[\"mka\"],\"audio/x-mpegurl\":[\"m3u\"],\"audio/x-ms-wax\":[\"wax\"],\"audio/x-ms-wma\":[\"wma\"],\"audio/x-pn-realaudio\":[\"ram\",\"ra\"],\"audio/x-pn-realaudio-plugin\":[\"rmp\"],\"audio/x-realaudio\":[\"*ra\"],\"audio/x-wav\":[\"*wav\"],\"chemical/x-cdx\":[\"cdx\"],\"chemical/x-cif\":[\"cif\"],\"chemical/x-cmdf\":[\"cmdf\"],\"chemical/x-cml\":[\"cml\"],\"chemical/x-csml\":[\"csml\"],\"chemical/x-xyz\":[\"xyz\"],\"image/prs.btif\":[\"btif\"],\"image/prs.pti\":[\"pti\"],\"image/vnd.adobe.photoshop\":[\"psd\"],\"image/vnd.airzip.accelerator.azv\":[\"azv\"],\"image/vnd.dece.graphic\":[\"uvi\",\"uvvi\",\"uvg\",\"uvvg\"],\"image/vnd.djvu\":[\"djvu\",\"djv\"],\"image/vnd.dvb.subtitle\":[\"*sub\"],\"image/vnd.dwg\":[\"dwg\"],\"image/vnd.dxf\":[\"dxf\"],\"image/vnd.fastbidsheet\":[\"fbs\"],\"image/vnd.fpx\":[\"fpx\"],\"image/vnd.fst\":[\"fst\"],\"image/vnd.fujixerox.edmics-mmr\":[\"mmr\"],\"image/vnd.fujixerox.edmics-rlc\":[\"rlc\"],\"image/vnd.microsoft.icon\":[\"ico\"],\"image/vnd.ms-dds\":[\"dds\"],\"image/vnd.ms-modi\":[\"mdi\"],\"image/vnd.ms-photo\":[\"wdp\"],\"image/vnd.net-fpx\":[\"npx\"],\"image/vnd.pco.b16\":[\"b16\"],\"image/vnd.tencent.tap\":[\"tap\"],\"image/vnd.valve.source.texture\":[\"vtf\"],\"image/vnd.wap.wbmp\":[\"wbmp\"],\"image/vnd.xiff\":[\"xif\"],\"image/vnd.zbrush.pcx\":[\"pcx\"],\"image/x-3ds\":[\"3ds\"],\"image/x-cmu-raster\":[\"ras\"],\"image/x-cmx\":[\"cmx\"],\"image/x-freehand\":[\"fh\",\"fhc\",\"fh4\",\"fh5\",\"fh7\"],\"image/x-icon\":[\"*ico\"],\"image/x-jng\":[\"jng\"],\"image/x-mrsid-image\":[\"sid\"],\"image/x-ms-bmp\":[\"*bmp\"],\"image/x-pcx\":[\"*pcx\"],\"image/x-pict\":[\"pic\",\"pct\"],\"image/x-portable-anymap\":[\"pnm\"],\"image/x-portable-bitmap\":[\"pbm\"],\"image/x-portable-graymap\":[\"pgm\"],\"image/x-portable-pixmap\":[\"ppm\"],\"image/x-rgb\":[\"rgb\"],\"image/x-tga\":[\"tga\"],\"image/x-xbitmap\":[\"xbm\"],\"image/x-xpixmap\":[\"xpm\"],\"image/x-xwindowdump\":[\"xwd\"],\"message/vnd.wfa.wsc\":[\"wsc\"],\"model/vnd.collada+xml\":[\"dae\"],\"model/vnd.dwf\":[\"dwf\"],\"model/vnd.gdl\":[\"gdl\"],\"model/vnd.gtw\":[\"gtw\"],\"model/vnd.mts\":[\"mts\"],\"model/vnd.opengex\":[\"ogex\"],\"model/vnd.parasolid.transmit.binary\":[\"x_b\"],\"model/vnd.parasolid.transmit.text\":[\"x_t\"],\"model/vnd.usdz+zip\":[\"usdz\"],\"model/vnd.valve.source.compiled-map\":[\"bsp\"],\"model/vnd.vtu\":[\"vtu\"],\"text/prs.lines.tag\":[\"dsc\"],\"text/vnd.curl\":[\"curl\"],\"text/vnd.curl.dcurl\":[\"dcurl\"],\"text/vnd.curl.mcurl\":[\"mcurl\"],\"text/vnd.curl.scurl\":[\"scurl\"],\"text/vnd.dvb.subtitle\":[\"sub\"],\"text/vnd.fly\":[\"fly\"],\"text/vnd.fmi.flexstor\":[\"flx\"],\"text/vnd.graphviz\":[\"gv\"],\"text/vnd.in3d.3dml\":[\"3dml\"],\"text/vnd.in3d.spot\":[\"spot\"],\"text/vnd.sun.j2me.app-descriptor\":[\"jad\"],\"text/vnd.wap.wml\":[\"wml\"],\"text/vnd.wap.wmlscript\":[\"wmls\"],\"text/x-asm\":[\"s\",\"asm\"],\"text/x-c\":[\"c\",\"cc\",\"cxx\",\"cpp\",\"h\",\"hh\",\"dic\"],\"text/x-component\":[\"htc\"],\"text/x-fortran\":[\"f\",\"for\",\"f77\",\"f90\"],\"text/x-handlebars-template\":[\"hbs\"],\"text/x-java-source\":[\"java\"],\"text/x-lua\":[\"lua\"],\"text/x-markdown\":[\"mkd\"],\"text/x-nfo\":[\"nfo\"],\"text/x-opml\":[\"opml\"],\"text/x-org\":[\"*org\"],\"text/x-pascal\":[\"p\",\"pas\"],\"text/x-processing\":[\"pde\"],\"text/x-sass\":[\"sass\"],\"text/x-scss\":[\"scss\"],\"text/x-setext\":[\"etx\"],\"text/x-sfv\":[\"sfv\"],\"text/x-suse-ymp\":[\"ymp\"],\"text/x-uuencode\":[\"uu\"],\"text/x-vcalendar\":[\"vcs\"],\"text/x-vcard\":[\"vcf\"],\"video/vnd.dece.hd\":[\"uvh\",\"uvvh\"],\"video/vnd.dece.mobile\":[\"uvm\",\"uvvm\"],\"video/vnd.dece.pd\":[\"uvp\",\"uvvp\"],\"video/vnd.dece.sd\":[\"uvs\",\"uvvs\"],\"video/vnd.dece.video\":[\"uvv\",\"uvvv\"],\"video/vnd.dvb.file\":[\"dvb\"],\"video/vnd.fvt\":[\"fvt\"],\"video/vnd.mpegurl\":[\"mxu\",\"m4u\"],\"video/vnd.ms-playready.media.pyv\":[\"pyv\"],\"video/vnd.uvvu.mp4\":[\"uvu\",\"uvvu\"],\"video/vnd.vivo\":[\"viv\"],\"video/x-f4v\":[\"f4v\"],\"video/x-fli\":[\"fli\"],\"video/x-flv\":[\"flv\"],\"video/x-m4v\":[\"m4v\"],\"video/x-matroska\":[\"mkv\",\"mk3d\",\"mks\"],\"video/x-mng\":[\"mng\"],\"video/x-ms-asf\":[\"asf\",\"asx\"],\"video/x-ms-vob\":[\"vob\"],\"video/x-ms-wm\":[\"wm\"],\"video/x-ms-wmv\":[\"wmv\"],\"video/x-ms-wmx\":[\"wmx\"],\"video/x-ms-wvx\":[\"wvx\"],\"video/x-msvideo\":[\"avi\"],\"video/x-sgi-movie\":[\"movie\"],\"video/x-smv\":[\"smv\"],\"x-conference/x-cooltalk\":[\"ice\"]};","module.exports = {\"application/andrew-inset\":[\"ez\"],\"application/applixware\":[\"aw\"],\"application/atom+xml\":[\"atom\"],\"application/atomcat+xml\":[\"atomcat\"],\"application/atomdeleted+xml\":[\"atomdeleted\"],\"application/atomsvc+xml\":[\"atomsvc\"],\"application/atsc-dwd+xml\":[\"dwd\"],\"application/atsc-held+xml\":[\"held\"],\"application/atsc-rsat+xml\":[\"rsat\"],\"application/bdoc\":[\"bdoc\"],\"application/calendar+xml\":[\"xcs\"],\"application/ccxml+xml\":[\"ccxml\"],\"application/cdfx+xml\":[\"cdfx\"],\"application/cdmi-capability\":[\"cdmia\"],\"application/cdmi-container\":[\"cdmic\"],\"application/cdmi-domain\":[\"cdmid\"],\"application/cdmi-object\":[\"cdmio\"],\"application/cdmi-queue\":[\"cdmiq\"],\"application/cu-seeme\":[\"cu\"],\"application/dash+xml\":[\"mpd\"],\"application/davmount+xml\":[\"davmount\"],\"application/docbook+xml\":[\"dbk\"],\"application/dssc+der\":[\"dssc\"],\"application/dssc+xml\":[\"xdssc\"],\"application/ecmascript\":[\"ecma\",\"es\"],\"application/emma+xml\":[\"emma\"],\"application/emotionml+xml\":[\"emotionml\"],\"application/epub+zip\":[\"epub\"],\"application/exi\":[\"exi\"],\"application/fdt+xml\":[\"fdt\"],\"application/font-tdpfr\":[\"pfr\"],\"application/geo+json\":[\"geojson\"],\"application/gml+xml\":[\"gml\"],\"application/gpx+xml\":[\"gpx\"],\"application/gxf\":[\"gxf\"],\"application/gzip\":[\"gz\"],\"application/hjson\":[\"hjson\"],\"application/hyperstudio\":[\"stk\"],\"application/inkml+xml\":[\"ink\",\"inkml\"],\"application/ipfix\":[\"ipfix\"],\"application/its+xml\":[\"its\"],\"application/java-archive\":[\"jar\",\"war\",\"ear\"],\"application/java-serialized-object\":[\"ser\"],\"application/java-vm\":[\"class\"],\"application/javascript\":[\"js\",\"mjs\"],\"application/json\":[\"json\",\"map\"],\"application/json5\":[\"json5\"],\"application/jsonml+json\":[\"jsonml\"],\"application/ld+json\":[\"jsonld\"],\"application/lgr+xml\":[\"lgr\"],\"application/lost+xml\":[\"lostxml\"],\"application/mac-binhex40\":[\"hqx\"],\"application/mac-compactpro\":[\"cpt\"],\"application/mads+xml\":[\"mads\"],\"application/manifest+json\":[\"webmanifest\"],\"application/marc\":[\"mrc\"],\"application/marcxml+xml\":[\"mrcx\"],\"application/mathematica\":[\"ma\",\"nb\",\"mb\"],\"application/mathml+xml\":[\"mathml\"],\"application/mbox\":[\"mbox\"],\"application/mediaservercontrol+xml\":[\"mscml\"],\"application/metalink+xml\":[\"metalink\"],\"application/metalink4+xml\":[\"meta4\"],\"application/mets+xml\":[\"mets\"],\"application/mmt-aei+xml\":[\"maei\"],\"application/mmt-usd+xml\":[\"musd\"],\"application/mods+xml\":[\"mods\"],\"application/mp21\":[\"m21\",\"mp21\"],\"application/mp4\":[\"mp4s\",\"m4p\"],\"application/mrb-consumer+xml\":[\"*xdf\"],\"application/mrb-publish+xml\":[\"*xdf\"],\"application/msword\":[\"doc\",\"dot\"],\"application/mxf\":[\"mxf\"],\"application/n-quads\":[\"nq\"],\"application/n-triples\":[\"nt\"],\"application/node\":[\"cjs\"],\"application/octet-stream\":[\"bin\",\"dms\",\"lrf\",\"mar\",\"so\",\"dist\",\"distz\",\"pkg\",\"bpk\",\"dump\",\"elc\",\"deploy\",\"exe\",\"dll\",\"deb\",\"dmg\",\"iso\",\"img\",\"msi\",\"msp\",\"msm\",\"buffer\"],\"application/oda\":[\"oda\"],\"application/oebps-package+xml\":[\"opf\"],\"application/ogg\":[\"ogx\"],\"application/omdoc+xml\":[\"omdoc\"],\"application/onenote\":[\"onetoc\",\"onetoc2\",\"onetmp\",\"onepkg\"],\"application/oxps\":[\"oxps\"],\"application/p2p-overlay+xml\":[\"relo\"],\"application/patch-ops-error+xml\":[\"*xer\"],\"application/pdf\":[\"pdf\"],\"application/pgp-encrypted\":[\"pgp\"],\"application/pgp-signature\":[\"asc\",\"sig\"],\"application/pics-rules\":[\"prf\"],\"application/pkcs10\":[\"p10\"],\"application/pkcs7-mime\":[\"p7m\",\"p7c\"],\"application/pkcs7-signature\":[\"p7s\"],\"application/pkcs8\":[\"p8\"],\"application/pkix-attr-cert\":[\"ac\"],\"application/pkix-cert\":[\"cer\"],\"application/pkix-crl\":[\"crl\"],\"application/pkix-pkipath\":[\"pkipath\"],\"application/pkixcmp\":[\"pki\"],\"application/pls+xml\":[\"pls\"],\"application/postscript\":[\"ai\",\"eps\",\"ps\"],\"application/provenance+xml\":[\"provx\"],\"application/pskc+xml\":[\"pskcxml\"],\"application/raml+yaml\":[\"raml\"],\"application/rdf+xml\":[\"rdf\",\"owl\"],\"application/reginfo+xml\":[\"rif\"],\"application/relax-ng-compact-syntax\":[\"rnc\"],\"application/resource-lists+xml\":[\"rl\"],\"application/resource-lists-diff+xml\":[\"rld\"],\"application/rls-services+xml\":[\"rs\"],\"application/route-apd+xml\":[\"rapd\"],\"application/route-s-tsid+xml\":[\"sls\"],\"application/route-usd+xml\":[\"rusd\"],\"application/rpki-ghostbusters\":[\"gbr\"],\"application/rpki-manifest\":[\"mft\"],\"application/rpki-roa\":[\"roa\"],\"application/rsd+xml\":[\"rsd\"],\"application/rss+xml\":[\"rss\"],\"application/rtf\":[\"rtf\"],\"application/sbml+xml\":[\"sbml\"],\"application/scvp-cv-request\":[\"scq\"],\"application/scvp-cv-response\":[\"scs\"],\"application/scvp-vp-request\":[\"spq\"],\"application/scvp-vp-response\":[\"spp\"],\"application/sdp\":[\"sdp\"],\"application/senml+xml\":[\"senmlx\"],\"application/sensml+xml\":[\"sensmlx\"],\"application/set-payment-initiation\":[\"setpay\"],\"application/set-registration-initiation\":[\"setreg\"],\"application/shf+xml\":[\"shf\"],\"application/sieve\":[\"siv\",\"sieve\"],\"application/smil+xml\":[\"smi\",\"smil\"],\"application/sparql-query\":[\"rq\"],\"application/sparql-results+xml\":[\"srx\"],\"application/srgs\":[\"gram\"],\"application/srgs+xml\":[\"grxml\"],\"application/sru+xml\":[\"sru\"],\"application/ssdl+xml\":[\"ssdl\"],\"application/ssml+xml\":[\"ssml\"],\"application/swid+xml\":[\"swidtag\"],\"application/tei+xml\":[\"tei\",\"teicorpus\"],\"application/thraud+xml\":[\"tfi\"],\"application/timestamped-data\":[\"tsd\"],\"application/toml\":[\"toml\"],\"application/ttml+xml\":[\"ttml\"],\"application/ubjson\":[\"ubj\"],\"application/urc-ressheet+xml\":[\"rsheet\"],\"application/urc-targetdesc+xml\":[\"td\"],\"application/voicexml+xml\":[\"vxml\"],\"application/wasm\":[\"wasm\"],\"application/widget\":[\"wgt\"],\"application/winhlp\":[\"hlp\"],\"application/wsdl+xml\":[\"wsdl\"],\"application/wspolicy+xml\":[\"wspolicy\"],\"application/xaml+xml\":[\"xaml\"],\"application/xcap-att+xml\":[\"xav\"],\"application/xcap-caps+xml\":[\"xca\"],\"application/xcap-diff+xml\":[\"xdf\"],\"application/xcap-el+xml\":[\"xel\"],\"application/xcap-error+xml\":[\"xer\"],\"application/xcap-ns+xml\":[\"xns\"],\"application/xenc+xml\":[\"xenc\"],\"application/xhtml+xml\":[\"xhtml\",\"xht\"],\"application/xliff+xml\":[\"xlf\"],\"application/xml\":[\"xml\",\"xsl\",\"xsd\",\"rng\"],\"application/xml-dtd\":[\"dtd\"],\"application/xop+xml\":[\"xop\"],\"application/xproc+xml\":[\"xpl\"],\"application/xslt+xml\":[\"*xsl\",\"xslt\"],\"application/xspf+xml\":[\"xspf\"],\"application/xv+xml\":[\"mxml\",\"xhvml\",\"xvml\",\"xvm\"],\"application/yang\":[\"yang\"],\"application/yin+xml\":[\"yin\"],\"application/zip\":[\"zip\"],\"audio/3gpp\":[\"*3gpp\"],\"audio/adpcm\":[\"adp\"],\"audio/amr\":[\"amr\"],\"audio/basic\":[\"au\",\"snd\"],\"audio/midi\":[\"mid\",\"midi\",\"kar\",\"rmi\"],\"audio/mobile-xmf\":[\"mxmf\"],\"audio/mp3\":[\"*mp3\"],\"audio/mp4\":[\"m4a\",\"mp4a\"],\"audio/mpeg\":[\"mpga\",\"mp2\",\"mp2a\",\"mp3\",\"m2a\",\"m3a\"],\"audio/ogg\":[\"oga\",\"ogg\",\"spx\",\"opus\"],\"audio/s3m\":[\"s3m\"],\"audio/silk\":[\"sil\"],\"audio/wav\":[\"wav\"],\"audio/wave\":[\"*wav\"],\"audio/webm\":[\"weba\"],\"audio/xm\":[\"xm\"],\"font/collection\":[\"ttc\"],\"font/otf\":[\"otf\"],\"font/ttf\":[\"ttf\"],\"font/woff\":[\"woff\"],\"font/woff2\":[\"woff2\"],\"image/aces\":[\"exr\"],\"image/apng\":[\"apng\"],\"image/avif\":[\"avif\"],\"image/bmp\":[\"bmp\"],\"image/cgm\":[\"cgm\"],\"image/dicom-rle\":[\"drle\"],\"image/emf\":[\"emf\"],\"image/fits\":[\"fits\"],\"image/g3fax\":[\"g3\"],\"image/gif\":[\"gif\"],\"image/heic\":[\"heic\"],\"image/heic-sequence\":[\"heics\"],\"image/heif\":[\"heif\"],\"image/heif-sequence\":[\"heifs\"],\"image/hej2k\":[\"hej2\"],\"image/hsj2\":[\"hsj2\"],\"image/ief\":[\"ief\"],\"image/jls\":[\"jls\"],\"image/jp2\":[\"jp2\",\"jpg2\"],\"image/jpeg\":[\"jpeg\",\"jpg\",\"jpe\"],\"image/jph\":[\"jph\"],\"image/jphc\":[\"jhc\"],\"image/jpm\":[\"jpm\"],\"image/jpx\":[\"jpx\",\"jpf\"],\"image/jxr\":[\"jxr\"],\"image/jxra\":[\"jxra\"],\"image/jxrs\":[\"jxrs\"],\"image/jxs\":[\"jxs\"],\"image/jxsc\":[\"jxsc\"],\"image/jxsi\":[\"jxsi\"],\"image/jxss\":[\"jxss\"],\"image/ktx\":[\"ktx\"],\"image/ktx2\":[\"ktx2\"],\"image/png\":[\"png\"],\"image/sgi\":[\"sgi\"],\"image/svg+xml\":[\"svg\",\"svgz\"],\"image/t38\":[\"t38\"],\"image/tiff\":[\"tif\",\"tiff\"],\"image/tiff-fx\":[\"tfx\"],\"image/webp\":[\"webp\"],\"image/wmf\":[\"wmf\"],\"message/disposition-notification\":[\"disposition-notification\"],\"message/global\":[\"u8msg\"],\"message/global-delivery-status\":[\"u8dsn\"],\"message/global-disposition-notification\":[\"u8mdn\"],\"message/global-headers\":[\"u8hdr\"],\"message/rfc822\":[\"eml\",\"mime\"],\"model/3mf\":[\"3mf\"],\"model/gltf+json\":[\"gltf\"],\"model/gltf-binary\":[\"glb\"],\"model/iges\":[\"igs\",\"iges\"],\"model/mesh\":[\"msh\",\"mesh\",\"silo\"],\"model/mtl\":[\"mtl\"],\"model/obj\":[\"obj\"],\"model/stl\":[\"stl\"],\"model/vrml\":[\"wrl\",\"vrml\"],\"model/x3d+binary\":[\"*x3db\",\"x3dbz\"],\"model/x3d+fastinfoset\":[\"x3db\"],\"model/x3d+vrml\":[\"*x3dv\",\"x3dvz\"],\"model/x3d+xml\":[\"x3d\",\"x3dz\"],\"model/x3d-vrml\":[\"x3dv\"],\"text/cache-manifest\":[\"appcache\",\"manifest\"],\"text/calendar\":[\"ics\",\"ifb\"],\"text/coffeescript\":[\"coffee\",\"litcoffee\"],\"text/css\":[\"css\"],\"text/csv\":[\"csv\"],\"text/html\":[\"html\",\"htm\",\"shtml\"],\"text/jade\":[\"jade\"],\"text/jsx\":[\"jsx\"],\"text/less\":[\"less\"],\"text/markdown\":[\"markdown\",\"md\"],\"text/mathml\":[\"mml\"],\"text/mdx\":[\"mdx\"],\"text/n3\":[\"n3\"],\"text/plain\":[\"txt\",\"text\",\"conf\",\"def\",\"list\",\"log\",\"in\",\"ini\"],\"text/richtext\":[\"rtx\"],\"text/rtf\":[\"*rtf\"],\"text/sgml\":[\"sgml\",\"sgm\"],\"text/shex\":[\"shex\"],\"text/slim\":[\"slim\",\"slm\"],\"text/spdx\":[\"spdx\"],\"text/stylus\":[\"stylus\",\"styl\"],\"text/tab-separated-values\":[\"tsv\"],\"text/troff\":[\"t\",\"tr\",\"roff\",\"man\",\"me\",\"ms\"],\"text/turtle\":[\"ttl\"],\"text/uri-list\":[\"uri\",\"uris\",\"urls\"],\"text/vcard\":[\"vcard\"],\"text/vtt\":[\"vtt\"],\"text/xml\":[\"*xml\"],\"text/yaml\":[\"yaml\",\"yml\"],\"video/3gpp\":[\"3gp\",\"3gpp\"],\"video/3gpp2\":[\"3g2\"],\"video/h261\":[\"h261\"],\"video/h263\":[\"h263\"],\"video/h264\":[\"h264\"],\"video/iso.segment\":[\"m4s\"],\"video/jpeg\":[\"jpgv\"],\"video/jpm\":[\"*jpm\",\"jpgm\"],\"video/mj2\":[\"mj2\",\"mjp2\"],\"video/mp2t\":[\"ts\"],\"video/mp4\":[\"mp4\",\"mp4v\",\"mpg4\"],\"video/mpeg\":[\"mpeg\",\"mpg\",\"mpe\",\"m1v\",\"m2v\"],\"video/ogg\":[\"ogv\"],\"video/quicktime\":[\"qt\",\"mov\"],\"video/webm\":[\"webm\"]};","import api from \"!../../../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../../../css-loader/index.js!./modal-notification.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../../css-loader/index.js!./comments.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../../css-loader/index.js!./index.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../css-loader/index.js!./status-bar.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"worker-ext.03effba64db4f9685f54.js\");\n}\n"],"sourceRoot":""}