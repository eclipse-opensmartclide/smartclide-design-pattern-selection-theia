{"version":3,"sources":["webpack://browser-app/../node_modules/@theia/timeline/src/browser/timeline-context-key-service.ts","webpack://browser-app/../node_modules/@theia/timeline/src/browser/timeline-contribution.ts","webpack://browser-app/../node_modules/@theia/timeline/src/browser/timeline-empty-widget.tsx","webpack://browser-app/../node_modules/@theia/timeline/src/browser/timeline-service.ts","webpack://browser-app/../node_modules/@theia/timeline/src/browser/timeline-tree-model.ts","webpack://browser-app/../node_modules/@theia/timeline/src/browser/timeline-tree-widget.tsx","webpack://browser-app/../node_modules/@theia/timeline/src/browser/timeline-widget.tsx"],"names":[],"mappings":"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","file":"vendors-node_modules_theia_timeline_lib_browser_timeline-contribution_js-node_modules_theia_t-47f69f.bundle.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2020 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { ContextKeyService, ContextKey } from '@theia/core/lib/browser/context-key-service';\n\n@injectable()\nexport class TimelineContextKeyService {\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    protected _timelineItem: ContextKey<string | undefined>;\n    get timelineItem(): ContextKey<string | undefined> {\n        return this._timelineItem;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this._timelineItem = this.contextKeyService.createKey<string | undefined>('timelineItem', undefined);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2020 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport {\n    ViewContainer,\n    WidgetManager,\n    Widget,\n    ApplicationShell,\n    Navigatable\n} from '@theia/core/lib/browser';\nimport { EXPLORER_VIEW_CONTAINER_ID } from '@theia/navigator/lib/browser';\nimport { TimelineWidget } from './timeline-widget';\nimport { TimelineService } from './timeline-service';\nimport { Command, CommandContribution, CommandRegistry } from '@theia/core/lib/common';\nimport { TabBarToolbarContribution, TabBarToolbarRegistry } from '@theia/core/lib/browser/shell/tab-bar-toolbar';\nimport { toArray } from '@theia/core/shared/@phosphor/algorithm';\n\n@injectable()\nexport class TimelineContribution implements CommandContribution, TabBarToolbarContribution {\n\n    @inject(WidgetManager)\n    protected readonly widgetManager: WidgetManager;\n    @inject(TimelineService)\n    protected readonly timelineService: TimelineService;\n    @inject(CommandRegistry)\n    protected readonly commandRegistry: CommandRegistry;\n    @inject(TabBarToolbarRegistry)\n    protected readonly tabBarToolbar: TabBarToolbarRegistry;\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    public static readonly LOAD_MORE_COMMAND: Command = {\n        id: 'timeline-load-more'\n    };\n    private readonly toolbarItem = {\n        id: 'timeline-refresh-toolbar-item',\n        command: 'timeline-refresh',\n        tooltip: 'Refresh',\n        icon: 'fa fa-refresh'\n    };\n    registerToolbarItems(registry: TabBarToolbarRegistry): void {\n        registry.registerItem(this.toolbarItem);\n    }\n    registerCommands(commands: CommandRegistry): void {\n        const attachTimeline = async (explorer: Widget) => {\n            const timeline = await this.widgetManager.getOrCreateWidget(TimelineWidget.ID);\n            if (explorer instanceof ViewContainer && explorer.getTrackableWidgets().indexOf(timeline) === -1) {\n                explorer.addWidget(timeline, { initiallyCollapsed: true });\n            }\n        };\n        this.widgetManager.onWillCreateWidget(async event => {\n            if (event.widget.id === EXPLORER_VIEW_CONTAINER_ID && this.timelineService.getSources().length > 0) {\n                event.waitUntil(attachTimeline(event.widget));\n            }\n        });\n        this.timelineService.onDidChangeProviders(async event => {\n            const explorer = await this.widgetManager.getWidget(EXPLORER_VIEW_CONTAINER_ID);\n            if (explorer && event.added && event.added.length > 0) {\n                attachTimeline(explorer);\n            } else if (event.removed && this.timelineService.getSources().length === 0) {\n                const timeline = await this.widgetManager.getWidget(TimelineWidget.ID);\n                if (timeline) {\n                    timeline.close();\n                }\n            }\n        });\n        commands.registerCommand(TimelineContribution.LOAD_MORE_COMMAND, {\n            execute: async () => {\n                const widget = toArray(this.shell.mainPanel.widgets()).find(w => Navigatable.is(w) && w.isVisible && !w.isHidden);\n                if (Navigatable.is(widget)) {\n                    const uri = widget.getResourceUri();\n                    const timeline = await this.widgetManager.getWidget<TimelineWidget>(TimelineWidget.ID);\n                    if (uri && timeline) {\n                        timeline.loadTimeline(uri, false);\n                    }\n                }\n            }\n        });\n        commands.registerCommand({ id: this.toolbarItem.command }, {\n            execute: widget => this.checkWidget(widget, async () => {\n                const timeline = await this.widgetManager.getWidget(TimelineWidget.ID);\n                if (timeline) {\n                    timeline.update();\n                }\n            }),\n            isEnabled: widget => this.checkWidget(widget, () => true),\n            isVisible: widget => this.checkWidget(widget, () => true)\n        });\n    }\n\n    private checkWidget<T>(widget: Widget, cb: () => T): T | false {\n        if (widget instanceof TimelineWidget && widget.id === TimelineWidget.ID) {\n            return cb();\n        }\n        return false;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { ReactWidget } from '@theia/core/lib/browser';\nimport { AlertMessage } from '@theia/core/lib/browser/widgets/alert-message';\nimport * as React from '@theia/core/shared/react';\n\n@injectable()\nexport class TimelineEmptyWidget extends ReactWidget {\n\n    static ID = 'timeline-empty-widget';\n\n    constructor() {\n        super();\n        this.addClass('theia-timeline-empty');\n        this.id = TimelineEmptyWidget.ID;\n    }\n\n    protected render(): React.ReactNode {\n        return <AlertMessage\n            type='WARNING'\n            header='The active editor cannot provide timeline information.'\n        />;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2020 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { Disposable, Emitter, Event } from '@theia/core/lib/common';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport {\n    InternalTimelineOptions,\n    Timeline,\n    TimelineChangeEvent, TimelineItem, TimelineOptions,\n    TimelineProvider,\n    TimelineProvidersChangeEvent,\n    TimelineSource\n} from '../common/timeline-model';\n\n@injectable()\nexport class TimelineService {\n    private readonly providers = new Map<string, TimelineProvider>();\n\n    private readonly onDidChangeProvidersEmitter = new Emitter<TimelineProvidersChangeEvent>();\n    readonly onDidChangeProviders: Event<TimelineProvidersChangeEvent> = this.onDidChangeProvidersEmitter.event;\n\n    private readonly onDidChangeTimelineEmitter = new Emitter<TimelineChangeEvent>();\n    readonly onDidChangeTimeline: Event<TimelineChangeEvent> = this.onDidChangeTimelineEmitter.event;\n\n    registerTimelineProvider(provider: TimelineProvider): Disposable {\n        const id = provider.id;\n\n        this.providers.set(id, provider);\n        if (provider.onDidChange) {\n            provider.onDidChange(e => this.onDidChangeTimelineEmitter.fire(e));\n        }\n        this.onDidChangeProvidersEmitter.fire({ added: [id] });\n\n        return Disposable.create(() => this.unregisterTimelineProvider(id));\n    }\n\n    unregisterTimelineProvider(id: string): void {\n        const provider = this.providers.get(id);\n        if (provider) {\n            provider.dispose();\n            this.providers.delete(id);\n            this.onDidChangeProvidersEmitter.fire({ removed: [id] });\n        }\n    }\n\n    getSources(): TimelineSource[] {\n        return [...this.providers.values()].map(p => ({ id: p.id, label: p.label }));\n    }\n\n    getSchemas(): string[] {\n        const result: string[] = [];\n        Array.from(this.providers.values()).forEach(provider => {\n            const scheme = provider.scheme;\n            if (typeof scheme === 'string') {\n                result.push(scheme);\n            } else {\n                scheme.forEach(s => result.push(s));\n            }\n        });\n        return result;\n    }\n\n    getTimeline(id: string, uri: URI, options: TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n        const provider = this.providers.get(id);\n        if (!provider) {\n            return Promise.resolve(undefined);\n        }\n\n        if (typeof provider.scheme === 'string') {\n            if (provider.scheme !== '*' && provider.scheme !== uri.scheme) {\n                return Promise.resolve(undefined);\n            }\n        }\n\n        return provider.provideTimeline(uri, options, internalOptions)\n            .then(result => {\n                if (!result) {\n                    return undefined;\n                }\n                result.items = result.items.map(item => ({ ...item, source: provider.id }));\n                return result;\n            });\n    }\n}\n\nexport class TimelineAggregate {\n    readonly items: TimelineItem[];\n    readonly source: string;\n    readonly uri: string;\n\n    private _cursor?: string;\n    get cursor(): string | undefined {\n        return this._cursor;\n    }\n\n    set cursor(cursor: string | undefined) {\n        this._cursor = cursor;\n    }\n\n    constructor(timeline: Timeline) {\n        this.source = timeline.source;\n        this.items = timeline.items;\n        this._cursor = timeline.paging?.cursor;\n    }\n\n    add(items: TimelineItem[]): void {\n        this.items.push(...items);\n        this.items.sort((a, b) => b.timestamp - a.timestamp);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport {\n    CompositeTreeNode,\n    SelectableTreeNode,\n    TreeModelImpl,\n} from '@theia/core/lib/browser/tree';\nimport { TimelineItem } from '../common/timeline-model';\nimport { TimelineContribution } from './timeline-contribution';\n\nexport interface TimelineNode extends SelectableTreeNode {\n    timelineItem: TimelineItem;\n}\n\n@injectable()\nexport class TimelineTreeModel extends TreeModelImpl {\n\n    updateTree(items: TimelineItem[], hasMoreItems: boolean): void {\n        const root = {\n            id: 'timeline-tree-root',\n            parent: undefined,\n            visible: false,\n            children: []\n        } as CompositeTreeNode;\n        const children = items.map(item =>\n        ({\n            timelineItem: item,\n            id: item.id ? item.id : item.timestamp.toString(),\n            parent: root,\n            detail: item.detail,\n            selected: false,\n            visible: true\n        } as TimelineNode)\n        );\n        let loadMore;\n        if (hasMoreItems) {\n            const loadMoreNode: TimelineItem = { label: 'Load-more', timestamp: 0, handle: '', uri: '', source: '' };\n            loadMoreNode.command = TimelineContribution.LOAD_MORE_COMMAND;\n            loadMore = {\n                timelineItem: loadMoreNode,\n                id: 'load-more',\n                parent: root,\n                selected: true\n            } as TimelineNode;\n            children.push(loadMore);\n        }\n        root.children = children;\n        this.root = root;\n        if (loadMore) {\n            this.selectionService.addSelection(loadMore);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2020 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { CommandRegistry, MenuModelRegistry, MenuPath } from '@theia/core/lib/common';\nimport { TreeWidget, TreeProps, NodeProps, TREE_NODE_SEGMENT_GROW_CLASS } from '@theia/core/lib/browser/tree';\nimport { ContextMenuRenderer } from '@theia/core/lib/browser';\nimport { TimelineNode, TimelineTreeModel } from './timeline-tree-model';\nimport { TimelineService } from './timeline-service';\nimport { TimelineContextKeyService } from './timeline-context-key-service';\nimport * as React from '@theia/core/shared/react';\nimport { TimelineItem } from '../common/timeline-model';\n\nexport const TIMELINE_ITEM_CONTEXT_MENU: MenuPath = ['timeline-item-context-menu'];\n\n@injectable()\nexport class TimelineTreeWidget extends TreeWidget {\n\n    static ID = 'timeline-tree-widget';\n    static PAGE_SIZE = 20;\n\n    @inject(MenuModelRegistry) protected readonly menus: MenuModelRegistry;\n    @inject(TimelineContextKeyService) protected readonly contextKeys: TimelineContextKeyService;\n\n    constructor(\n        @inject(TreeProps) readonly props: TreeProps,\n        @inject(TimelineService) protected readonly timelineService: TimelineService,\n        @inject(TimelineTreeModel) readonly model: TimelineTreeModel,\n        @inject(ContextMenuRenderer) protected readonly contextMenuRenderer: ContextMenuRenderer,\n        @inject(CommandRegistry) protected readonly commandRegistry: CommandRegistry\n    ) {\n        super(props, model, contextMenuRenderer);\n        this.id = TimelineTreeWidget.ID;\n        this.addClass('timeline-outer-container');\n    }\n\n    protected renderNode(node: TimelineNode, props: NodeProps): React.ReactNode {\n        const attributes = this.createNodeAttributes(node, props);\n        const content = <TimelineItemNode\n            timelineItem={node.timelineItem}\n            commandRegistry={this.commandRegistry}\n            contextKeys={this.contextKeys}\n            contextMenuRenderer={this.contextMenuRenderer}/>;\n        return React.createElement('div', attributes, content);\n    }\n\n    protected handleEnter(event: KeyboardEvent): void {\n        const node = this.model.selectedNodes[0] as TimelineNode;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const command: any = node.timelineItem.command;\n        if (command) {\n            this.commandRegistry.executeCommand(command.id, ...command.arguments ? command.arguments : []);\n        }\n    }\n\n    protected async handleLeft(event: KeyboardEvent): Promise<void> {\n        this.model.selectPrevNode();\n    }\n}\n\nexport namespace TimelineItemNode {\n    export interface Props {\n        timelineItem: TimelineItem;\n        commandRegistry: CommandRegistry;\n        contextKeys: TimelineContextKeyService;\n        contextMenuRenderer: ContextMenuRenderer;\n    }\n}\n\nexport class TimelineItemNode extends React.Component<TimelineItemNode.Props> {\n    render(): JSX.Element | undefined {\n        const { label, description, detail } = this.props.timelineItem;\n        return <div className='timeline-item'\n                    title={detail}\n                    onContextMenu={this.renderContextMenu}\n                    onClick={this.open}>\n            <div className={`noWrapInfo ${TREE_NODE_SEGMENT_GROW_CLASS}`} >\n                <span className='name'>{label}</span>\n                <span className='label'>{description}</span>\n            </div>\n        </div>;\n    }\n\n    protected open = () => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const command: any = this.props.timelineItem.command;\n        if (command) {\n            this.props.commandRegistry.executeCommand(command.id, ...command.arguments ? command.arguments : []);\n        }\n    };\n\n    protected renderContextMenu = (event: React.MouseEvent<HTMLElement>) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const { timelineItem, contextKeys, contextMenuRenderer } = this.props;\n        const currentTimelineItem = contextKeys.timelineItem.get();\n        contextKeys.timelineItem.set(timelineItem.contextValue);\n        try {\n            contextMenuRenderer.render({\n                menuPath: TIMELINE_ITEM_CONTEXT_MENU,\n                anchor: event.nativeEvent,\n                args: [timelineItem]\n            });\n        } finally {\n            contextKeys.timelineItem.set(currentTimelineItem);\n        }\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2020 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Message } from '@theia/core/shared/@phosphor/messaging';\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport {\n    ApplicationShell,\n    BaseWidget,\n    MessageLoop, Navigatable,\n    NavigatableWidget,\n    Panel,\n    PanelLayout\n} from '@theia/core/lib/browser';\nimport { TimelineTreeWidget } from './timeline-tree-widget';\nimport { TimelineService } from './timeline-service';\nimport { CommandRegistry, SelectionService } from '@theia/core/lib/common';\nimport { TimelineEmptyWidget } from './timeline-empty-widget';\nimport { toArray } from '@theia/core/shared/@phosphor/algorithm';\nimport URI from '@theia/core/lib/common/uri';\nimport { URI as CodeURI } from '@theia/core/shared/vscode-uri';\nimport { TimelineAggregate } from './timeline-service';\n\n@injectable()\nexport class TimelineWidget extends BaseWidget {\n\n    protected panel: Panel;\n    static ID = 'timeline-view';\n\n    private readonly timelinesBySource = new Map<string, TimelineAggregate>();\n\n    @inject(TimelineTreeWidget) protected readonly resourceWidget: TimelineTreeWidget;\n    @inject(TimelineService) protected readonly timelineService: TimelineService;\n    @inject(CommandRegistry) protected readonly commandRegistry: CommandRegistry;\n    @inject(ApplicationShell) protected readonly applicationShell: ApplicationShell;\n    @inject(TimelineEmptyWidget) protected readonly timelineEmptyWidget: TimelineEmptyWidget;\n    @inject(SelectionService) protected readonly selectionService: SelectionService;\n\n    constructor() {\n        super();\n        this.id = TimelineWidget.ID;\n        this.title.label = 'Timeline';\n        this.title.caption = this.title.label;\n        this.addClass('theia-timeline');\n    }\n\n    @postConstruct()\n    protected init(): void {\n        const layout = new PanelLayout();\n        this.layout = layout;\n        this.panel = new Panel({ layout: new PanelLayout({}) });\n        this.panel.node.tabIndex = -1;\n        layout.addWidget(this.panel);\n        this.containerLayout!.addWidget(this.resourceWidget);\n        this.containerLayout!.addWidget(this.timelineEmptyWidget);\n\n        this.refresh();\n        this.toDispose.push(this.timelineService.onDidChangeTimeline(event => {\n                const currentWidgetUri = this.getCurrentWidgetUri();\n                if (currentWidgetUri ) {\n                    this.loadTimeline(currentWidgetUri, event.reset);\n                }\n            })\n        );\n        this.toDispose.push(this.selectionService.onSelectionChanged(selection => {\n            if (Array.isArray(selection) && 'uri' in selection[0]) {\n                this.refresh(selection[0].uri);\n            }\n        }));\n        this.toDispose.push(this.applicationShell.onDidChangeCurrentWidget(async e => {\n            if ((e.newValue && Navigatable.is(e.newValue)) || !this.suitableWidgetsOpened()) {\n                this.refresh();\n            }\n        }));\n        this.toDispose.push(this.applicationShell.onDidRemoveWidget(widget => {\n            if (NavigatableWidget.is(widget)) {\n                this.refresh();\n            }\n        }));\n        this.toDispose.push(this.timelineService.onDidChangeProviders(() => this.refresh()));\n    }\n\n    protected async loadTimelineForSource(source: string, uri: CodeURI, reset: boolean): Promise<void> {\n        if (reset) {\n            this.timelinesBySource.delete(source);\n        }\n        let timeline = this.timelinesBySource.get(source);\n        const cursor = timeline?.cursor;\n        const options = { cursor: reset ? undefined : cursor, limit: TimelineTreeWidget.PAGE_SIZE };\n        const timelineResult = await this.timelineService.getTimeline(source, uri, options, { cacheResults: true, resetCache: reset });\n        if (timelineResult) {\n            const items = timelineResult.items;\n            if (items) {\n                if (timeline) {\n                    timeline.add(items);\n                    timeline.cursor = timelineResult.paging?.cursor;\n                } else {\n                    timeline = new TimelineAggregate(timelineResult);\n                }\n                this.timelinesBySource.set(source, timeline);\n                this.resourceWidget.model.updateTree(timeline.items, !!timeline.cursor);\n            }\n        }\n    }\n\n    async loadTimeline(uri: URI, reset: boolean): Promise<void> {\n        for (const source of this.timelineService.getSources().map(s => s.id)) {\n            this.loadTimelineForSource(source, CodeURI.parse(uri.toString()), reset);\n        }\n    }\n\n    refresh(uri?: URI): void {\n        if (!uri) {\n            uri = this.getCurrentWidgetUri();\n        }\n        if (uri) {\n            this.timelineEmptyWidget.hide();\n            this.resourceWidget.show();\n            this.loadTimeline(uri, true);\n        } else if (!this.suitableWidgetsOpened()) {\n            this.timelineEmptyWidget.show();\n            this.resourceWidget.hide();\n        }\n    }\n\n    private suitableWidgetsOpened(): boolean {\n        return !!toArray(this.applicationShell.mainPanel.widgets()).find(widget => {\n            if (NavigatableWidget.is(widget)) {\n                const uri = widget.getResourceUri();\n                if (uri?.scheme && this.timelineService.getSchemas().indexOf(uri?.scheme) > -1) {\n                    return true;\n                }\n            }\n        });\n    }\n\n    private getCurrentWidgetUri(): URI | undefined {\n        let current = this.applicationShell.currentWidget;\n        if (!NavigatableWidget.is(current)) {\n            current = toArray(this.applicationShell.mainPanel.widgets()).find(widget => {\n                if (widget.isVisible && !widget.isHidden) {\n                    return widget;\n                }\n            });\n        }\n        return  NavigatableWidget.is(current) ? current.getResourceUri() : undefined;\n    }\n\n    protected get containerLayout(): PanelLayout | undefined {\n        return this.panel.layout as PanelLayout;\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        MessageLoop.sendMessage(this.resourceWidget, msg);\n        MessageLoop.sendMessage(this.timelineEmptyWidget, msg);\n        this.refresh();\n        super.onUpdateRequest(msg);\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        this.node.appendChild(this.resourceWidget.node);\n        this.node.appendChild(this.timelineEmptyWidget.node);\n        super.onAfterAttach(msg);\n        this.update();\n    }\n\n}\n"],"sourceRoot":""}